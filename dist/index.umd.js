(function(a,s){typeof exports=="object"&&typeof module!="undefined"?s(exports,require("react-dom/client"),require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react-dom/client","react","react-dom"],s):(a=typeof globalThis!="undefined"?globalThis:a||self,s((a["@api"]=a["@api"]||{},a["@api"]["stream/studio-kit"]={}),a.ReactDOM,a.React,a.ReactDOM$1))})(this,function(exports,ReactDOM,React,ReactDOM$1){"use strict";function _interopDefaultLegacy(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var ReactDOM__default=_interopDefaultLegacy(ReactDOM),React__default=_interopDefaultLegacy(React),ReactDOM__default$1=_interopDefaultLegacy(ReactDOM$1);let currentSubId=0;const subscribers=new Map,subscribersInternal=new Map;function createSubscribe(a={}){return function(s){if(typeof s!="function")return;const d=a.internal?subscribersInternal:subscribers,c=++currentSubId;return d.set(c,s),()=>{d.delete(c)}}}function createOn(a={}){return function(s,d){return(a.internal?subscribeInternal:subscribe)((h,v)=>{if(s===h)return d(v)})}}function createTrigger(a={}){const s=a.internal?subscribersInternal:subscribers;return async function(d,...c){let h={type:d,payload:c[0]};const v=Boolean(a.internal)?"Internal":"External";log$1.info(`${v} Event:`,h),await Promise.all(Array.from(s.values()).map(y=>y(h.type,h.payload)))}}const trigger$1=createTrigger(),subscribe=createSubscribe(),on=createOn(),triggerInternal$1=createTrigger({internal:!0}),subscribeInternal=createSubscribe({internal:!0}),onInternal=createOn({internal:!0});var events$1=Object.freeze(Object.defineProperty({__proto__:null,trigger:trigger$1,subscribe,on,triggerInternal:triggerInternal$1,subscribeInternal,onInternal},Symbol.toStringTag,{value:"Module"})),commonjsGlobal$1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(a){if(a.__esModule)return a;var s=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(a).forEach(function(d){var c=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(s,d,c.get?c:{enumerable:!0,get:function(){return a[d]}})}),s}var loglevel$1={exports:{}};(function(a){(function(s,d){a.exports?a.exports=d():s.log=d()})(commonjsGlobal$1,function(){var s=function(){},d="undefined",c=typeof window!==d&&typeof window.navigator!==d&&/Trident\/|MSIE /.test(window.navigator.userAgent),h=["trace","debug","info","warn","error"];function v(L,D){var H=L[D];if(typeof H.bind=="function")return H.bind(L);try{return Function.prototype.bind.call(H,L)}catch{return function(){return Function.prototype.apply.apply(H,[L,arguments])}}}function y(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function b(L){return L==="debug"&&(L="log"),typeof console===d?!1:L==="trace"&&c?y:console[L]!==void 0?v(console,L):console.log!==void 0?v(console,"log"):s}function _(L,D){for(var H=0;H<h.length;H++){var O=h[H];this[O]=H<L?s:this.methodFactory(O,L,D)}this.log=this.debug}function T(L,D,H){return function(){typeof console!==d&&(_.call(this,D,H),this[L].apply(this,arguments))}}function I(L,D,H){return b(L)||T.apply(this,arguments)}function N(L,D,H){var O=this,x;D=D==null?"WARN":D;var j="loglevel";typeof L=="string"?j+=":"+L:typeof L=="symbol"&&(j=void 0);function X(F){var Z=(h[F]||"silent").toUpperCase();if(!(typeof window===d||!j)){try{window.localStorage[j]=Z;return}catch{}try{window.document.cookie=encodeURIComponent(j)+"="+Z+";"}catch{}}}function te(){var F;if(!(typeof window===d||!j)){try{F=window.localStorage[j]}catch{}if(typeof F===d)try{var Z=window.document.cookie,ne=Z.indexOf(encodeURIComponent(j)+"=");ne!==-1&&(F=/^([^;]+)/.exec(Z.slice(ne))[1])}catch{}return O.levels[F]===void 0&&(F=void 0),F}}function se(){if(!(typeof window===d||!j)){try{window.localStorage.removeItem(j);return}catch{}try{window.document.cookie=encodeURIComponent(j)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}O.name=L,O.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},O.methodFactory=H||I,O.getLevel=function(){return x},O.setLevel=function(F,Z){if(typeof F=="string"&&O.levels[F.toUpperCase()]!==void 0&&(F=O.levels[F.toUpperCase()]),typeof F=="number"&&F>=0&&F<=O.levels.SILENT){if(x=F,Z!==!1&&X(F),_.call(O,F,L),typeof console===d&&F<O.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+F},O.setDefaultLevel=function(F){D=F,te()||O.setLevel(F,!1)},O.resetLevel=function(){O.setLevel(D,!1),se()},O.enableAll=function(F){O.setLevel(O.levels.TRACE,F)},O.disableAll=function(F){O.setLevel(O.levels.SILENT,F)};var oe=te();oe==null&&(oe=D),O.setLevel(oe,!1)}var A=new N,V={};A.getLogger=function(D){if(typeof D!="symbol"&&typeof D!="string"||D==="")throw new TypeError("You must supply a name when creating a logger.");var H=V[D];return H||(H=V[D]=new N(D,A.getLevel(),A.methodFactory)),H};var $=typeof window!==d?window.log:void 0;return A.noConflict=function(){return typeof window!==d&&window.log===A&&(window.log=$),A},A.getLoggers=function(){return V},A.default=A,A})})(loglevel$1);var log$1=loglevel$1.exports;const connectionId$1=(Math.random()*1e20).toString(36),version$4="1.1.56",CoreContext={config:null,clients:null,Request:{},Command:{},on,subscribe,onInternal,subscribeInternal,trigger:trigger$1,triggerInternal:triggerInternal$1,state:{},compositor:{},connectionId:connectionId$1,version:version$4,log:log$1,logLevel:null},setAppState=a=>{Object.keys(a).forEach(s=>{CoreContext.state[s]=a[s]})};var context=Object.freeze(Object.defineProperty({__proto__:null,CoreContext,log:log$1,setAppState,default:CoreContext},Symbol.toStringTag,{value:"Module"})),freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeGlobal$1=freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")(),root$1=root,Symbol$1=root$1.Symbol,Symbol$2=Symbol$1,objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(a){var s=hasOwnProperty$d.call(a,symToStringTag$1),d=a[symToStringTag$1];try{a[symToStringTag$1]=void 0;var c=!0}catch{}var h=nativeObjectToString$1.call(a);return c&&(s?a[symToStringTag$1]=d:delete a[symToStringTag$1]),h}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(a){return nativeObjectToString.call(a)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(a){return a==null?a===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(a)?getRawTag(a):objectToString(a)}function isObjectLike(a){return a!=null&&typeof a=="object"}var symbolTag$3="[object Symbol]";function isSymbol(a){return typeof a=="symbol"||isObjectLike(a)&&baseGetTag(a)==symbolTag$3}function arrayMap(a,s){for(var d=-1,c=a==null?0:a.length,h=Array(c);++d<c;)h[d]=s(a[d],d,a);return h}var isArray$3=Array.isArray,isArray$4=isArray$3,INFINITY$1=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(a){if(typeof a=="string")return a;if(isArray$4(a))return arrayMap(a,baseToString)+"";if(isSymbol(a))return symbolToString?symbolToString.call(a):"";var s=a+"";return s=="0"&&1/a==-INFINITY$1?"-0":s}var reWhitespace=/\s/;function trimmedEndIndex(a){for(var s=a.length;s--&&reWhitespace.test(a.charAt(s)););return s}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject$5(a){var s=typeof a;return a!=null&&(s=="object"||s=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject$5(a)){var s=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$5(s)?s+"":s}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var d=reIsBinary.test(a);return d||reIsOctal.test(a)?freeParseInt(a.slice(2),d?2:8):reIsBadHex.test(a)?NAN:+a}function identity$1(a){return a}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(a){if(!isObject$5(a))return!1;var s=baseGetTag(a);return s==funcTag$2||s==genTag$1||s==asyncTag||s==proxyTag}var coreJsData=root$1["__core-js_shared__"],coreJsData$1=coreJsData,maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(a){if(a!=null){try{return funcToString$2.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject$5(a)||isMasked(a))return!1;var s=isFunction$3(a)?reIsNative:reIsHostCtor;return s.test(toSource(a))}function getValue(a,s){return a==null?void 0:a[s]}function getNative(a,s){var d=getValue(a,s);return baseIsNative(d)?d:void 0}var WeakMap$2=getNative(root$1,"WeakMap"),WeakMap$3=WeakMap$2,objectCreate$1=Object.create,baseCreate=function(){function a(){}return function(s){if(!isObject$5(s))return{};if(objectCreate$1)return objectCreate$1(s);a.prototype=s;var d=new a;return a.prototype=void 0,d}}(),baseCreate$1=baseCreate;function apply(a,s,d){switch(d.length){case 0:return a.call(s);case 1:return a.call(s,d[0]);case 2:return a.call(s,d[0],d[1]);case 3:return a.call(s,d[0],d[1],d[2])}return a.apply(s,d)}function copyArray(a,s){var d=-1,c=a.length;for(s||(s=Array(c));++d<c;)s[d]=a[d];return s}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var s=0,d=0;return function(){var c=nativeNow(),h=HOT_SPAN-(c-d);if(d=c,h>0){if(++s>=HOT_COUNT)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty$1=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),defineProperty$2=defineProperty$1,baseSetToString=defineProperty$2?function(a,s){return defineProperty$2(a,"toString",{configurable:!0,enumerable:!1,value:constant(s),writable:!0})}:identity$1,baseSetToString$1=baseSetToString,setToString=shortOut(baseSetToString$1),setToString$1=setToString;function arrayEach(a,s){for(var d=-1,c=a==null?0:a.length;++d<c&&s(a[d],d,a)!==!1;);return a}function baseFindIndex(a,s,d,c){for(var h=a.length,v=d+(c?1:-1);c?v--:++v<h;)if(s(a[v],v,a))return v;return-1}function baseIsNaN(a){return a!==a}function strictIndexOf(a,s,d){for(var c=d-1,h=a.length;++c<h;)if(a[c]===s)return c;return-1}function baseIndexOf(a,s,d){return s===s?strictIndexOf(a,s,d):baseFindIndex(a,baseIsNaN,d)}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(a,s){var d=typeof a;return s=s==null?MAX_SAFE_INTEGER$1:s,!!s&&(d=="number"||d!="symbol"&&reIsUint.test(a))&&a>-1&&a%1==0&&a<s}function baseAssignValue(a,s,d){s=="__proto__"&&defineProperty$2?defineProperty$2(a,s,{configurable:!0,enumerable:!0,value:d,writable:!0}):a[s]=d}function eq(a,s){return a===s||a!==a&&s!==s}var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue(a,s,d){var c=a[s];(!(hasOwnProperty$b.call(a,s)&&eq(c,d))||d===void 0&&!(s in a))&&baseAssignValue(a,s,d)}function copyObject(a,s,d,c){var h=!d;d||(d={});for(var v=-1,y=s.length;++v<y;){var b=s[v],_=c?c(d[b],a[b],b,d,a):void 0;_===void 0&&(_=a[b]),h?baseAssignValue(d,b,_):assignValue(d,b,_)}return d}var nativeMax$1=Math.max;function overRest(a,s,d){return s=nativeMax$1(s===void 0?a.length-1:s,0),function(){for(var c=arguments,h=-1,v=nativeMax$1(c.length-s,0),y=Array(v);++h<v;)y[h]=c[s+h];h=-1;for(var b=Array(s+1);++h<s;)b[h]=c[h];return b[s]=d(y),apply(a,this,b)}}function baseRest(a,s){return setToString$1(overRest(a,s,identity$1),a+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isArrayLike$1(a){return a!=null&&isLength(a.length)&&!isFunction$3(a)}function isIterateeCall(a,s,d){if(!isObject$5(d))return!1;var c=typeof s;return(c=="number"?isArrayLike$1(d)&&isIndex(s,d.length):c=="string"&&s in d)?eq(d[s],a):!1}var objectProto$b=Object.prototype;function isPrototype(a){var s=a&&a.constructor,d=typeof s=="function"&&s.prototype||objectProto$b;return a===d}function baseTimes(a,s){for(var d=-1,c=Array(a);++d<a;)c[d]=s(d);return c}var argsTag$3="[object Arguments]";function baseIsArguments(a){return isObjectLike(a)&&baseGetTag(a)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$a=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike(a)&&hasOwnProperty$a.call(a,"callee")&&!propertyIsEnumerable$1.call(a,"callee")},isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,isBuffer$2=isBuffer$1,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0,typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(a){return isObjectLike(a)&&isLength(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(s){return a(s)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var a=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeUtil$1=nodeUtil,nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray$1=isTypedArray,objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty;function arrayLikeKeys(a,s){var d=isArray$4(a),c=!d&&isArguments$1(a),h=!d&&!c&&isBuffer$2(a),v=!d&&!c&&!h&&isTypedArray$1(a),y=d||c||h||v,b=y?baseTimes(a.length,String):[],_=b.length;for(var T in a)(s||hasOwnProperty$9.call(a,T))&&!(y&&(T=="length"||h&&(T=="offset"||T=="parent")||v&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||isIndex(T,_)))&&b.push(T);return b}function overArg(a,s){return function(d){return a(s(d))}}var nativeKeys=overArg(Object.keys,Object),nativeKeys$1=nativeKeys,objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function baseKeys(a){if(!isPrototype(a))return nativeKeys$1(a);var s=[];for(var d in Object(a))hasOwnProperty$8.call(a,d)&&d!="constructor"&&s.push(d);return s}function keys$1(a){return isArrayLike$1(a)?arrayLikeKeys(a):baseKeys(a)}function nativeKeysIn(a){var s=[];if(a!=null)for(var d in Object(a))s.push(d);return s}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeysIn(a){if(!isObject$5(a))return nativeKeysIn(a);var s=isPrototype(a),d=[];for(var c in a)c=="constructor"&&(s||!hasOwnProperty$7.call(a,c))||d.push(c);return d}function keysIn(a){return isArrayLike$1(a)?arrayLikeKeys(a,!0):baseKeysIn(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,s){if(isArray$4(a))return!1;var d=typeof a;return d=="number"||d=="symbol"||d=="boolean"||a==null||isSymbol(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||s!=null&&a in Object(s)}var nativeCreate=getNative(Object,"create"),nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(a){var s=this.has(a)&&delete this.__data__[a];return this.size-=s?1:0,s}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet(a){var s=this.__data__;if(nativeCreate$1){var d=s[a];return d===HASH_UNDEFINED$2?void 0:d}return hasOwnProperty$6.call(s,a)?s[a]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas(a){var s=this.__data__;return nativeCreate$1?s[a]!==void 0:hasOwnProperty$5.call(s,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,s){var d=this.__data__;return this.size+=this.has(a)?0:1,d[a]=nativeCreate$1&&s===void 0?HASH_UNDEFINED$1:s,this}function Hash(a){var s=-1,d=a==null?0:a.length;for(this.clear();++s<d;){var c=a[s];this.set(c[0],c[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,s){for(var d=a.length;d--;)if(eq(a[d][0],s))return d;return-1}var arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete(a){var s=this.__data__,d=assocIndexOf(s,a);if(d<0)return!1;var c=s.length-1;return d==c?s.pop():splice$1.call(s,d,1),--this.size,!0}function listCacheGet(a){var s=this.__data__,d=assocIndexOf(s,a);return d<0?void 0:s[d][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,s){var d=this.__data__,c=assocIndexOf(d,a);return c<0?(++this.size,d.push([a,s])):d[c][1]=s,this}function ListCache(a){var s=-1,d=a==null?0:a.length;for(this.clear();++s<d;){var c=a[s];this.set(c[0],c[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map"),Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(a){var s=typeof a;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?a!=="__proto__":a===null}function getMapData(a,s){var d=a.__data__;return isKeyable(s)?d[typeof s=="string"?"string":"hash"]:d.map}function mapCacheDelete(a){var s=getMapData(this,a).delete(a);return this.size-=s?1:0,s}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,s){var d=getMapData(this,a),c=d.size;return d.set(a,s),this.size+=d.size==c?0:1,this}function MapCache(a){var s=-1,d=a==null?0:a.length;for(this.clear();++s<d;){var c=a[s];this.set(c[0],c[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var d=function(){var c=arguments,h=s?s.apply(this,c):c[0],v=d.cache;if(v.has(h))return v.get(h);var y=a.apply(this,c);return d.cache=v.set(h,y)||v,y};return d.cache=new(memoize.Cache||MapCache),d}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var s=memoize(a,function(c){return d.size===MAX_MEMOIZE_SIZE&&d.clear(),c}),d=s.cache;return s}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(rePropName,function(d,c,h,v){s.push(h?v.replace(reEscapeChar,"$1"):c||d)}),s}),stringToPath$1=stringToPath;function toString$1(a){return a==null?"":baseToString(a)}function castPath(a,s){return isArray$4(a)?a:isKey(a,s)?[a]:stringToPath$1(toString$1(a))}var INFINITY=1/0;function toKey(a){if(typeof a=="string"||isSymbol(a))return a;var s=a+"";return s=="0"&&1/a==-INFINITY?"-0":s}function baseGet(a,s){s=castPath(s,a);for(var d=0,c=s.length;a!=null&&d<c;)a=a[toKey(s[d++])];return d&&d==c?a:void 0}function get(a,s,d){var c=a==null?void 0:baseGet(a,s);return c===void 0?d:c}function arrayPush(a,s){for(var d=-1,c=s.length,h=a.length;++d<c;)a[h+d]=s[d];return a}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(a){return isArray$4(a)||isArguments$1(a)||!!(spreadableSymbol&&a&&a[spreadableSymbol])}function baseFlatten(a,s,d,c,h){var v=-1,y=a.length;for(d||(d=isFlattenable),h||(h=[]);++v<y;){var b=a[v];s>0&&d(b)?s>1?baseFlatten(b,s-1,d,c,h):arrayPush(h,b):c||(h[h.length]=b)}return h}function flatten(a){var s=a==null?0:a.length;return s?baseFlatten(a,1):[]}function flatRest(a){return setToString$1(overRest(a,void 0,flatten),a+"")}var getPrototype=overArg(Object.getPrototypeOf,Object),getPrototype$1=getPrototype,objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(a){if(!isObjectLike(a)||baseGetTag(a)!=objectTag$3)return!1;var s=getPrototype$1(a);if(s===null)return!0;var d=hasOwnProperty$4.call(s,"constructor")&&s.constructor;return typeof d=="function"&&d instanceof d&&funcToString.call(d)==objectCtorString}function baseSlice(a,s,d){var c=-1,h=a.length;s<0&&(s=-s>h?0:h+s),d=d>h?h:d,d<0&&(d+=h),h=s>d?0:d-s>>>0,s>>>=0;for(var v=Array(h);++c<h;)v[c]=a[c+s];return v}function castSlice(a,s,d){var c=a.length;return d=d===void 0?c:d,!s&&d>=c?a:baseSlice(a,s,d)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(a){return reHasUnicode.test(a)}function asciiToArray(a){return a.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(a){return a.match(reUnicode)||[]}function stringToArray(a){return hasUnicode(a)?unicodeToArray(a):asciiToArray(a)}function createCaseFirst(a){return function(s){s=toString$1(s);var d=hasUnicode(s)?stringToArray(s):void 0,c=d?d[0]:s.charAt(0),h=d?castSlice(d,1).join(""):s.slice(1);return c[a]()+h}}var upperFirst=createCaseFirst("toUpperCase"),upperFirst$1=upperFirst;function capitalize(a){return upperFirst$1(toString$1(a).toLowerCase())}function arrayReduce(a,s,d,c){var h=-1,v=a==null?0:a.length;for(c&&v&&(d=a[++h]);++h<v;)d=s(d,a[h],h,a);return d}function basePropertyOf(a){return function(s){return a==null?void 0:a[s]}}var deburredLetters={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},deburrLetter=basePropertyOf(deburredLetters),deburrLetter$1=deburrLetter,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(a){return a=toString$1(a),a&&a.replace(reLatin,deburrLetter$1).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(a){return a.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(a){return reHasUnicodeWord.test(a)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['\u2019]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(a){return a.match(reUnicodeWord)||[]}function words(a,s,d){return a=toString$1(a),s=d?void 0:s,s===void 0?hasUnicodeWord(a)?unicodeWords(a):asciiWords(a):a.match(s)||[]}var rsApos="['\u2019]",reApos=RegExp(rsApos,"g");function createCompounder(a){return function(s){return arrayReduce(words(deburr(s).replace(reApos,"")),a,"")}}var camelCase$2=createCompounder(function(a,s,d){return s=s.toLowerCase(),a+(d?capitalize(s):s)}),camelCase$3=camelCase$2;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var s=this.__data__,d=s.delete(a);return this.size=s.size,d}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,s){var d=this.__data__;if(d instanceof ListCache){var c=d.__data__;if(!Map$2||c.length<LARGE_ARRAY_SIZE-1)return c.push([a,s]),this.size=++d.size,this;d=this.__data__=new MapCache(c)}return d.set(a,s),this.size=d.size,this}function Stack(a){var s=this.__data__=new ListCache(a);this.size=s.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;function baseAssign(a,s){return a&&copyObject(s,keys$1(s),a)}function baseAssignIn(a,s){return a&&copyObject(s,keysIn(s),a)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(a,s){if(s)return a.slice();var d=a.length,c=allocUnsafe?allocUnsafe(d):new a.constructor(d);return a.copy(c),c}function arrayFilter(a,s){for(var d=-1,c=a==null?0:a.length,h=0,v=[];++d<c;){var y=a[d];s(y,d,a)&&(v[h++]=y)}return v}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols$1(a),function(s){return propertyIsEnumerable.call(a,s)}))}:stubArray,getSymbols$1=getSymbols;function copySymbols(a,s){return copyObject(a,getSymbols$1(a),s)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(a){for(var s=[];a;)arrayPush(s,getSymbols$1(a)),a=getPrototype$1(a);return s}:stubArray,getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(a,s){return copyObject(a,getSymbolsIn$1(a),s)}function baseGetAllKeys(a,s,d){var c=s(a);return isArray$4(a)?c:arrayPush(c,d(a))}function getAllKeys(a){return baseGetAllKeys(a,keys$1,getSymbols$1)}function getAllKeysIn(a){return baseGetAllKeys(a,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView"),DataView$2=DataView$1,Promise$1=getNative(root$1,"Promise"),Promise$2=Promise$1,Set$1=getNative(root$1,"Set"),Set$2=Set$1,mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$3),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$3&&getTag(new WeakMap$3)!=weakMapTag$1)&&(getTag=function(a){var s=baseGetTag(a),d=s==objectTag$2?a.constructor:void 0,c=d?toSource(d):"";if(c)switch(c){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return s});var getTag$1=getTag,objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(a){var s=a.length,d=new a.constructor(s);return s&&typeof a[0]=="string"&&hasOwnProperty$3.call(a,"index")&&(d.index=a.index,d.input=a.input),d}var Uint8Array$1=root$1.Uint8Array,Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(a){var s=new a.constructor(a.byteLength);return new Uint8Array$2(s).set(new Uint8Array$2(a)),s}function cloneDataView(a,s){var d=s?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.byteLength)}var reFlags=/\w*$/;function cloneRegExp(a){var s=new a.constructor(a.source,reFlags.exec(a));return s.lastIndex=a.lastIndex,s}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(a){return symbolValueOf$1?Object(symbolValueOf$1.call(a)):{}}function cloneTypedArray(a,s){var d=s?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(a,s,d){var c=a.constructor;switch(s){case arrayBufferTag$2:return cloneArrayBuffer(a);case boolTag$2:case dateTag$2:return new c(+a);case dataViewTag$2:return cloneDataView(a,d);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(a,d);case mapTag$3:return new c;case numberTag$2:case stringTag$2:return new c(a);case regexpTag$2:return cloneRegExp(a);case setTag$3:return new c;case symbolTag$2:return cloneSymbol(a)}}function initCloneObject(a){return typeof a.constructor=="function"&&!isPrototype(a)?baseCreate$1(getPrototype$1(a)):{}}var mapTag$2="[object Map]";function baseIsMap(a){return isObjectLike(a)&&getTag$1(a)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,isMap$1=isMap,setTag$2="[object Set]";function baseIsSet(a){return isObjectLike(a)&&getTag$1(a)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet$3=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet$4=isSet$3,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(a,s,d,c,h,v){var y,b=s&CLONE_DEEP_FLAG$2,_=s&CLONE_FLAT_FLAG$1,T=s&CLONE_SYMBOLS_FLAG$2;if(d&&(y=h?d(a,c,h,v):d(a)),y!==void 0)return y;if(!isObject$5(a))return a;var I=isArray$4(a);if(I){if(y=initCloneArray(a),!b)return copyArray(a,y)}else{var N=getTag$1(a),A=N==funcTag||N==genTag;if(isBuffer$2(a))return cloneBuffer(a,b);if(N==objectTag$1||N==argsTag$1||A&&!h){if(y=_||A?{}:initCloneObject(a),!b)return _?copySymbolsIn(a,baseAssignIn(y,a)):copySymbols(a,baseAssign(y,a))}else{if(!cloneableTags[N])return h?a:{};y=initCloneByTag(a,N,b)}}v||(v=new Stack);var V=v.get(a);if(V)return V;v.set(a,y),isSet$4(a)?a.forEach(function(D){y.add(baseClone(D,s,d,D,a,v))}):isMap$1(a)&&a.forEach(function(D,H){y.set(H,baseClone(D,s,d,H,a,v))});var $=T?_?getAllKeysIn:getAllKeys:_?keysIn:keys$1,L=I?void 0:$(a);return arrayEach(L||a,function(D,H){L&&(H=D,D=a[H]),assignValue(y,H,baseClone(D,s,d,H,a,v))}),y}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(a){return baseClone(a,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var s=-1,d=a==null?0:a.length;for(this.__data__=new MapCache;++s<d;)this.add(a[s])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;function arraySome(a,s){for(var d=-1,c=a==null?0:a.length;++d<c;)if(s(a[d],d,a))return!0;return!1}function cacheHas(a,s){return a.has(s)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,s,d,c,h,v){var y=d&COMPARE_PARTIAL_FLAG$5,b=a.length,_=s.length;if(b!=_&&!(y&&_>b))return!1;var T=v.get(a),I=v.get(s);if(T&&I)return T==s&&I==a;var N=-1,A=!0,V=d&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(v.set(a,s),v.set(s,a);++N<b;){var $=a[N],L=s[N];if(c)var D=y?c(L,$,N,s,a,v):c($,L,N,a,s,v);if(D!==void 0){if(D)continue;A=!1;break}if(V){if(!arraySome(s,function(H,O){if(!cacheHas(V,O)&&($===H||h($,H,d,c,v)))return V.push(O)})){A=!1;break}}else if(!($===L||h($,L,d,c,v))){A=!1;break}}return v.delete(a),v.delete(s),A}function mapToArray(a){var s=-1,d=Array(a.size);return a.forEach(function(c,h){d[++s]=[h,c]}),d}function setToArray(a){var s=-1,d=Array(a.size);return a.forEach(function(c){d[++s]=c}),d}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,s,d,c,h,v,y){switch(d){case dataViewTag:if(a.byteLength!=s.byteLength||a.byteOffset!=s.byteOffset)return!1;a=a.buffer,s=s.buffer;case arrayBufferTag:return!(a.byteLength!=s.byteLength||!v(new Uint8Array$2(a),new Uint8Array$2(s)));case boolTag:case dateTag:case numberTag:return eq(+a,+s);case errorTag:return a.name==s.name&&a.message==s.message;case regexpTag:case stringTag:return a==s+"";case mapTag:var b=mapToArray;case setTag:var _=c&COMPARE_PARTIAL_FLAG$4;if(b||(b=setToArray),a.size!=s.size&&!_)return!1;var T=y.get(a);if(T)return T==s;c|=COMPARE_UNORDERED_FLAG$2,y.set(a,s);var I=equalArrays(b(a),b(s),c,h,v,y);return y.delete(a),I;case symbolTag:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(s)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(a,s,d,c,h,v){var y=d&COMPARE_PARTIAL_FLAG$3,b=getAllKeys(a),_=b.length,T=getAllKeys(s),I=T.length;if(_!=I&&!y)return!1;for(var N=_;N--;){var A=b[N];if(!(y?A in s:hasOwnProperty$2.call(s,A)))return!1}var V=v.get(a),$=v.get(s);if(V&&$)return V==s&&$==a;var L=!0;v.set(a,s),v.set(s,a);for(var D=y;++N<_;){A=b[N];var H=a[A],O=s[A];if(c)var x=y?c(O,H,A,s,a,v):c(H,O,A,a,s,v);if(!(x===void 0?H===O||h(H,O,d,c,v):x)){L=!1;break}D||(D=A=="constructor")}if(L&&!D){var j=a.constructor,X=s.constructor;j!=X&&"constructor"in a&&"constructor"in s&&!(typeof j=="function"&&j instanceof j&&typeof X=="function"&&X instanceof X)&&(L=!1)}return v.delete(a),v.delete(s),L}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(a,s,d,c,h,v){var y=isArray$4(a),b=isArray$4(s),_=y?arrayTag:getTag$1(a),T=b?arrayTag:getTag$1(s);_=_==argsTag?objectTag:_,T=T==argsTag?objectTag:T;var I=_==objectTag,N=T==objectTag,A=_==T;if(A&&isBuffer$2(a)){if(!isBuffer$2(s))return!1;y=!0,I=!1}if(A&&!I)return v||(v=new Stack),y||isTypedArray$1(a)?equalArrays(a,s,d,c,h,v):equalByTag(a,s,_,d,c,h,v);if(!(d&COMPARE_PARTIAL_FLAG$2)){var V=I&&hasOwnProperty$1.call(a,"__wrapped__"),$=N&&hasOwnProperty$1.call(s,"__wrapped__");if(V||$){var L=V?a.value():a,D=$?s.value():s;return v||(v=new Stack),h(L,D,d,c,v)}}return A?(v||(v=new Stack),equalObjects(a,s,d,c,h,v)):!1}function baseIsEqual(a,s,d,c,h){return a===s?!0:a==null||s==null||!isObjectLike(a)&&!isObjectLike(s)?a!==a&&s!==s:baseIsEqualDeep(a,s,d,c,baseIsEqual,h)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,s,d,c){var h=d.length,v=h,y=!c;if(a==null)return!v;for(a=Object(a);h--;){var b=d[h];if(y&&b[2]?b[1]!==a[b[0]]:!(b[0]in a))return!1}for(;++h<v;){b=d[h];var _=b[0],T=a[_],I=b[1];if(y&&b[2]){if(T===void 0&&!(_ in a))return!1}else{var N=new Stack;if(c)var A=c(T,I,_,a,s,N);if(!(A===void 0?baseIsEqual(I,T,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,c,N):A))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject$5(a)}function getMatchData(a){for(var s=keys$1(a),d=s.length;d--;){var c=s[d],h=a[c];s[d]=[c,h,isStrictComparable(h)]}return s}function matchesStrictComparable(a,s){return function(d){return d==null?!1:d[a]===s&&(s!==void 0||a in Object(d))}}function baseMatches(a){var s=getMatchData(a);return s.length==1&&s[0][2]?matchesStrictComparable(s[0][0],s[0][1]):function(d){return d===a||baseIsMatch(d,a,s)}}function baseHasIn(a,s){return a!=null&&s in Object(a)}function hasPath(a,s,d){s=castPath(s,a);for(var c=-1,h=s.length,v=!1;++c<h;){var y=toKey(s[c]);if(!(v=a!=null&&d(a,y)))break;a=a[y]}return v||++c!=h?v:(h=a==null?0:a.length,!!h&&isLength(h)&&isIndex(y,h)&&(isArray$4(a)||isArguments$1(a)))}function hasIn(a,s){return a!=null&&hasPath(a,s,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,s){return isKey(a)&&isStrictComparable(s)?matchesStrictComparable(toKey(a),s):function(d){var c=get(d,a);return c===void 0&&c===s?hasIn(d,a):baseIsEqual(s,c,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(s){return s==null?void 0:s[a]}}function basePropertyDeep(a){return function(s){return baseGet(s,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity$1:typeof a=="object"?isArray$4(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}function createBaseFor(a){return function(s,d,c){for(var h=-1,v=Object(s),y=c(s),b=y.length;b--;){var _=y[a?b:++h];if(d(v[_],_,v)===!1)break}return s}}var baseFor=createBaseFor(),baseFor$1=baseFor;function baseForOwn(a,s){return a&&baseFor$1(a,s,keys$1)}function createBaseEach(a,s){return function(d,c){if(d==null)return d;if(!isArrayLike$1(d))return a(d,c);for(var h=d.length,v=s?h:-1,y=Object(d);(s?v--:++v<h)&&c(y[v],v,y)!==!1;);return d}}var baseEach=createBaseEach(baseForOwn),baseEach$1=baseEach,now=function(){return root$1.Date.now()},now$1=now,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(a,s,d){var c,h,v,y,b,_,T=0,I=!1,N=!1,A=!0;if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);s=toNumber(s)||0,isObject$5(d)&&(I=!!d.leading,N="maxWait"in d,v=N?nativeMax(toNumber(d.maxWait)||0,s):v,A="trailing"in d?!!d.trailing:A);function V(te){var se=c,oe=h;return c=h=void 0,T=te,y=a.apply(oe,se),y}function $(te){return T=te,b=setTimeout(H,s),I?V(te):y}function L(te){var se=te-_,oe=te-T,F=s-se;return N?nativeMin(F,v-oe):F}function D(te){var se=te-_,oe=te-T;return _===void 0||se>=s||se<0||N&&oe>=v}function H(){var te=now$1();if(D(te))return O(te);b=setTimeout(H,L(te))}function O(te){return b=void 0,A&&c?V(te):(c=h=void 0,y)}function x(){b!==void 0&&clearTimeout(b),T=0,c=_=h=b=void 0}function j(){return b===void 0?y:O(now$1())}function X(){var te=now$1(),se=D(te);if(c=arguments,h=this,_=te,se){if(b===void 0)return $(_);if(N)return clearTimeout(b),b=setTimeout(H,s),V(_)}return b===void 0&&(b=setTimeout(H,s)),y}return X.cancel=x,X.flush=j,X}function last$1(a){var s=a==null?0:a.length;return s?a[s-1]:void 0}function arrayEvery(a,s){for(var d=-1,c=a==null?0:a.length;++d<c;)if(!s(a[d],d,a))return!1;return!0}function baseEvery(a,s){var d=!0;return baseEach$1(a,function(c,h,v){return d=!!s(c,h,v),d}),d}function every$1(a,s,d){var c=isArray$4(a)?arrayEvery:baseEvery;return d&&isIterateeCall(a,s,d)&&(s=void 0),c(a,baseIteratee(s))}function baseMap(a,s){var d=-1,c=isArrayLike$1(a)?Array(a.length):[];return baseEach$1(a,function(h,v,y){c[++d]=s(h,v,y)}),c}function parent(a,s){return s.length<2?a:baseGet(a,baseSlice(s,0,-1))}function isEqual(a,s){return baseIsEqual(a,s)}function isMatch(a,s){return a===s||baseIsMatch(a,s,getMatchData(s))}var kebabCase=createCompounder(function(a,s,d){return a+(d?"-":"")+s.toLowerCase()}),kebabCase$1=kebabCase;function baseUnset(a,s){return s=castPath(s,a),a=parent(a,s),a==null||delete a[toKey(last$1(s))]}function customOmitClone(a){return isPlainObject$1(a)?void 0:a}var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(a,s){var d={};if(a==null)return d;var c=!1;s=arrayMap(s,function(v){return v=castPath(v,a),c||(c=v.length>1),v}),copyObject(a,getAllKeysIn(a),d),c&&(d=baseClone(d,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var h=s.length;h--;)baseUnset(d,s[h]);return d}),omit$1=omit;function baseSet(a,s,d,c){if(!isObject$5(a))return a;s=castPath(s,a);for(var h=-1,v=s.length,y=v-1,b=a;b!=null&&++h<v;){var _=toKey(s[h]),T=d;if(_==="__proto__"||_==="constructor"||_==="prototype")return a;if(h!=y){var I=b[_];T=c?c(I,_,b):void 0,T===void 0&&(T=isObject$5(I)?I:isIndex(s[h+1])?[]:{})}assignValue(b,_,T),b=b[_]}return a}function basePickBy(a,s,d){for(var c=-1,h=s.length,v={};++c<h;){var y=s[c],b=baseGet(a,y);d(b,y)&&baseSet(v,castPath(y,a),b)}return v}function baseSortBy(a,s){var d=a.length;for(a.sort(s);d--;)a[d]=a[d].value;return a}function compareAscending(a,s){if(a!==s){var d=a!==void 0,c=a===null,h=a===a,v=isSymbol(a),y=s!==void 0,b=s===null,_=s===s,T=isSymbol(s);if(!b&&!T&&!v&&a>s||v&&y&&_&&!b&&!T||c&&y&&_||!d&&_||!h)return 1;if(!c&&!v&&!T&&a<s||T&&d&&h&&!c&&!v||b&&d&&h||!y&&h||!_)return-1}return 0}function compareMultiple(a,s,d){for(var c=-1,h=a.criteria,v=s.criteria,y=h.length,b=d.length;++c<y;){var _=compareAscending(h[c],v[c]);if(_){if(c>=b)return _;var T=d[c];return _*(T=="desc"?-1:1)}}return a.index-s.index}function baseOrderBy(a,s,d){s.length?s=arrayMap(s,function(v){return isArray$4(v)?function(y){return baseGet(y,v.length===1?v[0]:v)}:v}):s=[identity$1];var c=-1;s=arrayMap(s,baseUnary(baseIteratee));var h=baseMap(a,function(v,y,b){var _=arrayMap(s,function(T){return T(v)});return{criteria:_,index:++c,value:v}});return baseSortBy(h,function(v,y){return compareMultiple(v,y,d)})}function basePick(a,s){return basePickBy(a,s,function(d,c){return hasIn(a,c)})}var pick=flatRest(function(a,s){return a==null?{}:basePick(a,s)}),pick$1=pick;function baseIndexOfWith(a,s,d,c){for(var h=d-1,v=a.length;++h<v;)if(c(a[h],s))return h;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function basePullAll(a,s,d,c){var h=c?baseIndexOfWith:baseIndexOf,v=-1,y=s.length,b=a;for(a===s&&(s=copyArray(s)),d&&(b=arrayMap(a,baseUnary(d)));++v<y;)for(var _=0,T=s[v],I=d?d(T):T;(_=h(b,I,_,c))>-1;)b!==a&&splice.call(b,_,1),splice.call(a,_,1);return a}function pullAll(a,s){return a&&a.length&&s&&s.length?basePullAll(a,s):a}var pull$1=baseRest(pullAll),pull$2=pull$1,sortBy=baseRest(function(a,s){if(a==null)return[];var d=s.length;return d>1&&isIterateeCall(a,s[0],s[1])?s=[]:d>2&&isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),baseOrderBy(a,baseFlatten(s,1),[])}),sortBy$1=sortBy,fastDeepEqual=function a(s,d){if(s===d)return!0;if(s&&d&&typeof s=="object"&&typeof d=="object"){if(s.constructor!==d.constructor)return!1;var c,h,v;if(Array.isArray(s)){if(c=s.length,c!=d.length)return!1;for(h=c;h--!==0;)if(!a(s[h],d[h]))return!1;return!0}if(s.constructor===RegExp)return s.source===d.source&&s.flags===d.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===d.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===d.toString();if(v=Object.keys(s),c=v.length,c!==Object.keys(d).length)return!1;for(h=c;h--!==0;)if(!Object.prototype.hasOwnProperty.call(d,v[h]))return!1;for(h=c;h--!==0;){var y=v[h];if(!a(s[y],d[y]))return!1}return!0}return s!==s&&d!==d};const generateId=()=>(Math.random()*1e20).toString(36),insertAt$1=(a=0,s,d,c=!1)=>[...d.slice(0,a),...[s].flat(),...d.slice(c?a+1:a)],replaceItem$1=(a,s,d)=>{a=typeof a=="function"?a:h=>h===a;const c=d.findIndex(a);return c<0?d:insertAt$1(c,s,d,!0)},swapIndex=(a,s,d)=>{if(!d[a]||!d[s])return d;d=[...d];const c=d[a];return d[a]=d[s],d[s]=c,d},swapItems=(a,s,d)=>{const c=d.findIndex(v=>v===a),h=d.findIndex(v=>v===s);return c<0||h<0?d:swapIndex(c,h,d)},toDataNode$1=a=>a?{id:a.id,props:a.props,childIds:(a.children||[]).map(s=>s.id)}:null,toSceneNode=a=>({id:a.id,props:a.props,children:[]}),toSceneTree=(a,s)=>{const d=a.find(h=>h.id===s);if(!d)return null;const c=d.childIds;return{id:d.id,props:d.props,children:c.map(h=>toSceneTree(a,h)).filter(Boolean)}},forEachDown$1=(a,s)=>{s(a),(a.children||[]).forEach(c=>forEachDown$1(c,(h,v)=>{s(h,v||a)}))},mapDown=(a,s)=>{const d=s(a);return{...d,children:((d==null?void 0:d.children)||(a==null?void 0:a.children)||[]).map(c=>mapDown(c,s))}},mapDownAsync=async(a,s)=>{var c;const d=(c=a==null?void 0:a.children)!=null?c:[];return{...await s(a),children:await Promise.all(d.map(h=>mapDownAsync(h,s)))}},getElementAttributes=a=>Object.values(a.attributes).reduce((s,d)=>({...s,[d.name]:d.value}),{}),asArray=a=>isArray$4(a)?a:[a],sizeToNum=(a,s)=>typeof a=="number"?a:typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)/100*s:parseFloat(a):0,asSize=a=>typeof a=="number"?a+"px":typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)+"%":a:"0px",asDuration=a=>typeof a=="string"?a:typeof a=="number"?a+"ms":"0ms",values=a=>Array.from(a.values());var Logic=Object.freeze(Object.defineProperty({__proto__:null,deepEqual:fastDeepEqual,generateId,insertAt:insertAt$1,replaceItem:replaceItem$1,swapIndex,swapItems,toDataNode:toDataNode$1,toSceneNode,toSceneTree,forEachDown:forEachDown$1,mapDown,mapDownAsync,getElementAttributes,asArray,sizeToNum,asSize,asDuration,values,pick:pick$1,pull:pull$2,omit:omit$1,isEqual,cloneDeep,sortBy:sortBy$1,debounce:debounce$1,camelCase:camelCase$3,kebabCase:kebabCase$1,isArray:isArray$4,every:every$1},Symbol.toStringTag,{value:"Module"})),lib$2={};function e(a){this.message=a}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var r$1=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(a){var s=String(a).replace(/=+$/,"");if(s.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var d,c,h=0,v=0,y="";c=s.charAt(v++);~c&&(d=h%4?64*d+c:c,h++%4)?y+=String.fromCharCode(255&d>>(-2*h&6)):0)c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(c);return y};function t(a){var s=a.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw"Illegal base64url string!"}try{return function(d){return decodeURIComponent(r$1(d).replace(/(.)/g,function(c,h){var v=h.charCodeAt(0).toString(16).toUpperCase();return v.length<2&&(v="0"+v),"%"+v}))}(s)}catch{return r$1(s)}}function n$1(a){this.message=a}function o(a,s){if(typeof a!="string")throw new n$1("Invalid token specified");var d=(s=s||{}).header===!0?0:1;try{return JSON.parse(t(a.split(".")[d]))}catch(c){throw new n$1("Invalid token specified: "+c.message)}}n$1.prototype=new Error,n$1.prototype.name="InvalidTokenError";var jwtDecode_esm=Object.freeze(Object.defineProperty({__proto__:null,default:o,InvalidTokenError:n$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(jwtDecode_esm),getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$1(a){return typeof a=="string"&&REGEX.test(a)}for(var byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=(byteToHex[a[s+0]]+byteToHex[a[s+1]]+byteToHex[a[s+2]]+byteToHex[a[s+3]]+"-"+byteToHex[a[s+4]]+byteToHex[a[s+5]]+"-"+byteToHex[a[s+6]]+byteToHex[a[s+7]]+"-"+byteToHex[a[s+8]]+byteToHex[a[s+9]]+"-"+byteToHex[a[s+10]]+byteToHex[a[s+11]]+byteToHex[a[s+12]]+byteToHex[a[s+13]]+byteToHex[a[s+14]]+byteToHex[a[s+15]]).toLowerCase();if(!validate$1(d))throw TypeError("Stringified UUID is invalid");return d}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(a,s,d){var c=s&&d||0,h=s||new Array(16);a=a||{};var v=a.node||_nodeId,y=a.clockseq!==void 0?a.clockseq:_clockseq;if(v==null||y==null){var b=a.random||(a.rng||rng)();v==null&&(v=_nodeId=[b[0]|1,b[1],b[2],b[3],b[4],b[5]]),y==null&&(y=_clockseq=(b[6]<<8|b[7])&16383)}var _=a.msecs!==void 0?a.msecs:Date.now(),T=a.nsecs!==void 0?a.nsecs:_lastNSecs+1,I=_-_lastMSecs+(T-_lastNSecs)/1e4;if(I<0&&a.clockseq===void 0&&(y=y+1&16383),(I<0||_>_lastMSecs)&&a.nsecs===void 0&&(T=0),T>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=_,_lastNSecs=T,_clockseq=y,_+=122192928e5;var N=((_&268435455)*1e4+T)%4294967296;h[c++]=N>>>24&255,h[c++]=N>>>16&255,h[c++]=N>>>8&255,h[c++]=N&255;var A=_/4294967296*1e4&268435455;h[c++]=A>>>8&255,h[c++]=A&255,h[c++]=A>>>24&15|16,h[c++]=A>>>16&255,h[c++]=y>>>8|128,h[c++]=y&255;for(var V=0;V<6;++V)h[c+V]=v[V];return s||stringify(h)}function parse$1(a){if(!validate$1(a))throw TypeError("Invalid UUID");var s,d=new Uint8Array(16);return d[0]=(s=parseInt(a.slice(0,8),16))>>>24,d[1]=s>>>16&255,d[2]=s>>>8&255,d[3]=s&255,d[4]=(s=parseInt(a.slice(9,13),16))>>>8,d[5]=s&255,d[6]=(s=parseInt(a.slice(14,18),16))>>>8,d[7]=s&255,d[8]=(s=parseInt(a.slice(19,23),16))>>>8,d[9]=s&255,d[10]=(s=parseInt(a.slice(24,36),16))/1099511627776&255,d[11]=s/4294967296&255,d[12]=s>>>24&255,d[13]=s>>>16&255,d[14]=s>>>8&255,d[15]=s&255,d}function stringToBytes(a){a=unescape(encodeURIComponent(a));for(var s=[],d=0;d<a.length;++d)s.push(a.charCodeAt(d));return s}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(a,s,d){function c(h,v,y,b){if(typeof h=="string"&&(h=stringToBytes(h)),typeof v=="string"&&(v=parse$1(v)),v.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var _=new Uint8Array(16+h.length);if(_.set(v),_.set(h,v.length),_=d(_),_[6]=_[6]&15|s,_[8]=_[8]&63|128,y){b=b||0;for(var T=0;T<16;++T)y[b+T]=_[T];return y}return stringify(_)}try{c.name=a}catch{}return c.DNS=DNS,c.URL=URL$1,c}function md5(a){if(typeof a=="string"){var s=unescape(encodeURIComponent(a));a=new Uint8Array(s.length);for(var d=0;d<s.length;++d)a[d]=s.charCodeAt(d)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(a),a.length*8))}function md5ToHexEncodedArray(a){for(var s=[],d=a.length*32,c="0123456789abcdef",h=0;h<d;h+=8){var v=a[h>>5]>>>h%32&255,y=parseInt(c.charAt(v>>>4&15)+c.charAt(v&15),16);s.push(y)}return s}function getOutputLength(a){return(a+64>>>9<<4)+14+1}function wordsToMd5(a,s){a[s>>5]|=128<<s%32,a[getOutputLength(s)-1]=s;for(var d=1732584193,c=-271733879,h=-1732584194,v=271733878,y=0;y<a.length;y+=16){var b=d,_=c,T=h,I=v;d=md5ff(d,c,h,v,a[y],7,-680876936),v=md5ff(v,d,c,h,a[y+1],12,-389564586),h=md5ff(h,v,d,c,a[y+2],17,606105819),c=md5ff(c,h,v,d,a[y+3],22,-1044525330),d=md5ff(d,c,h,v,a[y+4],7,-176418897),v=md5ff(v,d,c,h,a[y+5],12,1200080426),h=md5ff(h,v,d,c,a[y+6],17,-1473231341),c=md5ff(c,h,v,d,a[y+7],22,-45705983),d=md5ff(d,c,h,v,a[y+8],7,1770035416),v=md5ff(v,d,c,h,a[y+9],12,-1958414417),h=md5ff(h,v,d,c,a[y+10],17,-42063),c=md5ff(c,h,v,d,a[y+11],22,-1990404162),d=md5ff(d,c,h,v,a[y+12],7,1804603682),v=md5ff(v,d,c,h,a[y+13],12,-40341101),h=md5ff(h,v,d,c,a[y+14],17,-1502002290),c=md5ff(c,h,v,d,a[y+15],22,1236535329),d=md5gg(d,c,h,v,a[y+1],5,-165796510),v=md5gg(v,d,c,h,a[y+6],9,-1069501632),h=md5gg(h,v,d,c,a[y+11],14,643717713),c=md5gg(c,h,v,d,a[y],20,-373897302),d=md5gg(d,c,h,v,a[y+5],5,-701558691),v=md5gg(v,d,c,h,a[y+10],9,38016083),h=md5gg(h,v,d,c,a[y+15],14,-660478335),c=md5gg(c,h,v,d,a[y+4],20,-405537848),d=md5gg(d,c,h,v,a[y+9],5,568446438),v=md5gg(v,d,c,h,a[y+14],9,-1019803690),h=md5gg(h,v,d,c,a[y+3],14,-187363961),c=md5gg(c,h,v,d,a[y+8],20,1163531501),d=md5gg(d,c,h,v,a[y+13],5,-1444681467),v=md5gg(v,d,c,h,a[y+2],9,-51403784),h=md5gg(h,v,d,c,a[y+7],14,1735328473),c=md5gg(c,h,v,d,a[y+12],20,-1926607734),d=md5hh(d,c,h,v,a[y+5],4,-378558),v=md5hh(v,d,c,h,a[y+8],11,-2022574463),h=md5hh(h,v,d,c,a[y+11],16,1839030562),c=md5hh(c,h,v,d,a[y+14],23,-35309556),d=md5hh(d,c,h,v,a[y+1],4,-1530992060),v=md5hh(v,d,c,h,a[y+4],11,1272893353),h=md5hh(h,v,d,c,a[y+7],16,-155497632),c=md5hh(c,h,v,d,a[y+10],23,-1094730640),d=md5hh(d,c,h,v,a[y+13],4,681279174),v=md5hh(v,d,c,h,a[y],11,-358537222),h=md5hh(h,v,d,c,a[y+3],16,-722521979),c=md5hh(c,h,v,d,a[y+6],23,76029189),d=md5hh(d,c,h,v,a[y+9],4,-640364487),v=md5hh(v,d,c,h,a[y+12],11,-421815835),h=md5hh(h,v,d,c,a[y+15],16,530742520),c=md5hh(c,h,v,d,a[y+2],23,-995338651),d=md5ii(d,c,h,v,a[y],6,-198630844),v=md5ii(v,d,c,h,a[y+7],10,1126891415),h=md5ii(h,v,d,c,a[y+14],15,-1416354905),c=md5ii(c,h,v,d,a[y+5],21,-57434055),d=md5ii(d,c,h,v,a[y+12],6,1700485571),v=md5ii(v,d,c,h,a[y+3],10,-1894986606),h=md5ii(h,v,d,c,a[y+10],15,-1051523),c=md5ii(c,h,v,d,a[y+1],21,-2054922799),d=md5ii(d,c,h,v,a[y+8],6,1873313359),v=md5ii(v,d,c,h,a[y+15],10,-30611744),h=md5ii(h,v,d,c,a[y+6],15,-1560198380),c=md5ii(c,h,v,d,a[y+13],21,1309151649),d=md5ii(d,c,h,v,a[y+4],6,-145523070),v=md5ii(v,d,c,h,a[y+11],10,-1120210379),h=md5ii(h,v,d,c,a[y+2],15,718787259),c=md5ii(c,h,v,d,a[y+9],21,-343485551),d=safeAdd(d,b),c=safeAdd(c,_),h=safeAdd(h,T),v=safeAdd(v,I)}return[d,c,h,v]}function bytesToWords(a){if(a.length===0)return[];for(var s=a.length*8,d=new Uint32Array(getOutputLength(s)),c=0;c<s;c+=8)d[c>>5]|=(a[c/8]&255)<<c%32;return d}function safeAdd(a,s){var d=(a&65535)+(s&65535),c=(a>>16)+(s>>16)+(d>>16);return c<<16|d&65535}function bitRotateLeft(a,s){return a<<s|a>>>32-s}function md5cmn(a,s,d,c,h,v){return safeAdd(bitRotateLeft(safeAdd(safeAdd(s,a),safeAdd(c,v)),h),d)}function md5ff(a,s,d,c,h,v,y){return md5cmn(s&d|~s&c,a,s,h,v,y)}function md5gg(a,s,d,c,h,v,y){return md5cmn(s&c|d&~c,a,s,h,v,y)}function md5hh(a,s,d,c,h,v,y){return md5cmn(s^d^c,a,s,h,v,y)}function md5ii(a,s,d,c,h,v,y){return md5cmn(d^(s|~c),a,s,h,v,y)}var v3=v35("v3",48,md5),v3$1=v3;function v4(a,s,d){a=a||{};var c=a.random||(a.rng||rng)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,s){d=d||0;for(var h=0;h<16;++h)s[d+h]=c[h];return s}return stringify(c)}function f$1(a,s,d,c){switch(a){case 0:return s&d^~s&c;case 1:return s^d^c;case 2:return s&d^s&c^d&c;case 3:return s^d^c}}function ROTL(a,s){return a<<s|a>>>32-s}function sha1(a){var s=[1518500249,1859775393,2400959708,3395469782],d=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){var c=unescape(encodeURIComponent(a));a=[];for(var h=0;h<c.length;++h)a.push(c.charCodeAt(h))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);for(var v=a.length/4+2,y=Math.ceil(v/16),b=new Array(y),_=0;_<y;++_){for(var T=new Uint32Array(16),I=0;I<16;++I)T[I]=a[_*64+I*4]<<24|a[_*64+I*4+1]<<16|a[_*64+I*4+2]<<8|a[_*64+I*4+3];b[_]=T}b[y-1][14]=(a.length-1)*8/Math.pow(2,32),b[y-1][14]=Math.floor(b[y-1][14]),b[y-1][15]=(a.length-1)*8&4294967295;for(var N=0;N<y;++N){for(var A=new Uint32Array(80),V=0;V<16;++V)A[V]=b[N][V];for(var $=16;$<80;++$)A[$]=ROTL(A[$-3]^A[$-8]^A[$-14]^A[$-16],1);for(var L=d[0],D=d[1],H=d[2],O=d[3],x=d[4],j=0;j<80;++j){var X=Math.floor(j/20),te=ROTL(L,5)+f$1(X,D,H,O)+x+s[X]+A[j]>>>0;x=O,O=H,H=ROTL(D,30)>>>0,D=L,L=te}d[0]=d[0]+L>>>0,d[1]=d[1]+D>>>0,d[2]=d[2]+H>>>0,d[3]=d[3]+O>>>0,d[4]=d[4]+x>>>0}return[d[0]>>24&255,d[0]>>16&255,d[0]>>8&255,d[0]&255,d[1]>>24&255,d[1]>>16&255,d[1]>>8&255,d[1]&255,d[2]>>24&255,d[2]>>16&255,d[2]>>8&255,d[2]&255,d[3]>>24&255,d[3]>>16&255,d[3]>>8&255,d[3]&255,d[4]>>24&255,d[4]>>16&255,d[4]>>8&255,d[4]&255]}var v5=v35("v5",80,sha1),v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version$3(a){if(!validate$1(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}var esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,v1,v3:v3$1,v4,v5:v5$1,NIL:nil,version:version$3,validate:validate$1,stringify,parse:parse$1},Symbol.toStringTag,{value:"Module"})),require$$1$2=getAugmentedNamespace(esmBrowser);class EnhancedMap$1 extends Map{computeIfAbsent(s,d){if(this.has(s))return this.get(s);const c=d(s);return this.set(s,c),c}computeIfPresent(s,d){const c=this.get(s);if(c===void 0)return;const h=d(s,c);return h!==void 0?this.set(s,h):this.delete(s),h}compute(s,d){const c=this.get(s),h=d(s,c);return h?this.set(s,h):this.delete(s),h}}var InternalLogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel$1||(InternalLogLevel$1={}));function getInternalLogger$1(a){return provider$1.getLogger(a)}const INTERNAL_LOGGING_SETTINGS$1={setInternalLogLevel:a=>provider$1.changeLogLevel(a),setOutput:a=>provider$1.changeOutput(a),reset:()=>provider$1.reset()};class InternalLoggerImpl$1{constructor(s,d,c){this._name=s,this._level=d,this._fnOutput=c}trace(s){this.log(InternalLogLevel$1.Trace,s)}debug(s){this.log(InternalLogLevel$1.Debug,s)}error(s,d){this.log(InternalLogLevel$1.Error,s,d)}info(s){this.log(InternalLogLevel$1.Info,s)}warn(s,d){this.log(InternalLogLevel$1.Warn,s,d)}setLevel(s){this._level=s}setOutput(s){this._fnOutput=s}log(s,d,c){this._level>s||this._fnOutput(`${InternalLogLevel$1[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${d()}${c?`
`+c.stack:""}`)}}class InternalProviderImpl$1{constructor(){this._loggers=new EnhancedMap$1,this._logLevel=InternalLogLevel$1.Error,this._fnOutput=InternalProviderImpl$1.logConsole}getLogger(s){return this._loggers.computeIfAbsent(s,d=>new InternalLoggerImpl$1(d,this._logLevel,this._fnOutput))}changeLogLevel(s){this._logLevel=s,this._loggers.forEach(d=>d.setLevel(s))}changeOutput(s){this._fnOutput=s,this._loggers.forEach(d=>d.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel$1.Error),this._fnOutput=InternalProviderImpl$1.logConsole,this._loggers.forEach(s=>s.setOutput(this._fnOutput))}static logConsole(s){console&&console.log&&console.log(s)}}const provider$1=new InternalProviderImpl$1;var InternalLogger$1=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel$1},getInternalLogger:getInternalLogger$1,INTERNAL_LOGGING_SETTINGS:INTERNAL_LOGGING_SETTINGS$1}),LogLevel$2;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$2||(LogLevel$2={})),function(a){function s(d){switch(d.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=s}(LogLevel$2||(LogLevel$2={}));class CoreLoggerImpl$1{constructor(s){this._runtime=s}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(s){this._runtime=s}trace(s,...d){this.logMessage(LogLevel$2.Trace,s,d)}debug(s,...d){this.logMessage(LogLevel$2.Debug,s,d)}info(s,...d){this.logMessage(LogLevel$2.Info,s,d)}warn(s,...d){this.logMessage(LogLevel$2.Warn,s,d)}error(s,...d){this.logMessage(LogLevel$2.Error,s,d)}fatal(s,...d){this.logMessage(LogLevel$2.Fatal,s,d)}logMessage(s,d,c){if(this._runtime.level>s)return;const h=Date.now(),v=typeof d=="string"?d:d(),y=CoreLoggerImpl$1.getErrorAndArgs(c);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:v,exception:y.error,args:y.args,timeInMillis:h,level:s,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(v,s,y,h));break}}formatArgValue(s){try{return this._runtime.argumentFormatter(s)}catch{return`>>ARG CONVERT FAILED: '${s!==void 0?s.toString():"undefined"}'<<`}}createLogMessage(s,d,c,h){let v;const y=c.error,b=c.args;y&&(v=`${y.name}: ${y.message}`,y.stack&&(v+=`@
${y.stack}`));const _=this._runtime.dateFormatter(h);let T=LogLevel$2[d].toUpperCase();T.length<5&&(T+=" ");const I=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),N=typeof b!="undefined"&&b.length>0?" ["+b.map(V=>this.formatArgValue(V)).join(", ")+"]":"";return{message:_+" "+T+" ["+I+"] "+s+N,error:v}}static getErrorAndArgs(s){if(s.length===0)return{};let d,c;const h=s[0];if(h instanceof Error)return d=h,c=s.length>1?s.slice(1):void 0,{error:d,args:c};if(typeof h=="function"){const v=h();return v instanceof Error?(d=v,c=s.length>1?s.slice(1):void 0,{error:d,args:c}):s.length===1?Array.isArray(v)?{args:v.length>0?v:void 0}:{args:v}:Array.isArray(v)?{args:[...v,...s.slice(1)]}:{args:[v,...s.slice(1)]}}return{args:s}}}function padStart$1(a,s,d=" "){return padInternal$1(a,s,"start",d)}function padEnd$1(a,s,d=" "){return padInternal$1(a,s,"end",d)}function maxLengthStringValueInArray$1(a){return a.map(s=>s.length).reduce((s,d)=>d>s?d:s,0)}function padInternal$1(a,s,d,c=" "){if(s<=a.length)return a;if(c.length>1)throw new Error(`Fill char must be one char exactly, it is: ${c.length}`);const h=s-a.length;let v="";for(let y=0;y<h;y++)v+=c;return d==="start"?v+a:a+v}function formatArgument$1(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate$1(a){const s=new Date(a),d=s.getFullYear(),c=padStart$1((s.getMonth()+1).toString(),2,"0"),h=padStart$1(s.getDate().toString(),2,"0"),v=padStart$1(s.getHours().toString(),2,"0"),y=padStart$1(s.getMinutes().toString(),2,"0"),b=padStart$1(s.getSeconds().toString(),2,"0"),_=padStart$1(s.getMilliseconds().toString(),2,"0");return`${d}-${c}-${h} ${v}:${y}:${b},${_}`}class ConsoleLogChannel$1{constructor(){this.type="LogChannel"}write(s){console&&console.log&&console.log(s.message+(s.error?`
${s.error}`:""))}}var DefaultChannels$1;(function(a){function s(){return new ConsoleLogChannel$1}a.createConsoleChannel=s})(DefaultChannels$1||(DefaultChannels$1={}));class LogProviderImpl$1{constructor(s,d){this._log=getInternalLogger$1("core.impl.LogProviderImpl"),this._name=s,this._settings=d,this._loggers=new EnhancedMap$1,this._idToKeyMap=new EnhancedMap$1,this._globalRuntimeSettings={level:d.level,channel:d.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(s){return this.getOrCreateLogger(s)}updateLoggerRuntime(s,d){this._log.debug(()=>`Updating logger ${s.id} runtime settings using: '${JSON.stringify(d)}'`);const c=this._idToKeyMap.get(s.id);return c===void 0?(this._log.warn(()=>`Cannot update logger with id: ${s.id}, it was not found.`),!1):(this._loggers.computeIfPresent(c,(h,v)=>(v.runtimeSettings=LogProviderImpl$1.mergeRuntimeSettingsIntoLogRuntime(v.runtimeSettings,d),v)),!0)}updateRuntimeSettings(s){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(s)}'`),this._globalRuntimeSettings={level:s.level!==void 0?s.level:this._globalRuntimeSettings.level,channel:s.channel!==void 0?s.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(d=>d.runtimeSettings=LogProviderImpl$1.mergeRuntimeSettingsIntoLogRuntime(d.runtimeSettings,s))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(s){const d=LogProviderImpl$1.createKey(s),c=this._loggers.computeIfAbsent(d,()=>{const h={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:s,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl$1(h)});return this._idToKeyMap.computeIfAbsent(c.id,()=>d),c}nextLoggerId(){const s=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,s}static mergeRuntimeSettingsIntoLogRuntime(s,d){return Object.assign(Object.assign({},s),{level:d.level!==void 0?d.level:s.level,channel:d.channel!==void 0?d.channel:s.channel})}static createKey(s){return typeof s=="string"?s:s.join(",")}}function createLogProvider$1(a,s){return new LogProviderImpl$1(a,s)}var index$4=Object.freeze({__proto__:null,EnhancedMap:EnhancedMap$1,padStart:padStart$1,padEnd:padEnd$1,maxLengthStringValueInArray:maxLengthStringValueInArray$1});class ArrayLogChannel{constructor(){this._buffer=[],this.type="LogChannel"}write(s){this._buffer.push(s)}get logMessages(){return this._buffer}get messages(){return this._buffer.map(s=>s.message)}}class ArrayRawLogChannel{constructor(){this._buffer=[],this.type="RawLogChannel"}write(s,d){this._buffer.push(s)}get messages(){return this._buffer.map(s=>s.message)}get errors(){return this._buffer.map(s=>s.exception)}get size(){return this._buffer.length}get rawMessages(){return this._buffer}clear(){this._buffer=[]}}class TestControlMessage{constructor(){this._messages=[],this.write=this.write.bind(this)}get messages(){return this._messages}write(s){this._messages.push(s)}clear(){this._messages=[]}}var TestClasses=Object.freeze({__proto__:null,ArrayLogChannel,ArrayRawLogChannel,TestControlMessage}),typescriptLogging_esm=Object.freeze(Object.defineProperty({__proto__:null,$internal:InternalLogger$1,$test:TestClasses,get DefaultChannels(){return DefaultChannels$1},get LogLevel(){return LogLevel$2},createLogProvider:createLogProvider$1,formatArgument:formatArgument$1,formatDate:formatDate$1,util:index$4},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(typescriptLogging_esm),layoutapi={},lib$1={},lib={},Metadata={};Object.defineProperty(Metadata,"__esModule",{value:!0}),Metadata.Metadata=void 0,Metadata.Metadata=function(s){const d=new Map,c={set(h,v){if(h=normalizeKey(h),Array.isArray(v))if(v.length===0)d.delete(h);else{for(const y of v)validate(h,y);d.set(h,h.endsWith("-bin")?v:[v.join(", ")])}else validate(h,v),d.set(h,[v]);return c},append(h,v){h=normalizeKey(h),validate(h,v);let y=d.get(h);return y==null&&(y=[],d.set(h,y)),y.push(v),h.endsWith("-bin")||d.set(h,[y.join(", ")]),c},delete(h){h=normalizeKey(h),d.delete(h)},get(h){var v;return h=normalizeKey(h),(v=d.get(h))===null||v===void 0?void 0:v[0]},getAll(h){var v;return h=normalizeKey(h),(v=d.get(h))!==null&&v!==void 0?v:[]},has(h){return h=normalizeKey(h),d.has(h)},[Symbol.iterator](){return d[Symbol.iterator]()}};if(s!=null){const h=isIterable$1(s)?s:Object.entries(s);for(const[v,y]of h)c.set(v,y)}return c};function normalizeKey(a){return a.toLowerCase()}function validate(a,s){if(!/^[0-9a-z_.-]+$/.test(a))throw new Error(`Metadata key '${a}' contains illegal characters`);if(a.endsWith("-bin")){if(!(s instanceof Uint8Array))throw new Error(`Metadata key '${a}' ends with '-bin', thus it must have binary value`)}else{if(typeof s!="string")throw new Error(`Metadata key '${a}' doesn't end with '-bin', thus it must have string value`);if(!/^[ -~]*$/.test(s))throw new Error(`Metadata value '${s}' of key '${a}' contains illegal characters`)}}function isIterable$1(a){return Symbol.iterator in a}var Status={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Status=void 0,function(s){s[s.OK=0]="OK",s[s.CANCELLED=1]="CANCELLED",s[s.UNKNOWN=2]="UNKNOWN",s[s.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",s[s.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",s[s.NOT_FOUND=5]="NOT_FOUND",s[s.ALREADY_EXISTS=6]="ALREADY_EXISTS",s[s.PERMISSION_DENIED=7]="PERMISSION_DENIED",s[s.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",s[s.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",s[s.ABORTED=10]="ABORTED",s[s.OUT_OF_RANGE=11]="OUT_OF_RANGE",s[s.UNIMPLEMENTED=12]="UNIMPLEMENTED",s[s.INTERNAL=13]="INTERNAL",s[s.UNAVAILABLE=14]="UNAVAILABLE",s[s.DATA_LOSS=15]="DATA_LOSS",s[s.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(a.Status||(a.Status={}))})(Status);var MethodDescriptor={};Object.defineProperty(MethodDescriptor,"__esModule",{value:!0});var CallOptions={};Object.defineProperty(CallOptions,"__esModule",{value:!0});var ClientMiddleware={};Object.defineProperty(ClientMiddleware,"__esModule",{value:!0});var composeClientMiddleware$1={};Object.defineProperty(composeClientMiddleware$1,"__esModule",{value:!0}),composeClientMiddleware$1.composeClientMiddleware=void 0;function composeClientMiddleware(a,s){return(d,c)=>s({...d,next:(h,v)=>a({...d,request:h},v)},c)}composeClientMiddleware$1.composeClientMiddleware=composeClientMiddleware;var ClientError$1={},cjs={},helpers={};helpers.__esModule=void 0,helpers.__esModule=!0;var objectSetPrototypeOfIsDefined=typeof Object.setPrototypeOf=="function",objectGetPrototypeOfIsDefined=typeof Object.getPrototypeOf=="function",objectDefinePropertyIsDefined=typeof Object.defineProperty=="function",objectCreateIsDefined=typeof Object.create=="function",objectHasOwnPropertyIsDefined=typeof Object.prototype.hasOwnProperty=="function",setPrototypeOf=function(s,d){objectSetPrototypeOfIsDefined?Object.setPrototypeOf(s,d):s.__proto__=d};helpers.setPrototypeOf=setPrototypeOf;var getPrototypeOf=function(s){return objectGetPrototypeOfIsDefined?Object.getPrototypeOf(s):s.__proto__||s.prototype};helpers.getPrototypeOf=getPrototypeOf;var ie8ObjectDefinePropertyBug=!1,defineProperty=function a(s,d,c){if(objectDefinePropertyIsDefined&&!ie8ObjectDefinePropertyBug)try{Object.defineProperty(s,d,c)}catch{ie8ObjectDefinePropertyBug=!0,a(s,d,c)}else s[d]=c.value};helpers.defineProperty=defineProperty;var hasOwnProperty=function(s,d){return objectHasOwnPropertyIsDefined?s.hasOwnProperty(s,d):s[d]===void 0};helpers.hasOwnProperty=hasOwnProperty;var objectCreate=function(s,d){if(objectCreateIsDefined)return Object.create(s,d);var c=function(){};c.prototype=s;var h=new c;if(typeof d=="undefined")return h;if(typeof d=="null")throw new Error("PropertyDescriptors must not be null.");if(typeof d=="object")for(var v in d)hasOwnProperty(d,v)&&(h[v]=d[v].value);return h};helpers.objectCreate=objectCreate,function(a){a.__esModule=void 0,a.__esModule=!0;var s=helpers,d=s.setPrototypeOf,c=s.getPrototypeOf,h=s.defineProperty,v=s.objectCreate,y=new Error().toString()==="[object Error]",b="";function _(T){var I=this.constructor,N=I.name||function(){var D=I.toString().match(/^function\s*([^\s(]+)/);return D===null?b||"Error":D[1]}(),A=N==="Error",V=A?b:N,$=Error.apply(this,arguments);if(d($,c(this)),!($ instanceof I)||!($ instanceof _)){var $=this;Error.apply(this,arguments),h($,"message",{configurable:!0,enumerable:!1,value:T,writable:!0})}if(h($,"name",{configurable:!0,enumerable:!1,value:V,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace($,A?_:I),$.stack===void 0){var L=new Error(T);L.name=$.name,$.stack=L.stack}return y&&h($,"toString",{configurable:!0,enumerable:!1,value:function(){return(this.name||"Error")+(typeof this.message=="undefined"?"":": "+this.message)},writable:!0}),$}b=_.name||"ExtendableError",_.prototype=v(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),a.ExtendableError=_,a.default=a.ExtendableError}(cjs),Object.defineProperty(ClientError$1,"__esModule",{value:!0}),ClientError$1.ClientError=void 0;const ts_error_1$1=cjs,Status_1$1=Status;class ClientError extends ts_error_1$1.ExtendableError{constructor(s,d,c){super(`${s} ${Status_1$1.Status[d]}: ${c}`),this.path=s,this.code=d,this.details=c,this.name="ClientError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ClientError",{value:!0})}static[Symbol.hasInstance](s){return this!==ClientError?this.prototype.isPrototypeOf(s):typeof s=="object"&&s!==null&&(s.constructor===ClientError||s["@@nice-grpc:ClientError"]===!0||s.name==="ClientError"&&s["@@nice-grpc"]===!0)}}ClientError$1.ClientError=ClientError;var CallContext={};Object.defineProperty(CallContext,"__esModule",{value:!0});var ServerMiddleware={};Object.defineProperty(ServerMiddleware,"__esModule",{value:!0});var composeServerMiddleware$1={};Object.defineProperty(composeServerMiddleware$1,"__esModule",{value:!0}),composeServerMiddleware$1.composeServerMiddleware=void 0;function composeServerMiddleware(a,s){return(d,c)=>a({...d,next:(h,v)=>s({...d,request:h},v)},c)}composeServerMiddleware$1.composeServerMiddleware=composeServerMiddleware;var ServerError$1={};Object.defineProperty(ServerError$1,"__esModule",{value:!0}),ServerError$1.ServerError=void 0;const ts_error_1=cjs,Status_1=Status;class ServerError extends ts_error_1.ExtendableError{constructor(s,d){super(`${Status_1.Status[s]}: ${d}`),this.code=s,this.details=d,this.name="ServerError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ServerError",{value:!0})}static[Symbol.hasInstance](s){return this!==ServerError?this.prototype.isPrototypeOf(s):typeof s=="object"&&s!==null&&(s.constructor===ServerError||s["@@nice-grpc:ServerError"]===!0||s.name==="ServerError"&&s["@@nice-grpc"]===!0)}}ServerError$1.ServerError=ServerError,function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(c,h,v,y){y===void 0&&(y=v);var b=Object.getOwnPropertyDescriptor(h,v);(!b||("get"in b?!h.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return h[v]}}),Object.defineProperty(c,y,b)}:function(c,h,v,y){y===void 0&&(y=v),c[y]=h[v]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(c,h){for(var v in c)v!=="default"&&!Object.prototype.hasOwnProperty.call(h,v)&&s(h,c,v)};Object.defineProperty(a,"__esModule",{value:!0}),d(Metadata,a),d(Status,a),d(MethodDescriptor,a),d(CallOptions,a),d(ClientMiddleware,a),d(composeClientMiddleware$1,a),d(ClientError$1,a),d(CallContext,a),d(ServerMiddleware,a),d(composeServerMiddleware$1,a),d(ServerError$1,a)}(lib);var serviceDefinitions={},grpcWeb={};Object.defineProperty(grpcWeb,"__esModule",{value:!0}),grpcWeb.isGrpcWebServiceDefinition=grpcWeb.fromGrpcWebServiceDefinition=void 0;function fromGrpcWebServiceDefinition(a){const s={};for(const[d,c]of Object.entries(a)){if(d==="serviceName")continue;const h=c;s[uncapitalize(d)]={path:`/${a.serviceName}/${d}`,requestStream:h.requestStream,responseStream:h.responseStream,requestDeserialize:h.requestType.deserializeBinary,requestSerialize:v=>v.serializeBinary(),responseDeserialize:h.responseType.deserializeBinary,responseSerialize:v=>v.serializeBinary(),options:{}}}return s}grpcWeb.fromGrpcWebServiceDefinition=fromGrpcWebServiceDefinition;function isGrpcWebServiceDefinition(a){return"prototype"in a}grpcWeb.isGrpcWebServiceDefinition=isGrpcWebServiceDefinition;function uncapitalize(a){return a.length===0?a:a[0].toLowerCase()+a.slice(1)}var tsProto={};Object.defineProperty(tsProto,"__esModule",{value:!0}),tsProto.isTsProtoServiceDefinition=tsProto.fromTsProtoServiceDefinition=void 0;function fromTsProtoServiceDefinition(a){const s={};for(const[d,c]of Object.entries(a.methods)){const h=c.requestType.encode,v=c.requestType.fromPartial,y=c.responseType.encode,b=c.responseType.fromPartial;s[d]={path:`/${a.fullName}/${c.name}`,requestStream:c.requestStream,responseStream:c.responseStream,requestDeserialize:c.requestType.decode,requestSerialize:v!=null?_=>h(v(_)).finish():_=>h(_).finish(),responseDeserialize:c.responseType.decode,responseSerialize:b!=null?_=>y(b(_)).finish():_=>y(_).finish(),options:c.options}}return s}tsProto.fromTsProtoServiceDefinition=fromTsProtoServiceDefinition;function isTsProtoServiceDefinition(a){return"name"in a&&"fullName"in a&&"methods"in a}tsProto.isTsProtoServiceDefinition=isTsProtoServiceDefinition,Object.defineProperty(serviceDefinitions,"__esModule",{value:!0}),serviceDefinitions.toGrpcWebMethodDefinition=serviceDefinitions.normalizeServiceDefinition=void 0;const grpc_web_1$5=grpcWeb,ts_proto_1=tsProto;function normalizeServiceDefinition(a){return(0,grpc_web_1$5.isGrpcWebServiceDefinition)(a)?(0,grpc_web_1$5.fromGrpcWebServiceDefinition)(a):(0,ts_proto_1.isTsProtoServiceDefinition)(a)?(0,ts_proto_1.fromTsProtoServiceDefinition)(a):a}serviceDefinitions.normalizeServiceDefinition=normalizeServiceDefinition;function toGrpcWebMethodDefinition(a){const[,s,d]=a.path.split("/");return{service:{serviceName:s},methodName:d,requestStream:a.requestStream,responseStream:a.responseStream,requestType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(c){return a.requestDeserialize(c)}},responseType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(c){return a.responseDeserialize(c)}}}}serviceDefinitions.toGrpcWebMethodDefinition=toGrpcWebMethodDefinition;var channel={};Object.defineProperty(channel,"__esModule",{value:!0}),channel.createChannel=void 0;function createChannel(a,s){return{address:a,transport:s}}channel.createChannel=createChannel;var ClientFactory={},createBidiStreamingMethod$1={},grpcWebClient_umd={exports:{}};(function(a,s){(function(d,c){a.exports=c()})(commonjsGlobal$1,function(){return d={418:function(h,v){(function(y,b){for(var _ in b)y[_]=b[_]})(v,function(y){var b={};function _(T){if(b[T])return b[T].exports;var I=b[T]={i:T,l:!1,exports:{}};return y[T].call(I.exports,I,I.exports,_),I.l=!0,I.exports}return _.m=y,_.c=b,_.i=function(T){return T},_.d=function(T,I,N){_.o(T,I)||Object.defineProperty(T,I,{configurable:!1,enumerable:!0,get:N})},_.n=function(T){var I=T&&T.__esModule?function(){return T.default}:function(){return T};return _.d(I,"a",I),I},_.o=function(T,I){return Object.prototype.hasOwnProperty.call(T,I)},_.p="",_(_.s=1)}([function(y,b,_){Object.defineProperty(b,"__esModule",{value:!0});var T=_(3),I=function(){function N(A,V){A===void 0&&(A={}),V===void 0&&(V={splitValues:!1});var $,L=this;this.headersMap={},A&&(typeof Headers!="undefined"&&A instanceof Headers?T.getHeaderKeys(A).forEach(function(D){T.getHeaderValues(A,D).forEach(function(H){V.splitValues?L.append(D,T.splitHeaderValue(H)):L.append(D,H)})}):typeof($=A)=="object"&&typeof $.headersMap=="object"&&typeof $.forEach=="function"?A.forEach(function(D,H){L.append(D,H)}):typeof Map!="undefined"&&A instanceof Map?A.forEach(function(D,H){L.append(H,D)}):typeof A=="string"?this.appendFromString(A):typeof A=="object"&&Object.getOwnPropertyNames(A).forEach(function(D){var H=A[D];Array.isArray(H)?H.forEach(function(O){L.append(D,O)}):L.append(D,H)}))}return N.prototype.appendFromString=function(A){for(var V=A.split(`\r
`),$=0;$<V.length;$++){var L=V[$],D=L.indexOf(":");if(D>0){var H=L.substring(0,D).trim(),O=L.substring(D+1).trim();this.append(H,O)}}},N.prototype.delete=function(A,V){var $=T.normalizeName(A);if(V===void 0)delete this.headersMap[$];else{var L=this.headersMap[$];if(L){var D=L.indexOf(V);D>=0&&L.splice(D,1),L.length===0&&delete this.headersMap[$]}}},N.prototype.append=function(A,V){var $=this,L=T.normalizeName(A);Array.isArray(this.headersMap[L])||(this.headersMap[L]=[]),Array.isArray(V)?V.forEach(function(D){$.headersMap[L].push(T.normalizeValue(D))}):this.headersMap[L].push(T.normalizeValue(V))},N.prototype.set=function(A,V){var $=T.normalizeName(A);if(Array.isArray(V)){var L=[];V.forEach(function(D){L.push(T.normalizeValue(D))}),this.headersMap[$]=L}else this.headersMap[$]=[T.normalizeValue(V)]},N.prototype.has=function(A,V){var $=this.headersMap[T.normalizeName(A)];if(!Array.isArray($))return!1;if(V!==void 0){var L=T.normalizeValue(V);return $.indexOf(L)>=0}return!0},N.prototype.get=function(A){var V=this.headersMap[T.normalizeName(A)];return V!==void 0?V.concat():[]},N.prototype.forEach=function(A){var V=this;Object.getOwnPropertyNames(this.headersMap).forEach(function($){A($,V.headersMap[$])},this)},N.prototype.toHeaders=function(){if(typeof Headers!="undefined"){var A=new Headers;return this.forEach(function(V,$){$.forEach(function(L){A.append(V,L)})}),A}throw new Error("Headers class is not defined")},N}();b.BrowserHeaders=I},function(y,b,_){Object.defineProperty(b,"__esModule",{value:!0});var T=_(0);b.BrowserHeaders=T.BrowserHeaders},function(y,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.iterateHeaders=function(T,I){for(var N=T[Symbol.iterator](),A=N.next();!A.done;)I(A.value[0]),A=N.next()},b.iterateHeadersKeys=function(T,I){for(var N=T.keys(),A=N.next();!A.done;)I(A.value),A=N.next()}},function(y,b,_){Object.defineProperty(b,"__esModule",{value:!0});var T=_(2);b.normalizeName=function(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()},b.normalizeValue=function(I){return typeof I!="string"&&(I=String(I)),I},b.getHeaderValues=function(I,N){var A=I;if(A instanceof Headers&&A.getAll)return A.getAll(N);var V=A.get(N);return V&&typeof V=="string"?[V]:V},b.getHeaderKeys=function(I){var N=I,A={},V=[];return N.keys?T.iterateHeadersKeys(N,function($){A[$]||(A[$]=!0,V.push($))}):N.forEach?N.forEach(function($,L){A[L]||(A[L]=!0,V.push(L))}):T.iterateHeaders(N,function($){var L=$[0];A[L]||(A[L]=!0,V.push(L))}),V},b.splitHeaderValue=function(I){var N=[];return I.split(", ").forEach(function(A){A.split(",").forEach(function(V){N.push(V)})}),N}}]))},617:function(h,v,y){Object.defineProperty(v,"__esModule",{value:!0}),v.ChunkParser=v.ChunkType=v.encodeASCII=v.decodeASCII=void 0;var b,_=y(65);function T(D){return(H=D)===9||H===10||H===13||D>=32&&D<=126;var H}function I(D){for(var H=0;H!==D.length;++H)if(!T(D[H]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(D))}function N(D){return(128&D.getUint8(0))==128}function A(D){return D.getUint32(1,!1)}function V(D,H,O){return D.byteLength-H>=O}function $(D,H,O){if(D.slice)return D.slice(H,O);var x=D.length;O!==void 0&&(x=O);for(var j=new Uint8Array(x-H),X=0,te=H;te<x;te++)j[X++]=D[te];return j}v.decodeASCII=I,v.encodeASCII=function(D){for(var H=new Uint8Array(D.length),O=0;O!==D.length;++O){var x=D.charCodeAt(O);if(!T(x))throw new Error("Metadata contains invalid ASCII");H[O]=x}return H},function(D){D[D.MESSAGE=1]="MESSAGE",D[D.TRAILERS=2]="TRAILERS"}(b=v.ChunkType||(v.ChunkType={}));var L=function(){function D(){this.buffer=null,this.position=0}return D.prototype.parse=function(H,O){if(H.length===0&&O)return[];var x,j=[];if(this.buffer==null)this.buffer=H,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=H,this.position=0;else{var X=this.buffer.byteLength-this.position,te=new Uint8Array(X+H.byteLength),se=$(this.buffer,this.position);te.set(se,0);var oe=new Uint8Array(H);te.set(oe,X),this.buffer=te,this.position=0}for(;;){if(!V(this.buffer,this.position,5))return j;var F=$(this.buffer,this.position,this.position+5),Z=new DataView(F.buffer,F.byteOffset,F.byteLength),ne=A(Z);if(!V(this.buffer,this.position,5+ne))return j;var M=$(this.buffer,this.position+5,this.position+5+ne);if(this.position+=5+ne,N(Z))return j.push({chunkType:b.TRAILERS,trailers:(x=M,new _.Metadata(I(x)))}),j;j.push({chunkType:b.MESSAGE,data:M})}},D}();v.ChunkParser=L},8:function(h,v){var y;Object.defineProperty(v,"__esModule",{value:!0}),v.httpStatusToCode=v.Code=void 0,function(b){b[b.OK=0]="OK",b[b.Canceled=1]="Canceled",b[b.Unknown=2]="Unknown",b[b.InvalidArgument=3]="InvalidArgument",b[b.DeadlineExceeded=4]="DeadlineExceeded",b[b.NotFound=5]="NotFound",b[b.AlreadyExists=6]="AlreadyExists",b[b.PermissionDenied=7]="PermissionDenied",b[b.ResourceExhausted=8]="ResourceExhausted",b[b.FailedPrecondition=9]="FailedPrecondition",b[b.Aborted=10]="Aborted",b[b.OutOfRange=11]="OutOfRange",b[b.Unimplemented=12]="Unimplemented",b[b.Internal=13]="Internal",b[b.Unavailable=14]="Unavailable",b[b.DataLoss=15]="DataLoss",b[b.Unauthenticated=16]="Unauthenticated"}(y=v.Code||(v.Code={})),v.httpStatusToCode=function(b){switch(b){case 0:return y.Internal;case 200:return y.OK;case 400:return y.InvalidArgument;case 401:return y.Unauthenticated;case 403:return y.PermissionDenied;case 404:return y.NotFound;case 409:return y.Aborted;case 412:return y.FailedPrecondition;case 429:return y.ResourceExhausted;case 499:return y.Canceled;case 500:return y.Unknown;case 501:return y.Unimplemented;case 503:return y.Unavailable;case 504:return y.DeadlineExceeded;default:return y.Unknown}}},934:function(h,v,y){Object.defineProperty(v,"__esModule",{value:!0}),v.client=void 0;var b=y(65),_=y(617),T=y(8),I=y(346),N=y(57),A=y(882);v.client=function(L,D){return new V(L,D)};var V=function(){function L(D,H){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new _.ChunkParser,this.methodDefinition=D,this.props=H,this.createTransport()}return L.prototype.createTransport=function(){var D=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,H={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:D,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(H):this.transport=N.makeDefaultTransport(H)},L.prototype.onTransportHeaders=function(D,H){if(this.props.debug&&I.debug("onHeaders",D,H),this.closed)this.props.debug&&I.debug("grpc.onHeaders received after request was closed - ignoring");else if(H!==0){this.responseHeaders=D,this.props.debug&&I.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var O=$(D);this.props.debug&&I.debug("onHeaders.gRPCStatus",O);var x=O&&O>=0?O:T.httpStatusToCode(H);this.props.debug&&I.debug("onHeaders.code",x);var j=D.get("grpc-message")||[];if(this.props.debug&&I.debug("onHeaders.gRPCMessage",j),this.rawOnHeaders(D),x!==T.Code.OK){var X=this.decodeGRPCStatus(j[0]);this.rawOnError(x,X,D)}}},L.prototype.onTransportChunk=function(D){var H=this;if(this.closed)this.props.debug&&I.debug("grpc.onChunk received after request was closed - ignoring");else{var O=[];try{O=this.parser.parse(D)}catch(x){return this.props.debug&&I.debug("onChunk.parsing error",x,x.message),void this.rawOnError(T.Code.Internal,"parsing error: "+x.message)}O.forEach(function(x){if(x.chunkType===_.ChunkType.MESSAGE){var j=H.methodDefinition.responseType.deserializeBinary(x.data);H.rawOnMessage(j)}else x.chunkType===_.ChunkType.TRAILERS&&(H.responseHeaders?(H.responseTrailers=new b.Metadata(x.trailers),H.props.debug&&I.debug("onChunk.trailers",H.responseTrailers)):(H.responseHeaders=new b.Metadata(x.trailers),H.rawOnHeaders(H.responseHeaders)))})}},L.prototype.onTransportEnd=function(){if(this.props.debug&&I.debug("grpc.onEnd"),this.closed)this.props.debug&&I.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var D=$(this.responseTrailers);if(D!==null){var H=this.responseTrailers.get("grpc-message"),O=this.decodeGRPCStatus(H[0]);this.rawOnEnd(D,O,this.responseTrailers)}else this.rawOnError(T.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(T.Code.Unknown,"Response closed without headers");var x=$(this.responseHeaders),j=this.responseHeaders.get("grpc-message");if(this.props.debug&&I.debug("grpc.headers only response ",x,j),x===null)return void this.rawOnEnd(T.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var X=this.decodeGRPCStatus(j[0]);this.rawOnEnd(x,X,this.responseHeaders)}},L.prototype.decodeGRPCStatus=function(D){if(!D)return"";try{return decodeURIComponent(D)}catch{return D}},L.prototype.rawOnEnd=function(D,H,O){var x=this;this.props.debug&&I.debug("rawOnEnd",D,H,O),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(j){if(!x.closed)try{j(D,H,O)}catch(X){setTimeout(function(){throw X},0)}}))},L.prototype.rawOnHeaders=function(D){this.props.debug&&I.debug("rawOnHeaders",D),this.completed||this.onHeadersCallbacks.forEach(function(H){try{H(D)}catch(O){setTimeout(function(){throw O},0)}})},L.prototype.rawOnError=function(D,H,O){var x=this;O===void 0&&(O=new b.Metadata),this.props.debug&&I.debug("rawOnError",D,H),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(j){if(!x.closed)try{j(D,H,O)}catch(X){setTimeout(function(){throw X},0)}}))},L.prototype.rawOnMessage=function(D){var H=this;this.props.debug&&I.debug("rawOnMessage",D.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(O){if(!H.closed)try{O(D)}catch(x){setTimeout(function(){throw x},0)}})},L.prototype.onHeaders=function(D){this.onHeadersCallbacks.push(D)},L.prototype.onMessage=function(D){this.onMessageCallbacks.push(D)},L.prototype.onEnd=function(D){this.onEndCallbacks.push(D)},L.prototype.start=function(D){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var H=new b.Metadata(D||{});H.set("content-type","application/grpc-web+proto"),H.set("x-grpc-web","1"),this.transport.start(H)},L.prototype.send=function(D){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var H=A.frameRequest(D);this.transport.sendMessage(H)},L.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},L.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&I.debug("request.abort aborting request"),this.transport.cancel()},L}();function $(L){var D=L.get("grpc-status")||[];if(D.length>0)try{var H=D[0];return parseInt(H,10)}catch{return null}return null}},346:function(h,v){Object.defineProperty(v,"__esModule",{value:!0}),v.debug=void 0,v.debug=function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];console.debug?console.debug.apply(null,y):console.log.apply(null,y)}},607:function(h,v,y){Object.defineProperty(v,"__esModule",{value:!0}),v.grpc=void 0;var b,_=y(418),T=y(57),I=y(229),N=y(540),A=y(210),V=y(859),$=y(8),L=y(938),D=y(35),H=y(934);(b=v.grpc||(v.grpc={})).setDefaultTransport=T.setDefaultTransportFactory,b.CrossBrowserHttpTransport=V.CrossBrowserHttpTransport,b.FetchReadableStreamTransport=I.FetchReadableStreamTransport,b.XhrTransport=A.XhrTransport,b.WebsocketTransport=N.WebsocketTransport,b.Code=$.Code,b.Metadata=_.BrowserHeaders,b.client=function(O,x){return H.client(O,x)},b.invoke=L.invoke,b.unary=D.unary},938:function(h,v,y){Object.defineProperty(v,"__esModule",{value:!0}),v.invoke=void 0;var b=y(934);v.invoke=function(_,T){if(_.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var I=b.client(_,{host:T.host,transport:T.transport,debug:T.debug});return T.onHeaders&&I.onHeaders(T.onHeaders),T.onMessage&&I.onMessage(T.onMessage),T.onEnd&&I.onEnd(T.onEnd),I.start(T.metadata),I.send(T.request),I.finishSend(),{close:function(){I.close()}}}},65:function(h,v,y){Object.defineProperty(v,"__esModule",{value:!0}),v.Metadata=void 0;var b=y(418);Object.defineProperty(v,"Metadata",{enumerable:!0,get:function(){return b.BrowserHeaders}})},57:function(h,v,y){Object.defineProperty(v,"__esModule",{value:!0}),v.makeDefaultTransport=v.setDefaultTransportFactory=void 0;var b=y(859),_=function(T){return b.CrossBrowserHttpTransport({withCredentials:!1})(T)};v.setDefaultTransportFactory=function(T){_=T},v.makeDefaultTransport=function(T){return _(T)}},229:function(h,v,y){var b=this&&this.__assign||function(){return(b=Object.assign||function(N){for(var A,V=1,$=arguments.length;V<$;V++)for(var L in A=arguments[V])Object.prototype.hasOwnProperty.call(A,L)&&(N[L]=A[L]);return N}).apply(this,arguments)};Object.defineProperty(v,"__esModule",{value:!0}),v.detectFetchSupport=v.FetchReadableStreamTransport=void 0;var _=y(65),T=y(346);v.FetchReadableStreamTransport=function(N){return function(A){return function(V,$){return V.debug&&T.debug("fetchRequest",V),new I(V,$)}(A,N)}};var I=function(){function N(A,V){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=A,this.init=V}return N.prototype.pump=function(A,V){var $=this;if(this.reader=A,this.cancelled)return this.options.debug&&T.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(L){$.options.debug&&T.debug("Fetch.pump.reader.cancel exception",L)});this.reader.read().then(function(L){if(L.done)return $.options.onEnd(),V;$.options.onChunk(L.value),$.pump($.reader,V)}).catch(function(L){$.cancelled?$.options.debug&&T.debug("Fetch.catch - request cancelled"):($.cancelled=!0,$.options.debug&&T.debug("Fetch.catch",L.message),$.options.onEnd(L))})},N.prototype.send=function(A){var V=this;fetch(this.options.url,b(b({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:A,signal:this.controller&&this.controller.signal})).then(function($){if(V.options.debug&&T.debug("Fetch.response",$),V.options.onHeaders(new _.Metadata($.headers),$.status),!$.body)return $;V.pump($.body.getReader(),$)}).catch(function($){V.cancelled?V.options.debug&&T.debug("Fetch.catch - request cancelled"):(V.cancelled=!0,V.options.debug&&T.debug("Fetch.catch",$.message),V.options.onEnd($))})},N.prototype.sendMessage=function(A){this.send(A)},N.prototype.finishSend=function(){},N.prototype.start=function(A){this.metadata=A},N.prototype.cancel=function(){var A=this;this.cancelled?this.options.debug&&T.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&T.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&T.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&T.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(V){A.options.debug&&T.debug("Fetch.cancel.reader.cancel exception",V)})):this.options.debug&&T.debug("Fetch.cancel before reader"))},N}();v.detectFetchSupport=function(){return typeof Response!="undefined"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(h,v,y){Object.defineProperty(v,"__esModule",{value:!0}),v.CrossBrowserHttpTransport=void 0;var b=y(229),_=y(210);v.CrossBrowserHttpTransport=function(T){if(b.detectFetchSupport()){var I={credentials:T.withCredentials?"include":"same-origin"};return b.FetchReadableStreamTransport(I)}return _.XhrTransport({withCredentials:T.withCredentials})}},210:function(h,v,y){var b,_=this&&this.__extends||(b=function(D,H){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,x){O.__proto__=x}||function(O,x){for(var j in x)Object.prototype.hasOwnProperty.call(x,j)&&(O[j]=x[j])})(D,H)},function(D,H){function O(){this.constructor=D}b(D,H),D.prototype=H===null?Object.create(H):(O.prototype=H.prototype,new O)});Object.defineProperty(v,"__esModule",{value:!0}),v.stringToArrayBuffer=v.MozChunkedArrayBufferXHR=v.XHR=v.XhrTransport=void 0;var T=y(65),I=y(346),N=y(849);v.XhrTransport=function(D){return function(H){if(N.detectMozXHRSupport())return new V(H,D);if(N.detectXHROverrideMimeTypeSupport())return new A(H,D);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var A=function(){function D(H,O){this.options=H,this.init=O}return D.prototype.onProgressEvent=function(){this.options.debug&&I.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var H=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var O=L(H);this.options.onChunk(O)},D.prototype.onLoadEvent=function(){this.options.debug&&I.debug("XHR.onLoadEvent"),this.options.onEnd()},D.prototype.onStateChange=function(){this.options.debug&&I.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new T.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},D.prototype.sendMessage=function(H){this.xhr.send(H)},D.prototype.finishSend=function(){},D.prototype.start=function(H){var O=this;this.metadata=H;var x=new XMLHttpRequest;this.xhr=x,x.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(j,X){x.setRequestHeader(j,X.join(", "))}),x.withCredentials=Boolean(this.init.withCredentials),x.addEventListener("readystatechange",this.onStateChange.bind(this)),x.addEventListener("progress",this.onProgressEvent.bind(this)),x.addEventListener("loadend",this.onLoadEvent.bind(this)),x.addEventListener("error",function(j){O.options.debug&&I.debug("XHR.error",j),O.options.onEnd(j.error)})},D.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},D.prototype.cancel=function(){this.options.debug&&I.debug("XHR.abort"),this.xhr.abort()},D}();v.XHR=A;var V=function(D){function H(){return D!==null&&D.apply(this,arguments)||this}return _(H,D),H.prototype.configureXhr=function(){this.options.debug&&I.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},H.prototype.onProgressEvent=function(){var O=this.xhr.response;this.options.debug&&I.debug("MozXHR.onProgressEvent: ",new Uint8Array(O)),this.options.onChunk(new Uint8Array(O))},H}(A);function $(D,H){var O=D.charCodeAt(H);if(O>=55296&&O<=56319){var x=D.charCodeAt(H+1);x>=56320&&x<=57343&&(O=65536+(O-55296<<10)+(x-56320))}return O}function L(D){for(var H=new Uint8Array(D.length),O=0,x=0;x<D.length;x++){var j=String.prototype.codePointAt?D.codePointAt(x):$(D,x);H[O++]=255&j}return H}v.MozChunkedArrayBufferXHR=V,v.stringToArrayBuffer=L},849:function(h,v){var y;function b(){if(y!==void 0)return y;if(XMLHttpRequest){y=new XMLHttpRequest;try{y.open("GET","https://localhost")}catch{}}return y}function _(T){var I=b();if(!I)return!1;try{return I.responseType=T,I.responseType===T}catch{}return!1}Object.defineProperty(v,"__esModule",{value:!0}),v.detectXHROverrideMimeTypeSupport=v.detectMozXHRSupport=v.xhrSupportsResponseType=void 0,v.xhrSupportsResponseType=_,v.detectMozXHRSupport=function(){return typeof XMLHttpRequest!="undefined"&&_("moz-chunked-arraybuffer")},v.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest!="undefined"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(h,v,y){Object.defineProperty(v,"__esModule",{value:!0}),v.WebsocketTransport=void 0;var b,_=y(346),T=y(617);(function(N){N[N.FINISH_SEND=1]="FINISH_SEND"})(b||(b={}));var I=new Uint8Array([1]);v.WebsocketTransport=function(){return function(N){return function(A){A.debug&&_.debug("websocketRequest",A);var V,$=function(H){if(H.substr(0,8)==="https://")return"wss://"+H.substr(8);if(H.substr(0,7)==="http://")return"ws://"+H.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(A.url),L=[];function D(H){if(H===b.FINISH_SEND)V.send(I);else{var O=H,x=new Int8Array(O.byteLength+1);x.set(new Uint8Array([0])),x.set(O,1),V.send(x)}}return{sendMessage:function(H){V&&V.readyState!==V.CONNECTING?D(H):L.push(H)},finishSend:function(){V&&V.readyState!==V.CONNECTING?D(b.FINISH_SEND):L.push(b.FINISH_SEND)},start:function(H){(V=new WebSocket($,["grpc-websockets"])).binaryType="arraybuffer",V.onopen=function(){var O;A.debug&&_.debug("websocketRequest.onopen"),V.send((O="",H.forEach(function(x,j){O+=x+": "+j.join(", ")+`\r
`}),T.encodeASCII(O))),L.forEach(function(x){D(x)})},V.onclose=function(O){A.debug&&_.debug("websocketRequest.onclose",O),A.onEnd()},V.onerror=function(O){A.debug&&_.debug("websocketRequest.onerror",O)},V.onmessage=function(O){A.onChunk(new Uint8Array(O.data))}},cancel:function(){A.debug&&_.debug("websocket.abort"),V.close()}}}(N)}}},35:function(h,v,y){Object.defineProperty(v,"__esModule",{value:!0}),v.unary=void 0;var b=y(65),_=y(934);v.unary=function(T,I){if(T.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(T.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var N=null,A=null,V=_.client(T,{host:I.host,transport:I.transport,debug:I.debug});return V.onHeaders(function($){N=$}),V.onMessage(function($){A=$}),V.onEnd(function($,L,D){I.onEnd({status:$,statusMessage:L,headers:N||new b.Metadata,message:A,trailers:D})}),V.start(I.metadata),V.send(I.request),V.finishSend(),{close:function(){V.close()}}}},882:function(h,v){Object.defineProperty(v,"__esModule",{value:!0}),v.frameRequest=void 0,v.frameRequest=function(y){var b=y.serializeBinary(),_=new ArrayBuffer(b.byteLength+5);return new DataView(_,1,4).setUint32(0,b.length,!1),new Uint8Array(_,5).set(b),new Uint8Array(_)}}},c={},function h(v){if(c[v])return c[v].exports;var y=c[v]={exports:{}};return d[v].call(y.exports,y,y.exports,h),y.exports}(607);var d,c})})(grpcWebClient_umd);class AbortError extends Error{constructor(){super("The operation has been aborted"),this.message="The operation has been aborted",this.name="AbortError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}}function isAbortError(a){return typeof a=="object"&&a!==null&&a.name==="AbortError"}function throwIfAborted(a){if(a.aborted)throw new AbortError}function rethrowAbortError(a){if(isAbortError(a))throw a}function catchAbortError(a){if(!isAbortError(a))throw a}function execute(a,s){return new Promise((d,c)=>{if(a.aborted){c(new AbortError);return}let h,v=!1;function y(){v||(v=!0,h!=null&&h())}const b=s(_=>{d(_),y()},_=>{c(_),y()});if(!v){const _=()=>{const T=b();T==null?c(new AbortError):T.then(()=>{c(new AbortError)},I=>{c(I)}),y()};a.addEventListener("abort",_),h=()=>{a.removeEventListener("abort",_)}}})}function abortable(a,s){if(a.aborted){const d=()=>{};s.then(d,d)}return execute(a,(d,c)=>(s.then(d,c),()=>{}))}function delay$1(a,s){return execute(a,d=>{const c=typeof s=="number"?s:s.getTime()-Date.now(),h=setTimeout(d,c);return()=>{clearTimeout(h)}})}function forever(a){return execute(a,()=>()=>{})}function waitForEvent(a,s,d,c){return execute(a,h=>{let v,y=!1;return v=listen(s,d,(..._)=>{h(_.length>1?_:_[0]),y=!0,v!=null&&v()},c),y&&v(),()=>{y=!0,v!=null&&v()}})}function listen(a,s,d,c){if(isEventTarget(a))return a.addEventListener(s,d,c),()=>a.removeEventListener(s,d,c);if(isJQueryStyleEventEmitter(a))return a.on(s,d),()=>a.off(s,d);if(isNodeStyleEventEmitter(a))return a.addListener(s,d),()=>a.removeListener(s,d);throw new Error("Invalid event target")}function isNodeStyleEventEmitter(a){return isFunction$2(a.addListener)&&isFunction$2(a.removeListener)}function isJQueryStyleEventEmitter(a){return isFunction$2(a.on)&&isFunction$2(a.off)}function isEventTarget(a){return isFunction$2(a.addEventListener)&&isFunction$2(a.removeEventListener)}const isFunction$2=a=>typeof a=="function";var browser$3={exports:{}};const _global=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!_global)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!_global.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');browser$3.exports=_global.AbortController,browser$3.exports.default=_global.AbortController;var AbortController$1=browser$3.exports;function all(a,s){return new Promise((d,c)=>{if(a.aborted){c(new AbortError);return}const h=new AbortController$1,v=s(h.signal);if(v.length===0){d([]);return}const y=()=>{h.abort()};a.addEventListener("abort",y);let b;const _=new Array(v.length);let T=0;function I(){T+=1,T===v.length&&(a.removeEventListener("abort",y),b!=null?c(b.reason):d(_))}for(const[N,A]of v.entries())A.then(V=>{_[N]=V,I()},V=>{h.abort(),(b==null||!isAbortError(V)&&isAbortError(b.reason))&&(b={reason:V}),I()})})}function race$2(a,s){return new Promise((d,c)=>{if(a.aborted){c(new AbortError);return}const h=new AbortController$1,v=s(h.signal),y=()=>{h.abort()};a.addEventListener("abort",y);let b=0;function _(I){h.abort(),b+=1,b===v.length&&(a.removeEventListener("abort",y),I.status==="fulfilled"?d(I.value):c(I.reason))}let T;for(const I of v)I.then(N=>{T==null&&(T={status:"fulfilled",value:N}),_(T)},N=>{(T==null||!isAbortError(N)&&(T.status==="fulfilled"||isAbortError(T.reason)))&&(T={status:"rejected",reason:N}),_(T)})})}async function retry$1(a,s,d={}){const{baseMs:c=1e3,maxDelayMs:h=15e3,onError:v,maxAttempts:y=1/0}=d;let b=0;const _=()=>{b=-1};for(;;)try{return await s(a,b,_)}catch(T){if(rethrowAbortError(T),b>=y)throw T;let I;if(b===-1)I=0;else{const N=Math.min(h,Math.pow(2,b)*c);I=Math.round(N*(1+Math.random())/2)}v&&v(T,b,I),I!==0&&await delay$1(a,I),b+=1}}function spawn(a,s){if(a.aborted)return Promise.reject(new AbortError);const d=[],c=new AbortController$1,h=c.signal,v=()=>{c.abort()};a.addEventListener("abort",v);const y=()=>{a.removeEventListener("abort",v)},b=new Set,_=()=>{for(const N of b)N.abort()};h.addEventListener("abort",_);const T=()=>{h.removeEventListener("abort",_)};let I=new Promise((N,A)=>{let V,$;L(D=>s(D,{defer(H){d.push(H)},fork:L})).join().then(D=>{c.abort(),V={value:D}},D=>{c.abort(),(!isAbortError(D)||$==null)&&($={error:D})});function L(D){if(h.aborted)return{abort(){},async join(){throw new AbortError}};const H=new AbortController$1,O=H.signal,x=D(O),j={abort(){H.abort()},join:()=>x};return b.add(j),x.catch(catchAbortError).catch(X=>{$={error:X},c.abort()}).finally(()=>{b.delete(j),b.size===0&&($!=null?A($.error):N(V.value))}),j}});return I=I.finally(()=>{y(),T();let N=Promise.resolve();for(let A=d.length-1;A>=0;A--)N=N.finally(d[A]);return N}),I}function run(a){const s=new AbortController$1,d=a(s.signal).catch(catchAbortError);return()=>(s.abort(),d)}var es=Object.freeze(Object.defineProperty({__proto__:null,abortable,AbortError,isAbortError,throwIfAborted,rethrowAbortError,catchAbortError,delay:delay$1,execute,forever,waitForEvent,all,race:race$2,retry:retry$1,spawn,run},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(es),AsyncSink$1={};Object.defineProperty(AsyncSink$1,"__esModule",{value:!0}),AsyncSink$1.AsyncSink=void 0;const ARRAY_VALUE="value",ARRAY_ERROR="error";class AsyncSink{constructor(){this._ended=!1,this._values=[],this._resolvers=[]}[Symbol.asyncIterator](){return this}write(s){this._push({type:ARRAY_VALUE,value:s})}error(s){this._push({type:ARRAY_ERROR,error:s})}_push(s){if(this._ended)throw new Error("AsyncSink already ended");if(this._resolvers.length>0){const{resolve:d,reject:c}=this._resolvers.shift();s.type===ARRAY_ERROR?c(s.error):d({done:!1,value:s.value})}else this._values.push(s)}next(){if(this._values.length>0){const{type:s,value:d,error:c}=this._values.shift();return s===ARRAY_ERROR?Promise.reject(c):Promise.resolve({done:!1,value:d})}return this._ended?Promise.resolve({done:!0}):new Promise((s,d)=>{this._resolvers.push({resolve:s,reject:d})})}end(){for(;this._resolvers.length>0;)this._resolvers.shift().resolve({done:!0});this._ended=!0}}AsyncSink$1.AsyncSink=AsyncSink;var isAsyncIterable$1={};Object.defineProperty(isAsyncIterable$1,"__esModule",{value:!0}),isAsyncIterable$1.isAsyncIterable=void 0;function isAsyncIterable(a){return a!=null&&Symbol.asyncIterator in a}isAsyncIterable$1.isAsyncIterable=isAsyncIterable;var convertMetadata={},base64$4={exports:{}};(function(a,s){(function(d,c){a.exports=c()})(typeof self!="undefined"?self:typeof window!="undefined"?window:commonjsGlobal$1,function(){var d="3.7.2",c=d,h=typeof atob=="function",v=typeof btoa=="function",y=typeof Buffer=="function",b=typeof TextDecoder=="function"?new TextDecoder:void 0,_=typeof TextEncoder=="function"?new TextEncoder:void 0,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",I=Array.prototype.slice.call(T),N=function(ue){var he={};return ue.forEach(function(_e,Ce){return he[_e]=Ce}),he}(I),A=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,V=String.fromCharCode.bind(String),$=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(ue,he){return he===void 0&&(he=function(_e){return _e}),new Uint8Array(Array.prototype.slice.call(ue,0).map(he))},L=function(ue){return ue.replace(/=/g,"").replace(/[+\/]/g,function(he){return he=="+"?"-":"_"})},D=function(ue){return ue.replace(/[^A-Za-z0-9\+\/]/g,"")},H=function(ue){for(var he,_e,Ce,Me,Be="",ze=ue.length%3,Ie=0;Ie<ue.length;){if((_e=ue.charCodeAt(Ie++))>255||(Ce=ue.charCodeAt(Ie++))>255||(Me=ue.charCodeAt(Ie++))>255)throw new TypeError("invalid character found");he=_e<<16|Ce<<8|Me,Be+=I[he>>18&63]+I[he>>12&63]+I[he>>6&63]+I[he&63]}return ze?Be.slice(0,ze-3)+"===".substring(ze):Be},O=v?function(ue){return btoa(ue)}:y?function(ue){return Buffer.from(ue,"binary").toString("base64")}:H,x=y?function(ue){return Buffer.from(ue).toString("base64")}:function(ue){for(var he=4096,_e=[],Ce=0,Me=ue.length;Ce<Me;Ce+=he)_e.push(V.apply(null,ue.subarray(Ce,Ce+he)));return O(_e.join(""))},j=function(ue,he){return he===void 0&&(he=!1),he?L(x(ue)):x(ue)},X=function(ue){if(ue.length<2){var he=ue.charCodeAt(0);return he<128?ue:he<2048?V(192|he>>>6)+V(128|he&63):V(224|he>>>12&15)+V(128|he>>>6&63)+V(128|he&63)}else{var he=65536+(ue.charCodeAt(0)-55296)*1024+(ue.charCodeAt(1)-56320);return V(240|he>>>18&7)+V(128|he>>>12&63)+V(128|he>>>6&63)+V(128|he&63)}},te=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,se=function(ue){return ue.replace(te,X)},oe=y?function(ue){return Buffer.from(ue,"utf8").toString("base64")}:_?function(ue){return x(_.encode(ue))}:function(ue){return O(se(ue))},F=function(ue,he){return he===void 0&&(he=!1),he?L(oe(ue)):oe(ue)},Z=function(ue){return F(ue,!0)},ne=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,M=function(ue){switch(ue.length){case 4:var he=(7&ue.charCodeAt(0))<<18|(63&ue.charCodeAt(1))<<12|(63&ue.charCodeAt(2))<<6|63&ue.charCodeAt(3),_e=he-65536;return V((_e>>>10)+55296)+V((_e&1023)+56320);case 3:return V((15&ue.charCodeAt(0))<<12|(63&ue.charCodeAt(1))<<6|63&ue.charCodeAt(2));default:return V((31&ue.charCodeAt(0))<<6|63&ue.charCodeAt(1))}},G=function(ue){return ue.replace(ne,M)},J=function(ue){if(ue=ue.replace(/\s+/g,""),!A.test(ue))throw new TypeError("malformed base64.");ue+="==".slice(2-(ue.length&3));for(var he,_e="",Ce,Me,Be=0;Be<ue.length;)he=N[ue.charAt(Be++)]<<18|N[ue.charAt(Be++)]<<12|(Ce=N[ue.charAt(Be++)])<<6|(Me=N[ue.charAt(Be++)]),_e+=Ce===64?V(he>>16&255):Me===64?V(he>>16&255,he>>8&255):V(he>>16&255,he>>8&255,he&255);return _e},ie=h?function(ue){return atob(D(ue))}:y?function(ue){return Buffer.from(ue,"base64").toString("binary")}:J,K=y?function(ue){return $(Buffer.from(ue,"base64"))}:function(ue){return $(ie(ue),function(he){return he.charCodeAt(0)})},Y=function(ue){return K(pe(ue))},ae=y?function(ue){return Buffer.from(ue,"base64").toString("utf8")}:b?function(ue){return b.decode(K(ue))}:function(ue){return G(ie(ue))},pe=function(ue){return D(ue.replace(/[-_]/g,function(he){return he=="-"?"+":"/"}))},Se=function(ue){return ae(pe(ue))},ye=function(ue){if(typeof ue!="string")return!1;var he=ue.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(he)||!/[^\s0-9a-zA-Z\-_]/.test(he)},w=function(ue){return{value:ue,enumerable:!1,writable:!0,configurable:!0}},z=function(){var ue=function(he,_e){return Object.defineProperty(String.prototype,he,w(_e))};ue("fromBase64",function(){return Se(this)}),ue("toBase64",function(he){return F(this,he)}),ue("toBase64URI",function(){return F(this,!0)}),ue("toBase64URL",function(){return F(this,!0)}),ue("toUint8Array",function(){return Y(this)})},re=function(){var ue=function(he,_e){return Object.defineProperty(Uint8Array.prototype,he,w(_e))};ue("toBase64",function(he){return j(this,he)}),ue("toBase64URI",function(){return j(this,!0)}),ue("toBase64URL",function(){return j(this,!0)})},me=function(){z(),re()},le={version:d,VERSION:c,atob:ie,atobPolyfill:J,btoa:O,btoaPolyfill:H,fromBase64:Se,toBase64:F,encode:F,encodeURI:Z,encodeURL:Z,utob:se,btou:G,decode:Se,isValid:ye,fromUint8Array:j,toUint8Array:Y,extendString:z,extendUint8Array:re,extendBuiltins:me};return le.Base64={},Object.keys(le).forEach(function(ue){return le.Base64[ue]=le[ue]}),le})})(base64$4),Object.defineProperty(convertMetadata,"__esModule",{value:!0}),convertMetadata.convertMetadataFromGrpcWeb=convertMetadata.convertMetadataToGrpcWeb=void 0;const grpc_web_1$4=grpcWebClient_umd.exports,nice_grpc_common_1$5=lib,js_base64_1=base64$4.exports;function convertMetadataToGrpcWeb(a){const s=new grpc_web_1$4.grpc.Metadata;for(const[d,c]of a)for(const h of c)s.append(d,typeof h=="string"?h:js_base64_1.Base64.fromUint8Array(h));return s}convertMetadata.convertMetadataToGrpcWeb=convertMetadataToGrpcWeb;function convertMetadataFromGrpcWeb(a){const s=(0,nice_grpc_common_1$5.Metadata)();for(const[d,c]of Object.entries(a.headersMap))s.set(d,d.endsWith("-bin")?c.map(h=>js_base64_1.Base64.toUint8Array(h)):c);return s}convertMetadata.convertMetadataFromGrpcWeb=convertMetadataFromGrpcWeb;var __importDefault$9=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createBidiStreamingMethod$1,"__esModule",{value:!0}),createBidiStreamingMethod$1.createBidiStreamingMethod=void 0;const nice_grpc_common_1$4=lib,grpc_web_1$3=grpcWebClient_umd.exports,abort_controller_x_1$4=require$$1$1,node_abort_controller_1$3=__importDefault$9(browser$3.exports),AsyncSink_1$1=AsyncSink$1,service_definitions_1$4=serviceDefinitions,isAsyncIterable_1$3=isAsyncIterable$1,convertMetadata_1$3=convertMetadata;function createBidiStreamingMethod(a,s,d,c){const h=(0,service_definitions_1$4.toGrpcWebMethodDefinition)(a),v={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*y(_,T){if(!(0,isAsyncIterable_1$3.isAsyncIterable)(_))throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method");const{metadata:I=(0,nice_grpc_common_1$4.Metadata)(),signal:N=new node_abort_controller_1$3.default().signal,onHeader:A,onTrailer:V}=T,$=new node_abort_controller_1$3.default,L=new AsyncSink_1$1.AsyncSink,D=grpc_web_1$3.grpc.client(h,{host:s.address,transport:s.transport});D.onHeaders(x=>{A==null||A((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(x))}),D.onMessage(x=>{L.write(x)}),D.onEnd((x,j,X)=>{V==null||V((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(X)),x===grpc_web_1$3.grpc.Code.OK?L.end():L.error(new nice_grpc_common_1$4.ClientError(a.path,+x,j))}),D.start((0,convertMetadata_1$3.convertMetadataToGrpcWeb)(I));let H;pipeRequest$1($.signal,_,D,a).then(()=>{D.finishSend()},x=>{(0,abort_controller_x_1$4.isAbortError)(x)||(H=x,D.close(),L.end())});const O=()=>{L.error(new abort_controller_x_1$4.AbortError),$.abort(),D.close()};N.addEventListener("abort",O);try{yield*L}finally{if($.abort(),N.removeEventListener("abort",O),(0,abort_controller_x_1$4.throwIfAborted)(N),H)throw H}}const b=d==null?y:(_,T)=>d({method:v,requestStream:!0,request:_,responseStream:!0,next:y},T);return(_,T)=>{const N=b(_,{...c,...T})[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const A=await N.next();return A.done&&A.value!=null?await N.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method")):A},return(){return N.return()},throw(A){return N.throw(A)}}}}}}createBidiStreamingMethod$1.createBidiStreamingMethod=createBidiStreamingMethod;async function pipeRequest$1(a,s,d,c){for await(const h of s)(0,abort_controller_x_1$4.throwIfAborted)(a),d.send({serializeBinary:()=>c.requestSerialize(h)})}var createClientStreamingMethod$1={},__importDefault$8=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createClientStreamingMethod$1,"__esModule",{value:!0}),createClientStreamingMethod$1.createClientStreamingMethod=void 0;const nice_grpc_common_1$3=lib,grpc_web_1$2=grpcWebClient_umd.exports,abort_controller_x_1$3=require$$1$1,node_abort_controller_1$2=__importDefault$8(browser$3.exports),service_definitions_1$3=serviceDefinitions,isAsyncIterable_1$2=isAsyncIterable$1,convertMetadata_1$2=convertMetadata;function createClientStreamingMethod(a,s,d,c){const h=(0,service_definitions_1$3.toGrpcWebMethodDefinition)(a),v={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*y(_,T){if(!(0,isAsyncIterable_1$2.isAsyncIterable)(_))throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method");const{metadata:I=(0,nice_grpc_common_1$3.Metadata)(),signal:N=new node_abort_controller_1$2.default().signal,onHeader:A,onTrailer:V}=T;return await(0,abort_controller_x_1$3.execute)(N,($,L)=>{const D=new node_abort_controller_1$2.default;let H;const O=grpc_web_1$2.grpc.client(h,{host:s.address,transport:s.transport});return O.onHeaders(x=>{A==null||A((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(x))}),O.onMessage(x=>{H=x}),O.onEnd((x,j,X)=>{V==null||V((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(X)),D.abort(),x===grpc_web_1$2.grpc.Code.OK?$(H):L(new nice_grpc_common_1$3.ClientError(a.path,+x,j))}),O.start((0,convertMetadata_1$2.convertMetadataToGrpcWeb)(I)),pipeRequest(D.signal,_,O,a).then(()=>{O.finishSend()},x=>{(0,abort_controller_x_1$3.isAbortError)(x)||(L(x),O.close())}),()=>{D.abort(),O.close()}})}const b=d==null?y:(_,T)=>d({method:v,requestStream:!0,request:_,responseStream:!1,next:y},T);return async(_,T)=>{const N=b(_,{...c,...T})[Symbol.asyncIterator]();let A=await N.next();for(;;){if(!A.done){A=await N.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"));continue}if(A.value==null){A=await N.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"));continue}return A.value}}}createClientStreamingMethod$1.createClientStreamingMethod=createClientStreamingMethod;async function pipeRequest(a,s,d,c){for await(const h of s)(0,abort_controller_x_1$3.throwIfAborted)(a),d.send({serializeBinary:()=>c.requestSerialize(h)})}var createServerStreamingMethod$1={},__importDefault$7=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createServerStreamingMethod$1,"__esModule",{value:!0}),createServerStreamingMethod$1.createServerStreamingMethod=void 0;const grpc_web_1$1=grpcWebClient_umd.exports,abort_controller_x_1$2=require$$1$1,AsyncSink_1=AsyncSink$1,nice_grpc_common_1$2=lib,node_abort_controller_1$1=__importDefault$7(browser$3.exports),service_definitions_1$2=serviceDefinitions,convertMetadata_1$1=convertMetadata,isAsyncIterable_1$1=isAsyncIterable$1;function createServerStreamingMethod(a,s,d,c){const h=(0,service_definitions_1$2.toGrpcWebMethodDefinition)(a),v={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*y(_,T){if((0,isAsyncIterable_1$1.isAsyncIterable)(_))throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method");const{metadata:I=(0,nice_grpc_common_1$2.Metadata)(),signal:N=new node_abort_controller_1$1.default().signal,onHeader:A,onTrailer:V}=T,$=new AsyncSink_1.AsyncSink,L=grpc_web_1$1.grpc.client(h,{host:s.address,transport:s.transport});L.onHeaders(H=>{A==null||A((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(H))}),L.onMessage(H=>{$.write(H)}),L.onEnd((H,O,x)=>{V==null||V((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(x)),H===grpc_web_1$1.grpc.Code.OK?$.end():$.error(new nice_grpc_common_1$2.ClientError(a.path,+H,O))}),L.start((0,convertMetadata_1$1.convertMetadataToGrpcWeb)(I)),L.send({serializeBinary:()=>a.requestSerialize(_)}),L.finishSend();const D=()=>{$.error(new abort_controller_x_1$2.AbortError),L.close()};N.addEventListener("abort",D);try{yield*$}finally{N.removeEventListener("abort",D),(0,abort_controller_x_1$2.throwIfAborted)(N)}}const b=d==null?y:(_,T)=>d({method:v,requestStream:!1,request:_,responseStream:!0,next:y},T);return(_,T)=>{const N=b(_,{...c,...T})[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const A=await N.next();return A.done&&A.value!=null?await N.throw(new Error("A middleware returned a message, but expected to return void for server streaming method")):A},return(){return N.return()},throw(A){return N.throw(A)}}}}}}createServerStreamingMethod$1.createServerStreamingMethod=createServerStreamingMethod;var createUnaryMethod$1={},__importDefault$6=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createUnaryMethod$1,"__esModule",{value:!0}),createUnaryMethod$1.createUnaryMethod=void 0;const nice_grpc_common_1$1=lib,grpc_web_1=grpcWebClient_umd.exports,abort_controller_x_1$1=require$$1$1,node_abort_controller_1=__importDefault$6(browser$3.exports),service_definitions_1$1=serviceDefinitions,isAsyncIterable_1=isAsyncIterable$1,convertMetadata_1=convertMetadata;function createUnaryMethod(a,s,d,c){const h=(0,service_definitions_1$1.toGrpcWebMethodDefinition)(a),v={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*y(_,T){if((0,isAsyncIterable_1.isAsyncIterable)(_))throw new Error("A middleware passed invalid request to next(): expected a single message for unary method");const{metadata:I=(0,nice_grpc_common_1$1.Metadata)(),signal:N=new node_abort_controller_1.default().signal,onHeader:A,onTrailer:V}=T;return await(0,abort_controller_x_1$1.execute)(N,($,L)=>{let D;const H=grpc_web_1.grpc.client(h,{host:s.address,transport:s.transport});return H.onHeaders(O=>{A==null||A((0,convertMetadata_1.convertMetadataFromGrpcWeb)(O))}),H.onMessage(O=>{D=O}),H.onEnd((O,x,j)=>{V==null||V((0,convertMetadata_1.convertMetadataFromGrpcWeb)(j)),O===grpc_web_1.grpc.Code.OK?$(D):L(new nice_grpc_common_1$1.ClientError(a.path,+O,x))}),H.start((0,convertMetadata_1.convertMetadataToGrpcWeb)(I)),H.send({serializeBinary:()=>a.requestSerialize(_)}),H.finishSend(),()=>{H.close()}})}const b=d==null?y:(_,T)=>d({method:v,requestStream:!1,request:_,responseStream:!1,next:y},T);return async(_,T)=>{const N=b(_,{...c,...T})[Symbol.asyncIterator]();let A=await N.next();for(;;){if(!A.done){A=await N.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"));continue}if(A.value==null){A=await N.throw(new Error("A middleware returned void, but expected to return a message for unary method"));continue}return A.value}}}createUnaryMethod$1.createUnaryMethod=createUnaryMethod,Object.defineProperty(ClientFactory,"__esModule",{value:!0}),ClientFactory.createClient=ClientFactory.createClientFactory=void 0;const nice_grpc_common_1=lib,service_definitions_1=serviceDefinitions,createBidiStreamingMethod_1=createBidiStreamingMethod$1,createClientStreamingMethod_1=createClientStreamingMethod$1,createServerStreamingMethod_1=createServerStreamingMethod$1,createUnaryMethod_1=createUnaryMethod$1;function createClientFactory(){return createClientFactoryWithMiddleware()}ClientFactory.createClientFactory=createClientFactory;function createClient(a,s,d){return createClientFactory().create(a,s,d)}ClientFactory.createClient=createClient;function createClientFactoryWithMiddleware(a){return{use(s){return createClientFactoryWithMiddleware(a==null?s:(0,nice_grpc_common_1.composeClientMiddleware)(a,s))},create(s,d,c={}){const h={},v=Object.entries((0,service_definitions_1.normalizeServiceDefinition)(s));for(const[y,b]of v){const _={...c["*"],...c[y]};b.requestStream?b.responseStream?h[y]=(0,createBidiStreamingMethod_1.createBidiStreamingMethod)(b,d,a,_):h[y]=(0,createClientStreamingMethod_1.createClientStreamingMethod)(b,d,a,_):b.responseStream?h[y]=(0,createServerStreamingMethod_1.createServerStreamingMethod)(b,d,a,_):h[y]=(0,createUnaryMethod_1.createUnaryMethod)(b,d,a,_)}return h}}}var Client={};Object.defineProperty(Client,"__esModule",{value:!0}),function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(h,v,y,b){b===void 0&&(b=y);var _=Object.getOwnPropertyDescriptor(v,y);(!_||("get"in _?!v.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return v[y]}}),Object.defineProperty(h,b,_)}:function(h,v,y,b){b===void 0&&(b=y),h[b]=v[y]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(h,v){for(var y in h)y!=="default"&&!Object.prototype.hasOwnProperty.call(v,y)&&s(v,h,y)};Object.defineProperty(a,"__esModule",{value:!0}),a.Status=a.Metadata=a.composeClientMiddleware=a.ClientError=void 0;var c=lib;Object.defineProperty(a,"ClientError",{enumerable:!0,get:function(){return c.ClientError}}),Object.defineProperty(a,"composeClientMiddleware",{enumerable:!0,get:function(){return c.composeClientMiddleware}}),Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return c.Metadata}}),Object.defineProperty(a,"Status",{enumerable:!0,get:function(){return c.Status}}),d(serviceDefinitions,a),d(channel,a),d(ClientFactory,a),d(Client,a)}(lib$1);var dist$2={},api$3={},umd={exports:{}};(function(a,s){var d=function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var h=null;try{h=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function v(K,Y,ae){this.low=K|0,this.high=Y|0,this.unsigned=!!ae}v.prototype.__isLong__,Object.defineProperty(v.prototype,"__isLong__",{value:!0});function y(K){return(K&&K.__isLong__)===!0}function b(K){var Y=Math.clz32(K&-K);return K?31-Y:Y}v.isLong=y;var _={},T={};function I(K,Y){var ae,pe,Se;return Y?(K>>>=0,(Se=0<=K&&K<256)&&(pe=T[K],pe)?pe:(ae=A(K,0,!0),Se&&(T[K]=ae),ae)):(K|=0,(Se=-128<=K&&K<128)&&(pe=_[K],pe)?pe:(ae=A(K,K<0?-1:0,!1),Se&&(_[K]=ae),ae))}v.fromInt=I;function N(K,Y){if(isNaN(K))return Y?se:te;if(Y){if(K<0)return se;if(K>=x)return M}else{if(K<=-j)return G;if(K+1>=j)return ne}return K<0?N(-K,Y).neg():A(K%O|0,K/O|0,Y)}v.fromNumber=N;function A(K,Y,ae){return new v(K,Y,ae)}v.fromBits=A;var V=Math.pow;function $(K,Y,ae){if(K.length===0)throw Error("empty string");if(typeof Y=="number"?(ae=Y,Y=!1):Y=!!Y,K==="NaN"||K==="Infinity"||K==="+Infinity"||K==="-Infinity")return Y?se:te;if(ae=ae||10,ae<2||36<ae)throw RangeError("radix");var pe;if((pe=K.indexOf("-"))>0)throw Error("interior hyphen");if(pe===0)return $(K.substring(1),Y,ae).neg();for(var Se=N(V(ae,8)),ye=te,w=0;w<K.length;w+=8){var z=Math.min(8,K.length-w),re=parseInt(K.substring(w,w+z),ae);if(z<8){var me=N(V(ae,z));ye=ye.mul(me).add(N(re))}else ye=ye.mul(Se),ye=ye.add(N(re))}return ye.unsigned=Y,ye}v.fromString=$;function L(K,Y){return typeof K=="number"?N(K,Y):typeof K=="string"?$(K,Y):A(K.low,K.high,typeof Y=="boolean"?Y:K.unsigned)}v.fromValue=L;var D=1<<16,H=1<<24,O=D*D,x=O*O,j=x/2,X=I(H),te=I(0);v.ZERO=te;var se=I(0,!0);v.UZERO=se;var oe=I(1);v.ONE=oe;var F=I(1,!0);v.UONE=F;var Z=I(-1);v.NEG_ONE=Z;var ne=A(-1,2147483647,!1);v.MAX_VALUE=ne;var M=A(-1,-1,!0);v.MAX_UNSIGNED_VALUE=M;var G=A(0,-2147483648,!1);v.MIN_VALUE=G;var J=v.prototype;J.toInt=function(){return this.unsigned?this.low>>>0:this.low},J.toNumber=function(){return this.unsigned?(this.high>>>0)*O+(this.low>>>0):this.high*O+(this.low>>>0)},J.toString=function(Y){if(Y=Y||10,Y<2||36<Y)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(G)){var ae=N(Y),pe=this.div(ae),Se=pe.mul(ae).sub(this);return pe.toString(Y)+Se.toInt().toString(Y)}else return"-"+this.neg().toString(Y);for(var ye=N(V(Y,6),this.unsigned),w=this,z="";;){var re=w.div(ye),me=w.sub(re.mul(ye)).toInt()>>>0,le=me.toString(Y);if(w=re,w.isZero())return le+z;for(;le.length<6;)le="0"+le;z=""+le+z}},J.getHighBits=function(){return this.high},J.getHighBitsUnsigned=function(){return this.high>>>0},J.getLowBits=function(){return this.low},J.getLowBitsUnsigned=function(){return this.low>>>0},J.getNumBitsAbs=function(){if(this.isNegative())return this.eq(G)?64:this.neg().getNumBitsAbs();for(var Y=this.high!=0?this.high:this.low,ae=31;ae>0&&(Y&1<<ae)==0;ae--);return this.high!=0?ae+33:ae+1},J.isZero=function(){return this.high===0&&this.low===0},J.eqz=J.isZero,J.isNegative=function(){return!this.unsigned&&this.high<0},J.isPositive=function(){return this.unsigned||this.high>=0},J.isOdd=function(){return(this.low&1)===1},J.isEven=function(){return(this.low&1)===0},J.equals=function(Y){return y(Y)||(Y=L(Y)),this.unsigned!==Y.unsigned&&this.high>>>31===1&&Y.high>>>31===1?!1:this.high===Y.high&&this.low===Y.low},J.eq=J.equals,J.notEquals=function(Y){return!this.eq(Y)},J.neq=J.notEquals,J.ne=J.notEquals,J.lessThan=function(Y){return this.comp(Y)<0},J.lt=J.lessThan,J.lessThanOrEqual=function(Y){return this.comp(Y)<=0},J.lte=J.lessThanOrEqual,J.le=J.lessThanOrEqual,J.greaterThan=function(Y){return this.comp(Y)>0},J.gt=J.greaterThan,J.greaterThanOrEqual=function(Y){return this.comp(Y)>=0},J.gte=J.greaterThanOrEqual,J.ge=J.greaterThanOrEqual,J.compare=function(Y){if(y(Y)||(Y=L(Y)),this.eq(Y))return 0;var ae=this.isNegative(),pe=Y.isNegative();return ae&&!pe?-1:!ae&&pe?1:this.unsigned?Y.high>>>0>this.high>>>0||Y.high===this.high&&Y.low>>>0>this.low>>>0?-1:1:this.sub(Y).isNegative()?-1:1},J.comp=J.compare,J.negate=function(){return!this.unsigned&&this.eq(G)?G:this.not().add(oe)},J.neg=J.negate,J.add=function(Y){y(Y)||(Y=L(Y));var ae=this.high>>>16,pe=this.high&65535,Se=this.low>>>16,ye=this.low&65535,w=Y.high>>>16,z=Y.high&65535,re=Y.low>>>16,me=Y.low&65535,le=0,ue=0,he=0,_e=0;return _e+=ye+me,he+=_e>>>16,_e&=65535,he+=Se+re,ue+=he>>>16,he&=65535,ue+=pe+z,le+=ue>>>16,ue&=65535,le+=ae+w,le&=65535,A(he<<16|_e,le<<16|ue,this.unsigned)},J.subtract=function(Y){return y(Y)||(Y=L(Y)),this.add(Y.neg())},J.sub=J.subtract,J.multiply=function(Y){if(this.isZero())return this;if(y(Y)||(Y=L(Y)),h){var ae=h.mul(this.low,this.high,Y.low,Y.high);return A(ae,h.get_high(),this.unsigned)}if(Y.isZero())return this.unsigned?se:te;if(this.eq(G))return Y.isOdd()?G:te;if(Y.eq(G))return this.isOdd()?G:te;if(this.isNegative())return Y.isNegative()?this.neg().mul(Y.neg()):this.neg().mul(Y).neg();if(Y.isNegative())return this.mul(Y.neg()).neg();if(this.lt(X)&&Y.lt(X))return N(this.toNumber()*Y.toNumber(),this.unsigned);var pe=this.high>>>16,Se=this.high&65535,ye=this.low>>>16,w=this.low&65535,z=Y.high>>>16,re=Y.high&65535,me=Y.low>>>16,le=Y.low&65535,ue=0,he=0,_e=0,Ce=0;return Ce+=w*le,_e+=Ce>>>16,Ce&=65535,_e+=ye*le,he+=_e>>>16,_e&=65535,_e+=w*me,he+=_e>>>16,_e&=65535,he+=Se*le,ue+=he>>>16,he&=65535,he+=ye*me,ue+=he>>>16,he&=65535,he+=w*re,ue+=he>>>16,he&=65535,ue+=pe*le+Se*me+ye*re+w*z,ue&=65535,A(_e<<16|Ce,ue<<16|he,this.unsigned)},J.mul=J.multiply,J.divide=function(Y){if(y(Y)||(Y=L(Y)),Y.isZero())throw Error("division by zero");if(h){if(!this.unsigned&&this.high===-2147483648&&Y.low===-1&&Y.high===-1)return this;var ae=(this.unsigned?h.div_u:h.div_s)(this.low,this.high,Y.low,Y.high);return A(ae,h.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?se:te;var pe,Se,ye;if(this.unsigned){if(Y.unsigned||(Y=Y.toUnsigned()),Y.gt(this))return se;if(Y.gt(this.shru(1)))return F;ye=se}else{if(this.eq(G)){if(Y.eq(oe)||Y.eq(Z))return G;if(Y.eq(G))return oe;var w=this.shr(1);return pe=w.div(Y).shl(1),pe.eq(te)?Y.isNegative()?oe:Z:(Se=this.sub(Y.mul(pe)),ye=pe.add(Se.div(Y)),ye)}else if(Y.eq(G))return this.unsigned?se:te;if(this.isNegative())return Y.isNegative()?this.neg().div(Y.neg()):this.neg().div(Y).neg();if(Y.isNegative())return this.div(Y.neg()).neg();ye=te}for(Se=this;Se.gte(Y);){pe=Math.max(1,Math.floor(Se.toNumber()/Y.toNumber()));for(var z=Math.ceil(Math.log(pe)/Math.LN2),re=z<=48?1:V(2,z-48),me=N(pe),le=me.mul(Y);le.isNegative()||le.gt(Se);)pe-=re,me=N(pe,this.unsigned),le=me.mul(Y);me.isZero()&&(me=oe),ye=ye.add(me),Se=Se.sub(le)}return ye},J.div=J.divide,J.modulo=function(Y){if(y(Y)||(Y=L(Y)),h){var ae=(this.unsigned?h.rem_u:h.rem_s)(this.low,this.high,Y.low,Y.high);return A(ae,h.get_high(),this.unsigned)}return this.sub(this.div(Y).mul(Y))},J.mod=J.modulo,J.rem=J.modulo,J.not=function(){return A(~this.low,~this.high,this.unsigned)},J.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},J.clz=J.countLeadingZeros,J.countTrailingZeros=function(){return this.low?b(this.low):b(this.high)+32},J.ctz=J.countTrailingZeros,J.and=function(Y){return y(Y)||(Y=L(Y)),A(this.low&Y.low,this.high&Y.high,this.unsigned)},J.or=function(Y){return y(Y)||(Y=L(Y)),A(this.low|Y.low,this.high|Y.high,this.unsigned)},J.xor=function(Y){return y(Y)||(Y=L(Y)),A(this.low^Y.low,this.high^Y.high,this.unsigned)},J.shiftLeft=function(Y){return y(Y)&&(Y=Y.toInt()),(Y&=63)===0?this:Y<32?A(this.low<<Y,this.high<<Y|this.low>>>32-Y,this.unsigned):A(0,this.low<<Y-32,this.unsigned)},J.shl=J.shiftLeft,J.shiftRight=function(Y){return y(Y)&&(Y=Y.toInt()),(Y&=63)===0?this:Y<32?A(this.low>>>Y|this.high<<32-Y,this.high>>Y,this.unsigned):A(this.high>>Y-32,this.high>=0?0:-1,this.unsigned)},J.shr=J.shiftRight,J.shiftRightUnsigned=function(Y){return y(Y)&&(Y=Y.toInt()),(Y&=63)===0?this:Y<32?A(this.low>>>Y|this.high<<32-Y,this.high>>>Y,this.unsigned):Y===32?A(this.high,0,this.unsigned):A(this.high>>>Y-32,0,this.unsigned)},J.shru=J.shiftRightUnsigned,J.shr_u=J.shiftRightUnsigned,J.rotateLeft=function(Y){var ae;return y(Y)&&(Y=Y.toInt()),(Y&=63)===0?this:Y===32?A(this.high,this.low,this.unsigned):Y<32?(ae=32-Y,A(this.low<<Y|this.high>>>ae,this.high<<Y|this.low>>>ae,this.unsigned)):(Y-=32,ae=32-Y,A(this.high<<Y|this.low>>>ae,this.low<<Y|this.high>>>ae,this.unsigned))},J.rotl=J.rotateLeft,J.rotateRight=function(Y){var ae;return y(Y)&&(Y=Y.toInt()),(Y&=63)===0?this:Y===32?A(this.high,this.low,this.unsigned):Y<32?(ae=32-Y,A(this.high<<ae|this.low>>>Y,this.low<<ae|this.high>>>Y,this.unsigned)):(Y-=32,ae=32-Y,A(this.low<<ae|this.high>>>Y,this.high<<ae|this.low>>>Y,this.unsigned))},J.rotr=J.rotateRight,J.toSigned=function(){return this.unsigned?A(this.low,this.high,!1):this},J.toUnsigned=function(){return this.unsigned?this:A(this.low,this.high,!0)},J.toBytes=function(Y){return Y?this.toBytesLE():this.toBytesBE()},J.toBytesLE=function(){var Y=this.high,ae=this.low;return[ae&255,ae>>>8&255,ae>>>16&255,ae>>>24,Y&255,Y>>>8&255,Y>>>16&255,Y>>>24]},J.toBytesBE=function(){var Y=this.high,ae=this.low;return[Y>>>24,Y>>>16&255,Y>>>8&255,Y&255,ae>>>24,ae>>>16&255,ae>>>8&255,ae&255]},v.fromBytes=function(Y,ae,pe){return pe?v.fromBytesLE(Y,ae):v.fromBytesBE(Y,ae)},v.fromBytesLE=function(Y,ae){return new v(Y[0]|Y[1]<<8|Y[2]<<16|Y[3]<<24,Y[4]|Y[5]<<8|Y[6]<<16|Y[7]<<24,ae)},v.fromBytesBE=function(Y,ae){return new v(Y[4]<<24|Y[5]<<16|Y[6]<<8|Y[7],Y[0]<<24|Y[1]<<16|Y[2]<<8|Y[3],ae)};var ie=v;return c.default=ie,"default"in c?c.default:c}({});a.exports=d})(umd);var indexMinimal$1={},minimal$3={},aspromise$1=asPromise$1;function asPromise$1(a,s){for(var d=new Array(arguments.length-1),c=0,h=2,v=!0;h<arguments.length;)d[c++]=arguments[h++];return new Promise(function(b,_){d[c]=function(I){if(v)if(v=!1,I)_(I);else{for(var N=new Array(arguments.length-1),A=0;A<N.length;)N[A++]=arguments[A];b.apply(null,N)}};try{a.apply(s||null,d)}catch(T){v&&(v=!1,_(T))}})}var base64$3={};(function(a){var s=a;s.length=function(b){var _=b.length;if(!_)return 0;for(var T=0;--_%4>1&&b.charAt(_)==="=";)++T;return Math.ceil(b.length*3)/4-T};for(var d=new Array(64),c=new Array(123),h=0;h<64;)c[d[h]=h<26?h+65:h<52?h+71:h<62?h-4:h-59|43]=h++;s.encode=function(b,_,T){for(var I=null,N=[],A=0,V=0,$;_<T;){var L=b[_++];switch(V){case 0:N[A++]=d[L>>2],$=(L&3)<<4,V=1;break;case 1:N[A++]=d[$|L>>4],$=(L&15)<<2,V=2;break;case 2:N[A++]=d[$|L>>6],N[A++]=d[L&63],V=0;break}A>8191&&((I||(I=[])).push(String.fromCharCode.apply(String,N)),A=0)}return V&&(N[A++]=d[$],N[A++]=61,V===1&&(N[A++]=61)),I?(A&&I.push(String.fromCharCode.apply(String,N.slice(0,A))),I.join("")):String.fromCharCode.apply(String,N.slice(0,A))};var v="invalid encoding";s.decode=function(b,_,T){for(var I=T,N=0,A,V=0;V<b.length;){var $=b.charCodeAt(V++);if($===61&&N>1)break;if(($=c[$])===void 0)throw Error(v);switch(N){case 0:A=$,N=1;break;case 1:_[T++]=A<<2|($&48)>>4,A=$,N=2;break;case 2:_[T++]=(A&15)<<4|($&60)>>2,A=$,N=3;break;case 3:_[T++]=(A&3)<<6|$,N=0;break}}if(N===1)throw Error(v);return T-I},s.test=function(b){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(b)}})(base64$3);var eventemitter$1=EventEmitter$2;function EventEmitter$2(){this._listeners={}}EventEmitter$2.prototype.on=function(s,d,c){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:d,ctx:c||this}),this},EventEmitter$2.prototype.off=function(s,d){if(s===void 0)this._listeners={};else if(d===void 0)this._listeners[s]=[];else for(var c=this._listeners[s],h=0;h<c.length;)c[h].fn===d?c.splice(h,1):++h;return this},EventEmitter$2.prototype.emit=function(s){var d=this._listeners[s];if(d){for(var c=[],h=1;h<arguments.length;)c.push(arguments[h++]);for(h=0;h<d.length;)d[h].fn.apply(d[h++].ctx,c)}return this};var float$1=factory$1(factory$1);function factory$1(a){return typeof Float32Array!="undefined"?function(){var s=new Float32Array([-0]),d=new Uint8Array(s.buffer),c=d[3]===128;function h(_,T,I){s[0]=_,T[I]=d[0],T[I+1]=d[1],T[I+2]=d[2],T[I+3]=d[3]}function v(_,T,I){s[0]=_,T[I]=d[3],T[I+1]=d[2],T[I+2]=d[1],T[I+3]=d[0]}a.writeFloatLE=c?h:v,a.writeFloatBE=c?v:h;function y(_,T){return d[0]=_[T],d[1]=_[T+1],d[2]=_[T+2],d[3]=_[T+3],s[0]}function b(_,T){return d[3]=_[T],d[2]=_[T+1],d[1]=_[T+2],d[0]=_[T+3],s[0]}a.readFloatLE=c?y:b,a.readFloatBE=c?b:y}():function(){function s(c,h,v,y){var b=h<0?1:0;if(b&&(h=-h),h===0)c(1/h>0?0:2147483648,v,y);else if(isNaN(h))c(2143289344,v,y);else if(h>34028234663852886e22)c((b<<31|2139095040)>>>0,v,y);else if(h<11754943508222875e-54)c((b<<31|Math.round(h/1401298464324817e-60))>>>0,v,y);else{var _=Math.floor(Math.log(h)/Math.LN2),T=Math.round(h*Math.pow(2,-_)*8388608)&8388607;c((b<<31|_+127<<23|T)>>>0,v,y)}}a.writeFloatLE=s.bind(null,writeUintLE$1),a.writeFloatBE=s.bind(null,writeUintBE$1);function d(c,h,v){var y=c(h,v),b=(y>>31)*2+1,_=y>>>23&255,T=y&8388607;return _===255?T?NaN:b*(1/0):_===0?b*1401298464324817e-60*T:b*Math.pow(2,_-150)*(T+8388608)}a.readFloatLE=d.bind(null,readUintLE$1),a.readFloatBE=d.bind(null,readUintBE$1)}(),typeof Float64Array!="undefined"?function(){var s=new Float64Array([-0]),d=new Uint8Array(s.buffer),c=d[7]===128;function h(_,T,I){s[0]=_,T[I]=d[0],T[I+1]=d[1],T[I+2]=d[2],T[I+3]=d[3],T[I+4]=d[4],T[I+5]=d[5],T[I+6]=d[6],T[I+7]=d[7]}function v(_,T,I){s[0]=_,T[I]=d[7],T[I+1]=d[6],T[I+2]=d[5],T[I+3]=d[4],T[I+4]=d[3],T[I+5]=d[2],T[I+6]=d[1],T[I+7]=d[0]}a.writeDoubleLE=c?h:v,a.writeDoubleBE=c?v:h;function y(_,T){return d[0]=_[T],d[1]=_[T+1],d[2]=_[T+2],d[3]=_[T+3],d[4]=_[T+4],d[5]=_[T+5],d[6]=_[T+6],d[7]=_[T+7],s[0]}function b(_,T){return d[7]=_[T],d[6]=_[T+1],d[5]=_[T+2],d[4]=_[T+3],d[3]=_[T+4],d[2]=_[T+5],d[1]=_[T+6],d[0]=_[T+7],s[0]}a.readDoubleLE=c?y:b,a.readDoubleBE=c?b:y}():function(){function s(c,h,v,y,b,_){var T=y<0?1:0;if(T&&(y=-y),y===0)c(0,b,_+h),c(1/y>0?0:2147483648,b,_+v);else if(isNaN(y))c(0,b,_+h),c(2146959360,b,_+v);else if(y>17976931348623157e292)c(0,b,_+h),c((T<<31|2146435072)>>>0,b,_+v);else{var I;if(y<22250738585072014e-324)I=y/5e-324,c(I>>>0,b,_+h),c((T<<31|I/4294967296)>>>0,b,_+v);else{var N=Math.floor(Math.log(y)/Math.LN2);N===1024&&(N=1023),I=y*Math.pow(2,-N),c(I*4503599627370496>>>0,b,_+h),c((T<<31|N+1023<<20|I*1048576&1048575)>>>0,b,_+v)}}}a.writeDoubleLE=s.bind(null,writeUintLE$1,0,4),a.writeDoubleBE=s.bind(null,writeUintBE$1,4,0);function d(c,h,v,y,b){var _=c(y,b+h),T=c(y,b+v),I=(T>>31)*2+1,N=T>>>20&2047,A=4294967296*(T&1048575)+_;return N===2047?A?NaN:I*(1/0):N===0?I*5e-324*A:I*Math.pow(2,N-1075)*(A+4503599627370496)}a.readDoubleLE=d.bind(null,readUintLE$1,0,4),a.readDoubleBE=d.bind(null,readUintBE$1,4,0)}(),a}function writeUintLE$1(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}function writeUintBE$1(a,s,d){s[d]=a>>>24,s[d+1]=a>>>16&255,s[d+2]=a>>>8&255,s[d+3]=a&255}function readUintLE$1(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16|a[s+3]<<24)>>>0}function readUintBE$1(a,s){return(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3])>>>0}var inquire_1$1=inquire$1;function inquire$1(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}var utf8$5={};(function(a){var s=a;s.length=function(c){for(var h=0,v=0,y=0;y<c.length;++y)v=c.charCodeAt(y),v<128?h+=1:v<2048?h+=2:(v&64512)===55296&&(c.charCodeAt(y+1)&64512)===56320?(++y,h+=4):h+=3;return h},s.read=function(c,h,v){var y=v-h;if(y<1)return"";for(var b=null,_=[],T=0,I;h<v;)I=c[h++],I<128?_[T++]=I:I>191&&I<224?_[T++]=(I&31)<<6|c[h++]&63:I>239&&I<365?(I=((I&7)<<18|(c[h++]&63)<<12|(c[h++]&63)<<6|c[h++]&63)-65536,_[T++]=55296+(I>>10),_[T++]=56320+(I&1023)):_[T++]=(I&15)<<12|(c[h++]&63)<<6|c[h++]&63,T>8191&&((b||(b=[])).push(String.fromCharCode.apply(String,_)),T=0);return b?(T&&b.push(String.fromCharCode.apply(String,_.slice(0,T))),b.join("")):String.fromCharCode.apply(String,_.slice(0,T))},s.write=function(c,h,v){for(var y=v,b,_,T=0;T<c.length;++T)b=c.charCodeAt(T),b<128?h[v++]=b:b<2048?(h[v++]=b>>6|192,h[v++]=b&63|128):(b&64512)===55296&&((_=c.charCodeAt(T+1))&64512)===56320?(b=65536+((b&1023)<<10)+(_&1023),++T,h[v++]=b>>18|240,h[v++]=b>>12&63|128,h[v++]=b>>6&63|128,h[v++]=b&63|128):(h[v++]=b>>12|224,h[v++]=b>>6&63|128,h[v++]=b&63|128);return v-y}})(utf8$5);var pool_1$1=pool$1;function pool$1(a,s,d){var c=d||8192,h=c>>>1,v=null,y=c;return function(_){if(_<1||_>h)return a(_);y+_>c&&(v=a(c),y=0);var T=s.call(v,y,y+=_);return y&7&&(y=(y|7)+1),T}}var longbits$1=LongBits$5,util$b=minimal$3;function LongBits$5(a,s){this.lo=a>>>0,this.hi=s>>>0}var zero$1=LongBits$5.zero=new LongBits$5(0,0);zero$1.toNumber=function(){return 0},zero$1.zzEncode=zero$1.zzDecode=function(){return this},zero$1.length=function(){return 1};var zeroHash$1=LongBits$5.zeroHash="\0\0\0\0\0\0\0\0";LongBits$5.fromNumber=function a(s){if(s===0)return zero$1;var d=s<0;d&&(s=-s);var c=s>>>0,h=(s-c)/4294967296>>>0;return d&&(h=~h>>>0,c=~c>>>0,++c>4294967295&&(c=0,++h>4294967295&&(h=0))),new LongBits$5(c,h)},LongBits$5.from=function a(s){if(typeof s=="number")return LongBits$5.fromNumber(s);if(util$b.isString(s))if(util$b.Long)s=util$b.Long.fromString(s);else return LongBits$5.fromNumber(parseInt(s,10));return s.low||s.high?new LongBits$5(s.low>>>0,s.high>>>0):zero$1},LongBits$5.prototype.toNumber=function a(s){if(!s&&this.hi>>>31){var d=~this.lo+1>>>0,c=~this.hi>>>0;return d||(c=c+1>>>0),-(d+c*4294967296)}return this.lo+this.hi*4294967296},LongBits$5.prototype.toLong=function a(s){return util$b.Long?new util$b.Long(this.lo|0,this.hi|0,Boolean(s)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(s)}};var charCodeAt$1=String.prototype.charCodeAt;LongBits$5.fromHash=function a(s){return s===zeroHash$1?zero$1:new LongBits$5((charCodeAt$1.call(s,0)|charCodeAt$1.call(s,1)<<8|charCodeAt$1.call(s,2)<<16|charCodeAt$1.call(s,3)<<24)>>>0,(charCodeAt$1.call(s,4)|charCodeAt$1.call(s,5)<<8|charCodeAt$1.call(s,6)<<16|charCodeAt$1.call(s,7)<<24)>>>0)},LongBits$5.prototype.toHash=function a(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$5.prototype.zzEncode=function a(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},LongBits$5.prototype.zzDecode=function a(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},LongBits$5.prototype.length=function a(){var s=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return c===0?d===0?s<16384?s<128?1:2:s<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:c<128?9:10},function(a){var s=a;s.asPromise=aspromise$1,s.base64=base64$3,s.EventEmitter=eventemitter$1,s.float=float$1,s.inquire=inquire_1$1,s.utf8=utf8$5,s.pool=pool_1$1,s.LongBits=longbits$1,s.isNode=Boolean(typeof commonjsGlobal$1!="undefined"&&commonjsGlobal$1&&commonjsGlobal$1.process&&commonjsGlobal$1.process.versions&&commonjsGlobal$1.process.versions.node),s.global=s.isNode&&commonjsGlobal$1||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal$1,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(v){return typeof v=="number"&&isFinite(v)&&Math.floor(v)===v},s.isString=function(v){return typeof v=="string"||v instanceof String},s.isObject=function(v){return v&&typeof v=="object"},s.isset=s.isSet=function(v,y){var b=v[y];return b!=null&&v.hasOwnProperty(y)?typeof b!="object"||(Array.isArray(b)?b.length:Object.keys(b).length)>0:!1},s.Buffer=function(){try{var h=s.inquire("buffer").Buffer;return h.prototype.utf8Write?h:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(v){return typeof v=="number"?s.Buffer?s._Buffer_allocUnsafe(v):new s.Array(v):s.Buffer?s._Buffer_from(v):typeof Uint8Array=="undefined"?v:new Uint8Array(v)},s.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(v){return v?s.LongBits.from(v).toHash():s.LongBits.zeroHash},s.longFromHash=function(v,y){var b=s.LongBits.fromHash(v);return s.Long?s.Long.fromBits(b.lo,b.hi,y):b.toNumber(Boolean(y))};function d(h,v,y){for(var b=Object.keys(v),_=0;_<b.length;++_)(h[b[_]]===void 0||!y)&&(h[b[_]]=v[b[_]]);return h}s.merge=d,s.lcFirst=function(v){return v.charAt(0).toLowerCase()+v.substring(1)};function c(h){function v(y,b){if(!(this instanceof v))return new v(y,b);Object.defineProperty(this,"message",{get:function(){return y}}),Error.captureStackTrace?Error.captureStackTrace(this,v):Object.defineProperty(this,"stack",{value:new Error().stack||""}),b&&d(this,b)}return(v.prototype=Object.create(Error.prototype)).constructor=v,Object.defineProperty(v.prototype,"name",{get:function(){return h}}),v.prototype.toString=function(){return this.name+": "+this.message},v}s.newError=c,s.ProtocolError=c("ProtocolError"),s.oneOfGetter=function(v){for(var y={},b=0;b<v.length;++b)y[v[b]]=1;return function(){for(var _=Object.keys(this),T=_.length-1;T>-1;--T)if(y[_[T]]===1&&this[_[T]]!==void 0&&this[_[T]]!==null)return _[T]}},s.oneOfSetter=function(v){return function(y){for(var b=0;b<v.length;++b)v[b]!==y&&delete this[v[b]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var h=s.Buffer;if(!h){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=h.from!==Uint8Array.from&&h.from||function(y,b){return new h(y,b)},s._Buffer_allocUnsafe=h.allocUnsafe||function(y){return new h(y)}}}(minimal$3);var writer$1=Writer$3,util$a=minimal$3,BufferWriter$3,LongBits$4=util$a.LongBits,base64$2=util$a.base64,utf8$4=util$a.utf8;function Op$1(a,s,d){this.fn=a,this.len=s,this.next=void 0,this.val=d}function noop$3(){}function State$1(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$3(){this.len=0,this.head=new Op$1(noop$3,0,0),this.tail=this.head,this.states=null}var create$4=function a(){return util$a.Buffer?function(){return(Writer$3.create=function(){return new BufferWriter$3})()}:function(){return new Writer$3}};Writer$3.create=create$4(),Writer$3.alloc=function a(s){return new util$a.Array(s)},util$a.Array!==Array&&(Writer$3.alloc=util$a.pool(Writer$3.alloc,util$a.Array.prototype.subarray)),Writer$3.prototype._push=function a(s,d,c){return this.tail=this.tail.next=new Op$1(s,d,c),this.len+=d,this};function writeByte$1(a,s,d){s[d]=a&255}function writeVarint32$1(a,s,d){for(;a>127;)s[d++]=a&127|128,a>>>=7;s[d]=a}function VarintOp$1(a,s){this.len=a,this.next=void 0,this.val=s}VarintOp$1.prototype=Object.create(Op$1.prototype),VarintOp$1.prototype.fn=writeVarint32$1,Writer$3.prototype.uint32=function a(s){return this.len+=(this.tail=this.tail.next=new VarintOp$1((s=s>>>0)<128?1:s<16384?2:s<2097152?3:s<268435456?4:5,s)).len,this},Writer$3.prototype.int32=function a(s){return s<0?this._push(writeVarint64$1,10,LongBits$4.fromNumber(s)):this.uint32(s)},Writer$3.prototype.sint32=function a(s){return this.uint32((s<<1^s>>31)>>>0)};function writeVarint64$1(a,s,d){for(;a.hi;)s[d++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)s[d++]=a.lo&127|128,a.lo=a.lo>>>7;s[d++]=a.lo}Writer$3.prototype.uint64=function a(s){var d=LongBits$4.from(s);return this._push(writeVarint64$1,d.length(),d)},Writer$3.prototype.int64=Writer$3.prototype.uint64,Writer$3.prototype.sint64=function a(s){var d=LongBits$4.from(s).zzEncode();return this._push(writeVarint64$1,d.length(),d)},Writer$3.prototype.bool=function a(s){return this._push(writeByte$1,1,s?1:0)};function writeFixed32$1(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}Writer$3.prototype.fixed32=function a(s){return this._push(writeFixed32$1,4,s>>>0)},Writer$3.prototype.sfixed32=Writer$3.prototype.fixed32,Writer$3.prototype.fixed64=function a(s){var d=LongBits$4.from(s);return this._push(writeFixed32$1,4,d.lo)._push(writeFixed32$1,4,d.hi)},Writer$3.prototype.sfixed64=Writer$3.prototype.fixed64,Writer$3.prototype.float=function a(s){return this._push(util$a.float.writeFloatLE,4,s)},Writer$3.prototype.double=function a(s){return this._push(util$a.float.writeDoubleLE,8,s)};var writeBytes$1=util$a.Array.prototype.set?function a(s,d,c){d.set(s,c)}:function a(s,d,c){for(var h=0;h<s.length;++h)d[c+h]=s[h]};Writer$3.prototype.bytes=function a(s){var d=s.length>>>0;if(!d)return this._push(writeByte$1,1,0);if(util$a.isString(s)){var c=Writer$3.alloc(d=base64$2.length(s));base64$2.decode(s,c,0),s=c}return this.uint32(d)._push(writeBytes$1,d,s)},Writer$3.prototype.string=function a(s){var d=utf8$4.length(s);return d?this.uint32(d)._push(utf8$4.write,d,s):this._push(writeByte$1,1,0)},Writer$3.prototype.fork=function a(){return this.states=new State$1(this),this.head=this.tail=new Op$1(noop$3,0,0),this.len=0,this},Writer$3.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op$1(noop$3,0,0),this.len=0),this},Writer$3.prototype.ldelim=function a(){var s=this.head,d=this.tail,c=this.len;return this.reset().uint32(c),c&&(this.tail.next=s.next,this.tail=d,this.len+=c),this},Writer$3.prototype.finish=function a(){for(var s=this.head.next,d=this.constructor.alloc(this.len),c=0;s;)s.fn(s.val,d,c),c+=s.len,s=s.next;return d},Writer$3._configure=function(a){BufferWriter$3=a,Writer$3.create=create$4(),BufferWriter$3._configure()};var writer_buffer$1=BufferWriter$2,Writer$2=writer$1;(BufferWriter$2.prototype=Object.create(Writer$2.prototype)).constructor=BufferWriter$2;var util$9=minimal$3;function BufferWriter$2(){Writer$2.call(this)}BufferWriter$2._configure=function(){BufferWriter$2.alloc=util$9._Buffer_allocUnsafe,BufferWriter$2.writeBytesBuffer=util$9.Buffer&&util$9.Buffer.prototype instanceof Uint8Array&&util$9.Buffer.prototype.set.name==="set"?function(s,d,c){d.set(s,c)}:function(s,d,c){if(s.copy)s.copy(d,c,0,s.length);else for(var h=0;h<s.length;)d[c++]=s[h++]}},BufferWriter$2.prototype.bytes=function a(s){util$9.isString(s)&&(s=util$9._Buffer_from(s,"base64"));var d=s.length>>>0;return this.uint32(d),d&&this._push(BufferWriter$2.writeBytesBuffer,d,s),this};function writeStringBuffer$1(a,s,d){a.length<40?util$9.utf8.write(a,s,d):s.utf8Write?s.utf8Write(a,d):s.write(a,d)}BufferWriter$2.prototype.string=function a(s){var d=util$9.Buffer.byteLength(s);return this.uint32(d),d&&this._push(writeStringBuffer$1,d,s),this},BufferWriter$2._configure();var reader$1=Reader$3,util$8=minimal$3,BufferReader$3,LongBits$3=util$8.LongBits,utf8$3=util$8.utf8;function indexOutOfRange$1(a,s){return RangeError("index out of range: "+a.pos+" + "+(s||1)+" > "+a.len)}function Reader$3(a){this.buf=a,this.pos=0,this.len=a.length}var create_array$1=typeof Uint8Array!="undefined"?function a(s){if(s instanceof Uint8Array||Array.isArray(s))return new Reader$3(s);throw Error("illegal buffer")}:function a(s){if(Array.isArray(s))return new Reader$3(s);throw Error("illegal buffer")},create$3=function a(){return util$8.Buffer?function(d){return(Reader$3.create=function(h){return util$8.Buffer.isBuffer(h)?new BufferReader$3(h):create_array$1(h)})(d)}:create_array$1};Reader$3.create=create$3(),Reader$3.prototype._slice=util$8.Array.prototype.subarray||util$8.Array.prototype.slice,Reader$3.prototype.uint32=function a(){var s=4294967295;return function(){if(s=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(s=(s|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return s;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange$1(this,10);return s}}(),Reader$3.prototype.int32=function a(){return this.uint32()|0},Reader$3.prototype.sint32=function a(){var s=this.uint32();return s>>>1^-(s&1)|0};function readLongVarint$1(){var a=new LongBits$3(0,0),s=0;if(this.len-this.pos>4){for(;s<4;++s)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;s=0}else{for(;s<3;++s){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<s*7)>>>0,a}if(this.len-this.pos>4){for(;s<5;++s)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;s<5;++s){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$3.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end$1(a,s){return(a[s-4]|a[s-3]<<8|a[s-2]<<16|a[s-1]<<24)>>>0}Reader$3.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32_end$1(this.buf,this.pos+=4)},Reader$3.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32_end$1(this.buf,this.pos+=4)|0};function readFixed64$1(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,8);return new LongBits$3(readFixed32_end$1(this.buf,this.pos+=4),readFixed32_end$1(this.buf,this.pos+=4))}Reader$3.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);var s=util$8.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s},Reader$3.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,4);var s=util$8.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s},Reader$3.prototype.bytes=function a(){var s=this.uint32(),d=this.pos,c=this.pos+s;if(c>this.len)throw indexOutOfRange$1(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(d,c):d===c?new this.buf.constructor(0):this._slice.call(this.buf,d,c)},Reader$3.prototype.string=function a(){var s=this.bytes();return utf8$3.read(s,0,s.length)},Reader$3.prototype.skip=function a(s){if(typeof s=="number"){if(this.pos+s>this.len)throw indexOutOfRange$1(this,s);this.pos+=s}else do if(this.pos>=this.len)throw indexOutOfRange$1(this);while(this.buf[this.pos++]&128);return this},Reader$3.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this},Reader$3._configure=function(a){BufferReader$3=a,Reader$3.create=create$3(),BufferReader$3._configure();var s=util$8.Long?"toLong":"toNumber";util$8.merge(Reader$3.prototype,{int64:function(){return readLongVarint$1.call(this)[s](!1)},uint64:function(){return readLongVarint$1.call(this)[s](!0)},sint64:function(){return readLongVarint$1.call(this).zzDecode()[s](!1)},fixed64:function(){return readFixed64$1.call(this)[s](!0)},sfixed64:function(){return readFixed64$1.call(this)[s](!1)}})};var reader_buffer$1=BufferReader$2,Reader$2=reader$1;(BufferReader$2.prototype=Object.create(Reader$2.prototype)).constructor=BufferReader$2;var util$7=minimal$3;function BufferReader$2(a){Reader$2.call(this,a)}BufferReader$2._configure=function(){util$7.Buffer&&(BufferReader$2.prototype._slice=util$7.Buffer.prototype.slice)},BufferReader$2.prototype.string=function a(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},BufferReader$2._configure();var rpc$1={},service$1=Service$1,util$6=minimal$3;(Service$1.prototype=Object.create(util$6.EventEmitter.prototype)).constructor=Service$1;function Service$1(a,s,d){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util$6.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(s),this.responseDelimited=Boolean(d)}Service$1.prototype.rpcCall=function a(s,d,c,h,v){if(!h)throw TypeError("request must be specified");var y=this;if(!v)return util$6.asPromise(a,y,s,d,c,h);if(!y.rpcImpl){setTimeout(function(){v(Error("already ended"))},0);return}try{return y.rpcImpl(s,d[y.requestDelimited?"encodeDelimited":"encode"](h).finish(),function(_,T){if(_)return y.emit("error",_,s),v(_);if(T===null){y.end(!0);return}if(!(T instanceof c))try{T=c[y.responseDelimited?"decodeDelimited":"decode"](T)}catch(I){return y.emit("error",I,s),v(I)}return y.emit("data",T,s),v(null,T)})}catch(b){y.emit("error",b,s),setTimeout(function(){v(b)},0);return}},Service$1.prototype.end=function a(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},function(a){var s=a;s.Service=service$1}(rpc$1);var roots$1={};(function(a){var s=a;s.build="minimal",s.Writer=writer$1,s.BufferWriter=writer_buffer$1,s.Reader=reader$1,s.BufferReader=reader_buffer$1,s.util=minimal$3,s.rpc=rpc$1,s.roots=roots$1,s.configure=d;function d(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}d()})(indexMinimal$1);var minimal$2=indexMinimal$1,struct$2={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(O,x,j,X){X===void 0&&(X=j),Object.defineProperty(O,X,{enumerable:!0,get:function(){return x[j]}})}:function(O,x,j,X){X===void 0&&(X=j),O[X]=x[j]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(O,x){Object.defineProperty(O,"default",{enumerable:!0,value:x})}:function(O,x){O.default=x}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(O){if(O&&O.__esModule)return O;var x={};if(O!=null)for(var j in O)j!=="default"&&Object.hasOwnProperty.call(O,j)&&s(x,O,j);return d(x,O),x},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const v=h(umd.exports),y=c(minimal$2);a.protobufPackage="google.protobuf";var b;(function(O){O.NULL_VALUE="NULL_VALUE"})(b=a.NullValue||(a.NullValue={}));function _(O){switch(O){case 0:case"NULL_VALUE":return b.NULL_VALUE;default:throw new L.Error("Unrecognized enum value "+O+" for enum NullValue")}}a.nullValueFromJSON=_;function T(O){switch(O){case b.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=T;function I(O){switch(O){case b.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=I;function N(){return{fields:{}}}a.Struct={encode(O,x=y.Writer.create()){return Object.entries(O.fields).forEach(([j,X])=>{X!==void 0&&a.Struct_FieldsEntry.encode({key:j,value:X},x.uint32(10).fork()).ldelim()}),x},decode(O,x){const j=O instanceof y.Reader?O:new y.Reader(O);let X=x===void 0?j.len:j.pos+x;const te=N();for(;j.pos<X;){const se=j.uint32();switch(se>>>3){case 1:const oe=a.Struct_FieldsEntry.decode(j,j.uint32());oe.value!==void 0&&(te.fields[oe.key]=oe.value);break;default:j.skipType(se&7);break}}return te},fromJSON(O){return{fields:D(O.fields)?Object.entries(O.fields).reduce((x,[j,X])=>(x[j]=X,x),{}):{}}},toJSON(O){const x={};return x.fields={},O.fields&&Object.entries(O.fields).forEach(([j,X])=>{x.fields[j]=X}),x},fromPartial(O){var x;const j=N();return j.fields=Object.entries((x=O.fields)!==null&&x!==void 0?x:{}).reduce((X,[te,se])=>(se!==void 0&&(X[te]=se),X),{}),j},wrap(O){const x=N();return O!==void 0&&Object.keys(O).forEach(j=>{x.fields[j]=O[j]}),x},unwrap(O){const x={};return Object.keys(O.fields).forEach(j=>{x[j]=O.fields[j]}),x}};function A(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(O,x=y.Writer.create()){return O.key!==""&&x.uint32(10).string(O.key),O.value!==void 0&&a.Value.encode(a.Value.wrap(O.value),x.uint32(18).fork()).ldelim(),x},decode(O,x){const j=O instanceof y.Reader?O:new y.Reader(O);let X=x===void 0?j.len:j.pos+x;const te=A();for(;j.pos<X;){const se=j.uint32();switch(se>>>3){case 1:te.key=j.string();break;case 2:te.value=a.Value.unwrap(a.Value.decode(j,j.uint32()));break;default:j.skipType(se&7);break}}return te},fromJSON(O){return{key:H(O.key)?String(O.key):"",value:H(O==null?void 0:O.value)?O.value:void 0}},toJSON(O){const x={};return O.key!==void 0&&(x.key=O.key),O.value!==void 0&&(x.value=O.value),x},fromPartial(O){var x,j;const X=A();return X.key=(x=O.key)!==null&&x!==void 0?x:"",X.value=(j=O.value)!==null&&j!==void 0?j:void 0,X}};function V(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(O,x=y.Writer.create()){return O.nullValue!==void 0&&x.uint32(8).int32(I(O.nullValue)),O.numberValue!==void 0&&x.uint32(17).double(O.numberValue),O.stringValue!==void 0&&x.uint32(26).string(O.stringValue),O.boolValue!==void 0&&x.uint32(32).bool(O.boolValue),O.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(O.structValue),x.uint32(42).fork()).ldelim(),O.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(O.listValue),x.uint32(50).fork()).ldelim(),x},decode(O,x){const j=O instanceof y.Reader?O:new y.Reader(O);let X=x===void 0?j.len:j.pos+x;const te=V();for(;j.pos<X;){const se=j.uint32();switch(se>>>3){case 1:te.nullValue=_(j.int32());break;case 2:te.numberValue=j.double();break;case 3:te.stringValue=j.string();break;case 4:te.boolValue=j.bool();break;case 5:te.structValue=a.Struct.unwrap(a.Struct.decode(j,j.uint32()));break;case 6:te.listValue=a.ListValue.unwrap(a.ListValue.decode(j,j.uint32()));break;default:j.skipType(se&7);break}}return te},fromJSON(O){return{nullValue:H(O.nullValue)?_(O.nullValue):void 0,numberValue:H(O.numberValue)?Number(O.numberValue):void 0,stringValue:H(O.stringValue)?String(O.stringValue):void 0,boolValue:H(O.boolValue)?Boolean(O.boolValue):void 0,structValue:D(O.structValue)?O.structValue:void 0,listValue:Array.isArray(O.listValue)?[...O.listValue]:void 0}},toJSON(O){const x={};return O.nullValue!==void 0&&(x.nullValue=O.nullValue!==void 0?T(O.nullValue):void 0),O.numberValue!==void 0&&(x.numberValue=O.numberValue),O.stringValue!==void 0&&(x.stringValue=O.stringValue),O.boolValue!==void 0&&(x.boolValue=O.boolValue),O.structValue!==void 0&&(x.structValue=O.structValue),O.listValue!==void 0&&(x.listValue=O.listValue),x},fromPartial(O){var x,j,X,te,se,oe;const F=V();return F.nullValue=(x=O.nullValue)!==null&&x!==void 0?x:void 0,F.numberValue=(j=O.numberValue)!==null&&j!==void 0?j:void 0,F.stringValue=(X=O.stringValue)!==null&&X!==void 0?X:void 0,F.boolValue=(te=O.boolValue)!==null&&te!==void 0?te:void 0,F.structValue=(se=O.structValue)!==null&&se!==void 0?se:void 0,F.listValue=(oe=O.listValue)!==null&&oe!==void 0?oe:void 0,F},wrap(O){const x=V();if(O===null)x.nullValue=b.NULL_VALUE;else if(typeof O=="boolean")x.boolValue=O;else if(typeof O=="number")x.numberValue=O;else if(typeof O=="string")x.stringValue=O;else if(Array.isArray(O))x.listValue=O;else if(typeof O=="object")x.structValue=O;else if(typeof O!="undefined")throw new Error("Unsupported any value type: "+typeof O);return x},unwrap(O){if((O==null?void 0:O.stringValue)!==void 0)return O.stringValue;if((O==null?void 0:O.numberValue)!==void 0)return O.numberValue;if((O==null?void 0:O.boolValue)!==void 0)return O.boolValue;if((O==null?void 0:O.structValue)!==void 0)return O.structValue;if((O==null?void 0:O.listValue)!==void 0)return O.listValue;if((O==null?void 0:O.nullValue)!==void 0)return null}};function $(){return{values:[]}}a.ListValue={encode(O,x=y.Writer.create()){for(const j of O.values)a.Value.encode(a.Value.wrap(j),x.uint32(10).fork()).ldelim();return x},decode(O,x){const j=O instanceof y.Reader?O:new y.Reader(O);let X=x===void 0?j.len:j.pos+x;const te=$();for(;j.pos<X;){const se=j.uint32();switch(se>>>3){case 1:te.values.push(a.Value.unwrap(a.Value.decode(j,j.uint32())));break;default:j.skipType(se&7);break}}return te},fromJSON(O){return{values:Array.isArray(O==null?void 0:O.values)?[...O.values]:[]}},toJSON(O){const x={};return O.values?x.values=O.values.map(j=>j):x.values=[],x},fromPartial(O){var x;const j=$();return j.values=((x=O.values)===null||x===void 0?void 0:x.map(X=>X))||[],j},wrap(O){const x=$();return x.values=O!=null?O:[],x},unwrap(O){return O.values}};var L=(()=>{if(typeof L!="undefined")return L;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();y.util.Long!==v.default&&(y.util.Long=v.default,y.configure());function D(O){return typeof O=="object"&&O!==null}function H(O){return O!=null}})(struct$2),function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(E,P,B,de){de===void 0&&(de=B),Object.defineProperty(E,de,{enumerable:!0,get:function(){return P[B]}})}:function(E,P,B,de){de===void 0&&(de=B),E[de]=P[B]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(E,P){Object.defineProperty(E,"default",{enumerable:!0,value:P})}:function(E,P){E.default=P}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(E){if(E&&E.__esModule)return E;var P={};if(E!=null)for(var B in E)B!=="default"&&Object.hasOwnProperty.call(E,B)&&s(P,E,B);return d(P,E),P},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(a,"__esModule",{value:!0}),a.LayoutServiceDefinition=a.LayoutServiceClientImpl=a.LayerServiceDefinition=a.LayerServiceClientImpl=a.Event=a.LayerEvent=a.LayoutEvent=a.BatchLayerRequest_BatchItem=a.BatchLayerRequest=a.BatchDeleteLayerRequest=a.DeleteLayerPayload=a.UpdateLayerRequest=a.GetLayerRequest=a.CreateLayerRequest=a.ListLayersResponse=a.ListLayersRequest=a.PartialLayerWithID=a.PartialLayer=a.LayerAnimation=a.DeleteLayoutResponse=a.DeleteLayoutRequest=a.DeleteLayoutPayload=a.UpdateLayoutRequest=a.GetLayoutRequest=a.CreateLayoutRequest=a.ListLayoutsResponse=a.ListLayoutsRequest=a.PartialLayout=a.BatchLayerResponse_BatchLayerItem=a.BatchLayerResponse=a.DeleteLayerResponse=a.DeleteLayerRequest=a.Layer=a.Layout=a.Transition_TransitionStinger=a.Transition_TransitionStingerCut=a.Transition_TransitionSwipe=a.Transition_TransitionCrossfade=a.Transition_TransitionFadeToColor=a.Transition_TransitionCut=a.Transition_TransitionMediaType=a.Transition=a.transition_TransitionSwipeTypeToNumber=a.transition_TransitionSwipeTypeToJSON=a.transition_TransitionSwipeTypeFromJSON=a.Transition_TransitionSwipeType=a.transition_TransitionDirectionToNumber=a.transition_TransitionDirectionToJSON=a.transition_TransitionDirectionFromJSON=a.Transition_TransitionDirection=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.requestAnimationModeToNumber=a.requestAnimationModeToJSON=a.requestAnimationModeFromJSON=a.RequestAnimationMode=a.layoutTypeToNumber=a.layoutTypeToJSON=a.layoutTypeFromJSON=a.LayoutType=a.protobufPackage=void 0;const v=h(umd.exports),y=c(minimal$2),b=struct$2;a.protobufPackage="apis.layout.v2";var _;(function(E){E.LAYOUT_TYPE_UNSPECIFIED="LAYOUT_TYPE_UNSPECIFIED",E.LAYOUT_TYPE_SCENELESS="LAYOUT_TYPE_SCENELESS",E.LAYOUT_TYPE_SCENE="LAYOUT_TYPE_SCENE"})(_=a.LayoutType||(a.LayoutType={}));function T(E){switch(E){case 0:case"LAYOUT_TYPE_UNSPECIFIED":return _.LAYOUT_TYPE_UNSPECIFIED;case 1:case"LAYOUT_TYPE_SCENELESS":return _.LAYOUT_TYPE_SCENELESS;case 2:case"LAYOUT_TYPE_SCENE":return _.LAYOUT_TYPE_SCENE;default:throw new Ye.Error("Unrecognized enum value "+E+" for enum LayoutType")}}a.layoutTypeFromJSON=T;function I(E){switch(E){case _.LAYOUT_TYPE_UNSPECIFIED:return"LAYOUT_TYPE_UNSPECIFIED";case _.LAYOUT_TYPE_SCENELESS:return"LAYOUT_TYPE_SCENELESS";case _.LAYOUT_TYPE_SCENE:return"LAYOUT_TYPE_SCENE";default:return"UNKNOWN"}}a.layoutTypeToJSON=I;function N(E){switch(E){case _.LAYOUT_TYPE_UNSPECIFIED:return 0;case _.LAYOUT_TYPE_SCENELESS:return 1;case _.LAYOUT_TYPE_SCENE:return 2;default:return 0}}a.layoutTypeToNumber=N;var A;(function(E){E.REQUEST_ANIMATION_MODE_UNSPECIFIED="REQUEST_ANIMATION_MODE_UNSPECIFIED",E.REQUEST_ANIMATION_MODE_PARALLEL="REQUEST_ANIMATION_MODE_PARALLEL",E.REQUEST_ANIMATION_MODE_SERIES="REQUEST_ANIMATION_MODE_SERIES"})(A=a.RequestAnimationMode||(a.RequestAnimationMode={}));function V(E){switch(E){case 0:case"REQUEST_ANIMATION_MODE_UNSPECIFIED":return A.REQUEST_ANIMATION_MODE_UNSPECIFIED;case 1:case"REQUEST_ANIMATION_MODE_PARALLEL":return A.REQUEST_ANIMATION_MODE_PARALLEL;case 2:case"REQUEST_ANIMATION_MODE_SERIES":return A.REQUEST_ANIMATION_MODE_SERIES;default:throw new Ye.Error("Unrecognized enum value "+E+" for enum RequestAnimationMode")}}a.requestAnimationModeFromJSON=V;function $(E){switch(E){case A.REQUEST_ANIMATION_MODE_UNSPECIFIED:return"REQUEST_ANIMATION_MODE_UNSPECIFIED";case A.REQUEST_ANIMATION_MODE_PARALLEL:return"REQUEST_ANIMATION_MODE_PARALLEL";case A.REQUEST_ANIMATION_MODE_SERIES:return"REQUEST_ANIMATION_MODE_SERIES";default:return"UNKNOWN"}}a.requestAnimationModeToJSON=$;function L(E){switch(E){case A.REQUEST_ANIMATION_MODE_UNSPECIFIED:return 0;case A.REQUEST_ANIMATION_MODE_PARALLEL:return 1;case A.REQUEST_ANIMATION_MODE_SERIES:return 2;default:return 0}}a.requestAnimationModeToNumber=L;var D;(function(E){E.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",E.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",E.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",E.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",E.EVENT_SUB_TYPE_BATCH="EVENT_SUB_TYPE_BATCH"})(D=a.EventSubType||(a.EventSubType={}));function H(E){switch(E){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return D.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return D.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return D.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return D.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_BATCH":return D.EVENT_SUB_TYPE_BATCH;default:throw new Ye.Error("Unrecognized enum value "+E+" for enum EventSubType")}}a.eventSubTypeFromJSON=H;function O(E){switch(E){case D.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case D.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case D.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case D.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case D.EVENT_SUB_TYPE_BATCH:return"EVENT_SUB_TYPE_BATCH";default:return"UNKNOWN"}}a.eventSubTypeToJSON=O;function x(E){switch(E){case D.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case D.EVENT_SUB_TYPE_CREATE:return 1;case D.EVENT_SUB_TYPE_UPDATE:return 2;case D.EVENT_SUB_TYPE_DELETE:return 3;case D.EVENT_SUB_TYPE_BATCH:return 4;default:return 0}}a.eventSubTypeToNumber=x;var j;(function(E){E.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",E.EVENT_TYPE_LAYOUT="EVENT_TYPE_LAYOUT",E.EVENT_TYPE_LAYER="EVENT_TYPE_LAYER"})(j=a.EventType||(a.EventType={}));function X(E){switch(E){case 0:case"EVENT_TYPE_UNSPECIFIED":return j.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_LAYOUT":return j.EVENT_TYPE_LAYOUT;case 2:case"EVENT_TYPE_LAYER":return j.EVENT_TYPE_LAYER;default:throw new Ye.Error("Unrecognized enum value "+E+" for enum EventType")}}a.eventTypeFromJSON=X;function te(E){switch(E){case j.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case j.EVENT_TYPE_LAYOUT:return"EVENT_TYPE_LAYOUT";case j.EVENT_TYPE_LAYER:return"EVENT_TYPE_LAYER";default:return"UNKNOWN"}}a.eventTypeToJSON=te;function se(E){switch(E){case j.EVENT_TYPE_UNSPECIFIED:return 0;case j.EVENT_TYPE_LAYOUT:return 1;case j.EVENT_TYPE_LAYER:return 2;default:return 0}}a.eventTypeToNumber=se;var oe;(function(E){E.TRANSITION_DIRECTION_UNSPECIFIED="TRANSITION_DIRECTION_UNSPECIFIED",E.TRANSITION_DIRECTION_LEFT="TRANSITION_DIRECTION_LEFT",E.TRANSITION_DIRECTION_RIGHT="TRANSITION_DIRECTION_RIGHT",E.TRANSITION_DIRECTION_UP="TRANSITION_DIRECTION_UP",E.TRANSITION_DIRECTION_DOWN="TRANSITION_DIRECTION_DOWN"})(oe=a.Transition_TransitionDirection||(a.Transition_TransitionDirection={}));function F(E){switch(E){case 0:case"TRANSITION_DIRECTION_UNSPECIFIED":return oe.TRANSITION_DIRECTION_UNSPECIFIED;case 1:case"TRANSITION_DIRECTION_LEFT":return oe.TRANSITION_DIRECTION_LEFT;case 2:case"TRANSITION_DIRECTION_RIGHT":return oe.TRANSITION_DIRECTION_RIGHT;case 3:case"TRANSITION_DIRECTION_UP":return oe.TRANSITION_DIRECTION_UP;case 4:case"TRANSITION_DIRECTION_DOWN":return oe.TRANSITION_DIRECTION_DOWN;default:throw new Ye.Error("Unrecognized enum value "+E+" for enum Transition_TransitionDirection")}}a.transition_TransitionDirectionFromJSON=F;function Z(E){switch(E){case oe.TRANSITION_DIRECTION_UNSPECIFIED:return"TRANSITION_DIRECTION_UNSPECIFIED";case oe.TRANSITION_DIRECTION_LEFT:return"TRANSITION_DIRECTION_LEFT";case oe.TRANSITION_DIRECTION_RIGHT:return"TRANSITION_DIRECTION_RIGHT";case oe.TRANSITION_DIRECTION_UP:return"TRANSITION_DIRECTION_UP";case oe.TRANSITION_DIRECTION_DOWN:return"TRANSITION_DIRECTION_DOWN";default:return"UNKNOWN"}}a.transition_TransitionDirectionToJSON=Z;function ne(E){switch(E){case oe.TRANSITION_DIRECTION_UNSPECIFIED:return 0;case oe.TRANSITION_DIRECTION_LEFT:return 1;case oe.TRANSITION_DIRECTION_RIGHT:return 2;case oe.TRANSITION_DIRECTION_UP:return 3;case oe.TRANSITION_DIRECTION_DOWN:return 4;default:return 0}}a.transition_TransitionDirectionToNumber=ne;var M;(function(E){E.TRANSITION_SWIPE_TYPE_UNSPECIFIED="TRANSITION_SWIPE_TYPE_UNSPECIFIED",E.TRANSITION_SWIPE_TYPE_COMBINED="TRANSITION_SWIPE_TYPE_COMBINED",E.TRANSITION_SWIPE_TYPE_SOURCE="TRANSITION_SWIPE_TYPE_SOURCE",E.TRANSITION_SWIPE_TYPE_DESTINATION="TRANSITION_SWIPE_TYPE_DESTINATION"})(M=a.Transition_TransitionSwipeType||(a.Transition_TransitionSwipeType={}));function G(E){switch(E){case 0:case"TRANSITION_SWIPE_TYPE_UNSPECIFIED":return M.TRANSITION_SWIPE_TYPE_UNSPECIFIED;case 1:case"TRANSITION_SWIPE_TYPE_COMBINED":return M.TRANSITION_SWIPE_TYPE_COMBINED;case 2:case"TRANSITION_SWIPE_TYPE_SOURCE":return M.TRANSITION_SWIPE_TYPE_SOURCE;case 3:case"TRANSITION_SWIPE_TYPE_DESTINATION":return M.TRANSITION_SWIPE_TYPE_DESTINATION;default:throw new Ye.Error("Unrecognized enum value "+E+" for enum Transition_TransitionSwipeType")}}a.transition_TransitionSwipeTypeFromJSON=G;function J(E){switch(E){case M.TRANSITION_SWIPE_TYPE_UNSPECIFIED:return"TRANSITION_SWIPE_TYPE_UNSPECIFIED";case M.TRANSITION_SWIPE_TYPE_COMBINED:return"TRANSITION_SWIPE_TYPE_COMBINED";case M.TRANSITION_SWIPE_TYPE_SOURCE:return"TRANSITION_SWIPE_TYPE_SOURCE";case M.TRANSITION_SWIPE_TYPE_DESTINATION:return"TRANSITION_SWIPE_TYPE_DESTINATION";default:return"UNKNOWN"}}a.transition_TransitionSwipeTypeToJSON=J;function ie(E){switch(E){case M.TRANSITION_SWIPE_TYPE_UNSPECIFIED:return 0;case M.TRANSITION_SWIPE_TYPE_COMBINED:return 1;case M.TRANSITION_SWIPE_TYPE_SOURCE:return 2;case M.TRANSITION_SWIPE_TYPE_DESTINATION:return 3;default:return 0}}a.transition_TransitionSwipeTypeToNumber=ie;function K(){return{fromLayoutIds:[],cut:void 0,crossfade:void 0,fadeToColor:void 0,swipe:void 0,stinger:void 0}}a.Transition={encode(E,P=y.Writer.create()){for(const B of E.fromLayoutIds)P.uint32(10).string(B);return E.cut!==void 0&&a.Transition_TransitionCut.encode(E.cut,P.uint32(82).fork()).ldelim(),E.crossfade!==void 0&&a.Transition_TransitionCrossfade.encode(E.crossfade,P.uint32(90).fork()).ldelim(),E.fadeToColor!==void 0&&a.Transition_TransitionFadeToColor.encode(E.fadeToColor,P.uint32(98).fork()).ldelim(),E.swipe!==void 0&&a.Transition_TransitionSwipe.encode(E.swipe,P.uint32(106).fork()).ldelim(),E.stinger!==void 0&&a.Transition_TransitionStinger.encode(E.stinger,P.uint32(114).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=K();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.fromLayoutIds.push(B.string());break;case 10:ee.cut=a.Transition_TransitionCut.decode(B,B.uint32());break;case 11:ee.crossfade=a.Transition_TransitionCrossfade.decode(B,B.uint32());break;case 12:ee.fadeToColor=a.Transition_TransitionFadeToColor.decode(B,B.uint32());break;case 13:ee.swipe=a.Transition_TransitionSwipe.decode(B,B.uint32());break;case 14:ee.stinger=a.Transition_TransitionStinger.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{fromLayoutIds:Array.isArray(E==null?void 0:E.fromLayoutIds)?E.fromLayoutIds.map(P=>String(P)):[],cut:fe(E.cut)?a.Transition_TransitionCut.fromJSON(E.cut):void 0,crossfade:fe(E.crossfade)?a.Transition_TransitionCrossfade.fromJSON(E.crossfade):void 0,fadeToColor:fe(E.fadeToColor)?a.Transition_TransitionFadeToColor.fromJSON(E.fadeToColor):void 0,swipe:fe(E.swipe)?a.Transition_TransitionSwipe.fromJSON(E.swipe):void 0,stinger:fe(E.stinger)?a.Transition_TransitionStinger.fromJSON(E.stinger):void 0}},toJSON(E){const P={};return E.fromLayoutIds?P.fromLayoutIds=E.fromLayoutIds.map(B=>B):P.fromLayoutIds=[],E.cut!==void 0&&(P.cut=E.cut?a.Transition_TransitionCut.toJSON(E.cut):void 0),E.crossfade!==void 0&&(P.crossfade=E.crossfade?a.Transition_TransitionCrossfade.toJSON(E.crossfade):void 0),E.fadeToColor!==void 0&&(P.fadeToColor=E.fadeToColor?a.Transition_TransitionFadeToColor.toJSON(E.fadeToColor):void 0),E.swipe!==void 0&&(P.swipe=E.swipe?a.Transition_TransitionSwipe.toJSON(E.swipe):void 0),E.stinger!==void 0&&(P.stinger=E.stinger?a.Transition_TransitionStinger.toJSON(E.stinger):void 0),P},fromPartial(E){var P;const B=K();return B.fromLayoutIds=((P=E.fromLayoutIds)===null||P===void 0?void 0:P.map(de=>de))||[],B.cut=E.cut!==void 0&&E.cut!==null?a.Transition_TransitionCut.fromPartial(E.cut):void 0,B.crossfade=E.crossfade!==void 0&&E.crossfade!==null?a.Transition_TransitionCrossfade.fromPartial(E.crossfade):void 0,B.fadeToColor=E.fadeToColor!==void 0&&E.fadeToColor!==null?a.Transition_TransitionFadeToColor.fromPartial(E.fadeToColor):void 0,B.swipe=E.swipe!==void 0&&E.swipe!==null?a.Transition_TransitionSwipe.fromPartial(E.swipe):void 0,B.stinger=E.stinger!==void 0&&E.stinger!==null?a.Transition_TransitionStinger.fromPartial(E.stinger):void 0,B}};function Y(){return{url:"",volume:0}}a.Transition_TransitionMediaType={encode(E,P=y.Writer.create()){return E.url!==""&&P.uint32(10).string(E.url),E.volume!==0&&P.uint32(17).double(E.volume),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Y();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.url=B.string();break;case 2:ee.volume=B.double();break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{url:fe(E.url)?String(E.url):"",volume:fe(E.volume)?Number(E.volume):0}},toJSON(E){const P={};return E.url!==void 0&&(P.url=E.url),E.volume!==void 0&&(P.volume=E.volume),P},fromPartial(E){var P,B;const de=Y();return de.url=(P=E.url)!==null&&P!==void 0?P:"",de.volume=(B=E.volume)!==null&&B!==void 0?B:0,de}};function ae(){return{}}a.Transition_TransitionCut={encode(E,P=y.Writer.create()){return P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=ae();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{}},toJSON(E){return{}},fromPartial(E){return ae()}};function pe(){return{durationMs:0,backgroundColor:""}}a.Transition_TransitionFadeToColor={encode(E,P=y.Writer.create()){return E.durationMs!==0&&P.uint32(8).int32(E.durationMs),E.backgroundColor!==""&&P.uint32(18).string(E.backgroundColor),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=pe();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.durationMs=B.int32();break;case 2:ee.backgroundColor=B.string();break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{durationMs:fe(E.durationMs)?Number(E.durationMs):0,backgroundColor:fe(E.backgroundColor)?String(E.backgroundColor):""}},toJSON(E){const P={};return E.durationMs!==void 0&&(P.durationMs=Math.round(E.durationMs)),E.backgroundColor!==void 0&&(P.backgroundColor=E.backgroundColor),P},fromPartial(E){var P,B;const de=pe();return de.durationMs=(P=E.durationMs)!==null&&P!==void 0?P:0,de.backgroundColor=(B=E.backgroundColor)!==null&&B!==void 0?B:"",de}};function Se(){return{durationMs:0}}a.Transition_TransitionCrossfade={encode(E,P=y.Writer.create()){return E.durationMs!==0&&P.uint32(8).int32(E.durationMs),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Se();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.durationMs=B.int32();break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{durationMs:fe(E.durationMs)?Number(E.durationMs):0}},toJSON(E){const P={};return E.durationMs!==void 0&&(P.durationMs=Math.round(E.durationMs)),P},fromPartial(E){var P;const B=Se();return B.durationMs=(P=E.durationMs)!==null&&P!==void 0?P:0,B}};function ye(){return{durationMs:0,direction:oe.TRANSITION_DIRECTION_UNSPECIFIED,combinedAnimation:M.TRANSITION_SWIPE_TYPE_UNSPECIFIED}}a.Transition_TransitionSwipe={encode(E,P=y.Writer.create()){return E.durationMs!==0&&P.uint32(8).int32(E.durationMs),E.direction!==oe.TRANSITION_DIRECTION_UNSPECIFIED&&P.uint32(16).int32(ne(E.direction)),E.combinedAnimation!==M.TRANSITION_SWIPE_TYPE_UNSPECIFIED&&P.uint32(24).int32(ie(E.combinedAnimation)),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=ye();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.durationMs=B.int32();break;case 2:ee.direction=F(B.int32());break;case 3:ee.combinedAnimation=G(B.int32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{durationMs:fe(E.durationMs)?Number(E.durationMs):0,direction:fe(E.direction)?F(E.direction):oe.TRANSITION_DIRECTION_UNSPECIFIED,combinedAnimation:fe(E.combinedAnimation)?G(E.combinedAnimation):M.TRANSITION_SWIPE_TYPE_UNSPECIFIED}},toJSON(E){const P={};return E.durationMs!==void 0&&(P.durationMs=Math.round(E.durationMs)),E.direction!==void 0&&(P.direction=Z(E.direction)),E.combinedAnimation!==void 0&&(P.combinedAnimation=J(E.combinedAnimation)),P},fromPartial(E){var P,B,de;const ee=ye();return ee.durationMs=(P=E.durationMs)!==null&&P!==void 0?P:0,ee.direction=(B=E.direction)!==null&&B!==void 0?B:oe.TRANSITION_DIRECTION_UNSPECIFIED,ee.combinedAnimation=(de=E.combinedAnimation)!==null&&de!==void 0?de:M.TRANSITION_SWIPE_TYPE_UNSPECIFIED,ee}};function w(){return{cutPointMs:0,media:void 0}}a.Transition_TransitionStingerCut={encode(E,P=y.Writer.create()){return E.cutPointMs!==0&&P.uint32(8).int32(E.cutPointMs),E.media!==void 0&&a.Transition_TransitionMediaType.encode(E.media,P.uint32(18).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=w();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.cutPointMs=B.int32();break;case 2:ee.media=a.Transition_TransitionMediaType.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{cutPointMs:fe(E.cutPointMs)?Number(E.cutPointMs):0,media:fe(E.media)?a.Transition_TransitionMediaType.fromJSON(E.media):void 0}},toJSON(E){const P={};return E.cutPointMs!==void 0&&(P.cutPointMs=Math.round(E.cutPointMs)),E.media!==void 0&&(P.media=E.media?a.Transition_TransitionMediaType.toJSON(E.media):void 0),P},fromPartial(E){var P;const B=w();return B.cutPointMs=(P=E.cutPointMs)!==null&&P!==void 0?P:0,B.media=E.media!==void 0&&E.media!==null?a.Transition_TransitionMediaType.fromPartial(E.media):void 0,B}};function z(){return{cut:void 0}}a.Transition_TransitionStinger={encode(E,P=y.Writer.create()){return E.cut!==void 0&&a.Transition_TransitionStingerCut.encode(E.cut,P.uint32(10).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=z();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.cut=a.Transition_TransitionStingerCut.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{cut:fe(E.cut)?a.Transition_TransitionStingerCut.fromJSON(E.cut):void 0}},toJSON(E){const P={};return E.cut!==void 0&&(P.cut=E.cut?a.Transition_TransitionStingerCut.toJSON(E.cut):void 0),P},fromPartial(E){const P=z();return P.cut=E.cut!==void 0&&E.cut!==null?a.Transition_TransitionStingerCut.fromPartial(E.cut):void 0,P}};function re(){return{id:"",width:0,height:0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,transitions:[],requestMetadata:void 0}}a.Layout={encode(E,P=y.Writer.create()){E.id!==""&&P.uint32(10).string(E.id),E.width!==0&&P.uint32(16).int32(E.width),E.height!==0&&P.uint32(24).int32(E.height),E.metadata!==void 0&&b.Value.encode(b.Value.wrap(E.metadata),P.uint32(50).fork()).ldelim(),E.projectId!==void 0&&P.uint32(58).string(E.projectId),E.collectionId!==void 0&&P.uint32(66).string(E.collectionId),E.type!==void 0&&P.uint32(72).int32(N(E.type));for(const B of E.transitions)a.Transition.encode(B,P.uint32(82).fork()).ldelim();return E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(810).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=re();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.id=B.string();break;case 2:ee.width=B.int32();break;case 3:ee.height=B.int32();break;case 6:ee.metadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 7:ee.projectId=B.string();break;case 8:ee.collectionId=B.string();break;case 9:ee.type=T(B.int32());break;case 10:ee.transitions.push(a.Transition.decode(B,B.uint32()));break;case 101:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{id:fe(E.id)?String(E.id):"",width:fe(E.width)?Number(E.width):0,height:fe(E.height)?Number(E.height):0,metadata:fe(E==null?void 0:E.metadata)?E.metadata:void 0,projectId:fe(E.projectId)?String(E.projectId):void 0,collectionId:fe(E.collectionId)?String(E.collectionId):void 0,type:fe(E.type)?T(E.type):void 0,transitions:Array.isArray(E==null?void 0:E.transitions)?E.transitions.map(P=>a.Transition.fromJSON(P)):[],requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0}},toJSON(E){const P={};return E.id!==void 0&&(P.id=E.id),E.width!==void 0&&(P.width=Math.round(E.width)),E.height!==void 0&&(P.height=Math.round(E.height)),E.metadata!==void 0&&(P.metadata=E.metadata),E.projectId!==void 0&&(P.projectId=E.projectId),E.collectionId!==void 0&&(P.collectionId=E.collectionId),E.type!==void 0&&(P.type=E.type!==void 0?I(E.type):void 0),E.transitions?P.transitions=E.transitions.map(B=>B?a.Transition.toJSON(B):void 0):P.transitions=[],E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),P},fromPartial(E){var P,B,de,ee,ce,ke,Le,De,Pe;const Ne=re();return Ne.id=(P=E.id)!==null&&P!==void 0?P:"",Ne.width=(B=E.width)!==null&&B!==void 0?B:0,Ne.height=(de=E.height)!==null&&de!==void 0?de:0,Ne.metadata=(ee=E.metadata)!==null&&ee!==void 0?ee:void 0,Ne.projectId=(ce=E.projectId)!==null&&ce!==void 0?ce:void 0,Ne.collectionId=(ke=E.collectionId)!==null&&ke!==void 0?ke:void 0,Ne.type=(Le=E.type)!==null&&Le!==void 0?Le:void 0,Ne.transitions=((De=E.transitions)===null||De===void 0?void 0:De.map(Ve=>a.Transition.fromPartial(Ve)))||[],Ne.requestMetadata=(Pe=E.requestMetadata)!==null&&Pe!==void 0?Pe:void 0,Ne}};function me(){return{type:"",data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:0,opacity:0,scale:0,hidden:!1,children:void 0,metadata:void 0,id:"",layoutId:"",requestMetadata:void 0,requestAnimation:[]}}a.Layer={encode(E,P=y.Writer.create()){E.type!==""&&P.uint32(10).string(E.type),E.data!==void 0&&b.Struct.encode(b.Struct.wrap(E.data),P.uint32(18).fork()).ldelim(),E.x!==void 0&&b.Value.encode(b.Value.wrap(E.x),P.uint32(26).fork()).ldelim(),E.y!==void 0&&b.Value.encode(b.Value.wrap(E.y),P.uint32(34).fork()).ldelim(),E.width!==void 0&&b.Value.encode(b.Value.wrap(E.width),P.uint32(42).fork()).ldelim(),E.height!==void 0&&b.Value.encode(b.Value.wrap(E.height),P.uint32(50).fork()).ldelim(),E.rotation!==0&&P.uint32(57).double(E.rotation),E.opacity!==0&&P.uint32(65).double(E.opacity),E.scale!==0&&P.uint32(73).double(E.scale),E.hidden===!0&&P.uint32(80).bool(E.hidden),E.children!==void 0&&b.ListValue.encode(b.ListValue.wrap(E.children),P.uint32(98).fork()).ldelim(),E.metadata!==void 0&&b.Value.encode(b.Value.wrap(E.metadata),P.uint32(114).fork()).ldelim(),E.id!==""&&P.uint32(802).string(E.id),E.layoutId!==""&&P.uint32(818).string(E.layoutId),E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(810).fork()).ldelim();for(const B of E.requestAnimation)a.LayerAnimation.encode(B,P.uint32(826).fork()).ldelim();return P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=me();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.type=B.string();break;case 2:ee.data=b.Struct.unwrap(b.Struct.decode(B,B.uint32()));break;case 3:ee.x=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 4:ee.y=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 5:ee.width=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 6:ee.height=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 7:ee.rotation=B.double();break;case 8:ee.opacity=B.double();break;case 9:ee.scale=B.double();break;case 10:ee.hidden=B.bool();break;case 12:ee.children=b.ListValue.unwrap(b.ListValue.decode(B,B.uint32()));break;case 14:ee.metadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 100:ee.id=B.string();break;case 102:ee.layoutId=B.string();break;case 101:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 103:ee.requestAnimation.push(a.LayerAnimation.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{type:fe(E.type)?String(E.type):"",data:st(E.data)?E.data:void 0,x:fe(E==null?void 0:E.x)?E.x:void 0,y:fe(E==null?void 0:E.y)?E.y:void 0,width:fe(E==null?void 0:E.width)?E.width:void 0,height:fe(E==null?void 0:E.height)?E.height:void 0,rotation:fe(E.rotation)?Number(E.rotation):0,opacity:fe(E.opacity)?Number(E.opacity):0,scale:fe(E.scale)?Number(E.scale):0,hidden:fe(E.hidden)?Boolean(E.hidden):!1,children:Array.isArray(E.children)?[...E.children]:void 0,metadata:fe(E==null?void 0:E.metadata)?E.metadata:void 0,id:fe(E.id)?String(E.id):"",layoutId:fe(E.layoutId)?String(E.layoutId):"",requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0,requestAnimation:Array.isArray(E==null?void 0:E.requestAnimation)?E.requestAnimation.map(P=>a.LayerAnimation.fromJSON(P)):[]}},toJSON(E){const P={};return E.type!==void 0&&(P.type=E.type),E.data!==void 0&&(P.data=E.data),E.x!==void 0&&(P.x=E.x),E.y!==void 0&&(P.y=E.y),E.width!==void 0&&(P.width=E.width),E.height!==void 0&&(P.height=E.height),E.rotation!==void 0&&(P.rotation=E.rotation),E.opacity!==void 0&&(P.opacity=E.opacity),E.scale!==void 0&&(P.scale=E.scale),E.hidden!==void 0&&(P.hidden=E.hidden),E.children!==void 0&&(P.children=E.children),E.metadata!==void 0&&(P.metadata=E.metadata),E.id!==void 0&&(P.id=E.id),E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),E.requestAnimation?P.requestAnimation=E.requestAnimation.map(B=>B?a.LayerAnimation.toJSON(B):void 0):P.requestAnimation=[],P},fromPartial(E){var P,B,de,ee,ce,ke,Le,De,Pe,Ne,Ve,Je,Ge,qe,We,we;const Te=me();return Te.type=(P=E.type)!==null&&P!==void 0?P:"",Te.data=(B=E.data)!==null&&B!==void 0?B:void 0,Te.x=(de=E.x)!==null&&de!==void 0?de:void 0,Te.y=(ee=E.y)!==null&&ee!==void 0?ee:void 0,Te.width=(ce=E.width)!==null&&ce!==void 0?ce:void 0,Te.height=(ke=E.height)!==null&&ke!==void 0?ke:void 0,Te.rotation=(Le=E.rotation)!==null&&Le!==void 0?Le:0,Te.opacity=(De=E.opacity)!==null&&De!==void 0?De:0,Te.scale=(Pe=E.scale)!==null&&Pe!==void 0?Pe:0,Te.hidden=(Ne=E.hidden)!==null&&Ne!==void 0?Ne:!1,Te.children=(Ve=E.children)!==null&&Ve!==void 0?Ve:void 0,Te.metadata=(Je=E.metadata)!==null&&Je!==void 0?Je:void 0,Te.id=(Ge=E.id)!==null&&Ge!==void 0?Ge:"",Te.layoutId=(qe=E.layoutId)!==null&&qe!==void 0?qe:"",Te.requestMetadata=(We=E.requestMetadata)!==null&&We!==void 0?We:void 0,Te.requestAnimation=((we=E.requestAnimation)===null||we===void 0?void 0:we.map(nt=>a.LayerAnimation.fromPartial(nt)))||[],Te}};function le(){return{layoutId:"",layerId:"",payload:void 0}}a.DeleteLayerRequest={encode(E,P=y.Writer.create()){return E.layoutId!==""&&P.uint32(10).string(E.layoutId),E.layerId!==""&&P.uint32(18).string(E.layerId),E.payload!==void 0&&a.DeleteLayerPayload.encode(E.payload,P.uint32(26).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=le();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layoutId=B.string();break;case 2:ee.layerId=B.string();break;case 3:ee.payload=a.DeleteLayerPayload.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layoutId:fe(E.layoutId)?String(E.layoutId):"",layerId:fe(E.layerId)?String(E.layerId):"",payload:fe(E.payload)?a.DeleteLayerPayload.fromJSON(E.payload):void 0}},toJSON(E){const P={};return E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.layerId!==void 0&&(P.layerId=E.layerId),E.payload!==void 0&&(P.payload=E.payload?a.DeleteLayerPayload.toJSON(E.payload):void 0),P},fromPartial(E){var P,B;const de=le();return de.layoutId=(P=E.layoutId)!==null&&P!==void 0?P:"",de.layerId=(B=E.layerId)!==null&&B!==void 0?B:"",de.payload=E.payload!==void 0&&E.payload!==null?a.DeleteLayerPayload.fromPartial(E.payload):void 0,de}};function ue(){return{id:"",layoutId:"",requestMetadata:void 0}}a.DeleteLayerResponse={encode(E,P=y.Writer.create()){return E.id!==""&&P.uint32(10).string(E.id),E.layoutId!==""&&P.uint32(18).string(E.layoutId),E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(802).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=ue();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.id=B.string();break;case 2:ee.layoutId=B.string();break;case 100:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{id:fe(E.id)?String(E.id):"",layoutId:fe(E.layoutId)?String(E.layoutId):"",requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0}},toJSON(E){const P={};return E.id!==void 0&&(P.id=E.id),E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),P},fromPartial(E){var P,B,de;const ee=ue();return ee.id=(P=E.id)!==null&&P!==void 0?P:"",ee.layoutId=(B=E.layoutId)!==null&&B!==void 0?B:"",ee.requestMetadata=(de=E.requestMetadata)!==null&&de!==void 0?de:void 0,ee}};function he(){return{layers:[],layoutId:"",requestMetadata:void 0,requestAnimationMode:A.REQUEST_ANIMATION_MODE_UNSPECIFIED}}a.BatchLayerResponse={encode(E,P=y.Writer.create()){for(const B of E.layers)a.BatchLayerResponse_BatchLayerItem.encode(B,P.uint32(18).fork()).ldelim();return E.layoutId!==""&&P.uint32(26).string(E.layoutId),E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(802).fork()).ldelim(),E.requestAnimationMode!==A.REQUEST_ANIMATION_MODE_UNSPECIFIED&&P.uint32(808).int32(L(E.requestAnimationMode)),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=he();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 2:ee.layers.push(a.BatchLayerResponse_BatchLayerItem.decode(B,B.uint32()));break;case 3:ee.layoutId=B.string();break;case 100:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 101:ee.requestAnimationMode=V(B.int32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layers:Array.isArray(E==null?void 0:E.layers)?E.layers.map(P=>a.BatchLayerResponse_BatchLayerItem.fromJSON(P)):[],layoutId:fe(E.layoutId)?String(E.layoutId):"",requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0,requestAnimationMode:fe(E.requestAnimationMode)?V(E.requestAnimationMode):A.REQUEST_ANIMATION_MODE_UNSPECIFIED}},toJSON(E){const P={};return E.layers?P.layers=E.layers.map(B=>B?a.BatchLayerResponse_BatchLayerItem.toJSON(B):void 0):P.layers=[],E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),E.requestAnimationMode!==void 0&&(P.requestAnimationMode=$(E.requestAnimationMode)),P},fromPartial(E){var P,B,de,ee;const ce=he();return ce.layers=((P=E.layers)===null||P===void 0?void 0:P.map(ke=>a.BatchLayerResponse_BatchLayerItem.fromPartial(ke)))||[],ce.layoutId=(B=E.layoutId)!==null&&B!==void 0?B:"",ce.requestMetadata=(de=E.requestMetadata)!==null&&de!==void 0?de:void 0,ce.requestAnimationMode=(ee=E.requestAnimationMode)!==null&&ee!==void 0?ee:A.REQUEST_ANIMATION_MODE_UNSPECIFIED,ce}};function _e(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerResponse_BatchLayerItem={encode(E,P=y.Writer.create()){return E.create!==void 0&&a.Layer.encode(E.create,P.uint32(10).fork()).ldelim(),E.update!==void 0&&a.Layer.encode(E.update,P.uint32(18).fork()).ldelim(),E.delete!==void 0&&a.DeleteLayerResponse.encode(E.delete,P.uint32(26).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=_e();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.create=a.Layer.decode(B,B.uint32());break;case 2:ee.update=a.Layer.decode(B,B.uint32());break;case 3:ee.delete=a.DeleteLayerResponse.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{create:fe(E.create)?a.Layer.fromJSON(E.create):void 0,update:fe(E.update)?a.Layer.fromJSON(E.update):void 0,delete:fe(E.delete)?a.DeleteLayerResponse.fromJSON(E.delete):void 0}},toJSON(E){const P={};return E.create!==void 0&&(P.create=E.create?a.Layer.toJSON(E.create):void 0),E.update!==void 0&&(P.update=E.update?a.Layer.toJSON(E.update):void 0),E.delete!==void 0&&(P.delete=E.delete?a.DeleteLayerResponse.toJSON(E.delete):void 0),P},fromPartial(E){const P=_e();return P.create=E.create!==void 0&&E.create!==null?a.Layer.fromPartial(E.create):void 0,P.update=E.update!==void 0&&E.update!==null?a.Layer.fromPartial(E.update):void 0,P.delete=E.delete!==void 0&&E.delete!==null?a.DeleteLayerResponse.fromPartial(E.delete):void 0,P}};function Ce(){return{width:void 0,height:void 0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,transitions:[],requestMetadata:void 0}}a.PartialLayout={encode(E,P=y.Writer.create()){E.width!==void 0&&P.uint32(16).int32(E.width),E.height!==void 0&&P.uint32(24).int32(E.height),E.metadata!==void 0&&b.Value.encode(b.Value.wrap(E.metadata),P.uint32(50).fork()).ldelim(),E.projectId!==void 0&&P.uint32(58).string(E.projectId),E.collectionId!==void 0&&P.uint32(66).string(E.collectionId),E.type!==void 0&&P.uint32(72).int32(N(E.type));for(const B of E.transitions)a.Transition.encode(B,P.uint32(82).fork()).ldelim();return E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(810).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Ce();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 2:ee.width=B.int32();break;case 3:ee.height=B.int32();break;case 6:ee.metadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 7:ee.projectId=B.string();break;case 8:ee.collectionId=B.string();break;case 9:ee.type=T(B.int32());break;case 10:ee.transitions.push(a.Transition.decode(B,B.uint32()));break;case 101:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{width:fe(E.width)?Number(E.width):void 0,height:fe(E.height)?Number(E.height):void 0,metadata:fe(E==null?void 0:E.metadata)?E.metadata:void 0,projectId:fe(E.projectId)?String(E.projectId):void 0,collectionId:fe(E.collectionId)?String(E.collectionId):void 0,type:fe(E.type)?T(E.type):void 0,transitions:Array.isArray(E==null?void 0:E.transitions)?E.transitions.map(P=>a.Transition.fromJSON(P)):[],requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0}},toJSON(E){const P={};return E.width!==void 0&&(P.width=Math.round(E.width)),E.height!==void 0&&(P.height=Math.round(E.height)),E.metadata!==void 0&&(P.metadata=E.metadata),E.projectId!==void 0&&(P.projectId=E.projectId),E.collectionId!==void 0&&(P.collectionId=E.collectionId),E.type!==void 0&&(P.type=E.type!==void 0?I(E.type):void 0),E.transitions?P.transitions=E.transitions.map(B=>B?a.Transition.toJSON(B):void 0):P.transitions=[],E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),P},fromPartial(E){var P,B,de,ee,ce,ke,Le,De;const Pe=Ce();return Pe.width=(P=E.width)!==null&&P!==void 0?P:void 0,Pe.height=(B=E.height)!==null&&B!==void 0?B:void 0,Pe.metadata=(de=E.metadata)!==null&&de!==void 0?de:void 0,Pe.projectId=(ee=E.projectId)!==null&&ee!==void 0?ee:void 0,Pe.collectionId=(ce=E.collectionId)!==null&&ce!==void 0?ce:void 0,Pe.type=(ke=E.type)!==null&&ke!==void 0?ke:void 0,Pe.transitions=((Le=E.transitions)===null||Le===void 0?void 0:Le.map(Ne=>a.Transition.fromPartial(Ne)))||[],Pe.requestMetadata=(De=E.requestMetadata)!==null&&De!==void 0?De:void 0,Pe}};function Me(){return{projectId:void 0,collectionId:void 0,type:void 0}}a.ListLayoutsRequest={encode(E,P=y.Writer.create()){return E.projectId!==void 0&&P.uint32(10).string(E.projectId),E.collectionId!==void 0&&P.uint32(18).string(E.collectionId),E.type!==void 0&&P.uint32(24).int32(N(E.type)),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Me();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.projectId=B.string();break;case 2:ee.collectionId=B.string();break;case 3:ee.type=T(B.int32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{projectId:fe(E.projectId)?String(E.projectId):void 0,collectionId:fe(E.collectionId)?String(E.collectionId):void 0,type:fe(E.type)?T(E.type):void 0}},toJSON(E){const P={};return E.projectId!==void 0&&(P.projectId=E.projectId),E.collectionId!==void 0&&(P.collectionId=E.collectionId),E.type!==void 0&&(P.type=E.type!==void 0?I(E.type):void 0),P},fromPartial(E){var P,B,de;const ee=Me();return ee.projectId=(P=E.projectId)!==null&&P!==void 0?P:void 0,ee.collectionId=(B=E.collectionId)!==null&&B!==void 0?B:void 0,ee.type=(de=E.type)!==null&&de!==void 0?de:void 0,ee}};function Be(){return{layouts:[]}}a.ListLayoutsResponse={encode(E,P=y.Writer.create()){for(const B of E.layouts)a.Layout.encode(B,P.uint32(10).fork()).ldelim();return P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Be();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layouts.push(a.Layout.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layouts:Array.isArray(E==null?void 0:E.layouts)?E.layouts.map(P=>a.Layout.fromJSON(P)):[]}},toJSON(E){const P={};return E.layouts?P.layouts=E.layouts.map(B=>B?a.Layout.toJSON(B):void 0):P.layouts=[],P},fromPartial(E){var P;const B=Be();return B.layouts=((P=E.layouts)===null||P===void 0?void 0:P.map(de=>a.Layout.fromPartial(de)))||[],B}};function ze(){return{layout:void 0}}a.CreateLayoutRequest={encode(E,P=y.Writer.create()){return E.layout!==void 0&&a.PartialLayout.encode(E.layout,P.uint32(18).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=ze();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 2:ee.layout=a.PartialLayout.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layout:fe(E.layout)?a.PartialLayout.fromJSON(E.layout):void 0}},toJSON(E){const P={};return E.layout!==void 0&&(P.layout=E.layout?a.PartialLayout.toJSON(E.layout):void 0),P},fromPartial(E){const P=ze();return P.layout=E.layout!==void 0&&E.layout!==null?a.PartialLayout.fromPartial(E.layout):void 0,P}};function Ie(){return{layoutId:""}}a.GetLayoutRequest={encode(E,P=y.Writer.create()){return E.layoutId!==""&&P.uint32(10).string(E.layoutId),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Ie();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layoutId=B.string();break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layoutId:fe(E.layoutId)?String(E.layoutId):""}},toJSON(E){const P={};return E.layoutId!==void 0&&(P.layoutId=E.layoutId),P},fromPartial(E){var P;const B=Ie();return B.layoutId=(P=E.layoutId)!==null&&P!==void 0?P:"",B}};function Ze(){return{layoutId:"",layout:void 0}}a.UpdateLayoutRequest={encode(E,P=y.Writer.create()){return E.layoutId!==""&&P.uint32(10).string(E.layoutId),E.layout!==void 0&&a.PartialLayout.encode(E.layout,P.uint32(26).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Ze();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layoutId=B.string();break;case 3:ee.layout=a.PartialLayout.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layoutId:fe(E.layoutId)?String(E.layoutId):"",layout:fe(E.layout)?a.PartialLayout.fromJSON(E.layout):void 0}},toJSON(E){const P={};return E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.layout!==void 0&&(P.layout=E.layout?a.PartialLayout.toJSON(E.layout):void 0),P},fromPartial(E){var P;const B=Ze();return B.layoutId=(P=E.layoutId)!==null&&P!==void 0?P:"",B.layout=E.layout!==void 0&&E.layout!==null?a.PartialLayout.fromPartial(E.layout):void 0,B}};function rt(){return{requestMetadata:void 0}}a.DeleteLayoutPayload={encode(E,P=y.Writer.create()){return E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(802).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=rt();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 100:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0}},toJSON(E){const P={};return E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),P},fromPartial(E){var P;const B=rt();return B.requestMetadata=(P=E.requestMetadata)!==null&&P!==void 0?P:void 0,B}};function it(){return{layoutId:"",payload:void 0}}a.DeleteLayoutRequest={encode(E,P=y.Writer.create()){return E.layoutId!==""&&P.uint32(10).string(E.layoutId),E.payload!==void 0&&a.DeleteLayoutPayload.encode(E.payload,P.uint32(18).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=it();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layoutId=B.string();break;case 2:ee.payload=a.DeleteLayoutPayload.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layoutId:fe(E.layoutId)?String(E.layoutId):"",payload:fe(E.payload)?a.DeleteLayoutPayload.fromJSON(E.payload):void 0}},toJSON(E){const P={};return E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.payload!==void 0&&(P.payload=E.payload?a.DeleteLayoutPayload.toJSON(E.payload):void 0),P},fromPartial(E){var P;const B=it();return B.layoutId=(P=E.layoutId)!==null&&P!==void 0?P:"",B.payload=E.payload!==void 0&&E.payload!==null?a.DeleteLayoutPayload.fromPartial(E.payload):void 0,B}};function Ee(){return{id:"",requestMetadata:void 0}}a.DeleteLayoutResponse={encode(E,P=y.Writer.create()){return E.id!==""&&P.uint32(18).string(E.id),E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(802).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Ee();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 2:ee.id=B.string();break;case 100:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{id:fe(E.id)?String(E.id):"",requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0}},toJSON(E){const P={};return E.id!==void 0&&(P.id=E.id),E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),P},fromPartial(E){var P,B;const de=Ee();return de.id=(P=E.id)!==null&&P!==void 0?P:"",de.requestMetadata=(B=E.requestMetadata)!==null&&B!==void 0?B:void 0,de}};function Fe(){return{properties:[],durationMs:0,delayMs:void 0,easingMode:void 0}}a.LayerAnimation={encode(E,P=y.Writer.create()){for(const B of E.properties)P.uint32(10).string(B);return E.durationMs!==0&&P.uint32(16).int32(E.durationMs),E.delayMs!==void 0&&P.uint32(32).int32(E.delayMs),E.easingMode!==void 0&&P.uint32(42).string(E.easingMode),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Fe();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.properties.push(B.string());break;case 2:ee.durationMs=B.int32();break;case 4:ee.delayMs=B.int32();break;case 5:ee.easingMode=B.string();break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{properties:Array.isArray(E==null?void 0:E.properties)?E.properties.map(P=>String(P)):[],durationMs:fe(E.durationMs)?Number(E.durationMs):0,delayMs:fe(E.delayMs)?Number(E.delayMs):void 0,easingMode:fe(E.easingMode)?String(E.easingMode):void 0}},toJSON(E){const P={};return E.properties?P.properties=E.properties.map(B=>B):P.properties=[],E.durationMs!==void 0&&(P.durationMs=Math.round(E.durationMs)),E.delayMs!==void 0&&(P.delayMs=Math.round(E.delayMs)),E.easingMode!==void 0&&(P.easingMode=E.easingMode),P},fromPartial(E){var P,B,de,ee;const ce=Fe();return ce.properties=((P=E.properties)===null||P===void 0?void 0:P.map(ke=>ke))||[],ce.durationMs=(B=E.durationMs)!==null&&B!==void 0?B:0,ce.delayMs=(de=E.delayMs)!==null&&de!==void 0?de:void 0,ce.easingMode=(ee=E.easingMode)!==null&&ee!==void 0?ee:void 0,ce}};function je(){return{type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,children:void 0,parentId:void 0,metadata:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayer={encode(E,P=y.Writer.create()){E.type!==void 0&&P.uint32(10).string(E.type),E.data!==void 0&&b.Struct.encode(b.Struct.wrap(E.data),P.uint32(18).fork()).ldelim(),E.x!==void 0&&b.Value.encode(b.Value.wrap(E.x),P.uint32(26).fork()).ldelim(),E.y!==void 0&&b.Value.encode(b.Value.wrap(E.y),P.uint32(34).fork()).ldelim(),E.width!==void 0&&b.Value.encode(b.Value.wrap(E.width),P.uint32(42).fork()).ldelim(),E.height!==void 0&&b.Value.encode(b.Value.wrap(E.height),P.uint32(50).fork()).ldelim(),E.rotation!==void 0&&P.uint32(57).double(E.rotation),E.opacity!==void 0&&P.uint32(65).double(E.opacity),E.scale!==void 0&&P.uint32(73).double(E.scale),E.hidden!==void 0&&P.uint32(80).bool(E.hidden),E.children!==void 0&&b.ListValue.encode(b.ListValue.wrap(E.children),P.uint32(98).fork()).ldelim(),E.parentId!==void 0&&P.uint32(106).string(E.parentId),E.metadata!==void 0&&b.Value.encode(b.Value.wrap(E.metadata),P.uint32(114).fork()).ldelim(),E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(802).fork()).ldelim();for(const B of E.requestAnimation)a.LayerAnimation.encode(B,P.uint32(826).fork()).ldelim();return P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=je();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.type=B.string();break;case 2:ee.data=b.Struct.unwrap(b.Struct.decode(B,B.uint32()));break;case 3:ee.x=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 4:ee.y=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 5:ee.width=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 6:ee.height=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 7:ee.rotation=B.double();break;case 8:ee.opacity=B.double();break;case 9:ee.scale=B.double();break;case 10:ee.hidden=B.bool();break;case 12:ee.children=b.ListValue.unwrap(b.ListValue.decode(B,B.uint32()));break;case 13:ee.parentId=B.string();break;case 14:ee.metadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 100:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 103:ee.requestAnimation.push(a.LayerAnimation.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{type:fe(E.type)?String(E.type):void 0,data:st(E.data)?E.data:void 0,x:fe(E==null?void 0:E.x)?E.x:void 0,y:fe(E==null?void 0:E.y)?E.y:void 0,width:fe(E==null?void 0:E.width)?E.width:void 0,height:fe(E==null?void 0:E.height)?E.height:void 0,rotation:fe(E.rotation)?Number(E.rotation):void 0,opacity:fe(E.opacity)?Number(E.opacity):void 0,scale:fe(E.scale)?Number(E.scale):void 0,hidden:fe(E.hidden)?Boolean(E.hidden):void 0,children:Array.isArray(E.children)?[...E.children]:void 0,parentId:fe(E.parentId)?String(E.parentId):void 0,metadata:fe(E==null?void 0:E.metadata)?E.metadata:void 0,requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0,requestAnimation:Array.isArray(E==null?void 0:E.requestAnimation)?E.requestAnimation.map(P=>a.LayerAnimation.fromJSON(P)):[]}},toJSON(E){const P={};return E.type!==void 0&&(P.type=E.type),E.data!==void 0&&(P.data=E.data),E.x!==void 0&&(P.x=E.x),E.y!==void 0&&(P.y=E.y),E.width!==void 0&&(P.width=E.width),E.height!==void 0&&(P.height=E.height),E.rotation!==void 0&&(P.rotation=E.rotation),E.opacity!==void 0&&(P.opacity=E.opacity),E.scale!==void 0&&(P.scale=E.scale),E.hidden!==void 0&&(P.hidden=E.hidden),E.children!==void 0&&(P.children=E.children),E.parentId!==void 0&&(P.parentId=E.parentId),E.metadata!==void 0&&(P.metadata=E.metadata),E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),E.requestAnimation?P.requestAnimation=E.requestAnimation.map(B=>B?a.LayerAnimation.toJSON(B):void 0):P.requestAnimation=[],P},fromPartial(E){var P,B,de,ee,ce,ke,Le,De,Pe,Ne,Ve,Je,Ge,qe,We;const we=je();return we.type=(P=E.type)!==null&&P!==void 0?P:void 0,we.data=(B=E.data)!==null&&B!==void 0?B:void 0,we.x=(de=E.x)!==null&&de!==void 0?de:void 0,we.y=(ee=E.y)!==null&&ee!==void 0?ee:void 0,we.width=(ce=E.width)!==null&&ce!==void 0?ce:void 0,we.height=(ke=E.height)!==null&&ke!==void 0?ke:void 0,we.rotation=(Le=E.rotation)!==null&&Le!==void 0?Le:void 0,we.opacity=(De=E.opacity)!==null&&De!==void 0?De:void 0,we.scale=(Pe=E.scale)!==null&&Pe!==void 0?Pe:void 0,we.hidden=(Ne=E.hidden)!==null&&Ne!==void 0?Ne:void 0,we.children=(Ve=E.children)!==null&&Ve!==void 0?Ve:void 0,we.parentId=(Je=E.parentId)!==null&&Je!==void 0?Je:void 0,we.metadata=(Ge=E.metadata)!==null&&Ge!==void 0?Ge:void 0,we.requestMetadata=(qe=E.requestMetadata)!==null&&qe!==void 0?qe:void 0,we.requestAnimation=((We=E.requestAnimation)===null||We===void 0?void 0:We.map(Te=>a.LayerAnimation.fromPartial(Te)))||[],we}};function Ke(){return{id:"",type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,children:void 0,parentId:void 0,metadata:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayerWithID={encode(E,P=y.Writer.create()){E.id!==""&&P.uint32(8002).string(E.id),E.type!==void 0&&P.uint32(10).string(E.type),E.data!==void 0&&b.Struct.encode(b.Struct.wrap(E.data),P.uint32(18).fork()).ldelim(),E.x!==void 0&&b.Value.encode(b.Value.wrap(E.x),P.uint32(26).fork()).ldelim(),E.y!==void 0&&b.Value.encode(b.Value.wrap(E.y),P.uint32(34).fork()).ldelim(),E.width!==void 0&&b.Value.encode(b.Value.wrap(E.width),P.uint32(42).fork()).ldelim(),E.height!==void 0&&b.Value.encode(b.Value.wrap(E.height),P.uint32(50).fork()).ldelim(),E.rotation!==void 0&&P.uint32(57).double(E.rotation),E.opacity!==void 0&&P.uint32(65).double(E.opacity),E.scale!==void 0&&P.uint32(73).double(E.scale),E.hidden!==void 0&&P.uint32(80).bool(E.hidden),E.children!==void 0&&b.ListValue.encode(b.ListValue.wrap(E.children),P.uint32(98).fork()).ldelim(),E.parentId!==void 0&&P.uint32(106).string(E.parentId),E.metadata!==void 0&&b.Value.encode(b.Value.wrap(E.metadata),P.uint32(114).fork()).ldelim(),E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(802).fork()).ldelim();for(const B of E.requestAnimation)a.LayerAnimation.encode(B,P.uint32(826).fork()).ldelim();return P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Ke();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1e3:ee.id=B.string();break;case 1:ee.type=B.string();break;case 2:ee.data=b.Struct.unwrap(b.Struct.decode(B,B.uint32()));break;case 3:ee.x=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 4:ee.y=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 5:ee.width=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 6:ee.height=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 7:ee.rotation=B.double();break;case 8:ee.opacity=B.double();break;case 9:ee.scale=B.double();break;case 10:ee.hidden=B.bool();break;case 12:ee.children=b.ListValue.unwrap(b.ListValue.decode(B,B.uint32()));break;case 13:ee.parentId=B.string();break;case 14:ee.metadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 100:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 103:ee.requestAnimation.push(a.LayerAnimation.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{id:fe(E.id)?String(E.id):"",type:fe(E.type)?String(E.type):void 0,data:st(E.data)?E.data:void 0,x:fe(E==null?void 0:E.x)?E.x:void 0,y:fe(E==null?void 0:E.y)?E.y:void 0,width:fe(E==null?void 0:E.width)?E.width:void 0,height:fe(E==null?void 0:E.height)?E.height:void 0,rotation:fe(E.rotation)?Number(E.rotation):void 0,opacity:fe(E.opacity)?Number(E.opacity):void 0,scale:fe(E.scale)?Number(E.scale):void 0,hidden:fe(E.hidden)?Boolean(E.hidden):void 0,children:Array.isArray(E.children)?[...E.children]:void 0,parentId:fe(E.parentId)?String(E.parentId):void 0,metadata:fe(E==null?void 0:E.metadata)?E.metadata:void 0,requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0,requestAnimation:Array.isArray(E==null?void 0:E.requestAnimation)?E.requestAnimation.map(P=>a.LayerAnimation.fromJSON(P)):[]}},toJSON(E){const P={};return E.id!==void 0&&(P.id=E.id),E.type!==void 0&&(P.type=E.type),E.data!==void 0&&(P.data=E.data),E.x!==void 0&&(P.x=E.x),E.y!==void 0&&(P.y=E.y),E.width!==void 0&&(P.width=E.width),E.height!==void 0&&(P.height=E.height),E.rotation!==void 0&&(P.rotation=E.rotation),E.opacity!==void 0&&(P.opacity=E.opacity),E.scale!==void 0&&(P.scale=E.scale),E.hidden!==void 0&&(P.hidden=E.hidden),E.children!==void 0&&(P.children=E.children),E.parentId!==void 0&&(P.parentId=E.parentId),E.metadata!==void 0&&(P.metadata=E.metadata),E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),E.requestAnimation?P.requestAnimation=E.requestAnimation.map(B=>B?a.LayerAnimation.toJSON(B):void 0):P.requestAnimation=[],P},fromPartial(E){var P,B,de,ee,ce,ke,Le,De,Pe,Ne,Ve,Je,Ge,qe,We,we;const Te=Ke();return Te.id=(P=E.id)!==null&&P!==void 0?P:"",Te.type=(B=E.type)!==null&&B!==void 0?B:void 0,Te.data=(de=E.data)!==null&&de!==void 0?de:void 0,Te.x=(ee=E.x)!==null&&ee!==void 0?ee:void 0,Te.y=(ce=E.y)!==null&&ce!==void 0?ce:void 0,Te.width=(ke=E.width)!==null&&ke!==void 0?ke:void 0,Te.height=(Le=E.height)!==null&&Le!==void 0?Le:void 0,Te.rotation=(De=E.rotation)!==null&&De!==void 0?De:void 0,Te.opacity=(Pe=E.opacity)!==null&&Pe!==void 0?Pe:void 0,Te.scale=(Ne=E.scale)!==null&&Ne!==void 0?Ne:void 0,Te.hidden=(Ve=E.hidden)!==null&&Ve!==void 0?Ve:void 0,Te.children=(Je=E.children)!==null&&Je!==void 0?Je:void 0,Te.parentId=(Ge=E.parentId)!==null&&Ge!==void 0?Ge:void 0,Te.metadata=(qe=E.metadata)!==null&&qe!==void 0?qe:void 0,Te.requestMetadata=(We=E.requestMetadata)!==null&&We!==void 0?We:void 0,Te.requestAnimation=((we=E.requestAnimation)===null||we===void 0?void 0:we.map(nt=>a.LayerAnimation.fromPartial(nt)))||[],Te}};function xe(){return{layoutId:""}}a.ListLayersRequest={encode(E,P=y.Writer.create()){return E.layoutId!==""&&P.uint32(10).string(E.layoutId),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=xe();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layoutId=B.string();break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layoutId:fe(E.layoutId)?String(E.layoutId):""}},toJSON(E){const P={};return E.layoutId!==void 0&&(P.layoutId=E.layoutId),P},fromPartial(E){var P;const B=xe();return B.layoutId=(P=E.layoutId)!==null&&P!==void 0?P:"",B}};function Xe(){return{layers:[]}}a.ListLayersResponse={encode(E,P=y.Writer.create()){for(const B of E.layers)a.Layer.encode(B,P.uint32(10).fork()).ldelim();return P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Xe();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layers.push(a.Layer.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layers:Array.isArray(E==null?void 0:E.layers)?E.layers.map(P=>a.Layer.fromJSON(P)):[]}},toJSON(E){const P={};return E.layers?P.layers=E.layers.map(B=>B?a.Layer.toJSON(B):void 0):P.layers=[],P},fromPartial(E){var P;const B=Xe();return B.layers=((P=E.layers)===null||P===void 0?void 0:P.map(de=>a.Layer.fromPartial(de)))||[],B}};function at(){return{layoutId:"",layer:void 0}}a.CreateLayerRequest={encode(E,P=y.Writer.create()){return E.layoutId!==""&&P.uint32(10).string(E.layoutId),E.layer!==void 0&&a.PartialLayer.encode(E.layer,P.uint32(18).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=at();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layoutId=B.string();break;case 2:ee.layer=a.PartialLayer.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layoutId:fe(E.layoutId)?String(E.layoutId):"",layer:fe(E.layer)?a.PartialLayer.fromJSON(E.layer):void 0}},toJSON(E){const P={};return E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.layer!==void 0&&(P.layer=E.layer?a.PartialLayer.toJSON(E.layer):void 0),P},fromPartial(E){var P;const B=at();return B.layoutId=(P=E.layoutId)!==null&&P!==void 0?P:"",B.layer=E.layer!==void 0&&E.layer!==null?a.PartialLayer.fromPartial(E.layer):void 0,B}};function ot(){return{layoutId:"",layerId:""}}a.GetLayerRequest={encode(E,P=y.Writer.create()){return E.layoutId!==""&&P.uint32(10).string(E.layoutId),E.layerId!==""&&P.uint32(18).string(E.layerId),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=ot();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layoutId=B.string();break;case 2:ee.layerId=B.string();break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layoutId:fe(E.layoutId)?String(E.layoutId):"",layerId:fe(E.layerId)?String(E.layerId):""}},toJSON(E){const P={};return E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.layerId!==void 0&&(P.layerId=E.layerId),P},fromPartial(E){var P,B;const de=ot();return de.layoutId=(P=E.layoutId)!==null&&P!==void 0?P:"",de.layerId=(B=E.layerId)!==null&&B!==void 0?B:"",de}};function He(){return{layoutId:"",layerId:"",layer:void 0}}a.UpdateLayerRequest={encode(E,P=y.Writer.create()){return E.layoutId!==""&&P.uint32(10).string(E.layoutId),E.layerId!==""&&P.uint32(18).string(E.layerId),E.layer!==void 0&&a.PartialLayer.encode(E.layer,P.uint32(26).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=He();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layoutId=B.string();break;case 2:ee.layerId=B.string();break;case 3:ee.layer=a.PartialLayer.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layoutId:fe(E.layoutId)?String(E.layoutId):"",layerId:fe(E.layerId)?String(E.layerId):"",layer:fe(E.layer)?a.PartialLayer.fromJSON(E.layer):void 0}},toJSON(E){const P={};return E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.layerId!==void 0&&(P.layerId=E.layerId),E.layer!==void 0&&(P.layer=E.layer?a.PartialLayer.toJSON(E.layer):void 0),P},fromPartial(E){var P,B;const de=He();return de.layoutId=(P=E.layoutId)!==null&&P!==void 0?P:"",de.layerId=(B=E.layerId)!==null&&B!==void 0?B:"",de.layer=E.layer!==void 0&&E.layer!==null?a.PartialLayer.fromPartial(E.layer):void 0,de}};function Qe(){return{requestMetadata:void 0}}a.DeleteLayerPayload={encode(E,P=y.Writer.create()){return E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(802).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Qe();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 100:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0}},toJSON(E){const P={};return E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),P},fromPartial(E){var P;const B=Qe();return B.requestMetadata=(P=E.requestMetadata)!==null&&P!==void 0?P:void 0,B}};function et(){return{id:"",requestMetadata:void 0}}a.BatchDeleteLayerRequest={encode(E,P=y.Writer.create()){return E.id!==""&&P.uint32(10).string(E.id),E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(802).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=et();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.id=B.string();break;case 100:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{id:fe(E.id)?String(E.id):"",requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0}},toJSON(E){const P={};return E.id!==void 0&&(P.id=E.id),E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),P},fromPartial(E){var P,B;const de=et();return de.id=(P=E.id)!==null&&P!==void 0?P:"",de.requestMetadata=(B=E.requestMetadata)!==null&&B!==void 0?B:void 0,de}};function tt(){return{layoutId:"",layers:[],requestMetadata:void 0,requestAnimationMode:void 0}}a.BatchLayerRequest={encode(E,P=y.Writer.create()){E.layoutId!==""&&P.uint32(10).string(E.layoutId);for(const B of E.layers)a.BatchLayerRequest_BatchItem.encode(B,P.uint32(18).fork()).ldelim();return E.requestMetadata!==void 0&&b.Value.encode(b.Value.wrap(E.requestMetadata),P.uint32(802).fork()).ldelim(),E.requestAnimationMode!==void 0&&P.uint32(808).int32(L(E.requestAnimationMode)),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=tt();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layoutId=B.string();break;case 2:ee.layers.push(a.BatchLayerRequest_BatchItem.decode(B,B.uint32()));break;case 100:ee.requestMetadata=b.Value.unwrap(b.Value.decode(B,B.uint32()));break;case 101:ee.requestAnimationMode=V(B.int32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layoutId:fe(E.layoutId)?String(E.layoutId):"",layers:Array.isArray(E==null?void 0:E.layers)?E.layers.map(P=>a.BatchLayerRequest_BatchItem.fromJSON(P)):[],requestMetadata:fe(E==null?void 0:E.requestMetadata)?E.requestMetadata:void 0,requestAnimationMode:fe(E.requestAnimationMode)?V(E.requestAnimationMode):void 0}},toJSON(E){const P={};return E.layoutId!==void 0&&(P.layoutId=E.layoutId),E.layers?P.layers=E.layers.map(B=>B?a.BatchLayerRequest_BatchItem.toJSON(B):void 0):P.layers=[],E.requestMetadata!==void 0&&(P.requestMetadata=E.requestMetadata),E.requestAnimationMode!==void 0&&(P.requestAnimationMode=E.requestAnimationMode!==void 0?$(E.requestAnimationMode):void 0),P},fromPartial(E){var P,B,de,ee;const ce=tt();return ce.layoutId=(P=E.layoutId)!==null&&P!==void 0?P:"",ce.layers=((B=E.layers)===null||B===void 0?void 0:B.map(ke=>a.BatchLayerRequest_BatchItem.fromPartial(ke)))||[],ce.requestMetadata=(de=E.requestMetadata)!==null&&de!==void 0?de:void 0,ce.requestAnimationMode=(ee=E.requestAnimationMode)!==null&&ee!==void 0?ee:void 0,ce}};function Ae(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerRequest_BatchItem={encode(E,P=y.Writer.create()){return E.create!==void 0&&a.PartialLayer.encode(E.create,P.uint32(10).fork()).ldelim(),E.update!==void 0&&a.PartialLayerWithID.encode(E.update,P.uint32(18).fork()).ldelim(),E.delete!==void 0&&a.BatchDeleteLayerRequest.encode(E.delete,P.uint32(26).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=Ae();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.create=a.PartialLayer.decode(B,B.uint32());break;case 2:ee.update=a.PartialLayerWithID.decode(B,B.uint32());break;case 3:ee.delete=a.BatchDeleteLayerRequest.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{create:fe(E.create)?a.PartialLayer.fromJSON(E.create):void 0,update:fe(E.update)?a.PartialLayerWithID.fromJSON(E.update):void 0,delete:fe(E.delete)?a.BatchDeleteLayerRequest.fromJSON(E.delete):void 0}},toJSON(E){const P={};return E.create!==void 0&&(P.create=E.create?a.PartialLayer.toJSON(E.create):void 0),E.update!==void 0&&(P.update=E.update?a.PartialLayerWithID.toJSON(E.update):void 0),E.delete!==void 0&&(P.delete=E.delete?a.BatchDeleteLayerRequest.toJSON(E.delete):void 0),P},fromPartial(E){const P=Ae();return P.create=E.create!==void 0&&E.create!==null?a.PartialLayer.fromPartial(E.create):void 0,P.update=E.update!==void 0&&E.update!==null?a.PartialLayerWithID.fromPartial(E.update):void 0,P.delete=E.delete!==void 0&&E.delete!==null?a.BatchDeleteLayerRequest.fromPartial(E.delete):void 0,P}};function dt(){return{create:void 0,update:void 0,delete:void 0}}a.LayoutEvent={encode(E,P=y.Writer.create()){return E.create!==void 0&&a.Layout.encode(E.create,P.uint32(10).fork()).ldelim(),E.update!==void 0&&a.Layout.encode(E.update,P.uint32(18).fork()).ldelim(),E.delete!==void 0&&a.DeleteLayoutResponse.encode(E.delete,P.uint32(26).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=dt();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.create=a.Layout.decode(B,B.uint32());break;case 2:ee.update=a.Layout.decode(B,B.uint32());break;case 3:ee.delete=a.DeleteLayoutResponse.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{create:fe(E.create)?a.Layout.fromJSON(E.create):void 0,update:fe(E.update)?a.Layout.fromJSON(E.update):void 0,delete:fe(E.delete)?a.DeleteLayoutResponse.fromJSON(E.delete):void 0}},toJSON(E){const P={};return E.create!==void 0&&(P.create=E.create?a.Layout.toJSON(E.create):void 0),E.update!==void 0&&(P.update=E.update?a.Layout.toJSON(E.update):void 0),E.delete!==void 0&&(P.delete=E.delete?a.DeleteLayoutResponse.toJSON(E.delete):void 0),P},fromPartial(E){const P=dt();return P.create=E.create!==void 0&&E.create!==null?a.Layout.fromPartial(E.create):void 0,P.update=E.update!==void 0&&E.update!==null?a.Layout.fromPartial(E.update):void 0,P.delete=E.delete!==void 0&&E.delete!==null?a.DeleteLayoutResponse.fromPartial(E.delete):void 0,P}};function ut(){return{create:void 0,update:void 0,delete:void 0,batch:void 0}}a.LayerEvent={encode(E,P=y.Writer.create()){return E.create!==void 0&&a.Layer.encode(E.create,P.uint32(10).fork()).ldelim(),E.update!==void 0&&a.Layer.encode(E.update,P.uint32(18).fork()).ldelim(),E.delete!==void 0&&a.DeleteLayerResponse.encode(E.delete,P.uint32(26).fork()).ldelim(),E.batch!==void 0&&a.BatchLayerResponse.encode(E.batch,P.uint32(34).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=ut();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.create=a.Layer.decode(B,B.uint32());break;case 2:ee.update=a.Layer.decode(B,B.uint32());break;case 3:ee.delete=a.DeleteLayerResponse.decode(B,B.uint32());break;case 4:ee.batch=a.BatchLayerResponse.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{create:fe(E.create)?a.Layer.fromJSON(E.create):void 0,update:fe(E.update)?a.Layer.fromJSON(E.update):void 0,delete:fe(E.delete)?a.DeleteLayerResponse.fromJSON(E.delete):void 0,batch:fe(E.batch)?a.BatchLayerResponse.fromJSON(E.batch):void 0}},toJSON(E){const P={};return E.create!==void 0&&(P.create=E.create?a.Layer.toJSON(E.create):void 0),E.update!==void 0&&(P.update=E.update?a.Layer.toJSON(E.update):void 0),E.delete!==void 0&&(P.delete=E.delete?a.DeleteLayerResponse.toJSON(E.delete):void 0),E.batch!==void 0&&(P.batch=E.batch?a.BatchLayerResponse.toJSON(E.batch):void 0),P},fromPartial(E){const P=ut();return P.create=E.create!==void 0&&E.create!==null?a.Layer.fromPartial(E.create):void 0,P.update=E.update!==void 0&&E.update!==null?a.Layer.fromPartial(E.update):void 0,P.delete=E.delete!==void 0&&E.delete!==null?a.DeleteLayerResponse.fromPartial(E.delete):void 0,P.batch=E.batch!==void 0&&E.batch!==null?a.BatchLayerResponse.fromPartial(E.batch):void 0,P}};function ct(){return{layout:void 0,layer:void 0}}a.Event={encode(E,P=y.Writer.create()){return E.layout!==void 0&&a.LayoutEvent.encode(E.layout,P.uint32(10).fork()).ldelim(),E.layer!==void 0&&a.LayerEvent.encode(E.layer,P.uint32(18).fork()).ldelim(),P},decode(E,P){const B=E instanceof y.Reader?E:new y.Reader(E);let de=P===void 0?B.len:B.pos+P;const ee=ct();for(;B.pos<de;){const ce=B.uint32();switch(ce>>>3){case 1:ee.layout=a.LayoutEvent.decode(B,B.uint32());break;case 2:ee.layer=a.LayerEvent.decode(B,B.uint32());break;default:B.skipType(ce&7);break}}return ee},fromJSON(E){return{layout:fe(E.layout)?a.LayoutEvent.fromJSON(E.layout):void 0,layer:fe(E.layer)?a.LayerEvent.fromJSON(E.layer):void 0}},toJSON(E){const P={};return E.layout!==void 0&&(P.layout=E.layout?a.LayoutEvent.toJSON(E.layout):void 0),E.layer!==void 0&&(P.layer=E.layer?a.LayerEvent.toJSON(E.layer):void 0),P},fromPartial(E){const P=ct();return P.layout=E.layout!==void 0&&E.layout!==null?a.LayoutEvent.fromPartial(E.layout):void 0,P.layer=E.layer!==void 0&&E.layer!==null?a.LayerEvent.fromPartial(E.layer):void 0,P}};class Ue{constructor(P){this.rpc=P,this.ListLayers=this.ListLayers.bind(this),this.CreateLayer=this.CreateLayer.bind(this),this.GetLayer=this.GetLayer.bind(this),this.UpdateLayer=this.UpdateLayer.bind(this),this.DeleteLayer=this.DeleteLayer.bind(this),this.Batch=this.Batch.bind(this)}ListLayers(P){const B=a.ListLayersRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayerService","ListLayers",B).then(ee=>a.ListLayersResponse.decode(new y.Reader(ee)))}CreateLayer(P){const B=a.CreateLayerRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayerService","CreateLayer",B).then(ee=>a.Layer.decode(new y.Reader(ee)))}GetLayer(P){const B=a.GetLayerRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayerService","GetLayer",B).then(ee=>a.Layer.decode(new y.Reader(ee)))}UpdateLayer(P){const B=a.UpdateLayerRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayerService","UpdateLayer",B).then(ee=>a.Layer.decode(new y.Reader(ee)))}DeleteLayer(P){const B=a.DeleteLayerRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayerService","DeleteLayer",B).then(ee=>a.DeleteLayerResponse.decode(new y.Reader(ee)))}Batch(P){const B=a.BatchLayerRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayerService","Batch",B).then(ee=>a.BatchLayerResponse.decode(new y.Reader(ee)))}}a.LayerServiceClientImpl=Ue,a.LayerServiceDefinition={name:"LayerService",fullName:"apis.layout.v2.LayerService",methods:{listLayers:{name:"ListLayers",requestType:a.ListLayersRequest,requestStream:!1,responseType:a.ListLayersResponse,responseStream:!1,options:{}},createLayer:{name:"CreateLayer",requestType:a.CreateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},getLayer:{name:"GetLayer",requestType:a.GetLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},updateLayer:{name:"UpdateLayer",requestType:a.UpdateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},deleteLayer:{name:"DeleteLayer",requestType:a.DeleteLayerRequest,requestStream:!1,responseType:a.DeleteLayerResponse,responseStream:!1,options:{}},batch:{name:"Batch",requestType:a.BatchLayerRequest,requestStream:!1,responseType:a.BatchLayerResponse,responseStream:!1,options:{}}}};class lt{constructor(P){this.rpc=P,this.ListLayouts=this.ListLayouts.bind(this),this.CreateLayout=this.CreateLayout.bind(this),this.GetLayout=this.GetLayout.bind(this),this.UpdateLayout=this.UpdateLayout.bind(this),this.DeleteLayout=this.DeleteLayout.bind(this)}ListLayouts(P){const B=a.ListLayoutsRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayoutService","ListLayouts",B).then(ee=>a.ListLayoutsResponse.decode(new y.Reader(ee)))}CreateLayout(P){const B=a.CreateLayoutRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayoutService","CreateLayout",B).then(ee=>a.Layout.decode(new y.Reader(ee)))}GetLayout(P){const B=a.GetLayoutRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayoutService","GetLayout",B).then(ee=>a.Layout.decode(new y.Reader(ee)))}UpdateLayout(P){const B=a.UpdateLayoutRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayoutService","UpdateLayout",B).then(ee=>a.Layout.decode(new y.Reader(ee)))}DeleteLayout(P){const B=a.DeleteLayoutRequest.encode(P).finish();return this.rpc.request("apis.layout.v2.LayoutService","DeleteLayout",B).then(ee=>a.DeleteLayoutResponse.decode(new y.Reader(ee)))}}a.LayoutServiceClientImpl=lt,a.LayoutServiceDefinition={name:"LayoutService",fullName:"apis.layout.v2.LayoutService",methods:{listLayouts:{name:"ListLayouts",requestType:a.ListLayoutsRequest,requestStream:!1,responseType:a.ListLayoutsResponse,responseStream:!1,options:{}},createLayout:{name:"CreateLayout",requestType:a.CreateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},getLayout:{name:"GetLayout",requestType:a.GetLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},updateLayout:{name:"UpdateLayout",requestType:a.UpdateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},deleteLayout:{name:"DeleteLayout",requestType:a.DeleteLayoutRequest,requestStream:!1,responseType:a.DeleteLayoutResponse,responseStream:!1,options:{}}}};var Ye=(()=>{if(typeof Ye!="undefined")return Ye;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();y.util.Long!==v.default&&(y.util.Long=v.default,y.configure());function st(E){return typeof E=="object"&&E!==null}function fe(E){return E!=null}}(api$3),function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(h,v,y,b){b===void 0&&(b=y),Object.defineProperty(h,b,{enumerable:!0,get:function(){return v[y]}})}:function(h,v,y,b){b===void 0&&(b=y),h[b]=v[y]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(h,v){for(var y in h)y!=="default"&&!v.hasOwnProperty(y)&&s(v,h,y)};Object.defineProperty(a,"__esModule",{value:!0}),a.layoutApiEventMap=void 0;const c=api$3;d(api$3,a),a.layoutApiEventMap={[c.EventType.EVENT_TYPE_LAYOUT]:"layout",[c.EventType.EVENT_TYPE_LAYER]:"layer",[c.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}}(dist$2);var api$2={},browser$2=!1,__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(__viteBrowserExternal$1),logger={};class EnhancedMap extends Map{computeIfAbsent(s,d){if(this.has(s))return this.get(s);const c=d(s);return this.set(s,c),c}computeIfPresent(s,d){const c=this.get(s);if(c===void 0)return;const h=d(s,c);return h!==void 0?this.set(s,h):this.delete(s),h}compute(s,d){const c=this.get(s),h=d(s,c);return h?this.set(s,h):this.delete(s),h}}var InternalLogLevel;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel||(InternalLogLevel={}));function getInternalLogger(a){return provider.getLogger(a)}const INTERNAL_LOGGING_SETTINGS={setInternalLogLevel:a=>provider.changeLogLevel(a),setOutput:a=>provider.changeOutput(a),reset:()=>provider.reset()};class InternalLoggerImpl{constructor(s,d,c){this._name=s,this._level=d,this._fnOutput=c}trace(s){this.log(InternalLogLevel.Trace,s)}debug(s){this.log(InternalLogLevel.Debug,s)}error(s,d){this.log(InternalLogLevel.Error,s,d)}info(s){this.log(InternalLogLevel.Info,s)}warn(s,d){this.log(InternalLogLevel.Warn,s,d)}setLevel(s){this._level=s}setOutput(s){this._fnOutput=s}log(s,d,c){this._level>s||this._fnOutput(`${InternalLogLevel[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${d()}${c?`
`+c.stack:""}`)}}class InternalProviderImpl{constructor(){this._loggers=new EnhancedMap,this._logLevel=InternalLogLevel.Error,this._fnOutput=InternalProviderImpl.logConsole}getLogger(s){return this._loggers.computeIfAbsent(s,d=>new InternalLoggerImpl(d,this._logLevel,this._fnOutput))}changeLogLevel(s){this._logLevel=s,this._loggers.forEach(d=>d.setLevel(s))}changeOutput(s){this._fnOutput=s,this._loggers.forEach(d=>d.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel.Error),this._fnOutput=InternalProviderImpl.logConsole,this._loggers.forEach(s=>s.setOutput(this._fnOutput))}static logConsole(s){console&&console.log&&console.log(s)}}const provider=new InternalProviderImpl;var InternalLogger=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel},getInternalLogger,INTERNAL_LOGGING_SETTINGS}),LogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$1||(LogLevel$1={})),function(a){function s(d){switch(d.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=s}(LogLevel$1||(LogLevel$1={}));class CoreLoggerImpl{constructor(s){this._runtime=s}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(s){this._runtime=s}trace(s,...d){this.logMessage(LogLevel$1.Trace,s,d)}debug(s,...d){this.logMessage(LogLevel$1.Debug,s,d)}info(s,...d){this.logMessage(LogLevel$1.Info,s,d)}warn(s,...d){this.logMessage(LogLevel$1.Warn,s,d)}error(s,...d){this.logMessage(LogLevel$1.Error,s,d)}fatal(s,...d){this.logMessage(LogLevel$1.Fatal,s,d)}logMessage(s,d,c){if(this._runtime.level>s)return;const h=Date.now(),v=typeof d=="string"?d:d(),y=CoreLoggerImpl.getErrorAndArgs(c);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:v,exception:y.error,args:y.args,timeInMillis:h,level:s,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(v,s,y,h));break}}formatArgValue(s){try{return this._runtime.argumentFormatter(s)}catch{return`>>ARG CONVERT FAILED: '${s!==void 0?s.toString():"undefined"}'<<`}}createLogMessage(s,d,c,h){let v;const y=c.error,b=c.args;y&&(v=`${y.name}: ${y.message}`,y.stack&&(v+=`@
${y.stack}`));const _=this._runtime.dateFormatter(h);let T=LogLevel$1[d].toUpperCase();T.length<5&&(T+=" ");const I=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),N=typeof b!="undefined"&&b.length>0?" ["+b.map(V=>this.formatArgValue(V)).join(", ")+"]":"";return{message:_+" "+T+" ["+I+"] "+s+N,error:v}}static getErrorAndArgs(s){if(s.length===0)return{};let d,c;const h=s[0];if(h instanceof Error)return d=h,c=s.length>1?s.slice(1):void 0,{error:d,args:c};if(typeof h=="function"){const v=h();return v instanceof Error?(d=v,c=s.length>1?s.slice(1):void 0,{error:d,args:c}):s.length===1?Array.isArray(v)?{args:v.length>0?v:void 0}:{args:v}:Array.isArray(v)?{args:[...v,...s.slice(1)]}:{args:[v,...s.slice(1)]}}return{args:s}}}function padStart(a,s,d=" "){return padInternal(a,s,"start",d)}function padEnd(a,s,d=" "){return padInternal(a,s,"end",d)}function maxLengthStringValueInArray(a){return a.map(s=>s.length).reduce((s,d)=>d>s?d:s,0)}function padInternal(a,s,d,c=" "){if(s<=a.length)return a;if(c.length>1)throw new Error(`Fill char must be one char exactly, it is: ${c.length}`);const h=s-a.length;let v="";for(let y=0;y<h;y++)v+=c;return d==="start"?v+a:a+v}function formatArgument(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate(a){const s=new Date(a),d=s.getFullYear(),c=padStart((s.getMonth()+1).toString(),2,"0"),h=padStart(s.getDate().toString(),2,"0"),v=padStart(s.getHours().toString(),2,"0"),y=padStart(s.getMinutes().toString(),2,"0"),b=padStart(s.getSeconds().toString(),2,"0"),_=padStart(s.getMilliseconds().toString(),2,"0");return`${d}-${c}-${h} ${v}:${y}:${b},${_}`}class ConsoleLogChannel{constructor(){this.type="LogChannel"}write(s){console&&console.log&&console.log(s.message+(s.error?`
${s.error}`:""))}}var DefaultChannels;(function(a){function s(){return new ConsoleLogChannel}a.createConsoleChannel=s})(DefaultChannels||(DefaultChannels={}));class LogProviderImpl{constructor(s,d){this._log=getInternalLogger("core.impl.LogProviderImpl"),this._name=s,this._settings=d,this._loggers=new EnhancedMap,this._idToKeyMap=new EnhancedMap,this._globalRuntimeSettings={level:d.level,channel:d.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(s){return this.getOrCreateLogger(s)}updateLoggerRuntime(s,d){this._log.debug(()=>`Updating logger ${s.id} runtime settings using: '${JSON.stringify(d)}'`);const c=this._idToKeyMap.get(s.id);return c===void 0?(this._log.warn(()=>`Cannot update logger with id: ${s.id}, it was not found.`),!1):(this._loggers.computeIfPresent(c,(h,v)=>(v.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(v.runtimeSettings,d),v)),!0)}updateRuntimeSettings(s){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(s)}'`),this._globalRuntimeSettings={level:s.level!==void 0?s.level:this._globalRuntimeSettings.level,channel:s.channel!==void 0?s.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(d=>d.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(d.runtimeSettings,s))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(s){const d=LogProviderImpl.createKey(s),c=this._loggers.computeIfAbsent(d,()=>{const h={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:s,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl(h)});return this._idToKeyMap.computeIfAbsent(c.id,()=>d),c}nextLoggerId(){const s=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,s}static mergeRuntimeSettingsIntoLogRuntime(s,d){return Object.assign(Object.assign({},s),{level:d.level!==void 0?d.level:s.level,channel:d.channel!==void 0?d.channel:s.channel})}static createKey(s){return typeof s=="string"?s:s.join(",")}}function createLogProvider(a,s){return new LogProviderImpl(a,s)}var index$3=Object.freeze({__proto__:null,EnhancedMap,padStart,padEnd,maxLengthStringValueInArray});class CategoryImpl{constructor(s,d,c,h){this._children=[],this._logger=s,this._name=d,this._parent=c,this._fnGetOrCreateChildCategory=h}get name(){return this._name}get parent(){return this._parent}get path(){const s=[];let d=this;for(;d!==void 0;)s.push(d.name),d=d.parent;return s.reverse()}get children(){return[...this._children]}addChild(s){if(s.parent!==this)throw new Error(`Cannot add child '${s.name}', expected parent '${this._name} but got ${s.parent?s.parent.name:"undefined"}'`);this._children.push(s)}getChildCategory(s){const d=this._children.find(c=>c.name===s);return d!==void 0?d:this._fnGetOrCreateChildCategory(s,this)}get id(){return this._logger.id}get logLevel(){return this._logger.logLevel}get runtimeSettings(){return this._logger.runtimeSettings}get logger(){return this._logger}trace(s,...d){this._logger.trace(s,...d)}debug(s,...d){this._logger.debug(s,...d)}info(s,...d){this._logger.info(s,...d)}warn(s,...d){this._logger.warn(s,...d)}error(s,...d){this._logger.error(s,...d)}fatal(s,...d){this._logger.fatal(s,...d)}}const CATEGORY_PATH_SEPARATOR="#";class CategoryProviderImpl{constructor(s,d){this._name=s,this._initialConfig=d,this._categoryStorage=new CategoryStorage(s,d)}get name(){return this._name}get config(){return this._initialConfig}get runtimeConfig(){return this._categoryStorage.getCurrentRuntimeConfig()}getCategory(s,d){return this._categoryStorage.getOrCreateCategory(s,d)}updateRuntimeSettingsCategory(s,d){this._categoryStorage.updateRuntimeSettingsCategory(s,d)}updateRuntimeSettings(s){this._categoryStorage.updateRuntimeSettings(s)}getRegisteredCategories(){return this._categoryStorage.getRegisteredCategories()}getCategoryByPath(s){return this._categoryStorage.getCategoryByPath(s)}}class CategoryStorage{constructor(s,d){this._categoriesById=new Map,this._categoriesByPath=new Map,this._categoryProviderName=s,this._allowSameCategoryName=d.allowSameCategoryName,this._logProvider=createLogProvider(s,Object.assign({},d)),this.getOrCreateCategory=this.getOrCreateCategory.bind(this)}getOrCreateCategory(s,d){if(s.indexOf(CATEGORY_PATH_SEPARATOR)!==-1)throw new Error(`Cannot create category '${s}', name cannot contain a '${CATEGORY_PATH_SEPARATOR}'.`);const c=d!==void 0?this.getParentCategory(d):void 0;return c===void 0?this.getOrCreateRootCategory(s):this.getOrCreateChildCategory(s,c)}updateRuntimeSettingsCategory(s,d){if(!s.id.startsWith(this._categoryProviderName))throw new Error(`Category '${s.name}' with LogId '${s.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const c=this._categoriesById.get(s.id);c!==void 0&&(this._logProvider.updateLoggerRuntime(c.logger,{level:d.level}),!(d.disableRecursion!==void 0&&d.disableRecursion)&&c.children.forEach(h=>this.updateRuntimeSettingsCategory(h,d)))}updateRuntimeSettings(s){this._logProvider.updateRuntimeSettings(s)}getCurrentRuntimeConfig(){return Object.assign(Object.assign({},this._logProvider.runtimeSettings),{allowSameCategoryName:this._allowSameCategoryName})}getRegisteredCategories(){return[...this._categoriesById.values()]}getCategoryByPath(s){return this._categoriesByPath.get(s)}getParentCategory(s){let d;if(CategoryStorage.isLogId(s)){if(d=this._categoriesById.get(s),d===void 0)throw new Error(`Parent category was not found by LogId '${s}'. Are you sure you passed in the correct argument?`)}else if(d=this._categoriesById.get(s.id),d===void 0)throw new Error(`Parent category '${s.name}' was not found by it's LogId '${s.id}'. Are you sure you passed in the correct parent category?`);return d}getOrCreateRootCategory(s){const d=this._categoriesByPath.get(s);if(d){if(!this._allowSameCategoryName)throw new Error(`Category '${s} already exists, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return d}const c=this._logProvider.getLogger(s),h=new CategoryImpl(c,s,void 0,this.getOrCreateCategory);return this._categoriesById.set(h.id,h),this._categoriesByPath.set(s,h),h}getOrCreateChildCategory(s,d){if(!d.id.startsWith(this._categoryProviderName))throw new Error(`Parent category '${d.name}' with LogId '${d.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const c=[...d.path,s].join(CATEGORY_PATH_SEPARATOR),h=this._categoriesByPath.get(c);if(h){if(!this._allowSameCategoryName)throw new Error(`Child category '${s} already exists for parent category ${d.name}, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return h}const v=this._logProvider.getLogger(c);this._logProvider.updateLoggerRuntime(v,{level:d.logger.runtimeSettings.level,channel:d.logger.runtimeSettings.channel});const y=new CategoryImpl(v,s,d,this.getOrCreateCategory);return this._categoriesById.set(y.id,y),this._categoriesByPath.set(y.path.join(CATEGORY_PATH_SEPARATOR),y),d.addChild(y),y}static isLogId(s){return typeof s=="string"}}class CategoryControlProviderImpl{constructor(s,d){this._provider=s,this._messageChannel=d,this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(s)}get name(){return this._provider.name}showSettings(){let s=`Available categories (CategoryProvider '${this._provider.name}'):
`;const d=this.createCategoryInfoHierarchy(),c=d.size.toString().length,h=index$3.maxLengthStringValueInArray([...d.values()].map(y=>y.category.name+" ".repeat(y.depth))),v=[...d.values()].map((y,b)=>CategoryControlProviderImpl.createSettingLineCategory(y,b,c,h));s+=v.join(`
`)+(v.length>0?`
`:""),this._messageChannel(s)}help(){const s=`You can use the following commands (CategoryProvider ${this._provider.name}):
  showSettings()
    Shows the current configuration settings.
  update(level: CategoryControlProviderLogLevel, categoryId?: number | string, noRecurse?: boolean)
    Change the log level for a category (by default recursively).
      @param level      The log level to set - must be one of 'trace', 'debug', 'info', 'warn', 'error' or 'fatal'
      @param categoryId The category id or path of a category (e.g. root#child1) to update. Use showSettings() for id and/or name.
                        When omitted, it applies the level to all categories recursively.
  reset()
    Resets the log levels of the config groups back to when this control provider was created.
  save()
    Saves the current log levels for all categories of this provider. Use restore() to load last saved state.
  restore()
    Restore stored saved state, if any. Log levels will be set according to the saved state.
  help()
    Shows this help.
`;this._messageChannel(s)}reset(){const s=new Map(this._provider.getRegisteredCategories().map(d=>[d.id,d]));this._originalLogLevels.forEach((d,c)=>{const h=s.get(c);h!==void 0&&this._provider.updateRuntimeSettingsCategory(h,{level:d,disableRecursion:!0}),s.delete(c)}),s.forEach(d=>{d.parent!==void 0&&this._provider.updateRuntimeSettingsCategory(d,{level:d.parent.logLevel,disableRecursion:!0})}),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider),this._messageChannel("Successfully reset log levels back to original state (from when this CategoryControlProvider was created).")}save(){if(!localStorage){this._messageChannel("Cannot save state, localStorage is not available.");return}const s=this._provider.getRegisteredCategories().filter(c=>c.parent===void 0).map(c=>CategoryControlProviderImpl.createCategorySaveData(c)),d={name:this._provider.name,rootCategories:s};localStorage.setItem(this.createKey(),JSON.stringify(d)),this._messageChannel(`Successfully saved state for CategoryControlProvider '${this._provider.name}'.`)}restore(s){const d=s!==void 0?s:!0;if(!localStorage){d&&this._messageChannel(`Will not attempt to restore state for CategoryControlProvider '${this._provider.name}', localStorage is not available.`);return}const c=this.createKey(),h=localStorage.getItem(c);if(h===null){d&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', no data available.`);return}try{const v=JSON.parse(h);if(this._provider.name!==v.name){d&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not for provider - found name '${v.name}'.`);return}this.restoreBySaveData(v,d),this._messageChannel(`Successfully restored state for CategoryControlProvider '${this._provider.name}'`),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider)}catch{localStorage.removeItem(c),this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not valid. Invalid data removed from localStorage.`)}}update(s,d,c){typeof d=="undefined"?this.updateAll(s):typeof d=="number"?this.updateByIndex(s,d,c!==void 0?c:!1):this.updateByPath(s,d,c!==void 0?c:!1)}updateAll(s){const d=LogLevel$1.toLogLevel(s);this._provider.getRegisteredCategories().filter(c=>c.parent===void 0).forEach(c=>this._provider.updateRuntimeSettingsCategory(c,{level:d})),this._messageChannel(`Updated all categories to use log level '${s.toLowerCase()}'`)}updateByPath(s,d,c){const h=this._provider.getCategoryByPath(d);if(h===void 0){this._messageChannel(`Failed to find a provider by path '${d}', please make sure to separate the parts by a ${CATEGORY_PATH_SEPARATOR}.`);return}this._provider.updateRuntimeSettingsCategory(h,{level:LogLevel$1.toLogLevel(s),disableRecursion:c}),this._messageChannel(`Successfully updated category '${h.name}' with path '${d}' to log level '${s.toLowerCase()}'${c?"":" and recursively applied to children (if any)"}.`)}updateByIndex(s,d,c){if(d<0){this._messageChannel(`Cannot update category by index '${d}', it is negative.`);return}const h=this.createCategoryInfoHierarchy();if(d>=h.size){this._messageChannel(`Cannot update category by index '${d}', it is outside of the range of available categories, use showSettings() to see the indices.`);return}const v=[...h.values()][d].category;this._provider.updateRuntimeSettingsCategory(v,{level:LogLevel$1.toLogLevel(s),disableRecursion:c}),this._messageChannel(`Successfully updated category '${v.name}' by index '${d}' to log level '${s.toLowerCase()}'${c?"":" and recursively applied to children (if any)"}.`)}restoreBySaveData(s,d){const c=(h,v)=>{const y=v.length>0?v+CATEGORY_PATH_SEPARATOR+h.name:h.name,b=this._provider.getCategoryByPath(y);if(b!==void 0){const _=LogLevel$1.toLogLevel(h.level);_!==void 0?this._provider.updateRuntimeSettingsCategory(b,{level:_,disableRecursion:!0}):d&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - cannot restore log level for category path '${y}', log level is invalid.`);for(const T of h.children)c(T,y)}else d&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - failed to find a Category by path '${y}', will not restore category (and children)`)};for(const h of s.rootCategories)c(h,"")}createKey(){return`CategoryProvider-${this._provider.name}`}createCategoryInfoHierarchy(){const s=new Map;return this._provider.getRegisteredCategories().filter(c=>c.parent===void 0).forEach(c=>CategoryControlProviderImpl.addCategoryInfoHierarchy(c,0,s)),s}static createCategorySaveData(s){return{name:s.name,level:LogLevel$1[s.logLevel],children:s.children.map(d=>this.createCategorySaveData(d))}}static loadCurrentGroupLogLevels(s){return new Map(s.getRegisteredCategories().map(d=>[d.id,d.logLevel]))}static createSettingLineCategory(s,d,c,h){const y=" ".repeat(s.depth)+s.category.name;return`  [${index$3.padStart(d.toString(),c)}, ${index$3.padEnd(y,h)} (level=${index$3.padEnd(s.logLevel,5)})]`}static addCategoryInfoHierarchy(s,d,c){c.set(s.id,{category:s,logLevel:LogLevel$1[s.logLevel],depth:d}),s.children.forEach(h=>this.addCategoryInfoHierarchy(h,d+1,c))}}function categoryConfigDebug(a){return`CategoryConfig=level: ${LogLevel$1[a.level].toString()}, allowSameCategoryName=${a.allowSameCategoryName}`}class CategoryProviderService{constructor(){this._log=InternalLogger.getInternalLogger("category.impl.CategoryProviderService"),this._providers=new index$3.EnhancedMap}createLogProvider(s,d){const c=this._providers.compute(s,(h,v)=>{if(v)throw new Error(`CategoryProvider with name '${s}' already exists, cannot create another.`);const y=mergeWithDefaults(d);return this._log.debug(()=>`Creating new CategoryProvider with name '${s}', using config settings '${categoryConfigDebug(y)}'.`),new CategoryProviderImpl(s,y)});if(c)return c;throw new Error("No CategoryProvider? This is a bug.")}getCategoryControl(s){const d=s||(c=>{if(console&&console.log)console.log(c);else throw new Error("Cannot use console (it is not present), please specify a custom function to write to.")});return{help:()=>d(CategoryProviderService.help()),showSettings:()=>d(this.showSettings()),getProvider:c=>this.getCategoryControlProviderByIdOrName(c,d)}}clear(){this._providers.clear()}showSettings(){let s=`Available CategoryProviders:
`;const d=this._providers.size.toString().length,c=index$3.maxLengthStringValueInArray([...this._providers.keys()]),h=[...this._providers.entries()].map((v,y)=>{const b=v[0];return`  [${index$3.padStart(y.toString(),d)}, ${index$3.padEnd(b,c)}]`});return s+=h.join(`
`)+(h.length>0?`
`:""),s}getCategoryControlProviderByIdOrName(s,d){if(typeof s=="string"){const h=this._providers.get(s);if(h===void 0)throw new Error(`Provider with name '${s}' does not exist.`);return new CategoryControlProviderImpl(h,d)}const c=[...this._providers.values()];if(s<0||s>=c.length)throw new Error(`Provider with index '${s}' does not exist (outside of range).`);return new CategoryControlProviderImpl(c[s],d)}static help(){return`You can use the following commands:
  showSettings()
    Shows the current configuration settings.
  getProvider: (id: number | string): CategoryControlProvider
    Get access to a CategoryControlProvider to change log levels.
      @param id The id (use showSettings to see) or name of the provider
  help()
    Shows this help.
`}}const CATEGORY_PROVIDER_SERVICE=new CategoryProviderService,CATEGORY_LOG_CONTROL=a=>CATEGORY_PROVIDER_SERVICE.getCategoryControl(a);function mergeWithDefaults(a){const s={channel:DefaultChannels.createConsoleChannel(),allowSameCategoryName:!0,level:LogLevel$1.Error,dateFormatter:formatDate,argumentFormatter:formatArgument};return a?{channel:a.channel?a.channel:s.channel,allowSameCategoryName:a.allowSameCategoryName!==void 0?a.allowSameCategoryName:s.allowSameCategoryName,level:a.level?a.level:s.level,dateFormatter:a.dateFormatter?a.dateFormatter:s.dateFormatter,argumentFormatter:a.argumentFormatter?a.argumentFormatter:s.argumentFormatter}:s}var CategoryProvider;(function(a){function s(c,h){return CATEGORY_PROVIDER_SERVICE.createLogProvider(c,h)}a.createProvider=s;function d(){CATEGORY_PROVIDER_SERVICE.clear()}a.clear=d})(CategoryProvider||(CategoryProvider={}));var typescriptLoggingCategory_esm=Object.freeze(Object.defineProperty({__proto__:null,CATEGORY_LOG_CONTROL,get CategoryProvider(){return CategoryProvider}},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(typescriptLoggingCategory_esm);Object.defineProperty(logger,"__esModule",{value:!0}),logger.logger=void 0;const typescript_logging_1=require$$2$1,typescript_logging_category_style_1=require$$1;logger.logger=typescript_logging_category_style_1.CategoryProvider.createProvider("ApiStream",{allowSameCategoryName:!0,level:typescript_logging_1.LogLevel.Warn});var version$2="1.0.21",__createBinding$2=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,h)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$2=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$2(s,a,d);return __setModuleDefault$2(s,a),s},__importDefault$5=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(api$2,"__esModule",{value:!0}),api$2.ApiClient=void 0;const NiceGrpc$1=__importStar$2(lib$1),abort_controller_x_1=require$$1$1,detect_node_1=__importDefault$5(browser$2),NodeTransport=__importStar$2(require$$3),logger_1=logger,clientVersion$1=version$2;class ApiClient{constructor(s,d,c,h,v,y){this.sessionId=s,this.sdkVersion=c,this.version=clientVersion$1,this.apiLogCallback=v,this.eventLogCallback=y,this.log=logger_1.logger.getCategory(h),this.channel=NiceGrpc$1.createChannel(d,detect_node_1.default?NodeTransport.NodeHttpTransport():void 0),this.clientFactory=NiceGrpc$1.createClientFactory().use(this.logMiddleware.bind(this))}async*logMiddleware(s,d){const{path:c}=s.method;try{const h=yield*s.next(s.request,d);if(this.log.debug(`-> ${c}: ok`),this.log.trace(`${JSON.stringify(s.request)} -> ${c}: ${JSON.stringify(h)}`),this.apiLogCallback){let v=c.split("/"),y=v[1].split("."),b=y[y.length-1],_=y[y.length-2],T=y[y.length-3],I=v[2];this.apiLogCallback(T,b,I,s.request,h)}return h}catch(h){throw this.log.trace(`${JSON.stringify(s.request)} -> ${c}`),h instanceof NiceGrpc$1.ClientError?this.log.warn(`-> ${c}: error: ${NiceGrpc$1.Status[h.code]}: ${h.details}`):(0,abort_controller_x_1.isAbortError)(h)?this.log.warn(`-> ${c}: cancel`):this.log.warn(`-> ${c}: error: ${h==null?void 0:h.stack}`),h}}setAccessToken(s){(this.accessToken==null||this.accessToken!=s)&&(this.log.debug("access token refreshed"),this.accessToken=s,this.setup())}makeGrpcMetadata(){let s=NiceGrpc$1.Metadata({Authorization:`Bearer ${this.accessToken}`,Version:this.version,SessionId:this.sessionId});return this.sdkVersion!=null&&s.set("SdkVersion",this.sdkVersion),s}setup(){let s={metadata:this.makeGrpcMetadata()};this._setup(s)}_setup(s){}}api$2.ApiClient=ApiClient;var decorator={};Object.defineProperty(decorator,"__esModule",{value:!0}),decorator.RequiresSdkAuthentication=void 0;function RequiresSdkAuthentication(){return function(a,s){let d;Object.defineProperty(a,s,{get:()=>{if(!d)throw new Error("Please authenticate ApiStream by calling apiStream.load( accessToken )");return d},set:c=>{d=c}})}}decorator.RequiresSdkAuthentication=RequiresSdkAuthentication;var __createBinding$1=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,h)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__decorate=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(a,s,d,c){var h=arguments.length,v=h<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,d):c,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(a,s,d,c);else for(var b=a.length-1;b>=0;b--)(y=a[b])&&(v=(h<3?y(v):h>3?y(s,d,v):y(s,d))||v);return h>3&&v&&Object.defineProperty(s,d,v),v},__importStar$1=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$1(s,a,d);return __setModuleDefault$1(s,a),s},__metadata=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(a,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,s)};Object.defineProperty(layoutapi,"__esModule",{value:!0}),layoutapi.LayoutApi=void 0,__importStar$1(lib$1);const LayoutApiModel=__importStar$1(dist$2),api_1$1=api$2,decorator_1=decorator,LOG_CATEGORY$1="LayoutApi";class LayoutApi extends api_1$1.ApiClient{constructor(s,d,c,h,v){super(s,c,h,LOG_CATEGORY$1,v),this.handlers={},this.eventApi=d,this.eventApi.on("event",{name:`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0},y=>{var b;const[,_]=y.name.split(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:`),[T,I]=_.split(":"),N=y.payload;for(const A of(b=this.handlers[T])!==null&&b!==void 0?b:[])A(Object.values(N).find(V=>!!V),I)})}_setup(s){this.layer=this.clientFactory.create(LayoutApiModel.LayerServiceDefinition,this.channel,{"*":s}),this.layout=this.clientFactory.create(LayoutApiModel.LayoutServiceDefinition,this.channel,{"*":s})}async subscribeToLayout(s){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:s}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:s}})])}async unsubscribeFromLayout(s){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:s}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:s}})])}async subscribeToLayoutsInProject(s,d){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{collectionId:s,projectId:d}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{collectionId:s,projectId:d}})])}async unsubscribeFromLayoutsInProject(s,d){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{collectionId:s,projectId:d}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{collectionId:s,projectId:d}})])}on(s,d){var c;this.handlers[s]=(c=this.handlers[s])!==null&&c!==void 0?c:[],this.handlers[s].push(d)}off(s,d){this.handlers[s]=this.handlers[s].filter(c=>c!==d)}}LayoutApi.LAYOUTAPI_EVENT_PREFIX="apistream:layout",__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layout",void 0),__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layer",void 0),layoutapi.LayoutApi=LayoutApi;var liveapi={},api$1={},field_mask={},__importDefault$4=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(field_mask,"__esModule",{value:!0}),field_mask.FieldMask=field_mask.protobufPackage=void 0;const minimal_1$1=__importDefault$4(minimal$2);field_mask.protobufPackage="google.protobuf";function createBaseFieldMask(){return{paths:[]}}field_mask.FieldMask={encode(a,s=minimal_1$1.default.Writer.create()){for(const d of a.paths)s.uint32(10).string(d);return s},decode(a,s){const d=a instanceof minimal_1$1.default.Reader?a:new minimal_1$1.default.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseFieldMask();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.paths.push(d.string());break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{paths:typeof a=="string"?a.split(",").filter(Boolean):Array.isArray(a==null?void 0:a.paths)?a.paths.map(String):[]}},toJSON(a){return a.paths.join(",")},fromPartial(a){var s;const d=createBaseFieldMask();return d.paths=((s=a.paths)===null||s===void 0?void 0:s.map(c=>c))||[],d},wrap(a){const s=createBaseFieldMask();return s.paths=a,s},unwrap(a){return a.paths}};var struct$1={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const d=s(minimal$2);a.protobufPackage="google.protobuf";var c;(function($){$.NULL_VALUE="NULL_VALUE"})(c=a.NullValue||(a.NullValue={}));function h($){switch($){case 0:case"NULL_VALUE":return c.NULL_VALUE;default:throw new N.Error("Unrecognized enum value "+$+" for enum NullValue")}}a.nullValueFromJSON=h;function v($){switch($){case c.NULL_VALUE:return"NULL_VALUE";default:throw new N.Error("Unrecognized enum value "+$+" for enum NullValue")}}a.nullValueToJSON=v;function y($){switch($){case c.NULL_VALUE:return 0;default:throw new N.Error("Unrecognized enum value "+$+" for enum NullValue")}}a.nullValueToNumber=y;function b(){return{fields:{}}}a.Struct={encode($,L=d.default.Writer.create()){return Object.entries($.fields).forEach(([D,H])=>{H!==void 0&&a.Struct_FieldsEntry.encode({key:D,value:H},L.uint32(10).fork()).ldelim()}),L},decode($,L){const D=$ instanceof d.default.Reader?$:new d.default.Reader($);let H=L===void 0?D.len:D.pos+L;const O=b();for(;D.pos<H;){const x=D.uint32();switch(x>>>3){case 1:const j=a.Struct_FieldsEntry.decode(D,D.uint32());j.value!==void 0&&(O.fields[j.key]=j.value);break;default:D.skipType(x&7);break}}return O},fromJSON($){return{fields:A($.fields)?Object.entries($.fields).reduce((L,[D,H])=>(L[D]=H,L),{}):{}}},toJSON($){const L={};return L.fields={},$.fields&&Object.entries($.fields).forEach(([D,H])=>{L.fields[D]=H}),L},fromPartial($){var L;const D=b();return D.fields=Object.entries((L=$.fields)!==null&&L!==void 0?L:{}).reduce((H,[O,x])=>(x!==void 0&&(H[O]=x),H),{}),D},wrap($){const L=b();return $!==void 0&&Object.keys($).forEach(D=>{L.fields[D]=$[D]}),L},unwrap($){const L={};return Object.keys($.fields).forEach(D=>{L[D]=$.fields[D]}),L}};function _(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode($,L=d.default.Writer.create()){return $.key!==""&&L.uint32(10).string($.key),$.value!==void 0&&a.Value.encode(a.Value.wrap($.value),L.uint32(18).fork()).ldelim(),L},decode($,L){const D=$ instanceof d.default.Reader?$:new d.default.Reader($);let H=L===void 0?D.len:D.pos+L;const O=_();for(;D.pos<H;){const x=D.uint32();switch(x>>>3){case 1:O.key=D.string();break;case 2:O.value=a.Value.unwrap(a.Value.decode(D,D.uint32()));break;default:D.skipType(x&7);break}}return O},fromJSON($){return{key:V($.key)?String($.key):"",value:V($==null?void 0:$.value)?$.value:void 0}},toJSON($){const L={};return $.key!==void 0&&(L.key=$.key),$.value!==void 0&&(L.value=$.value),L},fromPartial($){var L,D;const H=_();return H.key=(L=$.key)!==null&&L!==void 0?L:"",H.value=(D=$.value)!==null&&D!==void 0?D:void 0,H}};function T(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode($,L=d.default.Writer.create()){return $.nullValue!==void 0&&L.uint32(8).int32(y($.nullValue)),$.numberValue!==void 0&&L.uint32(17).double($.numberValue),$.stringValue!==void 0&&L.uint32(26).string($.stringValue),$.boolValue!==void 0&&L.uint32(32).bool($.boolValue),$.structValue!==void 0&&a.Struct.encode(a.Struct.wrap($.structValue),L.uint32(42).fork()).ldelim(),$.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap($.listValue),L.uint32(50).fork()).ldelim(),L},decode($,L){const D=$ instanceof d.default.Reader?$:new d.default.Reader($);let H=L===void 0?D.len:D.pos+L;const O=T();for(;D.pos<H;){const x=D.uint32();switch(x>>>3){case 1:O.nullValue=h(D.int32());break;case 2:O.numberValue=D.double();break;case 3:O.stringValue=D.string();break;case 4:O.boolValue=D.bool();break;case 5:O.structValue=a.Struct.unwrap(a.Struct.decode(D,D.uint32()));break;case 6:O.listValue=a.ListValue.unwrap(a.ListValue.decode(D,D.uint32()));break;default:D.skipType(x&7);break}}return O},fromJSON($){return{nullValue:V($.nullValue)?h($.nullValue):void 0,numberValue:V($.numberValue)?Number($.numberValue):void 0,stringValue:V($.stringValue)?String($.stringValue):void 0,boolValue:V($.boolValue)?Boolean($.boolValue):void 0,structValue:A($.structValue)?$.structValue:void 0,listValue:Array.isArray($.listValue)?[...$.listValue]:void 0}},toJSON($){const L={};return $.nullValue!==void 0&&(L.nullValue=$.nullValue!==void 0?v($.nullValue):void 0),$.numberValue!==void 0&&(L.numberValue=$.numberValue),$.stringValue!==void 0&&(L.stringValue=$.stringValue),$.boolValue!==void 0&&(L.boolValue=$.boolValue),$.structValue!==void 0&&(L.structValue=$.structValue),$.listValue!==void 0&&(L.listValue=$.listValue),L},fromPartial($){var L,D,H,O,x,j;const X=T();return X.nullValue=(L=$.nullValue)!==null&&L!==void 0?L:void 0,X.numberValue=(D=$.numberValue)!==null&&D!==void 0?D:void 0,X.stringValue=(H=$.stringValue)!==null&&H!==void 0?H:void 0,X.boolValue=(O=$.boolValue)!==null&&O!==void 0?O:void 0,X.structValue=(x=$.structValue)!==null&&x!==void 0?x:void 0,X.listValue=(j=$.listValue)!==null&&j!==void 0?j:void 0,X},wrap($){const L=T();if($===null)L.nullValue=c.NULL_VALUE;else if(typeof $=="boolean")L.boolValue=$;else if(typeof $=="number")L.numberValue=$;else if(typeof $=="string")L.stringValue=$;else if(Array.isArray($))L.listValue=$;else if(typeof $=="object")L.structValue=$;else if(typeof $!="undefined")throw new Error("Unsupported any value type: "+typeof $);return L},unwrap($){if(($==null?void 0:$.stringValue)!==void 0)return $.stringValue;if(($==null?void 0:$.numberValue)!==void 0)return $.numberValue;if(($==null?void 0:$.boolValue)!==void 0)return $.boolValue;if(($==null?void 0:$.structValue)!==void 0)return $.structValue;if(($==null?void 0:$.listValue)!==void 0)return $.listValue;if(($==null?void 0:$.nullValue)!==void 0)return null}};function I(){return{values:[]}}a.ListValue={encode($,L=d.default.Writer.create()){for(const D of $.values)a.Value.encode(a.Value.wrap(D),L.uint32(10).fork()).ldelim();return L},decode($,L){const D=$ instanceof d.default.Reader?$:new d.default.Reader($);let H=L===void 0?D.len:D.pos+L;const O=I();for(;D.pos<H;){const x=D.uint32();switch(x>>>3){case 1:O.values.push(a.Value.unwrap(a.Value.decode(D,D.uint32())));break;default:D.skipType(x&7);break}}return O},fromJSON($){return{values:Array.isArray($==null?void 0:$.values)?[...$.values]:[]}},toJSON($){const L={};return $.values?L.values=$.values.map(D=>D):L.values=[],L},fromPartial($){var L;const D=I();return D.values=((L=$.values)===null||L===void 0?void 0:L.map(H=>H))||[],D},wrap($){const L=I();return L.values=$!=null?$:[],L},unwrap($){return $.values}};var N=(()=>{if(typeof N!="undefined")return N;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();function A($){return typeof $=="object"&&$!==null}function V($){return $!=null}})(struct$1);var timestamp$1={},__importDefault$3=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(timestamp$1,"__esModule",{value:!0}),timestamp$1.Timestamp=timestamp$1.protobufPackage=void 0;const long_1=__importDefault$3(umd.exports),minimal_1=__importDefault$3(minimal$2);timestamp$1.protobufPackage="google.protobuf";function createBaseTimestamp(){return{seconds:0,nanos:0}}timestamp$1.Timestamp={encode(a,s=minimal_1.default.Writer.create()){return a.seconds!==0&&s.uint32(8).int64(a.seconds),a.nanos!==0&&s.uint32(16).int32(a.nanos),s},decode(a,s){const d=a instanceof minimal_1.default.Reader?a:new minimal_1.default.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTimestamp();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.seconds=longToNumber$1(d.int64());break;case 2:h.nanos=d.int32();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{seconds:isSet$2(a.seconds)?Number(a.seconds):0,nanos:isSet$2(a.nanos)?Number(a.nanos):0}},toJSON(a){const s={};return a.seconds!==void 0&&(s.seconds=Math.round(a.seconds)),a.nanos!==void 0&&(s.nanos=Math.round(a.nanos)),s},fromPartial(a){var s,d;const c=createBaseTimestamp();return c.seconds=(s=a.seconds)!==null&&s!==void 0?s:0,c.nanos=(d=a.nanos)!==null&&d!==void 0?d:0,c}};var globalThis$3=(()=>{if(typeof globalThis$3!="undefined")return globalThis$3;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();function longToNumber$1(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$3.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}minimal_1.default.util.Long!==long_1.default&&(minimal_1.default.util.Long=long_1.default,minimal_1.default.configure());function isSet$2(a){return a!=null}(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0}),a.Role=a.regionToNumber=a.regionToJSON=a.regionFromJSON=a.Region=a.sourceTriggerActionToNumber=a.sourceTriggerActionToJSON=a.sourceTriggerActionFromJSON=a.SourceTriggerAction=a.s3ACLToNumber=a.s3ACLToJSON=a.s3ACLFromJSON=a.S3ACL=a.projectBroadcastPhaseToNumber=a.projectBroadcastPhaseToJSON=a.projectBroadcastPhaseFromJSON=a.ProjectBroadcastPhase=a.videoCodecRateControlModeToNumber=a.videoCodecRateControlModeToJSON=a.videoCodecRateControlModeFromJSON=a.VideoCodecRateControlMode=a.audioCodecToNumber=a.audioCodecToJSON=a.audioCodecFromJSON=a.AudioCodec=a.videoCodecProfileToNumber=a.videoCodecProfileToJSON=a.videoCodecProfileFromJSON=a.VideoCodecProfile=a.videoCodecToNumber=a.videoCodecToJSON=a.videoCodecFromJSON=a.VideoCodec=a.renderingQualityToNumber=a.renderingQualityToJSON=a.renderingQualityFromJSON=a.RenderingQuality=a.audioChannelLayoutToNumber=a.audioChannelLayoutToJSON=a.audioChannelLayoutFromJSON=a.AudioChannelLayout=a.videoColorSpaceToNumber=a.videoColorSpaceToJSON=a.videoColorSpaceFromJSON=a.VideoColorSpace=a.imageFormatToNumber=a.imageFormatToJSON=a.imageFormatFromJSON=a.ImageFormat=a.protobufPackage=void 0,a.HostedWebRtc=a.Composition=a.ExternalComposition=a.SceneComposition=a.StudioSdkComposition=a.PreviewAddress=a.PreviewWebRtcAddress=a.PreviewHlsPullAddress=a.ProjectTrigger=a.WebRtcTrigger=a.SourceTrigger=a.DestinationAddress=a.S3StorageAddress=a.ObjectStoragePackaging=a.HlsPackaging=a.HlsLifecycle=a.HlsLifecycleVod=a.HlsLifecycleLive=a.DestinationAgoraPushAddress=a.DestinationRtmpPushAddress=a.SourceAddress=a.RtmpPullAddress=a.SrtPushAddress=a.SourceRtmpPushAddress=a.Encoding=a.AudioEncoding=a.VideoEncoding=a.VideoCodecRateControl=a.Rendering=a.AudioRendering=a.VideoRendering=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.connectStateToNumber=a.connectStateToJSON=a.connectStateFromJSON=a.ConnectState=a.projectBroadcastErrorToNumber=a.projectBroadcastErrorToJSON=a.projectBroadcastErrorFromJSON=a.ProjectBroadcastError=a.roleToNumber=a.roleToJSON=a.roleFromJSON=void 0,a.DeleteSourceResponse=a.DeleteSourceRequest=a.CreateSourceResponse=a.CreateSourceRequest=a.UpdateDestinationResponse=a.UpdateDestinationRequest=a.DeleteDestinationResponse=a.DeleteDestinationRequest=a.GetDestinationResponse=a.GetDestinationRequest=a.CreateDestinationResponse=a.CreateDestinationRequest=a.StopProjectWebRtcResponse=a.StopProjectWebRtcRequest=a.StartProjectWebRtcResponse=a.StartProjectWebRtcRequest=a.GetProjectBroadcastStatusResponse=a.GetProjectBroadcastStatusRequest=a.GetProjectBroadcastSnapshotResponse=a.GetProjectBroadcastSnapshotRequest=a.GetProjectResponse=a.GetProjectRequest=a.StopProjectBroadcastResponse=a.StopProjectBroadcastRequest=a.StartProjectBroadcastResponse=a.StartProjectBroadcastRequest=a.DeleteProjectResponse=a.DeleteProjectRequest=a.UpdateProjectResponse=a.UpdateProjectRequest=a.CreateProjectResponse=a.CreateProjectRequest=a.GetCollectionsResponse=a.GetCollectionsRequest=a.DeleteCollectionResponse=a.DeleteCollectionRequest=a.UpdateCollectionResponse=a.UpdateCollectionRequest=a.GetCollectionResponse=a.GetCollectionRequest=a.CreateCollectionResponse=a.CreateCollectionRequest=a.Collection=a.Project=a.Destination=a.Source=a.ProjectBroadcastStatus=a.LatLong=a.WebRtcAccess=a.WebRtc=void 0,a.CollectionDeleteEvent=a.CollectionCreateEvent=a.ProjectBroadcastStateEvent=a.ProjectUpdateEvent=a.ProjectDeleteEvent=a.ProjectCreateEvent=a.DestinationStateEvent=a.DestinationUpdateEvent=a.DestinationDeleteEvent=a.DestinationCreateEvent=a.GetTestTokenResponse=a.GetTestTokenRequest=a.GetJsonWebKeySetResponse=a.GetJsonWebKeySetRequest=a.JsonWebKey=a.DeleteGuestCodeResponse=a.DeleteGuestCodeRequest=a.GetGuestCodesResponse=a.GetGuestCodesRequest=a.GetGuestCodeResponse=a.GetGuestCodeRequest=a.UseGuestCodeResponse=a.UseGuestCodeRequest=a.GuestCodeRedirectResponse=a.GuestCodeRedirectRequest=a.IssuedGuestCode=a.GuestCode=a.RefreshAccessTokenResponse=a.RefreshAccessTokenRequest=a.CreateWebRtcAccessTokenResponse=a.CreateWebRtcAccessTokenRequest=a.CreateGuestAccessTokenResponse=a.CreateGuestAccessTokenRequest=a.GuestAccessToken=a.GuestAccessTokenExchange=a.GuestAccessTokenDirect=a.CreateAccessTokenResponse=a.CreateAccessTokenRequest=a.RemoveSourceFromProjectResponse=a.RemoveSourceFromProjectRequest=a.UpdateSourceResponse=a.UpdateSourceRequest=a.GetSourcesResponse=a.GetSourcesRequest=a.GetSourceResponse=a.GetSourceRequest=a.UpdateSourceInProjectResponse=a.UpdateSourceInProjectRequest=a.AddSourceToProjectResponse=a.AddSourceToProjectRequest=void 0,a.PublicAuthenticationServiceDefinition=a.PublicAuthenticationServiceClientImpl=a.AuthenticationServiceDefinition=a.AuthenticationServiceClientImpl=a.BackendAuthenticationServiceDefinition=a.BackendAuthenticationServiceClientImpl=a.SourceServiceDefinition=a.SourceServiceClientImpl=a.DestinationServiceDefinition=a.DestinationServiceClientImpl=a.ProjectServiceDefinition=a.ProjectServiceClientImpl=a.CollectionServiceDefinition=a.CollectionServiceClientImpl=a.LiveEvent=a.SourceEvent=a.ProjectEvent=a.DestinationEvent=a.CollectionEvent=a.SourceStateEvent=a.SourceRemoveEvent=a.SourceAddEvent=a.SourceUpdateEvent=a.SourceDeleteEvent=a.SourceCreateEvent=a.CollectionUpdateEvent=void 0;const d=s(minimal$2),c=field_mask,h=struct$1,v=timestamp$1;a.protobufPackage="live.v21";var y;(function(u){u.IMAGE_FORMAT_UNSPECIFIED="IMAGE_FORMAT_UNSPECIFIED",u.IMAGE_FORMAT_JPEG="IMAGE_FORMAT_JPEG"})(y=a.ImageFormat||(a.ImageFormat={}));function b(u){switch(u){case 0:case"IMAGE_FORMAT_UNSPECIFIED":return y.IMAGE_FORMAT_UNSPECIFIED;case 1:case"IMAGE_FORMAT_JPEG":return y.IMAGE_FORMAT_JPEG;default:throw new ge.Error("Unrecognized enum value "+u+" for enum ImageFormat")}}a.imageFormatFromJSON=b;function _(u){switch(u){case y.IMAGE_FORMAT_UNSPECIFIED:return"IMAGE_FORMAT_UNSPECIFIED";case y.IMAGE_FORMAT_JPEG:return"IMAGE_FORMAT_JPEG";default:throw new ge.Error("Unrecognized enum value "+u+" for enum ImageFormat")}}a.imageFormatToJSON=_;function T(u){switch(u){case y.IMAGE_FORMAT_UNSPECIFIED:return 0;case y.IMAGE_FORMAT_JPEG:return 1;default:throw new ge.Error("Unrecognized enum value "+u+" for enum ImageFormat")}}a.imageFormatToNumber=T;var I;(function(u){u.VIDEO_COLOR_SPACE_UNSPECIFIED="VIDEO_COLOR_SPACE_UNSPECIFIED",u.VIDEO_COLOR_SPACE_YUV420="VIDEO_COLOR_SPACE_YUV420"})(I=a.VideoColorSpace||(a.VideoColorSpace={}));function N(u){switch(u){case 0:case"VIDEO_COLOR_SPACE_UNSPECIFIED":return I.VIDEO_COLOR_SPACE_UNSPECIFIED;case 1:case"VIDEO_COLOR_SPACE_YUV420":return I.VIDEO_COLOR_SPACE_YUV420;default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoColorSpace")}}a.videoColorSpaceFromJSON=N;function A(u){switch(u){case I.VIDEO_COLOR_SPACE_UNSPECIFIED:return"VIDEO_COLOR_SPACE_UNSPECIFIED";case I.VIDEO_COLOR_SPACE_YUV420:return"VIDEO_COLOR_SPACE_YUV420";default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoColorSpace")}}a.videoColorSpaceToJSON=A;function V(u){switch(u){case I.VIDEO_COLOR_SPACE_UNSPECIFIED:return 0;case I.VIDEO_COLOR_SPACE_YUV420:return 1;default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoColorSpace")}}a.videoColorSpaceToNumber=V;var $;(function(u){u.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED="AUDIO_CHANNEL_LAYOUT_UNSPECIFIED",u.AUDIO_CHANNEL_LAYOUT_STEREO="AUDIO_CHANNEL_LAYOUT_STEREO"})($=a.AudioChannelLayout||(a.AudioChannelLayout={}));function L(u){switch(u){case 0:case"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED":return $.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED;case 1:case"AUDIO_CHANNEL_LAYOUT_STEREO":return $.AUDIO_CHANNEL_LAYOUT_STEREO;default:throw new ge.Error("Unrecognized enum value "+u+" for enum AudioChannelLayout")}}a.audioChannelLayoutFromJSON=L;function D(u){switch(u){case $.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED";case $.AUDIO_CHANNEL_LAYOUT_STEREO:return"AUDIO_CHANNEL_LAYOUT_STEREO";default:throw new ge.Error("Unrecognized enum value "+u+" for enum AudioChannelLayout")}}a.audioChannelLayoutToJSON=D;function H(u){switch(u){case $.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return 0;case $.AUDIO_CHANNEL_LAYOUT_STEREO:return 1;default:throw new ge.Error("Unrecognized enum value "+u+" for enum AudioChannelLayout")}}a.audioChannelLayoutToNumber=H;var O;(function(u){u.RENDERING_QUALITY_UNSPECIFIED="RENDERING_QUALITY_UNSPECIFIED",u.RENDERING_QUALITY_STANDARD="RENDERING_QUALITY_STANDARD",u.RENDERING_QUALITY_HIGH="RENDERING_QUALITY_HIGH"})(O=a.RenderingQuality||(a.RenderingQuality={}));function x(u){switch(u){case 0:case"RENDERING_QUALITY_UNSPECIFIED":return O.RENDERING_QUALITY_UNSPECIFIED;case 1:case"RENDERING_QUALITY_STANDARD":return O.RENDERING_QUALITY_STANDARD;case 2:case"RENDERING_QUALITY_HIGH":return O.RENDERING_QUALITY_HIGH;default:throw new ge.Error("Unrecognized enum value "+u+" for enum RenderingQuality")}}a.renderingQualityFromJSON=x;function j(u){switch(u){case O.RENDERING_QUALITY_UNSPECIFIED:return"RENDERING_QUALITY_UNSPECIFIED";case O.RENDERING_QUALITY_STANDARD:return"RENDERING_QUALITY_STANDARD";case O.RENDERING_QUALITY_HIGH:return"RENDERING_QUALITY_HIGH";default:throw new ge.Error("Unrecognized enum value "+u+" for enum RenderingQuality")}}a.renderingQualityToJSON=j;function X(u){switch(u){case O.RENDERING_QUALITY_UNSPECIFIED:return 0;case O.RENDERING_QUALITY_STANDARD:return 1;case O.RENDERING_QUALITY_HIGH:return 2;default:throw new ge.Error("Unrecognized enum value "+u+" for enum RenderingQuality")}}a.renderingQualityToNumber=X;var te;(function(u){u.VIDEO_CODEC_UNSPECIFIED="VIDEO_CODEC_UNSPECIFIED",u.VIDEO_CODEC_H264="VIDEO_CODEC_H264"})(te=a.VideoCodec||(a.VideoCodec={}));function se(u){switch(u){case 0:case"VIDEO_CODEC_UNSPECIFIED":return te.VIDEO_CODEC_UNSPECIFIED;case 1:case"VIDEO_CODEC_H264":return te.VIDEO_CODEC_H264;default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoCodec")}}a.videoCodecFromJSON=se;function oe(u){switch(u){case te.VIDEO_CODEC_UNSPECIFIED:return"VIDEO_CODEC_UNSPECIFIED";case te.VIDEO_CODEC_H264:return"VIDEO_CODEC_H264";default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoCodec")}}a.videoCodecToJSON=oe;function F(u){switch(u){case te.VIDEO_CODEC_UNSPECIFIED:return 0;case te.VIDEO_CODEC_H264:return 1;default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoCodec")}}a.videoCodecToNumber=F;var Z;(function(u){u.VIDEO_CODEC_PROFILE_UNSPECIFIED="VIDEO_CODEC_PROFILE_UNSPECIFIED",u.VIDEO_CODEC_PROFILE_BASELINE="VIDEO_CODEC_PROFILE_BASELINE",u.VIDEO_CODEC_PROFILE_MAIN="VIDEO_CODEC_PROFILE_MAIN",u.VIDEO_CODEC_PROFILE_HIGH="VIDEO_CODEC_PROFILE_HIGH"})(Z=a.VideoCodecProfile||(a.VideoCodecProfile={}));function ne(u){switch(u){case 0:case"VIDEO_CODEC_PROFILE_UNSPECIFIED":return Z.VIDEO_CODEC_PROFILE_UNSPECIFIED;case 2:case"VIDEO_CODEC_PROFILE_BASELINE":return Z.VIDEO_CODEC_PROFILE_BASELINE;case 3:case"VIDEO_CODEC_PROFILE_MAIN":return Z.VIDEO_CODEC_PROFILE_MAIN;case 4:case"VIDEO_CODEC_PROFILE_HIGH":return Z.VIDEO_CODEC_PROFILE_HIGH;default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoCodecProfile")}}a.videoCodecProfileFromJSON=ne;function M(u){switch(u){case Z.VIDEO_CODEC_PROFILE_UNSPECIFIED:return"VIDEO_CODEC_PROFILE_UNSPECIFIED";case Z.VIDEO_CODEC_PROFILE_BASELINE:return"VIDEO_CODEC_PROFILE_BASELINE";case Z.VIDEO_CODEC_PROFILE_MAIN:return"VIDEO_CODEC_PROFILE_MAIN";case Z.VIDEO_CODEC_PROFILE_HIGH:return"VIDEO_CODEC_PROFILE_HIGH";default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoCodecProfile")}}a.videoCodecProfileToJSON=M;function G(u){switch(u){case Z.VIDEO_CODEC_PROFILE_UNSPECIFIED:return 0;case Z.VIDEO_CODEC_PROFILE_BASELINE:return 2;case Z.VIDEO_CODEC_PROFILE_MAIN:return 3;case Z.VIDEO_CODEC_PROFILE_HIGH:return 4;default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoCodecProfile")}}a.videoCodecProfileToNumber=G;var J;(function(u){u.AUDIO_CODEC_UNSPECIFIED="AUDIO_CODEC_UNSPECIFIED",u.AUDIO_CODEC_AAC="AUDIO_CODEC_AAC"})(J=a.AudioCodec||(a.AudioCodec={}));function ie(u){switch(u){case 0:case"AUDIO_CODEC_UNSPECIFIED":return J.AUDIO_CODEC_UNSPECIFIED;case 1:case"AUDIO_CODEC_AAC":return J.AUDIO_CODEC_AAC;default:throw new ge.Error("Unrecognized enum value "+u+" for enum AudioCodec")}}a.audioCodecFromJSON=ie;function K(u){switch(u){case J.AUDIO_CODEC_UNSPECIFIED:return"AUDIO_CODEC_UNSPECIFIED";case J.AUDIO_CODEC_AAC:return"AUDIO_CODEC_AAC";default:throw new ge.Error("Unrecognized enum value "+u+" for enum AudioCodec")}}a.audioCodecToJSON=K;function Y(u){switch(u){case J.AUDIO_CODEC_UNSPECIFIED:return 0;case J.AUDIO_CODEC_AAC:return 1;default:throw new ge.Error("Unrecognized enum value "+u+" for enum AudioCodec")}}a.audioCodecToNumber=Y;var ae;(function(u){u.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED="VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED",u.VIDEO_CODEC_RATE_CONTROL_MODE_CBR="VIDEO_CODEC_RATE_CONTROL_MODE_CBR"})(ae=a.VideoCodecRateControlMode||(a.VideoCodecRateControlMode={}));function pe(u){switch(u){case 0:case"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED":return ae.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED;case 1:case"VIDEO_CODEC_RATE_CONTROL_MODE_CBR":return ae.VIDEO_CODEC_RATE_CONTROL_MODE_CBR;default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeFromJSON=pe;function Se(u){switch(u){case ae.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED";case ae.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return"VIDEO_CODEC_RATE_CONTROL_MODE_CBR";default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeToJSON=Se;function ye(u){switch(u){case ae.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return 0;case ae.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return 1;default:throw new ge.Error("Unrecognized enum value "+u+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeToNumber=ye;var w;(function(u){u.PROJECT_BROADCAST_PHASE_UNSPECIFIED="PROJECT_BROADCAST_PHASE_UNSPECIFIED",u.PROJECT_BROADCAST_PHASE_NOT_RUNNING="PROJECT_BROADCAST_PHASE_NOT_RUNNING",u.PROJECT_BROADCAST_PHASE_WAITING="PROJECT_BROADCAST_PHASE_WAITING",u.PROJECT_BROADCAST_PHASE_STARTING="PROJECT_BROADCAST_PHASE_STARTING",u.PROJECT_BROADCAST_PHASE_RUNNING="PROJECT_BROADCAST_PHASE_RUNNING",u.PROJECT_BROADCAST_PHASE_STOPPING="PROJECT_BROADCAST_PHASE_STOPPING",u.PROJECT_BROADCAST_PHASE_STOPPED="PROJECT_BROADCAST_PHASE_STOPPED",u.PROJECT_BROADCAST_PHASE_ARCHIVED="PROJECT_BROADCAST_PHASE_ARCHIVED"})(w=a.ProjectBroadcastPhase||(a.ProjectBroadcastPhase={}));function z(u){switch(u){case 0:case"PROJECT_BROADCAST_PHASE_UNSPECIFIED":return w.PROJECT_BROADCAST_PHASE_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_PHASE_NOT_RUNNING":return w.PROJECT_BROADCAST_PHASE_NOT_RUNNING;case 2:case"PROJECT_BROADCAST_PHASE_WAITING":return w.PROJECT_BROADCAST_PHASE_WAITING;case 3:case"PROJECT_BROADCAST_PHASE_STARTING":return w.PROJECT_BROADCAST_PHASE_STARTING;case 4:case"PROJECT_BROADCAST_PHASE_RUNNING":return w.PROJECT_BROADCAST_PHASE_RUNNING;case 5:case"PROJECT_BROADCAST_PHASE_STOPPING":return w.PROJECT_BROADCAST_PHASE_STOPPING;case 6:case"PROJECT_BROADCAST_PHASE_STOPPED":return w.PROJECT_BROADCAST_PHASE_STOPPED;case 7:case"PROJECT_BROADCAST_PHASE_ARCHIVED":return w.PROJECT_BROADCAST_PHASE_ARCHIVED;default:throw new ge.Error("Unrecognized enum value "+u+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseFromJSON=z;function re(u){switch(u){case w.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return"PROJECT_BROADCAST_PHASE_UNSPECIFIED";case w.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return"PROJECT_BROADCAST_PHASE_NOT_RUNNING";case w.PROJECT_BROADCAST_PHASE_WAITING:return"PROJECT_BROADCAST_PHASE_WAITING";case w.PROJECT_BROADCAST_PHASE_STARTING:return"PROJECT_BROADCAST_PHASE_STARTING";case w.PROJECT_BROADCAST_PHASE_RUNNING:return"PROJECT_BROADCAST_PHASE_RUNNING";case w.PROJECT_BROADCAST_PHASE_STOPPING:return"PROJECT_BROADCAST_PHASE_STOPPING";case w.PROJECT_BROADCAST_PHASE_STOPPED:return"PROJECT_BROADCAST_PHASE_STOPPED";case w.PROJECT_BROADCAST_PHASE_ARCHIVED:return"PROJECT_BROADCAST_PHASE_ARCHIVED";default:throw new ge.Error("Unrecognized enum value "+u+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseToJSON=re;function me(u){switch(u){case w.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return 0;case w.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return 1;case w.PROJECT_BROADCAST_PHASE_WAITING:return 2;case w.PROJECT_BROADCAST_PHASE_STARTING:return 3;case w.PROJECT_BROADCAST_PHASE_RUNNING:return 4;case w.PROJECT_BROADCAST_PHASE_STOPPING:return 5;case w.PROJECT_BROADCAST_PHASE_STOPPED:return 6;case w.PROJECT_BROADCAST_PHASE_ARCHIVED:return 7;default:throw new ge.Error("Unrecognized enum value "+u+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseToNumber=me;var le;(function(u){u.S3ACL_UNSPECIFIED="S3ACL_UNSPECIFIED",u.S3ACL_PRIVATE="S3ACL_PRIVATE",u.S3ACL_PUBLIC_READ="S3ACL_PUBLIC_READ",u.S3ACL_PUBLIC_READ_WRITE="S3ACL_PUBLIC_READ_WRITE",u.S3ACL_AUTHENTICATED_READ="S3ACL_AUTHENTICATED_READ",u.S3ACL_BUCKET_OWNER_READ="S3ACL_BUCKET_OWNER_READ",u.S3ACL_BUCKET_OWNER_FULL_CONTROL="S3ACL_BUCKET_OWNER_FULL_CONTROL"})(le=a.S3ACL||(a.S3ACL={}));function ue(u){switch(u){case 0:case"S3ACL_UNSPECIFIED":return le.S3ACL_UNSPECIFIED;case 1:case"S3ACL_PRIVATE":return le.S3ACL_PRIVATE;case 2:case"S3ACL_PUBLIC_READ":return le.S3ACL_PUBLIC_READ;case 3:case"S3ACL_PUBLIC_READ_WRITE":return le.S3ACL_PUBLIC_READ_WRITE;case 4:case"S3ACL_AUTHENTICATED_READ":return le.S3ACL_AUTHENTICATED_READ;case 5:case"S3ACL_BUCKET_OWNER_READ":return le.S3ACL_BUCKET_OWNER_READ;case 6:case"S3ACL_BUCKET_OWNER_FULL_CONTROL":return le.S3ACL_BUCKET_OWNER_FULL_CONTROL;default:throw new ge.Error("Unrecognized enum value "+u+" for enum S3ACL")}}a.s3ACLFromJSON=ue;function he(u){switch(u){case le.S3ACL_UNSPECIFIED:return"S3ACL_UNSPECIFIED";case le.S3ACL_PRIVATE:return"S3ACL_PRIVATE";case le.S3ACL_PUBLIC_READ:return"S3ACL_PUBLIC_READ";case le.S3ACL_PUBLIC_READ_WRITE:return"S3ACL_PUBLIC_READ_WRITE";case le.S3ACL_AUTHENTICATED_READ:return"S3ACL_AUTHENTICATED_READ";case le.S3ACL_BUCKET_OWNER_READ:return"S3ACL_BUCKET_OWNER_READ";case le.S3ACL_BUCKET_OWNER_FULL_CONTROL:return"S3ACL_BUCKET_OWNER_FULL_CONTROL";default:throw new ge.Error("Unrecognized enum value "+u+" for enum S3ACL")}}a.s3ACLToJSON=he;function _e(u){switch(u){case le.S3ACL_UNSPECIFIED:return 0;case le.S3ACL_PRIVATE:return 1;case le.S3ACL_PUBLIC_READ:return 2;case le.S3ACL_PUBLIC_READ_WRITE:return 3;case le.S3ACL_AUTHENTICATED_READ:return 4;case le.S3ACL_BUCKET_OWNER_READ:return 5;case le.S3ACL_BUCKET_OWNER_FULL_CONTROL:return 6;default:throw new ge.Error("Unrecognized enum value "+u+" for enum S3ACL")}}a.s3ACLToNumber=_e;var Ce;(function(u){u.SOURCE_TRIGGER_ACTION_UNSPECIFIED="SOURCE_TRIGGER_ACTION_UNSPECIFIED",u.SOURCE_TRIGGER_ACTION_IGNORE="SOURCE_TRIGGER_ACTION_IGNORE",u.SOURCE_TRIGGER_ACTION_OR="SOURCE_TRIGGER_ACTION_OR"})(Ce=a.SourceTriggerAction||(a.SourceTriggerAction={}));function Me(u){switch(u){case 0:case"SOURCE_TRIGGER_ACTION_UNSPECIFIED":return Ce.SOURCE_TRIGGER_ACTION_UNSPECIFIED;case 1:case"SOURCE_TRIGGER_ACTION_IGNORE":return Ce.SOURCE_TRIGGER_ACTION_IGNORE;case 3:case"SOURCE_TRIGGER_ACTION_OR":return Ce.SOURCE_TRIGGER_ACTION_OR;default:throw new ge.Error("Unrecognized enum value "+u+" for enum SourceTriggerAction")}}a.sourceTriggerActionFromJSON=Me;function Be(u){switch(u){case Ce.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return"SOURCE_TRIGGER_ACTION_UNSPECIFIED";case Ce.SOURCE_TRIGGER_ACTION_IGNORE:return"SOURCE_TRIGGER_ACTION_IGNORE";case Ce.SOURCE_TRIGGER_ACTION_OR:return"SOURCE_TRIGGER_ACTION_OR";default:throw new ge.Error("Unrecognized enum value "+u+" for enum SourceTriggerAction")}}a.sourceTriggerActionToJSON=Be;function ze(u){switch(u){case Ce.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return 0;case Ce.SOURCE_TRIGGER_ACTION_IGNORE:return 1;case Ce.SOURCE_TRIGGER_ACTION_OR:return 3;default:throw new ge.Error("Unrecognized enum value "+u+" for enum SourceTriggerAction")}}a.sourceTriggerActionToNumber=ze;var Ie;(function(u){u.REGION_UNSPECIFIED="REGION_UNSPECIFIED",u.REGION_US_EAST_1="REGION_US_EAST_1",u.REGION_US_EAST_2="REGION_US_EAST_2",u.REGION_US_WEST_1="REGION_US_WEST_1",u.REGION_US_WEST_2="REGION_US_WEST_2",u.REGION_US_CENTRAL_1="REGION_US_CENTRAL_1",u.REGION_AP_SOUTHEAST_1="REGION_AP_SOUTHEAST_1",u.REGION_CA_EAST_1="REGION_CA_EAST_1",u.REGION_EU_CENTRAL_1="REGION_EU_CENTRAL_1",u.REGION_EU_WEST_1="REGION_EU_WEST_1"})(Ie=a.Region||(a.Region={}));function Ze(u){switch(u){case 0:case"REGION_UNSPECIFIED":return Ie.REGION_UNSPECIFIED;case 1:case"REGION_US_EAST_1":return Ie.REGION_US_EAST_1;case 2:case"REGION_US_EAST_2":return Ie.REGION_US_EAST_2;case 3:case"REGION_US_WEST_1":return Ie.REGION_US_WEST_1;case 4:case"REGION_US_WEST_2":return Ie.REGION_US_WEST_2;case 5:case"REGION_US_CENTRAL_1":return Ie.REGION_US_CENTRAL_1;case 10:case"REGION_AP_SOUTHEAST_1":return Ie.REGION_AP_SOUTHEAST_1;case 20:case"REGION_CA_EAST_1":return Ie.REGION_CA_EAST_1;case 30:case"REGION_EU_CENTRAL_1":return Ie.REGION_EU_CENTRAL_1;case 31:case"REGION_EU_WEST_1":return Ie.REGION_EU_WEST_1;default:throw new ge.Error("Unrecognized enum value "+u+" for enum Region")}}a.regionFromJSON=Ze;function rt(u){switch(u){case Ie.REGION_UNSPECIFIED:return"REGION_UNSPECIFIED";case Ie.REGION_US_EAST_1:return"REGION_US_EAST_1";case Ie.REGION_US_EAST_2:return"REGION_US_EAST_2";case Ie.REGION_US_WEST_1:return"REGION_US_WEST_1";case Ie.REGION_US_WEST_2:return"REGION_US_WEST_2";case Ie.REGION_US_CENTRAL_1:return"REGION_US_CENTRAL_1";case Ie.REGION_AP_SOUTHEAST_1:return"REGION_AP_SOUTHEAST_1";case Ie.REGION_CA_EAST_1:return"REGION_CA_EAST_1";case Ie.REGION_EU_CENTRAL_1:return"REGION_EU_CENTRAL_1";case Ie.REGION_EU_WEST_1:return"REGION_EU_WEST_1";default:throw new ge.Error("Unrecognized enum value "+u+" for enum Region")}}a.regionToJSON=rt;function it(u){switch(u){case Ie.REGION_UNSPECIFIED:return 0;case Ie.REGION_US_EAST_1:return 1;case Ie.REGION_US_EAST_2:return 2;case Ie.REGION_US_WEST_1:return 3;case Ie.REGION_US_WEST_2:return 4;case Ie.REGION_US_CENTRAL_1:return 5;case Ie.REGION_AP_SOUTHEAST_1:return 10;case Ie.REGION_CA_EAST_1:return 20;case Ie.REGION_EU_CENTRAL_1:return 30;case Ie.REGION_EU_WEST_1:return 31;default:throw new ge.Error("Unrecognized enum value "+u+" for enum Region")}}a.regionToNumber=it;var Ee;(function(u){u.ROLE_UNSPECIFIED="ROLE_UNSPECIFIED",u.ROLE_HOST="ROLE_HOST",u.ROLE_COHOST="ROLE_COHOST",u.ROLE_CONTRIBUTOR="ROLE_CONTRIBUTOR",u.ROLE_GUEST="ROLE_GUEST",u.ROLE_VIEWER="ROLE_VIEWER",u.ROLE_RENDERER="ROLE_RENDERER",u.ROLE_PLATFORM="ROLE_PLATFORM",u.ROLE_IMPERSONATE="ROLE_IMPERSONATE"})(Ee=a.Role||(a.Role={}));function Fe(u){switch(u){case 0:case"ROLE_UNSPECIFIED":return Ee.ROLE_UNSPECIFIED;case 1:case"ROLE_HOST":return Ee.ROLE_HOST;case 2:case"ROLE_COHOST":return Ee.ROLE_COHOST;case 3:case"ROLE_CONTRIBUTOR":return Ee.ROLE_CONTRIBUTOR;case 4:case"ROLE_GUEST":return Ee.ROLE_GUEST;case 5:case"ROLE_VIEWER":return Ee.ROLE_VIEWER;case 6:case"ROLE_RENDERER":return Ee.ROLE_RENDERER;case 7:case"ROLE_PLATFORM":return Ee.ROLE_PLATFORM;case 8:case"ROLE_IMPERSONATE":return Ee.ROLE_IMPERSONATE;default:throw new ge.Error("Unrecognized enum value "+u+" for enum Role")}}a.roleFromJSON=Fe;function je(u){switch(u){case Ee.ROLE_UNSPECIFIED:return"ROLE_UNSPECIFIED";case Ee.ROLE_HOST:return"ROLE_HOST";case Ee.ROLE_COHOST:return"ROLE_COHOST";case Ee.ROLE_CONTRIBUTOR:return"ROLE_CONTRIBUTOR";case Ee.ROLE_GUEST:return"ROLE_GUEST";case Ee.ROLE_VIEWER:return"ROLE_VIEWER";case Ee.ROLE_RENDERER:return"ROLE_RENDERER";case Ee.ROLE_PLATFORM:return"ROLE_PLATFORM";case Ee.ROLE_IMPERSONATE:return"ROLE_IMPERSONATE";default:throw new ge.Error("Unrecognized enum value "+u+" for enum Role")}}a.roleToJSON=je;function Ke(u){switch(u){case Ee.ROLE_UNSPECIFIED:return 0;case Ee.ROLE_HOST:return 1;case Ee.ROLE_COHOST:return 2;case Ee.ROLE_CONTRIBUTOR:return 3;case Ee.ROLE_GUEST:return 4;case Ee.ROLE_VIEWER:return 5;case Ee.ROLE_RENDERER:return 6;case Ee.ROLE_PLATFORM:return 7;case Ee.ROLE_IMPERSONATE:return 8;default:throw new ge.Error("Unrecognized enum value "+u+" for enum Role")}}a.roleToNumber=Ke;var xe;(function(u){u.PROJECT_BROADCAST_ERROR_UNSPECIFIED="PROJECT_BROADCAST_ERROR_UNSPECIFIED",u.PROJECT_BROADCAST_ERROR_INTERNAL="PROJECT_BROADCAST_ERROR_INTERNAL",u.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED="PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED"})(xe=a.ProjectBroadcastError||(a.ProjectBroadcastError={}));function Xe(u){switch(u){case 0:case"PROJECT_BROADCAST_ERROR_UNSPECIFIED":return xe.PROJECT_BROADCAST_ERROR_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_ERROR_INTERNAL":return xe.PROJECT_BROADCAST_ERROR_INTERNAL;case 2:case"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED":return xe.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED;default:throw new ge.Error("Unrecognized enum value "+u+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorFromJSON=Xe;function at(u){switch(u){case xe.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return"PROJECT_BROADCAST_ERROR_UNSPECIFIED";case xe.PROJECT_BROADCAST_ERROR_INTERNAL:return"PROJECT_BROADCAST_ERROR_INTERNAL";case xe.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED";default:throw new ge.Error("Unrecognized enum value "+u+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorToJSON=at;function ot(u){switch(u){case xe.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return 0;case xe.PROJECT_BROADCAST_ERROR_INTERNAL:return 1;case xe.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return 2;default:throw new ge.Error("Unrecognized enum value "+u+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorToNumber=ot;var He;(function(u){u.CONNECT_STATE_UNSPECIFIED="CONNECT_STATE_UNSPECIFIED",u.CONNECT_STATE_CONNECTED="CONNECT_STATE_CONNECTED",u.CONNECT_STATE_DISCONNECTED="CONNECT_STATE_DISCONNECTED"})(He=a.ConnectState||(a.ConnectState={}));function Qe(u){switch(u){case 0:case"CONNECT_STATE_UNSPECIFIED":return He.CONNECT_STATE_UNSPECIFIED;case 1:case"CONNECT_STATE_CONNECTED":return He.CONNECT_STATE_CONNECTED;case 2:case"CONNECT_STATE_DISCONNECTED":return He.CONNECT_STATE_DISCONNECTED;default:throw new ge.Error("Unrecognized enum value "+u+" for enum ConnectState")}}a.connectStateFromJSON=Qe;function et(u){switch(u){case He.CONNECT_STATE_UNSPECIFIED:return"CONNECT_STATE_UNSPECIFIED";case He.CONNECT_STATE_CONNECTED:return"CONNECT_STATE_CONNECTED";case He.CONNECT_STATE_DISCONNECTED:return"CONNECT_STATE_DISCONNECTED";default:throw new ge.Error("Unrecognized enum value "+u+" for enum ConnectState")}}a.connectStateToJSON=et;function tt(u){switch(u){case He.CONNECT_STATE_UNSPECIFIED:return 0;case He.CONNECT_STATE_CONNECTED:return 1;case He.CONNECT_STATE_DISCONNECTED:return 2;default:throw new ge.Error("Unrecognized enum value "+u+" for enum ConnectState")}}a.connectStateToNumber=tt;var Ae;(function(u){u.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",u.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",u.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",u.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",u.EVENT_SUB_TYPE_ADD="EVENT_SUB_TYPE_ADD",u.EVENT_SUB_TYPE_REMOVE="EVENT_SUB_TYPE_REMOVE",u.EVENT_SUB_TYPE_STATE="EVENT_SUB_TYPE_STATE"})(Ae=a.EventSubType||(a.EventSubType={}));function dt(u){switch(u){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return Ae.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return Ae.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return Ae.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return Ae.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_ADD":return Ae.EVENT_SUB_TYPE_ADD;case 5:case"EVENT_SUB_TYPE_REMOVE":return Ae.EVENT_SUB_TYPE_REMOVE;case 6:case"EVENT_SUB_TYPE_STATE":return Ae.EVENT_SUB_TYPE_STATE;default:throw new ge.Error("Unrecognized enum value "+u+" for enum EventSubType")}}a.eventSubTypeFromJSON=dt;function ut(u){switch(u){case Ae.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case Ae.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case Ae.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case Ae.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case Ae.EVENT_SUB_TYPE_ADD:return"EVENT_SUB_TYPE_ADD";case Ae.EVENT_SUB_TYPE_REMOVE:return"EVENT_SUB_TYPE_REMOVE";case Ae.EVENT_SUB_TYPE_STATE:return"EVENT_SUB_TYPE_STATE";default:throw new ge.Error("Unrecognized enum value "+u+" for enum EventSubType")}}a.eventSubTypeToJSON=ut;function ct(u){switch(u){case Ae.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case Ae.EVENT_SUB_TYPE_CREATE:return 1;case Ae.EVENT_SUB_TYPE_UPDATE:return 2;case Ae.EVENT_SUB_TYPE_DELETE:return 3;case Ae.EVENT_SUB_TYPE_ADD:return 4;case Ae.EVENT_SUB_TYPE_REMOVE:return 5;case Ae.EVENT_SUB_TYPE_STATE:return 6;default:throw new ge.Error("Unrecognized enum value "+u+" for enum EventSubType")}}a.eventSubTypeToNumber=ct;var Ue;(function(u){u.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",u.EVENT_TYPE_COLLECTION="EVENT_TYPE_COLLECTION",u.EVENT_TYPE_PROJECT="EVENT_TYPE_PROJECT",u.EVENT_TYPE_SOURCE="EVENT_TYPE_SOURCE",u.EVENT_TYPE_DESTINATION="EVENT_TYPE_DESTINATION"})(Ue=a.EventType||(a.EventType={}));function lt(u){switch(u){case 0:case"EVENT_TYPE_UNSPECIFIED":return Ue.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_COLLECTION":return Ue.EVENT_TYPE_COLLECTION;case 2:case"EVENT_TYPE_PROJECT":return Ue.EVENT_TYPE_PROJECT;case 4:case"EVENT_TYPE_SOURCE":return Ue.EVENT_TYPE_SOURCE;case 5:case"EVENT_TYPE_DESTINATION":return Ue.EVENT_TYPE_DESTINATION;default:throw new ge.Error("Unrecognized enum value "+u+" for enum EventType")}}a.eventTypeFromJSON=lt;function Ye(u){switch(u){case Ue.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case Ue.EVENT_TYPE_COLLECTION:return"EVENT_TYPE_COLLECTION";case Ue.EVENT_TYPE_PROJECT:return"EVENT_TYPE_PROJECT";case Ue.EVENT_TYPE_SOURCE:return"EVENT_TYPE_SOURCE";case Ue.EVENT_TYPE_DESTINATION:return"EVENT_TYPE_DESTINATION";default:throw new ge.Error("Unrecognized enum value "+u+" for enum EventType")}}a.eventTypeToJSON=Ye;function st(u){switch(u){case Ue.EVENT_TYPE_UNSPECIFIED:return 0;case Ue.EVENT_TYPE_COLLECTION:return 1;case Ue.EVENT_TYPE_PROJECT:return 2;case Ue.EVENT_TYPE_SOURCE:return 4;case Ue.EVENT_TYPE_DESTINATION:return 5;default:throw new ge.Error("Unrecognized enum value "+u+" for enum EventType")}}a.eventTypeToNumber=st;function fe(){return{height:void 0,width:void 0,framerate:void 0,colorSpace:void 0}}a.VideoRendering={encode(u,S=d.default.Writer.create()){return u.height!==void 0&&S.uint32(8).uint32(u.height),u.width!==void 0&&S.uint32(16).uint32(u.width),u.framerate!==void 0&&S.uint32(29).float(u.framerate),u.colorSpace!==void 0&&S.uint32(32).int32(V(u.colorSpace)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=fe();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.height=g.uint32();break;case 2:C.width=g.uint32();break;case 3:C.framerate=g.float();break;case 4:C.colorSpace=N(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{height:Q(u.height)?Number(u.height):void 0,width:Q(u.width)?Number(u.width):void 0,framerate:Q(u.framerate)?Number(u.framerate):void 0,colorSpace:Q(u.colorSpace)?N(u.colorSpace):void 0}},toJSON(u){const S={};return u.height!==void 0&&(S.height=Math.round(u.height)),u.width!==void 0&&(S.width=Math.round(u.width)),u.framerate!==void 0&&(S.framerate=u.framerate),u.colorSpace!==void 0&&(S.colorSpace=u.colorSpace!==void 0?A(u.colorSpace):void 0),S},fromPartial(u){var S,g,U,C;const W=fe();return W.height=(S=u.height)!==null&&S!==void 0?S:void 0,W.width=(g=u.width)!==null&&g!==void 0?g:void 0,W.framerate=(U=u.framerate)!==null&&U!==void 0?U:void 0,W.colorSpace=(C=u.colorSpace)!==null&&C!==void 0?C:void 0,W}};function E(){return{channelLayout:void 0}}a.AudioRendering={encode(u,S=d.default.Writer.create()){return u.channelLayout!==void 0&&S.uint32(8).int32(H(u.channelLayout)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=E();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.channelLayout=L(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{channelLayout:Q(u.channelLayout)?L(u.channelLayout):void 0}},toJSON(u){const S={};return u.channelLayout!==void 0&&(S.channelLayout=u.channelLayout!==void 0?D(u.channelLayout):void 0),S},fromPartial(u){var S;const g=E();return g.channelLayout=(S=u.channelLayout)!==null&&S!==void 0?S:void 0,g}};function P(){return{video:void 0,audio:void 0,quality:void 0,targetLatency:void 0,complexity:void 0}}a.Rendering={encode(u,S=d.default.Writer.create()){return u.video!==void 0&&a.VideoRendering.encode(u.video,S.uint32(10).fork()).ldelim(),u.audio!==void 0&&a.AudioRendering.encode(u.audio,S.uint32(18).fork()).ldelim(),u.quality!==void 0&&S.uint32(24).int32(X(u.quality)),u.targetLatency!==void 0&&S.uint32(32).uint32(u.targetLatency),u.complexity!==void 0&&S.uint32(40).int32(u.complexity),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=P();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.video=a.VideoRendering.decode(g,g.uint32());break;case 2:C.audio=a.AudioRendering.decode(g,g.uint32());break;case 3:C.quality=x(g.int32());break;case 4:C.targetLatency=g.uint32();break;case 5:C.complexity=g.int32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{video:Q(u.video)?a.VideoRendering.fromJSON(u.video):void 0,audio:Q(u.audio)?a.AudioRendering.fromJSON(u.audio):void 0,quality:Q(u.quality)?x(u.quality):void 0,targetLatency:Q(u.targetLatency)?Number(u.targetLatency):void 0,complexity:Q(u.complexity)?Number(u.complexity):void 0}},toJSON(u){const S={};return u.video!==void 0&&(S.video=u.video?a.VideoRendering.toJSON(u.video):void 0),u.audio!==void 0&&(S.audio=u.audio?a.AudioRendering.toJSON(u.audio):void 0),u.quality!==void 0&&(S.quality=u.quality!==void 0?j(u.quality):void 0),u.targetLatency!==void 0&&(S.targetLatency=Math.round(u.targetLatency)),u.complexity!==void 0&&(S.complexity=Math.round(u.complexity)),S},fromPartial(u){var S,g,U;const C=P();return C.video=u.video!==void 0&&u.video!==null?a.VideoRendering.fromPartial(u.video):void 0,C.audio=u.audio!==void 0&&u.audio!==null?a.AudioRendering.fromPartial(u.audio):void 0,C.quality=(S=u.quality)!==null&&S!==void 0?S:void 0,C.targetLatency=(g=u.targetLatency)!==null&&g!==void 0?g:void 0,C.complexity=(U=u.complexity)!==null&&U!==void 0?U:void 0,C}};function B(){return{mode:void 0,targetBitrate:void 0,maxKeyFrameInterval:void 0}}a.VideoCodecRateControl={encode(u,S=d.default.Writer.create()){return u.mode!==void 0&&S.uint32(8).int32(ye(u.mode)),u.targetBitrate!==void 0&&S.uint32(16).uint32(u.targetBitrate),u.maxKeyFrameInterval!==void 0&&S.uint32(24).uint32(u.maxKeyFrameInterval),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=B();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.mode=pe(g.int32());break;case 2:C.targetBitrate=g.uint32();break;case 3:C.maxKeyFrameInterval=g.uint32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{mode:Q(u.mode)?pe(u.mode):void 0,targetBitrate:Q(u.targetBitrate)?Number(u.targetBitrate):void 0,maxKeyFrameInterval:Q(u.maxKeyFrameInterval)?Number(u.maxKeyFrameInterval):void 0}},toJSON(u){const S={};return u.mode!==void 0&&(S.mode=u.mode!==void 0?Se(u.mode):void 0),u.targetBitrate!==void 0&&(S.targetBitrate=Math.round(u.targetBitrate)),u.maxKeyFrameInterval!==void 0&&(S.maxKeyFrameInterval=Math.round(u.maxKeyFrameInterval)),S},fromPartial(u){var S,g,U;const C=B();return C.mode=(S=u.mode)!==null&&S!==void 0?S:void 0,C.targetBitrate=(g=u.targetBitrate)!==null&&g!==void 0?g:void 0,C.maxKeyFrameInterval=(U=u.maxKeyFrameInterval)!==null&&U!==void 0?U:void 0,C}};function de(){return{codec:void 0,rateControl:void 0,profile:void 0}}a.VideoEncoding={encode(u,S=d.default.Writer.create()){return u.codec!==void 0&&S.uint32(8).int32(F(u.codec)),u.rateControl!==void 0&&a.VideoCodecRateControl.encode(u.rateControl,S.uint32(18).fork()).ldelim(),u.profile!==void 0&&S.uint32(32).int32(G(u.profile)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=de();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.codec=se(g.int32());break;case 2:C.rateControl=a.VideoCodecRateControl.decode(g,g.uint32());break;case 4:C.profile=ne(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{codec:Q(u.codec)?se(u.codec):void 0,rateControl:Q(u.rateControl)?a.VideoCodecRateControl.fromJSON(u.rateControl):void 0,profile:Q(u.profile)?ne(u.profile):void 0}},toJSON(u){const S={};return u.codec!==void 0&&(S.codec=u.codec!==void 0?oe(u.codec):void 0),u.rateControl!==void 0&&(S.rateControl=u.rateControl?a.VideoCodecRateControl.toJSON(u.rateControl):void 0),u.profile!==void 0&&(S.profile=u.profile!==void 0?M(u.profile):void 0),S},fromPartial(u){var S,g;const U=de();return U.codec=(S=u.codec)!==null&&S!==void 0?S:void 0,U.rateControl=u.rateControl!==void 0&&u.rateControl!==null?a.VideoCodecRateControl.fromPartial(u.rateControl):void 0,U.profile=(g=u.profile)!==null&&g!==void 0?g:void 0,U}};function ee(){return{codec:void 0}}a.AudioEncoding={encode(u,S=d.default.Writer.create()){return u.codec!==void 0&&S.uint32(8).int32(Y(u.codec)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=ee();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.codec=ie(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{codec:Q(u.codec)?ie(u.codec):void 0}},toJSON(u){const S={};return u.codec!==void 0&&(S.codec=u.codec!==void 0?K(u.codec):void 0),S},fromPartial(u){var S;const g=ee();return g.codec=(S=u.codec)!==null&&S!==void 0?S:void 0,g}};function ce(){return{video:void 0,audio:void 0}}a.Encoding={encode(u,S=d.default.Writer.create()){return u.video!==void 0&&a.VideoEncoding.encode(u.video,S.uint32(10).fork()).ldelim(),u.audio!==void 0&&a.AudioEncoding.encode(u.audio,S.uint32(18).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=ce();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.video=a.VideoEncoding.decode(g,g.uint32());break;case 2:C.audio=a.AudioEncoding.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{video:Q(u.video)?a.VideoEncoding.fromJSON(u.video):void 0,audio:Q(u.audio)?a.AudioEncoding.fromJSON(u.audio):void 0}},toJSON(u){const S={};return u.video!==void 0&&(S.video=u.video?a.VideoEncoding.toJSON(u.video):void 0),u.audio!==void 0&&(S.audio=u.audio?a.AudioEncoding.toJSON(u.audio):void 0),S},fromPartial(u){const S=ce();return S.video=u.video!==void 0&&u.video!==null?a.VideoEncoding.fromPartial(u.video):void 0,S.audio=u.audio!==void 0&&u.audio!==null?a.AudioEncoding.fromPartial(u.audio):void 0,S}};function ke(){return{enabled:void 0,key:void 0,url:void 0,baseUrl:void 0}}a.SourceRtmpPushAddress={encode(u,S=d.default.Writer.create()){return u.enabled!==void 0&&S.uint32(8).bool(u.enabled),u.key!==void 0&&S.uint32(18).string(u.key),u.url!==void 0&&S.uint32(26).string(u.url),u.baseUrl!==void 0&&S.uint32(34).string(u.baseUrl),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=ke();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.enabled=g.bool();break;case 2:C.key=g.string();break;case 3:C.url=g.string();break;case 4:C.baseUrl=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{enabled:Q(u.enabled)?Boolean(u.enabled):void 0,key:Q(u.key)?String(u.key):void 0,url:Q(u.url)?String(u.url):void 0,baseUrl:Q(u.baseUrl)?String(u.baseUrl):void 0}},toJSON(u){const S={};return u.enabled!==void 0&&(S.enabled=u.enabled),u.key!==void 0&&(S.key=u.key),u.url!==void 0&&(S.url=u.url),u.baseUrl!==void 0&&(S.baseUrl=u.baseUrl),S},fromPartial(u){var S,g,U,C;const W=ke();return W.enabled=(S=u.enabled)!==null&&S!==void 0?S:void 0,W.key=(g=u.key)!==null&&g!==void 0?g:void 0,W.url=(U=u.url)!==null&&U!==void 0?U:void 0,W.baseUrl=(C=u.baseUrl)!==null&&C!==void 0?C:void 0,W}};function Le(){return{enabled:void 0,streamId:void 0,url:void 0,baseUrl:void 0}}a.SrtPushAddress={encode(u,S=d.default.Writer.create()){return u.enabled!==void 0&&S.uint32(8).bool(u.enabled),u.streamId!==void 0&&S.uint32(18).string(u.streamId),u.url!==void 0&&S.uint32(26).string(u.url),u.baseUrl!==void 0&&S.uint32(34).string(u.baseUrl),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Le();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.enabled=g.bool();break;case 2:C.streamId=g.string();break;case 3:C.url=g.string();break;case 4:C.baseUrl=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{enabled:Q(u.enabled)?Boolean(u.enabled):void 0,streamId:Q(u.streamId)?String(u.streamId):void 0,url:Q(u.url)?String(u.url):void 0,baseUrl:Q(u.baseUrl)?String(u.baseUrl):void 0}},toJSON(u){const S={};return u.enabled!==void 0&&(S.enabled=u.enabled),u.streamId!==void 0&&(S.streamId=u.streamId),u.url!==void 0&&(S.url=u.url),u.baseUrl!==void 0&&(S.baseUrl=u.baseUrl),S},fromPartial(u){var S,g,U,C;const W=Le();return W.enabled=(S=u.enabled)!==null&&S!==void 0?S:void 0,W.streamId=(g=u.streamId)!==null&&g!==void 0?g:void 0,W.url=(U=u.url)!==null&&U!==void 0?U:void 0,W.baseUrl=(C=u.baseUrl)!==null&&C!==void 0?C:void 0,W}};function De(){return{url:""}}a.RtmpPullAddress={encode(u,S=d.default.Writer.create()){return u.url!==""&&S.uint32(10).string(u.url),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=De();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.url=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{url:Q(u.url)?String(u.url):""}},toJSON(u){const S={};return u.url!==void 0&&(S.url=u.url),S},fromPartial(u){var S;const g=De();return g.url=(S=u.url)!==null&&S!==void 0?S:"",g}};function Pe(){return{rtmpPush:void 0,srtPush:void 0,rtmpPull:void 0}}a.SourceAddress={encode(u,S=d.default.Writer.create()){return u.rtmpPush!==void 0&&a.SourceRtmpPushAddress.encode(u.rtmpPush,S.uint32(10).fork()).ldelim(),u.srtPush!==void 0&&a.SrtPushAddress.encode(u.srtPush,S.uint32(18).fork()).ldelim(),u.rtmpPull!==void 0&&a.RtmpPullAddress.encode(u.rtmpPull,S.uint32(26).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Pe();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.rtmpPush=a.SourceRtmpPushAddress.decode(g,g.uint32());break;case 2:C.srtPush=a.SrtPushAddress.decode(g,g.uint32());break;case 3:C.rtmpPull=a.RtmpPullAddress.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{rtmpPush:Q(u.rtmpPush)?a.SourceRtmpPushAddress.fromJSON(u.rtmpPush):void 0,srtPush:Q(u.srtPush)?a.SrtPushAddress.fromJSON(u.srtPush):void 0,rtmpPull:Q(u.rtmpPull)?a.RtmpPullAddress.fromJSON(u.rtmpPull):void 0}},toJSON(u){const S={};return u.rtmpPush!==void 0&&(S.rtmpPush=u.rtmpPush?a.SourceRtmpPushAddress.toJSON(u.rtmpPush):void 0),u.srtPush!==void 0&&(S.srtPush=u.srtPush?a.SrtPushAddress.toJSON(u.srtPush):void 0),u.rtmpPull!==void 0&&(S.rtmpPull=u.rtmpPull?a.RtmpPullAddress.toJSON(u.rtmpPull):void 0),S},fromPartial(u){const S=Pe();return S.rtmpPush=u.rtmpPush!==void 0&&u.rtmpPush!==null?a.SourceRtmpPushAddress.fromPartial(u.rtmpPush):void 0,S.srtPush=u.srtPush!==void 0&&u.srtPush!==null?a.SrtPushAddress.fromPartial(u.srtPush):void 0,S.rtmpPull=u.rtmpPull!==void 0&&u.rtmpPull!==null?a.RtmpPullAddress.fromPartial(u.rtmpPull):void 0,S}};function Ne(){return{key:void 0,url:""}}a.DestinationRtmpPushAddress={encode(u,S=d.default.Writer.create()){return u.key!==void 0&&S.uint32(10).string(u.key),u.url!==""&&S.uint32(18).string(u.url),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ne();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.key=g.string();break;case 2:C.url=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{key:Q(u.key)?String(u.key):void 0,url:Q(u.url)?String(u.url):""}},toJSON(u){const S={};return u.key!==void 0&&(S.key=u.key),u.url!==void 0&&(S.url=u.url),S},fromPartial(u){var S,g;const U=Ne();return U.key=(S=u.key)!==null&&S!==void 0?S:void 0,U.url=(g=u.url)!==null&&g!==void 0?g:"",U}};function Ve(){return{appId:"",channelId:"",userId:""}}a.DestinationAgoraPushAddress={encode(u,S=d.default.Writer.create()){return u.appId!==""&&S.uint32(10).string(u.appId),u.channelId!==""&&S.uint32(18).string(u.channelId),u.userId!==""&&S.uint32(26).string(u.userId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ve();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.appId=g.string();break;case 2:C.channelId=g.string();break;case 3:C.userId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{appId:Q(u.appId)?String(u.appId):"",channelId:Q(u.channelId)?String(u.channelId):"",userId:Q(u.userId)?String(u.userId):""}},toJSON(u){const S={};return u.appId!==void 0&&(S.appId=u.appId),u.channelId!==void 0&&(S.channelId=u.channelId),u.userId!==void 0&&(S.userId=u.userId),S},fromPartial(u){var S,g,U;const C=Ve();return C.appId=(S=u.appId)!==null&&S!==void 0?S:"",C.channelId=(g=u.channelId)!==null&&g!==void 0?g:"",C.userId=(U=u.userId)!==null&&U!==void 0?U:"",C}};function Je(){return{playlistCount:void 0,fileCount:void 0}}a.HlsLifecycleLive={encode(u,S=d.default.Writer.create()){return u.playlistCount!==void 0&&S.uint32(8).int32(u.playlistCount),u.fileCount!==void 0&&S.uint32(16).int32(u.fileCount),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Je();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.playlistCount=g.int32();break;case 2:C.fileCount=g.int32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{playlistCount:Q(u.playlistCount)?Number(u.playlistCount):void 0,fileCount:Q(u.fileCount)?Number(u.fileCount):void 0}},toJSON(u){const S={};return u.playlistCount!==void 0&&(S.playlistCount=Math.round(u.playlistCount)),u.fileCount!==void 0&&(S.fileCount=Math.round(u.fileCount)),S},fromPartial(u){var S,g;const U=Je();return U.playlistCount=(S=u.playlistCount)!==null&&S!==void 0?S:void 0,U.fileCount=(g=u.fileCount)!==null&&g!==void 0?g:void 0,U}};function Ge(){return{maxDuration:void 0}}a.HlsLifecycleVod={encode(u,S=d.default.Writer.create()){return u.maxDuration!==void 0&&S.uint32(8).int32(u.maxDuration),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ge();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.maxDuration=g.int32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{maxDuration:Q(u.maxDuration)?Number(u.maxDuration):void 0}},toJSON(u){const S={};return u.maxDuration!==void 0&&(S.maxDuration=Math.round(u.maxDuration)),S},fromPartial(u){var S;const g=Ge();return g.maxDuration=(S=u.maxDuration)!==null&&S!==void 0?S:void 0,g}};function qe(){return{vod:void 0,live:void 0}}a.HlsLifecycle={encode(u,S=d.default.Writer.create()){return u.vod!==void 0&&a.HlsLifecycleVod.encode(u.vod,S.uint32(10).fork()).ldelim(),u.live!==void 0&&a.HlsLifecycleLive.encode(u.live,S.uint32(18).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=qe();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.vod=a.HlsLifecycleVod.decode(g,g.uint32());break;case 2:C.live=a.HlsLifecycleLive.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{vod:Q(u.vod)?a.HlsLifecycleVod.fromJSON(u.vod):void 0,live:Q(u.live)?a.HlsLifecycleLive.fromJSON(u.live):void 0}},toJSON(u){const S={};return u.vod!==void 0&&(S.vod=u.vod?a.HlsLifecycleVod.toJSON(u.vod):void 0),u.live!==void 0&&(S.live=u.live?a.HlsLifecycleLive.toJSON(u.live):void 0),S},fromPartial(u){const S=qe();return S.vod=u.vod!==void 0&&u.vod!==null?a.HlsLifecycleVod.fromPartial(u.vod):void 0,S.live=u.live!==void 0&&u.live!==null?a.HlsLifecycleLive.fromPartial(u.live):void 0,S}};function We(){return{lifecycle:void 0,segmentDuration:void 0}}a.HlsPackaging={encode(u,S=d.default.Writer.create()){return u.lifecycle!==void 0&&a.HlsLifecycle.encode(u.lifecycle,S.uint32(10).fork()).ldelim(),u.segmentDuration!==void 0&&S.uint32(16).int32(u.segmentDuration),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=We();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.lifecycle=a.HlsLifecycle.decode(g,g.uint32());break;case 2:C.segmentDuration=g.int32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{lifecycle:Q(u.lifecycle)?a.HlsLifecycle.fromJSON(u.lifecycle):void 0,segmentDuration:Q(u.segmentDuration)?Number(u.segmentDuration):void 0}},toJSON(u){const S={};return u.lifecycle!==void 0&&(S.lifecycle=u.lifecycle?a.HlsLifecycle.toJSON(u.lifecycle):void 0),u.segmentDuration!==void 0&&(S.segmentDuration=Math.round(u.segmentDuration)),S},fromPartial(u){var S;const g=We();return g.lifecycle=u.lifecycle!==void 0&&u.lifecycle!==null?a.HlsLifecycle.fromPartial(u.lifecycle):void 0,g.segmentDuration=(S=u.segmentDuration)!==null&&S!==void 0?S:void 0,g}};function we(){return{hls:void 0}}a.ObjectStoragePackaging={encode(u,S=d.default.Writer.create()){return u.hls!==void 0&&a.HlsPackaging.encode(u.hls,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=we();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.hls=a.HlsPackaging.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{hls:Q(u.hls)?a.HlsPackaging.fromJSON(u.hls):void 0}},toJSON(u){const S={};return u.hls!==void 0&&(S.hls=u.hls?a.HlsPackaging.toJSON(u.hls):void 0),S},fromPartial(u){const S=we();return S.hls=u.hls!==void 0&&u.hls!==null?a.HlsPackaging.fromPartial(u.hls):void 0,S}};function Te(){return{region:"",bucket:"",prefix:void 0,accessKey:"",secretKey:"",token:void 0,tokenDuration:void 0,acl:void 0,endpoint:void 0,packaging:void 0}}a.S3StorageAddress={encode(u,S=d.default.Writer.create()){return u.region!==""&&S.uint32(10).string(u.region),u.bucket!==""&&S.uint32(18).string(u.bucket),u.prefix!==void 0&&S.uint32(26).string(u.prefix),u.accessKey!==""&&S.uint32(34).string(u.accessKey),u.secretKey!==""&&S.uint32(42).string(u.secretKey),u.token!==void 0&&S.uint32(50).string(u.token),u.tokenDuration!==void 0&&S.uint32(56).int32(u.tokenDuration),u.acl!==void 0&&S.uint32(64).int32(_e(u.acl)),u.endpoint!==void 0&&S.uint32(74).string(u.endpoint),u.packaging!==void 0&&a.ObjectStoragePackaging.encode(u.packaging,S.uint32(82).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Te();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.region=g.string();break;case 2:C.bucket=g.string();break;case 3:C.prefix=g.string();break;case 4:C.accessKey=g.string();break;case 5:C.secretKey=g.string();break;case 6:C.token=g.string();break;case 7:C.tokenDuration=g.int32();break;case 8:C.acl=ue(g.int32());break;case 9:C.endpoint=g.string();break;case 10:C.packaging=a.ObjectStoragePackaging.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{region:Q(u.region)?String(u.region):"",bucket:Q(u.bucket)?String(u.bucket):"",prefix:Q(u.prefix)?String(u.prefix):void 0,accessKey:Q(u.accessKey)?String(u.accessKey):"",secretKey:Q(u.secretKey)?String(u.secretKey):"",token:Q(u.token)?String(u.token):void 0,tokenDuration:Q(u.tokenDuration)?Number(u.tokenDuration):void 0,acl:Q(u.acl)?ue(u.acl):void 0,endpoint:Q(u.endpoint)?String(u.endpoint):void 0,packaging:Q(u.packaging)?a.ObjectStoragePackaging.fromJSON(u.packaging):void 0}},toJSON(u){const S={};return u.region!==void 0&&(S.region=u.region),u.bucket!==void 0&&(S.bucket=u.bucket),u.prefix!==void 0&&(S.prefix=u.prefix),u.accessKey!==void 0&&(S.accessKey=u.accessKey),u.secretKey!==void 0&&(S.secretKey=u.secretKey),u.token!==void 0&&(S.token=u.token),u.tokenDuration!==void 0&&(S.tokenDuration=Math.round(u.tokenDuration)),u.acl!==void 0&&(S.acl=u.acl!==void 0?he(u.acl):void 0),u.endpoint!==void 0&&(S.endpoint=u.endpoint),u.packaging!==void 0&&(S.packaging=u.packaging?a.ObjectStoragePackaging.toJSON(u.packaging):void 0),S},fromPartial(u){var S,g,U,C,W,ve,be,Re,$e;const Oe=Te();return Oe.region=(S=u.region)!==null&&S!==void 0?S:"",Oe.bucket=(g=u.bucket)!==null&&g!==void 0?g:"",Oe.prefix=(U=u.prefix)!==null&&U!==void 0?U:void 0,Oe.accessKey=(C=u.accessKey)!==null&&C!==void 0?C:"",Oe.secretKey=(W=u.secretKey)!==null&&W!==void 0?W:"",Oe.token=(ve=u.token)!==null&&ve!==void 0?ve:void 0,Oe.tokenDuration=(be=u.tokenDuration)!==null&&be!==void 0?be:void 0,Oe.acl=(Re=u.acl)!==null&&Re!==void 0?Re:void 0,Oe.endpoint=($e=u.endpoint)!==null&&$e!==void 0?$e:void 0,Oe.packaging=u.packaging!==void 0&&u.packaging!==null?a.ObjectStoragePackaging.fromPartial(u.packaging):void 0,Oe}};function nt(){return{rtmpPush:void 0,agora:void 0,s3Storage:void 0}}a.DestinationAddress={encode(u,S=d.default.Writer.create()){return u.rtmpPush!==void 0&&a.DestinationRtmpPushAddress.encode(u.rtmpPush,S.uint32(10).fork()).ldelim(),u.agora!==void 0&&a.DestinationAgoraPushAddress.encode(u.agora,S.uint32(18).fork()).ldelim(),u.s3Storage!==void 0&&a.S3StorageAddress.encode(u.s3Storage,S.uint32(26).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=nt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.rtmpPush=a.DestinationRtmpPushAddress.decode(g,g.uint32());break;case 2:C.agora=a.DestinationAgoraPushAddress.decode(g,g.uint32());break;case 3:C.s3Storage=a.S3StorageAddress.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{rtmpPush:Q(u.rtmpPush)?a.DestinationRtmpPushAddress.fromJSON(u.rtmpPush):void 0,agora:Q(u.agora)?a.DestinationAgoraPushAddress.fromJSON(u.agora):void 0,s3Storage:Q(u.s3Storage)?a.S3StorageAddress.fromJSON(u.s3Storage):void 0}},toJSON(u){const S={};return u.rtmpPush!==void 0&&(S.rtmpPush=u.rtmpPush?a.DestinationRtmpPushAddress.toJSON(u.rtmpPush):void 0),u.agora!==void 0&&(S.agora=u.agora?a.DestinationAgoraPushAddress.toJSON(u.agora):void 0),u.s3Storage!==void 0&&(S.s3Storage=u.s3Storage?a.S3StorageAddress.toJSON(u.s3Storage):void 0),S},fromPartial(u){const S=nt();return S.rtmpPush=u.rtmpPush!==void 0&&u.rtmpPush!==null?a.DestinationRtmpPushAddress.fromPartial(u.rtmpPush):void 0,S.agora=u.agora!==void 0&&u.agora!==null?a.DestinationAgoraPushAddress.fromPartial(u.agora):void 0,S.s3Storage=u.s3Storage!==void 0&&u.s3Storage!==null?a.S3StorageAddress.fromPartial(u.s3Storage):void 0,S}};function ht(){return{sourceId:"",start:void 0,stop:void 0}}a.SourceTrigger={encode(u,S=d.default.Writer.create()){return u.sourceId!==""&&S.uint32(10).string(u.sourceId),u.start!==void 0&&S.uint32(16).int32(ze(u.start)),u.stop!==void 0&&S.uint32(24).int32(ze(u.stop)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=ht();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.sourceId=g.string();break;case 2:C.start=Me(g.int32());break;case 3:C.stop=Me(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{sourceId:Q(u.sourceId)?String(u.sourceId):"",start:Q(u.start)?Me(u.start):void 0,stop:Q(u.stop)?Me(u.stop):void 0}},toJSON(u){const S={};return u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.start!==void 0&&(S.start=u.start!==void 0?Be(u.start):void 0),u.stop!==void 0&&(S.stop=u.stop!==void 0?Be(u.stop):void 0),S},fromPartial(u){var S,g,U;const C=ht();return C.sourceId=(S=u.sourceId)!==null&&S!==void 0?S:"",C.start=(g=u.start)!==null&&g!==void 0?g:void 0,C.stop=(U=u.stop)!==null&&U!==void 0?U:void 0,C}};function mt(){return{stop:void 0}}a.WebRtcTrigger={encode(u,S=d.default.Writer.create()){return u.stop!==void 0&&S.uint32(24).int32(ze(u.stop)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=mt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 3:C.stop=Me(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{stop:Q(u.stop)?Me(u.stop):void 0}},toJSON(u){const S={};return u.stop!==void 0&&(S.stop=u.stop!==void 0?Be(u.stop):void 0),S},fromPartial(u){var S;const g=mt();return g.stop=(S=u.stop)!==null&&S!==void 0?S:void 0,g}};function vt(){return{source:void 0}}a.ProjectTrigger={encode(u,S=d.default.Writer.create()){return u.source!==void 0&&a.SourceTrigger.encode(u.source,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=vt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.source=a.SourceTrigger.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{source:Q(u.source)?a.SourceTrigger.fromJSON(u.source):void 0}},toJSON(u){const S={};return u.source!==void 0&&(S.source=u.source?a.SourceTrigger.toJSON(u.source):void 0),S},fromPartial(u){const S=vt();return S.source=u.source!==void 0&&u.source!==null?a.SourceTrigger.fromPartial(u.source):void 0,S}};function St(){return{enabled:void 0,url:void 0}}a.PreviewHlsPullAddress={encode(u,S=d.default.Writer.create()){return u.enabled!==void 0&&S.uint32(8).bool(u.enabled),u.url!==void 0&&S.uint32(18).string(u.url),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=St();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.enabled=g.bool();break;case 2:C.url=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{enabled:Q(u.enabled)?Boolean(u.enabled):void 0,url:Q(u.url)?String(u.url):void 0}},toJSON(u){const S={};return u.enabled!==void 0&&(S.enabled=u.enabled),u.url!==void 0&&(S.url=u.url),S},fromPartial(u){var S,g;const U=St();return U.enabled=(S=u.enabled)!==null&&S!==void 0?S:void 0,U.url=(g=u.url)!==null&&g!==void 0?g:void 0,U}};function yt(){return{enabled:void 0,displayName:void 0,participantId:void 0}}a.PreviewWebRtcAddress={encode(u,S=d.default.Writer.create()){return u.enabled!==void 0&&S.uint32(8).bool(u.enabled),u.displayName!==void 0&&S.uint32(18).string(u.displayName),u.participantId!==void 0&&S.uint32(26).string(u.participantId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=yt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.enabled=g.bool();break;case 2:C.displayName=g.string();break;case 3:C.participantId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{enabled:Q(u.enabled)?Boolean(u.enabled):void 0,displayName:Q(u.displayName)?String(u.displayName):void 0,participantId:Q(u.participantId)?String(u.participantId):void 0}},toJSON(u){const S={};return u.enabled!==void 0&&(S.enabled=u.enabled),u.displayName!==void 0&&(S.displayName=u.displayName),u.participantId!==void 0&&(S.participantId=u.participantId),S},fromPartial(u){var S,g,U;const C=yt();return C.enabled=(S=u.enabled)!==null&&S!==void 0?S:void 0,C.displayName=(g=u.displayName)!==null&&g!==void 0?g:void 0,C.participantId=(U=u.participantId)!==null&&U!==void 0?U:void 0,C}};function gt(){return{webrtc:void 0}}a.PreviewAddress={encode(u,S=d.default.Writer.create()){return u.webrtc!==void 0&&a.PreviewWebRtcAddress.encode(u.webrtc,S.uint32(18).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=gt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 2:C.webrtc=a.PreviewWebRtcAddress.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{webrtc:Q(u.webrtc)?a.PreviewWebRtcAddress.fromJSON(u.webrtc):void 0}},toJSON(u){const S={};return u.webrtc!==void 0&&(S.webrtc=u.webrtc?a.PreviewWebRtcAddress.toJSON(u.webrtc):void 0),S},fromPartial(u){const S=gt();return S.webrtc=u.webrtc!==void 0&&u.webrtc!==null?a.PreviewWebRtcAddress.fromPartial(u.webrtc):void 0,S}};function bt(){return{rendererUrl:void 0,version:void 0}}a.StudioSdkComposition={encode(u,S=d.default.Writer.create()){return u.rendererUrl!==void 0&&S.uint32(10).string(u.rendererUrl),u.version!==void 0&&S.uint32(18).string(u.version),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=bt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.rendererUrl=g.string();break;case 2:C.version=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{rendererUrl:Q(u.rendererUrl)?String(u.rendererUrl):void 0,version:Q(u.version)?String(u.version):void 0}},toJSON(u){const S={};return u.rendererUrl!==void 0&&(S.rendererUrl=u.rendererUrl),u.version!==void 0&&(S.version=u.version),S},fromPartial(u){var S,g;const U=bt();return U.rendererUrl=(S=u.rendererUrl)!==null&&S!==void 0?S:void 0,U.version=(g=u.version)!==null&&g!==void 0?g:void 0,U}};function Et(){return{rendererUrl:void 0,selectedLayoutId:void 0,debug:void 0}}a.SceneComposition={encode(u,S=d.default.Writer.create()){return u.rendererUrl!==void 0&&S.uint32(10).string(u.rendererUrl),u.selectedLayoutId!==void 0&&S.uint32(18).string(u.selectedLayoutId),u.debug!==void 0&&S.uint32(24).bool(u.debug),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Et();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.rendererUrl=g.string();break;case 2:C.selectedLayoutId=g.string();break;case 3:C.debug=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{rendererUrl:Q(u.rendererUrl)?String(u.rendererUrl):void 0,selectedLayoutId:Q(u.selectedLayoutId)?String(u.selectedLayoutId):void 0,debug:Q(u.debug)?Boolean(u.debug):void 0}},toJSON(u){const S={};return u.rendererUrl!==void 0&&(S.rendererUrl=u.rendererUrl),u.selectedLayoutId!==void 0&&(S.selectedLayoutId=u.selectedLayoutId),u.debug!==void 0&&(S.debug=u.debug),S},fromPartial(u){var S,g,U;const C=Et();return C.rendererUrl=(S=u.rendererUrl)!==null&&S!==void 0?S:void 0,C.selectedLayoutId=(g=u.selectedLayoutId)!==null&&g!==void 0?g:void 0,C.debug=(U=u.debug)!==null&&U!==void 0?U:void 0,C}};function _t(){return{url:""}}a.ExternalComposition={encode(u,S=d.default.Writer.create()){return u.url!==""&&S.uint32(10).string(u.url),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=_t();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.url=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{url:Q(u.url)?String(u.url):""}},toJSON(u){const S={};return u.url!==void 0&&(S.url=u.url),S},fromPartial(u){var S;const g=_t();return g.url=(S=u.url)!==null&&S!==void 0?S:"",g}};function Tt(){return{external:void 0,studioSdk:void 0,scene:void 0}}a.Composition={encode(u,S=d.default.Writer.create()){return u.external!==void 0&&a.ExternalComposition.encode(u.external,S.uint32(10).fork()).ldelim(),u.studioSdk!==void 0&&a.StudioSdkComposition.encode(u.studioSdk,S.uint32(18).fork()).ldelim(),u.scene!==void 0&&a.SceneComposition.encode(u.scene,S.uint32(34).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Tt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.external=a.ExternalComposition.decode(g,g.uint32());break;case 2:C.studioSdk=a.StudioSdkComposition.decode(g,g.uint32());break;case 4:C.scene=a.SceneComposition.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{external:Q(u.external)?a.ExternalComposition.fromJSON(u.external):void 0,studioSdk:Q(u.studioSdk)?a.StudioSdkComposition.fromJSON(u.studioSdk):void 0,scene:Q(u.scene)?a.SceneComposition.fromJSON(u.scene):void 0}},toJSON(u){const S={};return u.external!==void 0&&(S.external=u.external?a.ExternalComposition.toJSON(u.external):void 0),u.studioSdk!==void 0&&(S.studioSdk=u.studioSdk?a.StudioSdkComposition.toJSON(u.studioSdk):void 0),u.scene!==void 0&&(S.scene=u.scene?a.SceneComposition.toJSON(u.scene):void 0),S},fromPartial(u){const S=Tt();return S.external=u.external!==void 0&&u.external!==null?a.ExternalComposition.fromPartial(u.external):void 0,S.studioSdk=u.studioSdk!==void 0&&u.studioSdk!==null?a.StudioSdkComposition.fromPartial(u.studioSdk):void 0,S.scene=u.scene!==void 0&&u.scene!==null?a.SceneComposition.fromPartial(u.scene):void 0,S}};function It(){return{enabled:void 0}}a.HostedWebRtc={encode(u,S=d.default.Writer.create()){return u.enabled!==void 0&&S.uint32(8).bool(u.enabled),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=It();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.enabled=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{enabled:Q(u.enabled)?Boolean(u.enabled):void 0}},toJSON(u){const S={};return u.enabled!==void 0&&(S.enabled=u.enabled),S},fromPartial(u){var S;const g=It();return g.enabled=(S=u.enabled)!==null&&S!==void 0?S:void 0,g}};function Ct(){return{hosted:void 0}}a.WebRtc={encode(u,S=d.default.Writer.create()){return u.hosted!==void 0&&a.HostedWebRtc.encode(u.hosted,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ct();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.hosted=a.HostedWebRtc.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{hosted:Q(u.hosted)?a.HostedWebRtc.fromJSON(u.hosted):void 0}},toJSON(u){const S={};return u.hosted!==void 0&&(S.hosted=u.hosted?a.HostedWebRtc.toJSON(u.hosted):void 0),S},fromPartial(u){const S=Ct();return S.hosted=u.hosted!==void 0&&u.hosted!==null?a.HostedWebRtc.fromPartial(u.hosted):void 0,S}};function Rt(){return{accessToken:"",participantId:void 0}}a.WebRtcAccess={encode(u,S=d.default.Writer.create()){return u.accessToken!==""&&S.uint32(10).string(u.accessToken),u.participantId!==void 0&&S.uint32(26).string(u.participantId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Rt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.accessToken=g.string();break;case 3:C.participantId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{accessToken:Q(u.accessToken)?String(u.accessToken):"",participantId:Q(u.participantId)?String(u.participantId):void 0}},toJSON(u){const S={};return u.accessToken!==void 0&&(S.accessToken=u.accessToken),u.participantId!==void 0&&(S.participantId=u.participantId),S},fromPartial(u){var S,g;const U=Rt();return U.accessToken=(S=u.accessToken)!==null&&S!==void 0?S:"",U.participantId=(g=u.participantId)!==null&&g!==void 0?g:void 0,U}};function Ot(){return{latitude:0,longitude:0}}a.LatLong={encode(u,S=d.default.Writer.create()){return u.latitude!==0&&S.uint32(9).double(u.latitude),u.longitude!==0&&S.uint32(17).double(u.longitude),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ot();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.latitude=g.double();break;case 2:C.longitude=g.double();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{latitude:Q(u.latitude)?Number(u.latitude):0,longitude:Q(u.longitude)?Number(u.longitude):0}},toJSON(u){const S={};return u.latitude!==void 0&&(S.latitude=u.latitude),u.longitude!==void 0&&(S.longitude=u.longitude),S},fromPartial(u){var S,g;const U=Ot();return U.latitude=(S=u.latitude)!==null&&S!==void 0?S:0,U.longitude=(g=u.longitude)!==null&&g!==void 0?g:0,U}};function kt(){return{collectionId:"",projectId:"",broadcastId:void 0,duration:void 0,start:void 0,stop:void 0,phase:w.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:void 0,datacenter:void 0}}a.ProjectBroadcastStatus={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.broadcastId!==void 0&&S.uint32(26).string(u.broadcastId),u.duration!==void 0&&S.uint32(32).uint32(u.duration),u.start!==void 0&&v.Timestamp.encode(ft(u.start),S.uint32(42).fork()).ldelim(),u.stop!==void 0&&v.Timestamp.encode(ft(u.stop),S.uint32(50).fork()).ldelim(),u.phase!==w.PROJECT_BROADCAST_PHASE_UNSPECIFIED&&S.uint32(56).int32(me(u.phase)),u.region!==void 0&&S.uint32(64).int32(it(u.region)),u.datacenter!==void 0&&S.uint32(74).string(u.datacenter),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=kt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.broadcastId=g.string();break;case 4:C.duration=g.uint32();break;case 5:C.start=pt(v.Timestamp.decode(g,g.uint32()));break;case 6:C.stop=pt(v.Timestamp.decode(g,g.uint32()));break;case 7:C.phase=z(g.int32());break;case 8:C.region=Ze(g.int32());break;case 9:C.datacenter=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",broadcastId:Q(u.broadcastId)?String(u.broadcastId):void 0,duration:Q(u.duration)?Number(u.duration):void 0,start:Q(u.start)?String(u.start):void 0,stop:Q(u.stop)?String(u.stop):void 0,phase:Q(u.phase)?z(u.phase):w.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:Q(u.region)?Ze(u.region):void 0,datacenter:Q(u.datacenter)?String(u.datacenter):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.broadcastId!==void 0&&(S.broadcastId=u.broadcastId),u.duration!==void 0&&(S.duration=Math.round(u.duration)),u.start!==void 0&&(S.start=u.start),u.stop!==void 0&&(S.stop=u.stop),u.phase!==void 0&&(S.phase=re(u.phase)),u.region!==void 0&&(S.region=u.region!==void 0?rt(u.region):void 0),u.datacenter!==void 0&&(S.datacenter=u.datacenter),S},fromPartial(u){var S,g,U,C,W,ve,be,Re,$e;const Oe=kt();return Oe.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",Oe.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",Oe.broadcastId=(U=u.broadcastId)!==null&&U!==void 0?U:void 0,Oe.duration=(C=u.duration)!==null&&C!==void 0?C:void 0,Oe.start=(W=u.start)!==null&&W!==void 0?W:void 0,Oe.stop=(ve=u.stop)!==null&&ve!==void 0?ve:void 0,Oe.phase=(be=u.phase)!==null&&be!==void 0?be:w.PROJECT_BROADCAST_PHASE_UNSPECIFIED,Oe.region=(Re=u.region)!==null&&Re!==void 0?Re:void 0,Oe.datacenter=($e=u.datacenter)!==null&&$e!==void 0?$e:void 0,Oe}};function Pt(){return{collectionId:"",sourceId:"",metadata:void 0,preview:void 0,address:void 0}}a.Source={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.sourceId!==""&&S.uint32(18).string(u.sourceId),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(26).fork()).ldelim(),u.preview!==void 0&&a.PreviewAddress.encode(u.preview,S.uint32(34).fork()).ldelim(),u.address!==void 0&&a.SourceAddress.encode(u.address,S.uint32(50).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Pt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.sourceId=g.string();break;case 3:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 4:C.preview=a.PreviewAddress.decode(g,g.uint32());break;case 6:C.address=a.SourceAddress.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,preview:Q(u.preview)?a.PreviewAddress.fromJSON(u.preview):void 0,address:Q(u.address)?a.SourceAddress.fromJSON(u.address):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.metadata!==void 0&&(S.metadata=u.metadata),u.preview!==void 0&&(S.preview=u.preview?a.PreviewAddress.toJSON(u.preview):void 0),u.address!==void 0&&(S.address=u.address?a.SourceAddress.toJSON(u.address):void 0),S},fromPartial(u){var S,g,U;const C=Pt();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.sourceId=(g=u.sourceId)!==null&&g!==void 0?g:"",C.metadata=(U=u.metadata)!==null&&U!==void 0?U:void 0,C.preview=u.preview!==void 0&&u.preview!==null?a.PreviewAddress.fromPartial(u.preview):void 0,C.address=u.address!==void 0&&u.address!==null?a.SourceAddress.fromPartial(u.address):void 0,C}};function Nt(){return{collectionId:"",projectId:"",destinationId:"",metadata:void 0,enabled:void 0,address:void 0,timeout:void 0}}a.Destination={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.destinationId!==""&&S.uint32(26).string(u.destinationId),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(34).fork()).ldelim(),u.enabled!==void 0&&S.uint32(40).bool(u.enabled),u.address!==void 0&&a.DestinationAddress.encode(u.address,S.uint32(50).fork()).ldelim(),u.timeout!==void 0&&S.uint32(56).uint32(u.timeout),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Nt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.destinationId=g.string();break;case 4:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 5:C.enabled=g.bool();break;case 6:C.address=a.DestinationAddress.decode(g,g.uint32());break;case 7:C.timeout=g.uint32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",destinationId:Q(u.destinationId)?String(u.destinationId):"",metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,enabled:Q(u.enabled)?Boolean(u.enabled):void 0,address:Q(u.address)?a.DestinationAddress.fromJSON(u.address):void 0,timeout:Q(u.timeout)?Number(u.timeout):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.destinationId!==void 0&&(S.destinationId=u.destinationId),u.metadata!==void 0&&(S.metadata=u.metadata),u.enabled!==void 0&&(S.enabled=u.enabled),u.address!==void 0&&(S.address=u.address?a.DestinationAddress.toJSON(u.address):void 0),u.timeout!==void 0&&(S.timeout=Math.round(u.timeout)),S},fromPartial(u){var S,g,U,C,W,ve;const be=Nt();return be.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",be.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",be.destinationId=(U=u.destinationId)!==null&&U!==void 0?U:"",be.metadata=(C=u.metadata)!==null&&C!==void 0?C:void 0,be.enabled=(W=u.enabled)!==null&&W!==void 0?W:void 0,be.address=u.address!==void 0&&u.address!==null?a.DestinationAddress.fromPartial(u.address):void 0,be.timeout=(ve=u.timeout)!==null&&ve!==void 0?ve:void 0,be}};function wt(){return{collectionId:"",projectId:"",metadata:void 0,rendering:void 0,encoding:void 0,sources:[],destinations:[],composition:void 0,maxDuration:void 0,webrtc:void 0,triggers:[],location:void 0,guestCodes:[]}}a.Project={encode(u,S=d.default.Writer.create()){u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(26).fork()).ldelim(),u.rendering!==void 0&&a.Rendering.encode(u.rendering,S.uint32(34).fork()).ldelim(),u.encoding!==void 0&&a.Encoding.encode(u.encoding,S.uint32(42).fork()).ldelim();for(const g of u.sources)a.Source.encode(g,S.uint32(50).fork()).ldelim();for(const g of u.destinations)a.Destination.encode(g,S.uint32(58).fork()).ldelim();u.composition!==void 0&&a.Composition.encode(u.composition,S.uint32(66).fork()).ldelim(),u.maxDuration!==void 0&&S.uint32(72).uint32(u.maxDuration),u.webrtc!==void 0&&a.WebRtc.encode(u.webrtc,S.uint32(82).fork()).ldelim();for(const g of u.triggers)a.ProjectTrigger.encode(g,S.uint32(90).fork()).ldelim();u.location!==void 0&&a.LatLong.encode(u.location,S.uint32(98).fork()).ldelim();for(const g of u.guestCodes)a.GuestCode.encode(g,S.uint32(106).fork()).ldelim();return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=wt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 4:C.rendering=a.Rendering.decode(g,g.uint32());break;case 5:C.encoding=a.Encoding.decode(g,g.uint32());break;case 6:C.sources.push(a.Source.decode(g,g.uint32()));break;case 7:C.destinations.push(a.Destination.decode(g,g.uint32()));break;case 8:C.composition=a.Composition.decode(g,g.uint32());break;case 9:C.maxDuration=g.uint32();break;case 10:C.webrtc=a.WebRtc.decode(g,g.uint32());break;case 11:C.triggers.push(a.ProjectTrigger.decode(g,g.uint32()));break;case 12:C.location=a.LatLong.decode(g,g.uint32());break;case 13:C.guestCodes.push(a.GuestCode.decode(g,g.uint32()));break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,rendering:Q(u.rendering)?a.Rendering.fromJSON(u.rendering):void 0,encoding:Q(u.encoding)?a.Encoding.fromJSON(u.encoding):void 0,sources:Array.isArray(u==null?void 0:u.sources)?u.sources.map(S=>a.Source.fromJSON(S)):[],destinations:Array.isArray(u==null?void 0:u.destinations)?u.destinations.map(S=>a.Destination.fromJSON(S)):[],composition:Q(u.composition)?a.Composition.fromJSON(u.composition):void 0,maxDuration:Q(u.maxDuration)?Number(u.maxDuration):void 0,webrtc:Q(u.webrtc)?a.WebRtc.fromJSON(u.webrtc):void 0,triggers:Array.isArray(u==null?void 0:u.triggers)?u.triggers.map(S=>a.ProjectTrigger.fromJSON(S)):[],location:Q(u.location)?a.LatLong.fromJSON(u.location):void 0,guestCodes:Array.isArray(u==null?void 0:u.guestCodes)?u.guestCodes.map(S=>a.GuestCode.fromJSON(S)):[]}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.metadata!==void 0&&(S.metadata=u.metadata),u.rendering!==void 0&&(S.rendering=u.rendering?a.Rendering.toJSON(u.rendering):void 0),u.encoding!==void 0&&(S.encoding=u.encoding?a.Encoding.toJSON(u.encoding):void 0),u.sources?S.sources=u.sources.map(g=>g?a.Source.toJSON(g):void 0):S.sources=[],u.destinations?S.destinations=u.destinations.map(g=>g?a.Destination.toJSON(g):void 0):S.destinations=[],u.composition!==void 0&&(S.composition=u.composition?a.Composition.toJSON(u.composition):void 0),u.maxDuration!==void 0&&(S.maxDuration=Math.round(u.maxDuration)),u.webrtc!==void 0&&(S.webrtc=u.webrtc?a.WebRtc.toJSON(u.webrtc):void 0),u.triggers?S.triggers=u.triggers.map(g=>g?a.ProjectTrigger.toJSON(g):void 0):S.triggers=[],u.location!==void 0&&(S.location=u.location?a.LatLong.toJSON(u.location):void 0),u.guestCodes?S.guestCodes=u.guestCodes.map(g=>g?a.GuestCode.toJSON(g):void 0):S.guestCodes=[],S},fromPartial(u){var S,g,U,C,W,ve,be,Re;const $e=wt();return $e.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",$e.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",$e.metadata=(U=u.metadata)!==null&&U!==void 0?U:void 0,$e.rendering=u.rendering!==void 0&&u.rendering!==null?a.Rendering.fromPartial(u.rendering):void 0,$e.encoding=u.encoding!==void 0&&u.encoding!==null?a.Encoding.fromPartial(u.encoding):void 0,$e.sources=((C=u.sources)===null||C===void 0?void 0:C.map(Oe=>a.Source.fromPartial(Oe)))||[],$e.destinations=((W=u.destinations)===null||W===void 0?void 0:W.map(Oe=>a.Destination.fromPartial(Oe)))||[],$e.composition=u.composition!==void 0&&u.composition!==null?a.Composition.fromPartial(u.composition):void 0,$e.maxDuration=(ve=u.maxDuration)!==null&&ve!==void 0?ve:void 0,$e.webrtc=u.webrtc!==void 0&&u.webrtc!==null?a.WebRtc.fromPartial(u.webrtc):void 0,$e.triggers=((be=u.triggers)===null||be===void 0?void 0:be.map(Oe=>a.ProjectTrigger.fromPartial(Oe)))||[],$e.location=u.location!==void 0&&u.location!==null?a.LatLong.fromPartial(u.location):void 0,$e.guestCodes=((Re=u.guestCodes)===null||Re===void 0?void 0:Re.map(Oe=>a.GuestCode.fromPartial(Oe)))||[],$e}};function At(){return{collectionId:"",metadata:void 0,projects:[],sources:[]}}a.Collection={encode(u,S=d.default.Writer.create()){u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(18).fork()).ldelim();for(const g of u.projects)a.Project.encode(g,S.uint32(26).fork()).ldelim();for(const g of u.sources)a.Source.encode(g,S.uint32(34).fork()).ldelim();return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=At();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 3:C.projects.push(a.Project.decode(g,g.uint32()));break;case 4:C.sources.push(a.Source.decode(g,g.uint32()));break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,projects:Array.isArray(u==null?void 0:u.projects)?u.projects.map(S=>a.Project.fromJSON(S)):[],sources:Array.isArray(u==null?void 0:u.sources)?u.sources.map(S=>a.Source.fromJSON(S)):[]}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.metadata!==void 0&&(S.metadata=u.metadata),u.projects?S.projects=u.projects.map(g=>g?a.Project.toJSON(g):void 0):S.projects=[],u.sources?S.sources=u.sources.map(g=>g?a.Source.toJSON(g):void 0):S.sources=[],S},fromPartial(u){var S,g,U,C;const W=At();return W.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",W.metadata=(g=u.metadata)!==null&&g!==void 0?g:void 0,W.projects=((U=u.projects)===null||U===void 0?void 0:U.map(ve=>a.Project.fromPartial(ve)))||[],W.sources=((C=u.sources)===null||C===void 0?void 0:C.map(ve=>a.Source.fromPartial(ve)))||[],W}};function Lt(){return{metadata:void 0}}a.CreateCollectionRequest={encode(u,S=d.default.Writer.create()){return u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Lt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0}},toJSON(u){const S={};return u.metadata!==void 0&&(S.metadata=u.metadata),S},fromPartial(u){var S;const g=Lt();return g.metadata=(S=u.metadata)!==null&&S!==void 0?S:void 0,g}};function Dt(){return{collection:void 0}}a.CreateCollectionResponse={encode(u,S=d.default.Writer.create()){return u.collection!==void 0&&a.Collection.encode(u.collection,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Dt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collection=a.Collection.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collection:Q(u.collection)?a.Collection.fromJSON(u.collection):void 0}},toJSON(u){const S={};return u.collection!==void 0&&(S.collection=u.collection?a.Collection.toJSON(u.collection):void 0),S},fromPartial(u){const S=Dt();return S.collection=u.collection!==void 0&&u.collection!==null?a.Collection.fromPartial(u.collection):void 0,S}};function $t(){return{collectionId:"",populateProjects:void 0,populateSources:void 0}}a.GetCollectionRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.populateProjects!==void 0&&S.uint32(16).bool(u.populateProjects),u.populateSources!==void 0&&S.uint32(24).bool(u.populateSources),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=$t();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.populateProjects=g.bool();break;case 3:C.populateSources=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",populateProjects:Q(u.populateProjects)?Boolean(u.populateProjects):void 0,populateSources:Q(u.populateSources)?Boolean(u.populateSources):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.populateProjects!==void 0&&(S.populateProjects=u.populateProjects),u.populateSources!==void 0&&(S.populateSources=u.populateSources),S},fromPartial(u){var S,g,U;const C=$t();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.populateProjects=(g=u.populateProjects)!==null&&g!==void 0?g:void 0,C.populateSources=(U=u.populateSources)!==null&&U!==void 0?U:void 0,C}};function Mt(){return{collection:void 0}}a.GetCollectionResponse={encode(u,S=d.default.Writer.create()){return u.collection!==void 0&&a.Collection.encode(u.collection,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Mt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collection=a.Collection.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collection:Q(u.collection)?a.Collection.fromJSON(u.collection):void 0}},toJSON(u){const S={};return u.collection!==void 0&&(S.collection=u.collection?a.Collection.toJSON(u.collection):void 0),S},fromPartial(u){const S=Mt();return S.collection=u.collection!==void 0&&u.collection!==null?a.Collection.fromPartial(u.collection):void 0,S}};function Ut(){return{collectionId:"",updateMask:void 0,metadata:void 0}}a.UpdateCollectionRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.updateMask!==void 0&&c.FieldMask.encode(c.FieldMask.wrap(u.updateMask),S.uint32(18).fork()).ldelim(),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(26).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ut();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.updateMask=c.FieldMask.unwrap(c.FieldMask.decode(g,g.uint32()));break;case 3:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",updateMask:Q(u.updateMask)?c.FieldMask.unwrap(c.FieldMask.fromJSON(u.updateMask)):void 0,metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.updateMask!==void 0&&(S.updateMask=c.FieldMask.toJSON(c.FieldMask.wrap(u.updateMask))),u.metadata!==void 0&&(S.metadata=u.metadata),S},fromPartial(u){var S,g,U;const C=Ut();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.updateMask=(g=u.updateMask)!==null&&g!==void 0?g:void 0,C.metadata=(U=u.metadata)!==null&&U!==void 0?U:void 0,C}};function Bt(){return{collection:void 0}}a.UpdateCollectionResponse={encode(u,S=d.default.Writer.create()){return u.collection!==void 0&&a.Collection.encode(u.collection,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Bt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collection=a.Collection.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collection:Q(u.collection)?a.Collection.fromJSON(u.collection):void 0}},toJSON(u){const S={};return u.collection!==void 0&&(S.collection=u.collection?a.Collection.toJSON(u.collection):void 0),S},fromPartial(u){const S=Bt();return S.collection=u.collection!==void 0&&u.collection!==null?a.Collection.fromPartial(u.collection):void 0,S}};function Vt(){return{collectionId:"",force:void 0}}a.DeleteCollectionRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.force!==void 0&&S.uint32(16).bool(u.force),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Vt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.force=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",force:Q(u.force)?Boolean(u.force):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.force!==void 0&&(S.force=u.force),S},fromPartial(u){var S,g;const U=Vt();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.force=(g=u.force)!==null&&g!==void 0?g:void 0,U}};function Ft(){return{sourcesDeleted:0,projectsDeleted:0,projectIdsStopped:[]}}a.DeleteCollectionResponse={encode(u,S=d.default.Writer.create()){u.sourcesDeleted!==0&&S.uint32(8).uint32(u.sourcesDeleted),u.projectsDeleted!==0&&S.uint32(16).uint32(u.projectsDeleted);for(const g of u.projectIdsStopped)S.uint32(26).string(g);return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ft();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.sourcesDeleted=g.uint32();break;case 2:C.projectsDeleted=g.uint32();break;case 3:C.projectIdsStopped.push(g.string());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{sourcesDeleted:Q(u.sourcesDeleted)?Number(u.sourcesDeleted):0,projectsDeleted:Q(u.projectsDeleted)?Number(u.projectsDeleted):0,projectIdsStopped:Array.isArray(u==null?void 0:u.projectIdsStopped)?u.projectIdsStopped.map(S=>String(S)):[]}},toJSON(u){const S={};return u.sourcesDeleted!==void 0&&(S.sourcesDeleted=Math.round(u.sourcesDeleted)),u.projectsDeleted!==void 0&&(S.projectsDeleted=Math.round(u.projectsDeleted)),u.projectIdsStopped?S.projectIdsStopped=u.projectIdsStopped.map(g=>g):S.projectIdsStopped=[],S},fromPartial(u){var S,g,U;const C=Ft();return C.sourcesDeleted=(S=u.sourcesDeleted)!==null&&S!==void 0?S:0,C.projectsDeleted=(g=u.projectsDeleted)!==null&&g!==void 0?g:0,C.projectIdsStopped=((U=u.projectIdsStopped)===null||U===void 0?void 0:U.map(W=>W))||[],C}};function Jt(){return{}}a.GetCollectionsRequest={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Jt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return Jt()}};function Gt(){return{collections:[]}}a.GetCollectionsResponse={encode(u,S=d.default.Writer.create()){for(const g of u.collections)a.Collection.encode(g,S.uint32(10).fork()).ldelim();return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Gt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collections.push(a.Collection.decode(g,g.uint32()));break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collections:Array.isArray(u==null?void 0:u.collections)?u.collections.map(S=>a.Collection.fromJSON(S)):[]}},toJSON(u){const S={};return u.collections?S.collections=u.collections.map(g=>g?a.Collection.toJSON(g):void 0):S.collections=[],S},fromPartial(u){var S;const g=Gt();return g.collections=((S=u.collections)===null||S===void 0?void 0:S.map(U=>a.Collection.fromPartial(U)))||[],g}};function qt(){return{collectionId:"",metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.CreateProjectRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(18).fork()).ldelim(),u.rendering!==void 0&&a.Rendering.encode(u.rendering,S.uint32(26).fork()).ldelim(),u.encoding!==void 0&&a.Encoding.encode(u.encoding,S.uint32(34).fork()).ldelim(),u.composition!==void 0&&a.Composition.encode(u.composition,S.uint32(42).fork()).ldelim(),u.maxDuration!==void 0&&S.uint32(48).uint32(u.maxDuration),u.webrtc!==void 0&&a.WebRtc.encode(u.webrtc,S.uint32(58).fork()).ldelim(),u.location!==void 0&&a.LatLong.encode(u.location,S.uint32(74).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=qt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 3:C.rendering=a.Rendering.decode(g,g.uint32());break;case 4:C.encoding=a.Encoding.decode(g,g.uint32());break;case 5:C.composition=a.Composition.decode(g,g.uint32());break;case 6:C.maxDuration=g.uint32();break;case 7:C.webrtc=a.WebRtc.decode(g,g.uint32());break;case 9:C.location=a.LatLong.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,rendering:Q(u.rendering)?a.Rendering.fromJSON(u.rendering):void 0,encoding:Q(u.encoding)?a.Encoding.fromJSON(u.encoding):void 0,composition:Q(u.composition)?a.Composition.fromJSON(u.composition):void 0,maxDuration:Q(u.maxDuration)?Number(u.maxDuration):void 0,webrtc:Q(u.webrtc)?a.WebRtc.fromJSON(u.webrtc):void 0,location:Q(u.location)?a.LatLong.fromJSON(u.location):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.metadata!==void 0&&(S.metadata=u.metadata),u.rendering!==void 0&&(S.rendering=u.rendering?a.Rendering.toJSON(u.rendering):void 0),u.encoding!==void 0&&(S.encoding=u.encoding?a.Encoding.toJSON(u.encoding):void 0),u.composition!==void 0&&(S.composition=u.composition?a.Composition.toJSON(u.composition):void 0),u.maxDuration!==void 0&&(S.maxDuration=Math.round(u.maxDuration)),u.webrtc!==void 0&&(S.webrtc=u.webrtc?a.WebRtc.toJSON(u.webrtc):void 0),u.location!==void 0&&(S.location=u.location?a.LatLong.toJSON(u.location):void 0),S},fromPartial(u){var S,g,U;const C=qt();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.metadata=(g=u.metadata)!==null&&g!==void 0?g:void 0,C.rendering=u.rendering!==void 0&&u.rendering!==null?a.Rendering.fromPartial(u.rendering):void 0,C.encoding=u.encoding!==void 0&&u.encoding!==null?a.Encoding.fromPartial(u.encoding):void 0,C.composition=u.composition!==void 0&&u.composition!==null?a.Composition.fromPartial(u.composition):void 0,C.maxDuration=(U=u.maxDuration)!==null&&U!==void 0?U:void 0,C.webrtc=u.webrtc!==void 0&&u.webrtc!==null?a.WebRtc.fromPartial(u.webrtc):void 0,C.location=u.location!==void 0&&u.location!==null?a.LatLong.fromPartial(u.location):void 0,C}};function Wt(){return{project:void 0}}a.CreateProjectResponse={encode(u,S=d.default.Writer.create()){return u.project!==void 0&&a.Project.encode(u.project,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Wt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.project=a.Project.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{project:Q(u.project)?a.Project.fromJSON(u.project):void 0}},toJSON(u){const S={};return u.project!==void 0&&(S.project=u.project?a.Project.toJSON(u.project):void 0),S},fromPartial(u){const S=Wt();return S.project=u.project!==void 0&&u.project!==null?a.Project.fromPartial(u.project):void 0,S}};function xt(){return{collectionId:"",projectId:"",updateMask:void 0,metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.UpdateProjectRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.updateMask!==void 0&&c.FieldMask.encode(c.FieldMask.wrap(u.updateMask),S.uint32(26).fork()).ldelim(),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(34).fork()).ldelim(),u.rendering!==void 0&&a.Rendering.encode(u.rendering,S.uint32(42).fork()).ldelim(),u.encoding!==void 0&&a.Encoding.encode(u.encoding,S.uint32(50).fork()).ldelim(),u.composition!==void 0&&a.Composition.encode(u.composition,S.uint32(58).fork()).ldelim(),u.maxDuration!==void 0&&S.uint32(64).uint32(u.maxDuration),u.webrtc!==void 0&&a.WebRtc.encode(u.webrtc,S.uint32(74).fork()).ldelim(),u.location!==void 0&&a.LatLong.encode(u.location,S.uint32(82).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=xt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.updateMask=c.FieldMask.unwrap(c.FieldMask.decode(g,g.uint32()));break;case 4:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 5:C.rendering=a.Rendering.decode(g,g.uint32());break;case 6:C.encoding=a.Encoding.decode(g,g.uint32());break;case 7:C.composition=a.Composition.decode(g,g.uint32());break;case 8:C.maxDuration=g.uint32();break;case 9:C.webrtc=a.WebRtc.decode(g,g.uint32());break;case 10:C.location=a.LatLong.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",updateMask:Q(u.updateMask)?c.FieldMask.unwrap(c.FieldMask.fromJSON(u.updateMask)):void 0,metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,rendering:Q(u.rendering)?a.Rendering.fromJSON(u.rendering):void 0,encoding:Q(u.encoding)?a.Encoding.fromJSON(u.encoding):void 0,composition:Q(u.composition)?a.Composition.fromJSON(u.composition):void 0,maxDuration:Q(u.maxDuration)?Number(u.maxDuration):void 0,webrtc:Q(u.webrtc)?a.WebRtc.fromJSON(u.webrtc):void 0,location:Q(u.location)?a.LatLong.fromJSON(u.location):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.updateMask!==void 0&&(S.updateMask=c.FieldMask.toJSON(c.FieldMask.wrap(u.updateMask))),u.metadata!==void 0&&(S.metadata=u.metadata),u.rendering!==void 0&&(S.rendering=u.rendering?a.Rendering.toJSON(u.rendering):void 0),u.encoding!==void 0&&(S.encoding=u.encoding?a.Encoding.toJSON(u.encoding):void 0),u.composition!==void 0&&(S.composition=u.composition?a.Composition.toJSON(u.composition):void 0),u.maxDuration!==void 0&&(S.maxDuration=Math.round(u.maxDuration)),u.webrtc!==void 0&&(S.webrtc=u.webrtc?a.WebRtc.toJSON(u.webrtc):void 0),u.location!==void 0&&(S.location=u.location?a.LatLong.toJSON(u.location):void 0),S},fromPartial(u){var S,g,U,C,W;const ve=xt();return ve.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",ve.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",ve.updateMask=(U=u.updateMask)!==null&&U!==void 0?U:void 0,ve.metadata=(C=u.metadata)!==null&&C!==void 0?C:void 0,ve.rendering=u.rendering!==void 0&&u.rendering!==null?a.Rendering.fromPartial(u.rendering):void 0,ve.encoding=u.encoding!==void 0&&u.encoding!==null?a.Encoding.fromPartial(u.encoding):void 0,ve.composition=u.composition!==void 0&&u.composition!==null?a.Composition.fromPartial(u.composition):void 0,ve.maxDuration=(W=u.maxDuration)!==null&&W!==void 0?W:void 0,ve.webrtc=u.webrtc!==void 0&&u.webrtc!==null?a.WebRtc.fromPartial(u.webrtc):void 0,ve.location=u.location!==void 0&&u.location!==null?a.LatLong.fromPartial(u.location):void 0,ve}};function Ht(){return{project:void 0,broadcastUpdated:!1}}a.UpdateProjectResponse={encode(u,S=d.default.Writer.create()){return u.project!==void 0&&a.Project.encode(u.project,S.uint32(10).fork()).ldelim(),u.broadcastUpdated===!0&&S.uint32(16).bool(u.broadcastUpdated),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ht();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.project=a.Project.decode(g,g.uint32());break;case 2:C.broadcastUpdated=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{project:Q(u.project)?a.Project.fromJSON(u.project):void 0,broadcastUpdated:Q(u.broadcastUpdated)?Boolean(u.broadcastUpdated):!1}},toJSON(u){const S={};return u.project!==void 0&&(S.project=u.project?a.Project.toJSON(u.project):void 0),u.broadcastUpdated!==void 0&&(S.broadcastUpdated=u.broadcastUpdated),S},fromPartial(u){var S;const g=Ht();return g.project=u.project!==void 0&&u.project!==null?a.Project.fromPartial(u.project):void 0,g.broadcastUpdated=(S=u.broadcastUpdated)!==null&&S!==void 0?S:!1,g}};function zt(){return{collectionId:"",projectId:"",force:void 0}}a.DeleteProjectRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.force!==void 0&&S.uint32(24).bool(u.force),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=zt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.force=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",force:Q(u.force)?Boolean(u.force):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.force!==void 0&&(S.force=u.force),S},fromPartial(u){var S,g,U;const C=zt();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.force=(U=u.force)!==null&&U!==void 0?U:void 0,C}};function Yt(){return{broadcastStopped:!1,layoutsDeleted:0}}a.DeleteProjectResponse={encode(u,S=d.default.Writer.create()){return u.broadcastStopped===!0&&S.uint32(8).bool(u.broadcastStopped),u.layoutsDeleted!==0&&S.uint32(16).uint32(u.layoutsDeleted),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Yt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.broadcastStopped=g.bool();break;case 2:C.layoutsDeleted=g.uint32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{broadcastStopped:Q(u.broadcastStopped)?Boolean(u.broadcastStopped):!1,layoutsDeleted:Q(u.layoutsDeleted)?Number(u.layoutsDeleted):0}},toJSON(u){const S={};return u.broadcastStopped!==void 0&&(S.broadcastStopped=u.broadcastStopped),u.layoutsDeleted!==void 0&&(S.layoutsDeleted=Math.round(u.layoutsDeleted)),S},fromPartial(u){var S,g;const U=Yt();return U.broadcastStopped=(S=u.broadcastStopped)!==null&&S!==void 0?S:!1,U.layoutsDeleted=(g=u.layoutsDeleted)!==null&&g!==void 0?g:0,U}};function jt(){return{collectionId:"",projectId:"",webrtcStart:void 0}}a.StartProjectBroadcastRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.webrtcStart!==void 0&&S.uint32(24).bool(u.webrtcStart),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=jt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.webrtcStart=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",webrtcStart:Q(u.webrtcStart)?Boolean(u.webrtcStart):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.webrtcStart!==void 0&&(S.webrtcStart=u.webrtcStart),S},fromPartial(u){var S,g,U;const C=jt();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.webrtcStart=(U=u.webrtcStart)!==null&&U!==void 0?U:void 0,C}};function Kt(){return{broadcastId:""}}a.StartProjectBroadcastResponse={encode(u,S=d.default.Writer.create()){return u.broadcastId!==""&&S.uint32(10).string(u.broadcastId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Kt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.broadcastId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{broadcastId:Q(u.broadcastId)?String(u.broadcastId):""}},toJSON(u){const S={};return u.broadcastId!==void 0&&(S.broadcastId=u.broadcastId),S},fromPartial(u){var S;const g=Kt();return g.broadcastId=(S=u.broadcastId)!==null&&S!==void 0?S:"",g}};function Qt(){return{collectionId:"",projectId:"",webrtcStop:void 0}}a.StopProjectBroadcastRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.webrtcStop!==void 0&&S.uint32(24).bool(u.webrtcStop),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Qt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.webrtcStop=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",webrtcStop:Q(u.webrtcStop)?Boolean(u.webrtcStop):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.webrtcStop!==void 0&&(S.webrtcStop=u.webrtcStop),S},fromPartial(u){var S,g,U;const C=Qt();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.webrtcStop=(U=u.webrtcStop)!==null&&U!==void 0?U:void 0,C}};function Zt(){return{}}a.StopProjectBroadcastResponse={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Zt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return Zt()}};function Xt(){return{collectionId:"",projectId:"",status:void 0}}a.GetProjectRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.status!==void 0&&S.uint32(24).bool(u.status),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Xt();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.status=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",status:Q(u.status)?Boolean(u.status):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.status!==void 0&&(S.status=u.status),S},fromPartial(u){var S,g,U;const C=Xt();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.status=(U=u.status)!==null&&U!==void 0?U:void 0,C}};function en(){return{project:void 0,status:void 0}}a.GetProjectResponse={encode(u,S=d.default.Writer.create()){return u.project!==void 0&&a.Project.encode(u.project,S.uint32(10).fork()).ldelim(),u.status!==void 0&&a.ProjectBroadcastStatus.encode(u.status,S.uint32(18).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=en();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.project=a.Project.decode(g,g.uint32());break;case 2:C.status=a.ProjectBroadcastStatus.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{project:Q(u.project)?a.Project.fromJSON(u.project):void 0,status:Q(u.status)?a.ProjectBroadcastStatus.fromJSON(u.status):void 0}},toJSON(u){const S={};return u.project!==void 0&&(S.project=u.project?a.Project.toJSON(u.project):void 0),u.status!==void 0&&(S.status=u.status?a.ProjectBroadcastStatus.toJSON(u.status):void 0),S},fromPartial(u){const S=en();return S.project=u.project!==void 0&&u.project!==null?a.Project.fromPartial(u.project):void 0,S.status=u.status!==void 0&&u.status!==null?a.ProjectBroadcastStatus.fromPartial(u.status):void 0,S}};function tn(){return{collectionId:"",projectId:"",format:void 0}}a.GetProjectBroadcastSnapshotRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.format!==void 0&&S.uint32(24).int32(T(u.format)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=tn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.format=b(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",format:Q(u.format)?b(u.format):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.format!==void 0&&(S.format=u.format!==void 0?_(u.format):void 0),S},fromPartial(u){var S,g,U;const C=tn();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.format=(U=u.format)!==null&&U!==void 0?U:void 0,C}};function nn(){return{format:y.IMAGE_FORMAT_UNSPECIFIED,image:new Uint8Array}}a.GetProjectBroadcastSnapshotResponse={encode(u,S=d.default.Writer.create()){return u.format!==y.IMAGE_FORMAT_UNSPECIFIED&&S.uint32(8).int32(T(u.format)),u.image.length!==0&&S.uint32(18).bytes(u.image),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=nn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.format=b(g.int32());break;case 2:C.image=g.bytes();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{format:Q(u.format)?b(u.format):y.IMAGE_FORMAT_UNSPECIFIED,image:Q(u.image)?Br(u.image):new Uint8Array}},toJSON(u){const S={};return u.format!==void 0&&(S.format=_(u.format)),u.image!==void 0&&(S.image=Vr(u.image!==void 0?u.image:new Uint8Array)),S},fromPartial(u){var S,g;const U=nn();return U.format=(S=u.format)!==null&&S!==void 0?S:y.IMAGE_FORMAT_UNSPECIFIED,U.image=(g=u.image)!==null&&g!==void 0?g:new Uint8Array,U}};function rn(){return{collectionId:"",projectId:""}}a.GetProjectBroadcastStatusRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=rn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),S},fromPartial(u){var S,g;const U=rn();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",U}};function an(){return{status:void 0}}a.GetProjectBroadcastStatusResponse={encode(u,S=d.default.Writer.create()){return u.status!==void 0&&a.ProjectBroadcastStatus.encode(u.status,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=an();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.status=a.ProjectBroadcastStatus.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{status:Q(u.status)?a.ProjectBroadcastStatus.fromJSON(u.status):void 0}},toJSON(u){const S={};return u.status!==void 0&&(S.status=u.status?a.ProjectBroadcastStatus.toJSON(u.status):void 0),S},fromPartial(u){const S=an();return S.status=u.status!==void 0&&u.status!==null?a.ProjectBroadcastStatus.fromPartial(u.status):void 0,S}};function sn(){return{collectionId:"",projectId:""}}a.StartProjectWebRtcRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=sn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),S},fromPartial(u){var S,g;const U=sn();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",U}};function dn(){return{}}a.StartProjectWebRtcResponse={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=dn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return dn()}};function un(){return{collectionId:"",projectId:""}}a.StopProjectWebRtcRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=un();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),S},fromPartial(u){var S,g;const U=un();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",U}};function cn(){return{}}a.StopProjectWebRtcResponse={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=cn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return cn()}};function ln(){return{collectionId:"",projectId:"",metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.CreateDestinationRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(26).fork()).ldelim(),u.address!==void 0&&a.DestinationAddress.encode(u.address,S.uint32(42).fork()).ldelim(),u.enabled!==void 0&&S.uint32(48).bool(u.enabled),u.timeout!==void 0&&S.uint32(56).uint32(u.timeout),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=ln();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 5:C.address=a.DestinationAddress.decode(g,g.uint32());break;case 6:C.enabled=g.bool();break;case 7:C.timeout=g.uint32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,address:Q(u.address)?a.DestinationAddress.fromJSON(u.address):void 0,enabled:Q(u.enabled)?Boolean(u.enabled):void 0,timeout:Q(u.timeout)?Number(u.timeout):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.metadata!==void 0&&(S.metadata=u.metadata),u.address!==void 0&&(S.address=u.address?a.DestinationAddress.toJSON(u.address):void 0),u.enabled!==void 0&&(S.enabled=u.enabled),u.timeout!==void 0&&(S.timeout=Math.round(u.timeout)),S},fromPartial(u){var S,g,U,C,W;const ve=ln();return ve.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",ve.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",ve.metadata=(U=u.metadata)!==null&&U!==void 0?U:void 0,ve.address=u.address!==void 0&&u.address!==null?a.DestinationAddress.fromPartial(u.address):void 0,ve.enabled=(C=u.enabled)!==null&&C!==void 0?C:void 0,ve.timeout=(W=u.timeout)!==null&&W!==void 0?W:void 0,ve}};function fn(){return{destination:void 0}}a.CreateDestinationResponse={encode(u,S=d.default.Writer.create()){return u.destination!==void 0&&a.Destination.encode(u.destination,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=fn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.destination=a.Destination.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{destination:Q(u.destination)?a.Destination.fromJSON(u.destination):void 0}},toJSON(u){const S={};return u.destination!==void 0&&(S.destination=u.destination?a.Destination.toJSON(u.destination):void 0),S},fromPartial(u){const S=fn();return S.destination=u.destination!==void 0&&u.destination!==null?a.Destination.fromPartial(u.destination):void 0,S}};function pn(){return{collectionId:"",projectId:"",destinationId:""}}a.GetDestinationRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.destinationId!==""&&S.uint32(26).string(u.destinationId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=pn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.destinationId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",destinationId:Q(u.destinationId)?String(u.destinationId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.destinationId!==void 0&&(S.destinationId=u.destinationId),S},fromPartial(u){var S,g,U;const C=pn();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.destinationId=(U=u.destinationId)!==null&&U!==void 0?U:"",C}};function hn(){return{destination:void 0}}a.GetDestinationResponse={encode(u,S=d.default.Writer.create()){return u.destination!==void 0&&a.Destination.encode(u.destination,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=hn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.destination=a.Destination.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{destination:Q(u.destination)?a.Destination.fromJSON(u.destination):void 0}},toJSON(u){const S={};return u.destination!==void 0&&(S.destination=u.destination?a.Destination.toJSON(u.destination):void 0),S},fromPartial(u){const S=hn();return S.destination=u.destination!==void 0&&u.destination!==null?a.Destination.fromPartial(u.destination):void 0,S}};function mn(){return{collectionId:"",projectId:"",destinationId:"",force:void 0}}a.DeleteDestinationRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.destinationId!==""&&S.uint32(26).string(u.destinationId),u.force!==void 0&&S.uint32(32).bool(u.force),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=mn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.destinationId=g.string();break;case 4:C.force=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",destinationId:Q(u.destinationId)?String(u.destinationId):"",force:Q(u.force)?Boolean(u.force):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.destinationId!==void 0&&(S.destinationId=u.destinationId),u.force!==void 0&&(S.force=u.force),S},fromPartial(u){var S,g,U,C;const W=mn();return W.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",W.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",W.destinationId=(U=u.destinationId)!==null&&U!==void 0?U:"",W.force=(C=u.force)!==null&&C!==void 0?C:void 0,W}};function vn(){return{broadcastUpdated:!1}}a.DeleteDestinationResponse={encode(u,S=d.default.Writer.create()){return u.broadcastUpdated===!0&&S.uint32(8).bool(u.broadcastUpdated),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=vn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.broadcastUpdated=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{broadcastUpdated:Q(u.broadcastUpdated)?Boolean(u.broadcastUpdated):!1}},toJSON(u){const S={};return u.broadcastUpdated!==void 0&&(S.broadcastUpdated=u.broadcastUpdated),S},fromPartial(u){var S;const g=vn();return g.broadcastUpdated=(S=u.broadcastUpdated)!==null&&S!==void 0?S:!1,g}};function Sn(){return{collectionId:"",projectId:"",destinationId:"",updateMask:void 0,metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.UpdateDestinationRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.destinationId!==""&&S.uint32(26).string(u.destinationId),u.updateMask!==void 0&&c.FieldMask.encode(c.FieldMask.wrap(u.updateMask),S.uint32(34).fork()).ldelim(),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(42).fork()).ldelim(),u.address!==void 0&&a.DestinationAddress.encode(u.address,S.uint32(50).fork()).ldelim(),u.enabled!==void 0&&S.uint32(56).bool(u.enabled),u.timeout!==void 0&&S.uint32(64).uint32(u.timeout),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Sn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.destinationId=g.string();break;case 4:C.updateMask=c.FieldMask.unwrap(c.FieldMask.decode(g,g.uint32()));break;case 5:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 6:C.address=a.DestinationAddress.decode(g,g.uint32());break;case 7:C.enabled=g.bool();break;case 8:C.timeout=g.uint32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",destinationId:Q(u.destinationId)?String(u.destinationId):"",updateMask:Q(u.updateMask)?c.FieldMask.unwrap(c.FieldMask.fromJSON(u.updateMask)):void 0,metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,address:Q(u.address)?a.DestinationAddress.fromJSON(u.address):void 0,enabled:Q(u.enabled)?Boolean(u.enabled):void 0,timeout:Q(u.timeout)?Number(u.timeout):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.destinationId!==void 0&&(S.destinationId=u.destinationId),u.updateMask!==void 0&&(S.updateMask=c.FieldMask.toJSON(c.FieldMask.wrap(u.updateMask))),u.metadata!==void 0&&(S.metadata=u.metadata),u.address!==void 0&&(S.address=u.address?a.DestinationAddress.toJSON(u.address):void 0),u.enabled!==void 0&&(S.enabled=u.enabled),u.timeout!==void 0&&(S.timeout=Math.round(u.timeout)),S},fromPartial(u){var S,g,U,C,W,ve,be;const Re=Sn();return Re.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",Re.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",Re.destinationId=(U=u.destinationId)!==null&&U!==void 0?U:"",Re.updateMask=(C=u.updateMask)!==null&&C!==void 0?C:void 0,Re.metadata=(W=u.metadata)!==null&&W!==void 0?W:void 0,Re.address=u.address!==void 0&&u.address!==null?a.DestinationAddress.fromPartial(u.address):void 0,Re.enabled=(ve=u.enabled)!==null&&ve!==void 0?ve:void 0,Re.timeout=(be=u.timeout)!==null&&be!==void 0?be:void 0,Re}};function yn(){return{destination:void 0,broadcastUpdated:!1}}a.UpdateDestinationResponse={encode(u,S=d.default.Writer.create()){return u.destination!==void 0&&a.Destination.encode(u.destination,S.uint32(10).fork()).ldelim(),u.broadcastUpdated===!0&&S.uint32(16).bool(u.broadcastUpdated),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=yn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.destination=a.Destination.decode(g,g.uint32());break;case 2:C.broadcastUpdated=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{destination:Q(u.destination)?a.Destination.fromJSON(u.destination):void 0,broadcastUpdated:Q(u.broadcastUpdated)?Boolean(u.broadcastUpdated):!1}},toJSON(u){const S={};return u.destination!==void 0&&(S.destination=u.destination?a.Destination.toJSON(u.destination):void 0),u.broadcastUpdated!==void 0&&(S.broadcastUpdated=u.broadcastUpdated),S},fromPartial(u){var S;const g=yn();return g.destination=u.destination!==void 0&&u.destination!==null?a.Destination.fromPartial(u.destination):void 0,g.broadcastUpdated=(S=u.broadcastUpdated)!==null&&S!==void 0?S:!1,g}};function gn(){return{collectionId:"",metadata:void 0,address:void 0,preview:void 0}}a.CreateSourceRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(18).fork()).ldelim(),u.address!==void 0&&a.SourceAddress.encode(u.address,S.uint32(26).fork()).ldelim(),u.preview!==void 0&&a.PreviewAddress.encode(u.preview,S.uint32(34).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=gn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 3:C.address=a.SourceAddress.decode(g,g.uint32());break;case 4:C.preview=a.PreviewAddress.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,address:Q(u.address)?a.SourceAddress.fromJSON(u.address):void 0,preview:Q(u.preview)?a.PreviewAddress.fromJSON(u.preview):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.metadata!==void 0&&(S.metadata=u.metadata),u.address!==void 0&&(S.address=u.address?a.SourceAddress.toJSON(u.address):void 0),u.preview!==void 0&&(S.preview=u.preview?a.PreviewAddress.toJSON(u.preview):void 0),S},fromPartial(u){var S,g;const U=gn();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.metadata=(g=u.metadata)!==null&&g!==void 0?g:void 0,U.address=u.address!==void 0&&u.address!==null?a.SourceAddress.fromPartial(u.address):void 0,U.preview=u.preview!==void 0&&u.preview!==null?a.PreviewAddress.fromPartial(u.preview):void 0,U}};function bn(){return{source:void 0}}a.CreateSourceResponse={encode(u,S=d.default.Writer.create()){return u.source!==void 0&&a.Source.encode(u.source,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=bn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.source=a.Source.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{source:Q(u.source)?a.Source.fromJSON(u.source):void 0}},toJSON(u){const S={};return u.source!==void 0&&(S.source=u.source?a.Source.toJSON(u.source):void 0),S},fromPartial(u){const S=bn();return S.source=u.source!==void 0&&u.source!==null?a.Source.fromPartial(u.source):void 0,S}};function En(){return{collectionId:"",sourceId:"",force:void 0}}a.DeleteSourceRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.sourceId!==""&&S.uint32(18).string(u.sourceId),u.force!==void 0&&S.uint32(24).bool(u.force),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=En();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.sourceId=g.string();break;case 3:C.force=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",force:Q(u.force)?Boolean(u.force):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.force!==void 0&&(S.force=u.force),S},fromPartial(u){var S,g,U;const C=En();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.sourceId=(g=u.sourceId)!==null&&g!==void 0?g:"",C.force=(U=u.force)!==null&&U!==void 0?U:void 0,C}};function _n(){return{projectIdsUpdated:[]}}a.DeleteSourceResponse={encode(u,S=d.default.Writer.create()){for(const g of u.projectIdsUpdated)S.uint32(26).string(g);return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=_n();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 3:C.projectIdsUpdated.push(g.string());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{projectIdsUpdated:Array.isArray(u==null?void 0:u.projectIdsUpdated)?u.projectIdsUpdated.map(S=>String(S)):[]}},toJSON(u){const S={};return u.projectIdsUpdated?S.projectIdsUpdated=u.projectIdsUpdated.map(g=>g):S.projectIdsUpdated=[],S},fromPartial(u){var S;const g=_n();return g.projectIdsUpdated=((S=u.projectIdsUpdated)===null||S===void 0?void 0:S.map(U=>U))||[],g}};function Tn(){return{collectionId:"",projectId:"",sourceId:"",trigger:void 0}}a.AddSourceToProjectRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.sourceId!==""&&S.uint32(26).string(u.sourceId),u.trigger!==void 0&&a.SourceTrigger.encode(u.trigger,S.uint32(34).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Tn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.sourceId=g.string();break;case 4:C.trigger=a.SourceTrigger.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",trigger:Q(u.trigger)?a.SourceTrigger.fromJSON(u.trigger):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.trigger!==void 0&&(S.trigger=u.trigger?a.SourceTrigger.toJSON(u.trigger):void 0),S},fromPartial(u){var S,g,U;const C=Tn();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.sourceId=(U=u.sourceId)!==null&&U!==void 0?U:"",C.trigger=u.trigger!==void 0&&u.trigger!==null?a.SourceTrigger.fromPartial(u.trigger):void 0,C}};function In(){return{project:void 0,broadcastUpdated:!1}}a.AddSourceToProjectResponse={encode(u,S=d.default.Writer.create()){return u.project!==void 0&&a.Project.encode(u.project,S.uint32(10).fork()).ldelim(),u.broadcastUpdated===!0&&S.uint32(16).bool(u.broadcastUpdated),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=In();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.project=a.Project.decode(g,g.uint32());break;case 2:C.broadcastUpdated=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{project:Q(u.project)?a.Project.fromJSON(u.project):void 0,broadcastUpdated:Q(u.broadcastUpdated)?Boolean(u.broadcastUpdated):!1}},toJSON(u){const S={};return u.project!==void 0&&(S.project=u.project?a.Project.toJSON(u.project):void 0),u.broadcastUpdated!==void 0&&(S.broadcastUpdated=u.broadcastUpdated),S},fromPartial(u){var S;const g=In();return g.project=u.project!==void 0&&u.project!==null?a.Project.fromPartial(u.project):void 0,g.broadcastUpdated=(S=u.broadcastUpdated)!==null&&S!==void 0?S:!1,g}};function Cn(){return{collectionId:"",projectId:"",sourceId:"",updateMask:void 0,trigger:void 0}}a.UpdateSourceInProjectRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.sourceId!==""&&S.uint32(26).string(u.sourceId),u.updateMask!==void 0&&c.FieldMask.encode(c.FieldMask.wrap(u.updateMask),S.uint32(34).fork()).ldelim(),u.trigger!==void 0&&a.SourceTrigger.encode(u.trigger,S.uint32(42).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Cn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.sourceId=g.string();break;case 4:C.updateMask=c.FieldMask.unwrap(c.FieldMask.decode(g,g.uint32()));break;case 5:C.trigger=a.SourceTrigger.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",updateMask:Q(u.updateMask)?c.FieldMask.unwrap(c.FieldMask.fromJSON(u.updateMask)):void 0,trigger:Q(u.trigger)?a.SourceTrigger.fromJSON(u.trigger):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.updateMask!==void 0&&(S.updateMask=c.FieldMask.toJSON(c.FieldMask.wrap(u.updateMask))),u.trigger!==void 0&&(S.trigger=u.trigger?a.SourceTrigger.toJSON(u.trigger):void 0),S},fromPartial(u){var S,g,U,C;const W=Cn();return W.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",W.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",W.sourceId=(U=u.sourceId)!==null&&U!==void 0?U:"",W.updateMask=(C=u.updateMask)!==null&&C!==void 0?C:void 0,W.trigger=u.trigger!==void 0&&u.trigger!==null?a.SourceTrigger.fromPartial(u.trigger):void 0,W}};function Rn(){return{project:void 0}}a.UpdateSourceInProjectResponse={encode(u,S=d.default.Writer.create()){return u.project!==void 0&&a.Project.encode(u.project,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Rn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.project=a.Project.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{project:Q(u.project)?a.Project.fromJSON(u.project):void 0}},toJSON(u){const S={};return u.project!==void 0&&(S.project=u.project?a.Project.toJSON(u.project):void 0),S},fromPartial(u){const S=Rn();return S.project=u.project!==void 0&&u.project!==null?a.Project.fromPartial(u.project):void 0,S}};function On(){return{collectionId:"",sourceId:""}}a.GetSourceRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.sourceId!==""&&S.uint32(26).string(u.sourceId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=On();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 3:C.sourceId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",sourceId:Q(u.sourceId)?String(u.sourceId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),S},fromPartial(u){var S,g;const U=On();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.sourceId=(g=u.sourceId)!==null&&g!==void 0?g:"",U}};function kn(){return{source:void 0}}a.GetSourceResponse={encode(u,S=d.default.Writer.create()){return u.source!==void 0&&a.Source.encode(u.source,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=kn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.source=a.Source.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{source:Q(u.source)?a.Source.fromJSON(u.source):void 0}},toJSON(u){const S={};return u.source!==void 0&&(S.source=u.source?a.Source.toJSON(u.source):void 0),S},fromPartial(u){const S=kn();return S.source=u.source!==void 0&&u.source!==null?a.Source.fromPartial(u.source):void 0,S}};function Pn(){return{collectionId:""}}a.GetSourcesRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Pn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),S},fromPartial(u){var S;const g=Pn();return g.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",g}};function Nn(){return{sources:[]}}a.GetSourcesResponse={encode(u,S=d.default.Writer.create()){for(const g of u.sources)a.Source.encode(g,S.uint32(10).fork()).ldelim();return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Nn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.sources.push(a.Source.decode(g,g.uint32()));break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{sources:Array.isArray(u==null?void 0:u.sources)?u.sources.map(S=>a.Source.fromJSON(S)):[]}},toJSON(u){const S={};return u.sources?S.sources=u.sources.map(g=>g?a.Source.toJSON(g):void 0):S.sources=[],S},fromPartial(u){var S;const g=Nn();return g.sources=((S=u.sources)===null||S===void 0?void 0:S.map(U=>a.Source.fromPartial(U)))||[],g}};function wn(){return{collectionId:"",sourceId:"",updateMask:void 0,metadata:void 0,address:void 0,preview:void 0}}a.UpdateSourceRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.sourceId!==""&&S.uint32(26).string(u.sourceId),u.updateMask!==void 0&&c.FieldMask.encode(c.FieldMask.wrap(u.updateMask),S.uint32(34).fork()).ldelim(),u.metadata!==void 0&&h.Value.encode(h.Value.wrap(u.metadata),S.uint32(42).fork()).ldelim(),u.address!==void 0&&a.SourceAddress.encode(u.address,S.uint32(50).fork()).ldelim(),u.preview!==void 0&&a.PreviewAddress.encode(u.preview,S.uint32(58).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=wn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 3:C.sourceId=g.string();break;case 4:C.updateMask=c.FieldMask.unwrap(c.FieldMask.decode(g,g.uint32()));break;case 5:C.metadata=h.Value.unwrap(h.Value.decode(g,g.uint32()));break;case 6:C.address=a.SourceAddress.decode(g,g.uint32());break;case 7:C.preview=a.PreviewAddress.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",updateMask:Q(u.updateMask)?c.FieldMask.unwrap(c.FieldMask.fromJSON(u.updateMask)):void 0,metadata:Q(u==null?void 0:u.metadata)?u.metadata:void 0,address:Q(u.address)?a.SourceAddress.fromJSON(u.address):void 0,preview:Q(u.preview)?a.PreviewAddress.fromJSON(u.preview):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.updateMask!==void 0&&(S.updateMask=c.FieldMask.toJSON(c.FieldMask.wrap(u.updateMask))),u.metadata!==void 0&&(S.metadata=u.metadata),u.address!==void 0&&(S.address=u.address?a.SourceAddress.toJSON(u.address):void 0),u.preview!==void 0&&(S.preview=u.preview?a.PreviewAddress.toJSON(u.preview):void 0),S},fromPartial(u){var S,g,U,C;const W=wn();return W.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",W.sourceId=(g=u.sourceId)!==null&&g!==void 0?g:"",W.updateMask=(U=u.updateMask)!==null&&U!==void 0?U:void 0,W.metadata=(C=u.metadata)!==null&&C!==void 0?C:void 0,W.address=u.address!==void 0&&u.address!==null?a.SourceAddress.fromPartial(u.address):void 0,W.preview=u.preview!==void 0&&u.preview!==null?a.PreviewAddress.fromPartial(u.preview):void 0,W}};function An(){return{source:void 0,broadcastUpdated:!1}}a.UpdateSourceResponse={encode(u,S=d.default.Writer.create()){return u.source!==void 0&&a.Source.encode(u.source,S.uint32(10).fork()).ldelim(),u.broadcastUpdated===!0&&S.uint32(16).bool(u.broadcastUpdated),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=An();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.source=a.Source.decode(g,g.uint32());break;case 2:C.broadcastUpdated=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{source:Q(u.source)?a.Source.fromJSON(u.source):void 0,broadcastUpdated:Q(u.broadcastUpdated)?Boolean(u.broadcastUpdated):!1}},toJSON(u){const S={};return u.source!==void 0&&(S.source=u.source?a.Source.toJSON(u.source):void 0),u.broadcastUpdated!==void 0&&(S.broadcastUpdated=u.broadcastUpdated),S},fromPartial(u){var S;const g=An();return g.source=u.source!==void 0&&u.source!==null?a.Source.fromPartial(u.source):void 0,g.broadcastUpdated=(S=u.broadcastUpdated)!==null&&S!==void 0?S:!1,g}};function Ln(){return{collectionId:"",projectId:"",sourceId:"",force:void 0}}a.RemoveSourceFromProjectRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.sourceId!==""&&S.uint32(26).string(u.sourceId),u.force!==void 0&&S.uint32(32).bool(u.force),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ln();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.sourceId=g.string();break;case 4:C.force=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",force:Q(u.force)?Boolean(u.force):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.force!==void 0&&(S.force=u.force),S},fromPartial(u){var S,g,U,C;const W=Ln();return W.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",W.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",W.sourceId=(U=u.sourceId)!==null&&U!==void 0?U:"",W.force=(C=u.force)!==null&&C!==void 0?C:void 0,W}};function Dn(){return{project:void 0,broadcastUpdated:!1}}a.RemoveSourceFromProjectResponse={encode(u,S=d.default.Writer.create()){return u.project!==void 0&&a.Project.encode(u.project,S.uint32(10).fork()).ldelim(),u.broadcastUpdated===!0&&S.uint32(16).bool(u.broadcastUpdated),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Dn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.project=a.Project.decode(g,g.uint32());break;case 2:C.broadcastUpdated=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{project:Q(u.project)?a.Project.fromJSON(u.project):void 0,broadcastUpdated:Q(u.broadcastUpdated)?Boolean(u.broadcastUpdated):!1}},toJSON(u){const S={};return u.project!==void 0&&(S.project=u.project?a.Project.toJSON(u.project):void 0),u.broadcastUpdated!==void 0&&(S.broadcastUpdated=u.broadcastUpdated),S},fromPartial(u){var S;const g=Dn();return g.project=u.project!==void 0&&u.project!==null?a.Project.fromPartial(u.project):void 0,g.broadcastUpdated=(S=u.broadcastUpdated)!==null&&S!==void 0?S:!1,g}};function $n(){return{serviceUserId:"",displayName:void 0,role:void 0,maxDuration:void 0}}a.CreateAccessTokenRequest={encode(u,S=d.default.Writer.create()){return u.serviceUserId!==""&&S.uint32(10).string(u.serviceUserId),u.displayName!==void 0&&S.uint32(34).string(u.displayName),u.role!==void 0&&S.uint32(16).int32(Ke(u.role)),u.maxDuration!==void 0&&S.uint32(24).uint32(u.maxDuration),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=$n();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.serviceUserId=g.string();break;case 4:C.displayName=g.string();break;case 2:C.role=Fe(g.int32());break;case 3:C.maxDuration=g.uint32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{serviceUserId:Q(u.serviceUserId)?String(u.serviceUserId):"",displayName:Q(u.displayName)?String(u.displayName):void 0,role:Q(u.role)?Fe(u.role):void 0,maxDuration:Q(u.maxDuration)?Number(u.maxDuration):void 0}},toJSON(u){const S={};return u.serviceUserId!==void 0&&(S.serviceUserId=u.serviceUserId),u.displayName!==void 0&&(S.displayName=u.displayName),u.role!==void 0&&(S.role=u.role!==void 0?je(u.role):void 0),u.maxDuration!==void 0&&(S.maxDuration=Math.round(u.maxDuration)),S},fromPartial(u){var S,g,U,C;const W=$n();return W.serviceUserId=(S=u.serviceUserId)!==null&&S!==void 0?S:"",W.displayName=(g=u.displayName)!==null&&g!==void 0?g:void 0,W.role=(U=u.role)!==null&&U!==void 0?U:void 0,W.maxDuration=(C=u.maxDuration)!==null&&C!==void 0?C:void 0,W}};function Mn(){return{accessToken:""}}a.CreateAccessTokenResponse={encode(u,S=d.default.Writer.create()){return u.accessToken!==""&&S.uint32(10).string(u.accessToken),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Mn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.accessToken=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{accessToken:Q(u.accessToken)?String(u.accessToken):""}},toJSON(u){const S={};return u.accessToken!==void 0&&(S.accessToken=u.accessToken),S},fromPartial(u){var S;const g=Mn();return g.accessToken=(S=u.accessToken)!==null&&S!==void 0?S:"",g}};function Un(){return{displayName:"",serviceUserId:void 0}}a.GuestAccessTokenDirect={encode(u,S=d.default.Writer.create()){return u.displayName!==""&&S.uint32(10).string(u.displayName),u.serviceUserId!==void 0&&S.uint32(18).string(u.serviceUserId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Un();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.displayName=g.string();break;case 2:C.serviceUserId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{displayName:Q(u.displayName)?String(u.displayName):"",serviceUserId:Q(u.serviceUserId)?String(u.serviceUserId):void 0}},toJSON(u){const S={};return u.displayName!==void 0&&(S.displayName=u.displayName),u.serviceUserId!==void 0&&(S.serviceUserId=u.serviceUserId),S},fromPartial(u){var S,g;const U=Un();return U.displayName=(S=u.displayName)!==null&&S!==void 0?S:"",U.serviceUserId=(g=u.serviceUserId)!==null&&g!==void 0?g:void 0,U}};function Bn(){return{maxDuration:void 0}}a.GuestAccessTokenExchange={encode(u,S=d.default.Writer.create()){return u.maxDuration!==void 0&&S.uint32(8).uint32(u.maxDuration),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Bn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.maxDuration=g.uint32();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{maxDuration:Q(u.maxDuration)?Number(u.maxDuration):void 0}},toJSON(u){const S={};return u.maxDuration!==void 0&&(S.maxDuration=Math.round(u.maxDuration)),S},fromPartial(u){var S;const g=Bn();return g.maxDuration=(S=u.maxDuration)!==null&&S!==void 0?S:void 0,g}};function Vn(){return{direct:void 0,exchange:void 0}}a.GuestAccessToken={encode(u,S=d.default.Writer.create()){return u.direct!==void 0&&a.GuestAccessTokenDirect.encode(u.direct,S.uint32(10).fork()).ldelim(),u.exchange!==void 0&&a.GuestAccessTokenExchange.encode(u.exchange,S.uint32(18).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Vn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.direct=a.GuestAccessTokenDirect.decode(g,g.uint32());break;case 2:C.exchange=a.GuestAccessTokenExchange.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{direct:Q(u.direct)?a.GuestAccessTokenDirect.fromJSON(u.direct):void 0,exchange:Q(u.exchange)?a.GuestAccessTokenExchange.fromJSON(u.exchange):void 0}},toJSON(u){const S={};return u.direct!==void 0&&(S.direct=u.direct?a.GuestAccessTokenDirect.toJSON(u.direct):void 0),u.exchange!==void 0&&(S.exchange=u.exchange?a.GuestAccessTokenExchange.toJSON(u.exchange):void 0),S},fromPartial(u){const S=Vn();return S.direct=u.direct!==void 0&&u.direct!==null?a.GuestAccessTokenDirect.fromPartial(u.direct):void 0,S.exchange=u.exchange!==void 0&&u.exchange!==null?a.GuestAccessTokenExchange.fromPartial(u.exchange):void 0,S}};function Fn(){return{collectionId:"",projectId:"",maxDuration:void 0,role:Ee.ROLE_UNSPECIFIED,token:void 0,url:void 0,createGuestCode:void 0}}a.CreateGuestAccessTokenRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.maxDuration!==void 0&&S.uint32(24).uint32(u.maxDuration),u.role!==Ee.ROLE_UNSPECIFIED&&S.uint32(32).int32(Ke(u.role)),u.token!==void 0&&a.GuestAccessToken.encode(u.token,S.uint32(42).fork()).ldelim(),u.url!==void 0&&S.uint32(50).string(u.url),u.createGuestCode!==void 0&&S.uint32(56).bool(u.createGuestCode),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Fn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.maxDuration=g.uint32();break;case 4:C.role=Fe(g.int32());break;case 5:C.token=a.GuestAccessToken.decode(g,g.uint32());break;case 6:C.url=g.string();break;case 7:C.createGuestCode=g.bool();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",maxDuration:Q(u.maxDuration)?Number(u.maxDuration):void 0,role:Q(u.role)?Fe(u.role):Ee.ROLE_UNSPECIFIED,token:Q(u.token)?a.GuestAccessToken.fromJSON(u.token):void 0,url:Q(u.url)?String(u.url):void 0,createGuestCode:Q(u.createGuestCode)?Boolean(u.createGuestCode):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.maxDuration!==void 0&&(S.maxDuration=Math.round(u.maxDuration)),u.role!==void 0&&(S.role=je(u.role)),u.token!==void 0&&(S.token=u.token?a.GuestAccessToken.toJSON(u.token):void 0),u.url!==void 0&&(S.url=u.url),u.createGuestCode!==void 0&&(S.createGuestCode=u.createGuestCode),S},fromPartial(u){var S,g,U,C,W,ve;const be=Fn();return be.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",be.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",be.maxDuration=(U=u.maxDuration)!==null&&U!==void 0?U:void 0,be.role=(C=u.role)!==null&&C!==void 0?C:Ee.ROLE_UNSPECIFIED,be.token=u.token!==void 0&&u.token!==null?a.GuestAccessToken.fromPartial(u.token):void 0,be.url=(W=u.url)!==null&&W!==void 0?W:void 0,be.createGuestCode=(ve=u.createGuestCode)!==null&&ve!==void 0?ve:void 0,be}};function Jn(){return{accessToken:"",url:void 0,guestCode:void 0}}a.CreateGuestAccessTokenResponse={encode(u,S=d.default.Writer.create()){return u.accessToken!==""&&S.uint32(10).string(u.accessToken),u.url!==void 0&&S.uint32(18).string(u.url),u.guestCode!==void 0&&a.IssuedGuestCode.encode(u.guestCode,S.uint32(26).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Jn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.accessToken=g.string();break;case 2:C.url=g.string();break;case 3:C.guestCode=a.IssuedGuestCode.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{accessToken:Q(u.accessToken)?String(u.accessToken):"",url:Q(u.url)?String(u.url):void 0,guestCode:Q(u.guestCode)?a.IssuedGuestCode.fromJSON(u.guestCode):void 0}},toJSON(u){const S={};return u.accessToken!==void 0&&(S.accessToken=u.accessToken),u.url!==void 0&&(S.url=u.url),u.guestCode!==void 0&&(S.guestCode=u.guestCode?a.IssuedGuestCode.toJSON(u.guestCode):void 0),S},fromPartial(u){var S,g;const U=Jn();return U.accessToken=(S=u.accessToken)!==null&&S!==void 0?S:"",U.url=(g=u.url)!==null&&g!==void 0?g:void 0,U.guestCode=u.guestCode!==void 0&&u.guestCode!==null?a.IssuedGuestCode.fromPartial(u.guestCode):void 0,U}};function Gn(){return{collectionId:"",projectId:"",displayName:""}}a.CreateWebRtcAccessTokenRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.displayName!==""&&S.uint32(26).string(u.displayName),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Gn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.displayName=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",displayName:Q(u.displayName)?String(u.displayName):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.displayName!==void 0&&(S.displayName=u.displayName),S},fromPartial(u){var S,g,U;const C=Gn();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.displayName=(U=u.displayName)!==null&&U!==void 0?U:"",C}};function qn(){return{webrtcAccess:void 0}}a.CreateWebRtcAccessTokenResponse={encode(u,S=d.default.Writer.create()){return u.webrtcAccess!==void 0&&a.WebRtcAccess.encode(u.webrtcAccess,S.uint32(18).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=qn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 2:C.webrtcAccess=a.WebRtcAccess.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{webrtcAccess:Q(u.webrtcAccess)?a.WebRtcAccess.fromJSON(u.webrtcAccess):void 0}},toJSON(u){const S={};return u.webrtcAccess!==void 0&&(S.webrtcAccess=u.webrtcAccess?a.WebRtcAccess.toJSON(u.webrtcAccess):void 0),S},fromPartial(u){const S=qn();return S.webrtcAccess=u.webrtcAccess!==void 0&&u.webrtcAccess!==null?a.WebRtcAccess.fromPartial(u.webrtcAccess):void 0,S}};function Wn(){return{}}a.RefreshAccessTokenRequest={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Wn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return Wn()}};function xn(){return{}}a.RefreshAccessTokenResponse={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=xn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return xn()}};function Hn(){return{collectionId:"",projectId:"",code:"",url:"",autoDelete:void 0,accessToken:""}}a.GuestCode={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.code!==""&&S.uint32(26).string(u.code),u.url!==""&&S.uint32(34).string(u.url),u.autoDelete!==void 0&&v.Timestamp.encode(ft(u.autoDelete),S.uint32(42).fork()).ldelim(),u.accessToken!==""&&S.uint32(50).string(u.accessToken),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Hn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.code=g.string();break;case 4:C.url=g.string();break;case 5:C.autoDelete=pt(v.Timestamp.decode(g,g.uint32()));break;case 6:C.accessToken=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",code:Q(u.code)?String(u.code):"",url:Q(u.url)?String(u.url):"",autoDelete:Q(u.autoDelete)?String(u.autoDelete):void 0,accessToken:Q(u.accessToken)?String(u.accessToken):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.code!==void 0&&(S.code=u.code),u.url!==void 0&&(S.url=u.url),u.autoDelete!==void 0&&(S.autoDelete=u.autoDelete),u.accessToken!==void 0&&(S.accessToken=u.accessToken),S},fromPartial(u){var S,g,U,C,W,ve;const be=Hn();return be.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",be.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",be.code=(U=u.code)!==null&&U!==void 0?U:"",be.url=(C=u.url)!==null&&C!==void 0?C:"",be.autoDelete=(W=u.autoDelete)!==null&&W!==void 0?W:void 0,be.accessToken=(ve=u.accessToken)!==null&&ve!==void 0?ve:"",be}};function zn(){return{collectionId:"",projectId:"",maxDuration:void 0,role:Ee.ROLE_UNSPECIFIED,token:void 0,url:void 0,code:"",accessToken:""}}a.IssuedGuestCode={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.maxDuration!==void 0&&S.uint32(24).uint32(u.maxDuration),u.role!==Ee.ROLE_UNSPECIFIED&&S.uint32(32).int32(Ke(u.role)),u.token!==void 0&&a.GuestAccessToken.encode(u.token,S.uint32(42).fork()).ldelim(),u.url!==void 0&&S.uint32(50).string(u.url),u.code!==""&&S.uint32(58).string(u.code),u.accessToken!==""&&S.uint32(66).string(u.accessToken),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=zn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.maxDuration=g.uint32();break;case 4:C.role=Fe(g.int32());break;case 5:C.token=a.GuestAccessToken.decode(g,g.uint32());break;case 6:C.url=g.string();break;case 7:C.code=g.string();break;case 8:C.accessToken=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",maxDuration:Q(u.maxDuration)?Number(u.maxDuration):void 0,role:Q(u.role)?Fe(u.role):Ee.ROLE_UNSPECIFIED,token:Q(u.token)?a.GuestAccessToken.fromJSON(u.token):void 0,url:Q(u.url)?String(u.url):void 0,code:Q(u.code)?String(u.code):"",accessToken:Q(u.accessToken)?String(u.accessToken):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.maxDuration!==void 0&&(S.maxDuration=Math.round(u.maxDuration)),u.role!==void 0&&(S.role=je(u.role)),u.token!==void 0&&(S.token=u.token?a.GuestAccessToken.toJSON(u.token):void 0),u.url!==void 0&&(S.url=u.url),u.code!==void 0&&(S.code=u.code),u.accessToken!==void 0&&(S.accessToken=u.accessToken),S},fromPartial(u){var S,g,U,C,W,ve,be;const Re=zn();return Re.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",Re.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",Re.maxDuration=(U=u.maxDuration)!==null&&U!==void 0?U:void 0,Re.role=(C=u.role)!==null&&C!==void 0?C:Ee.ROLE_UNSPECIFIED,Re.token=u.token!==void 0&&u.token!==null?a.GuestAccessToken.fromPartial(u.token):void 0,Re.url=(W=u.url)!==null&&W!==void 0?W:void 0,Re.code=(ve=u.code)!==null&&ve!==void 0?ve:"",Re.accessToken=(be=u.accessToken)!==null&&be!==void 0?be:"",Re}};function Yn(){return{serviceId:"",code:""}}a.GuestCodeRedirectRequest={encode(u,S=d.default.Writer.create()){return u.serviceId!==""&&S.uint32(10).string(u.serviceId),u.code!==""&&S.uint32(18).string(u.code),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Yn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.serviceId=g.string();break;case 2:C.code=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{serviceId:Q(u.serviceId)?String(u.serviceId):"",code:Q(u.code)?String(u.code):""}},toJSON(u){const S={};return u.serviceId!==void 0&&(S.serviceId=u.serviceId),u.code!==void 0&&(S.code=u.code),S},fromPartial(u){var S,g;const U=Yn();return U.serviceId=(S=u.serviceId)!==null&&S!==void 0?S:"",U.code=(g=u.code)!==null&&g!==void 0?g:"",U}};function jn(){return{}}a.GuestCodeRedirectResponse={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=jn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return jn()}};function Kn(){return{serviceId:void 0,code:""}}a.UseGuestCodeRequest={encode(u,S=d.default.Writer.create()){return u.serviceId!==void 0&&S.uint32(10).string(u.serviceId),u.code!==""&&S.uint32(18).string(u.code),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Kn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.serviceId=g.string();break;case 2:C.code=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{serviceId:Q(u.serviceId)?String(u.serviceId):void 0,code:Q(u.code)?String(u.code):""}},toJSON(u){const S={};return u.serviceId!==void 0&&(S.serviceId=u.serviceId),u.code!==void 0&&(S.code=u.code),S},fromPartial(u){var S,g;const U=Kn();return U.serviceId=(S=u.serviceId)!==null&&S!==void 0?S:void 0,U.code=(g=u.code)!==null&&g!==void 0?g:"",U}};function Qn(){return{collectionId:"",projectId:"",role:Ee.ROLE_UNSPECIFIED,accessToken:"",url:void 0}}a.UseGuestCodeResponse={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.role!==Ee.ROLE_UNSPECIFIED&&S.uint32(24).int32(Ke(u.role)),u.accessToken!==""&&S.uint32(34).string(u.accessToken),u.url!==void 0&&S.uint32(42).string(u.url),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Qn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.role=Fe(g.int32());break;case 4:C.accessToken=g.string();break;case 5:C.url=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",role:Q(u.role)?Fe(u.role):Ee.ROLE_UNSPECIFIED,accessToken:Q(u.accessToken)?String(u.accessToken):"",url:Q(u.url)?String(u.url):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.role!==void 0&&(S.role=je(u.role)),u.accessToken!==void 0&&(S.accessToken=u.accessToken),u.url!==void 0&&(S.url=u.url),S},fromPartial(u){var S,g,U,C,W;const ve=Qn();return ve.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",ve.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",ve.role=(U=u.role)!==null&&U!==void 0?U:Ee.ROLE_UNSPECIFIED,ve.accessToken=(C=u.accessToken)!==null&&C!==void 0?C:"",ve.url=(W=u.url)!==null&&W!==void 0?W:void 0,ve}};function Zn(){return{code:""}}a.GetGuestCodeRequest={encode(u,S=d.default.Writer.create()){return u.code!==""&&S.uint32(10).string(u.code),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Zn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.code=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{code:Q(u.code)?String(u.code):""}},toJSON(u){const S={};return u.code!==void 0&&(S.code=u.code),S},fromPartial(u){var S;const g=Zn();return g.code=(S=u.code)!==null&&S!==void 0?S:"",g}};function Xn(){return{guestCode:void 0}}a.GetGuestCodeResponse={encode(u,S=d.default.Writer.create()){return u.guestCode!==void 0&&a.IssuedGuestCode.encode(u.guestCode,S.uint32(10).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Xn();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.guestCode=a.IssuedGuestCode.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{guestCode:Q(u.guestCode)?a.IssuedGuestCode.fromJSON(u.guestCode):void 0}},toJSON(u){const S={};return u.guestCode!==void 0&&(S.guestCode=u.guestCode?a.IssuedGuestCode.toJSON(u.guestCode):void 0),S},fromPartial(u){const S=Xn();return S.guestCode=u.guestCode!==void 0&&u.guestCode!==null?a.IssuedGuestCode.fromPartial(u.guestCode):void 0,S}};function er(){return{collectionId:void 0,projectId:void 0,role:void 0}}a.GetGuestCodesRequest={encode(u,S=d.default.Writer.create()){return u.collectionId!==void 0&&S.uint32(10).string(u.collectionId),u.projectId!==void 0&&S.uint32(18).string(u.projectId),u.role!==void 0&&S.uint32(24).int32(Ke(u.role)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=er();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.role=Fe(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):void 0,projectId:Q(u.projectId)?String(u.projectId):void 0,role:Q(u.role)?Fe(u.role):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.role!==void 0&&(S.role=u.role!==void 0?je(u.role):void 0),S},fromPartial(u){var S,g,U;const C=er();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:void 0,C.projectId=(g=u.projectId)!==null&&g!==void 0?g:void 0,C.role=(U=u.role)!==null&&U!==void 0?U:void 0,C}};function tr(){return{guestCodes:[]}}a.GetGuestCodesResponse={encode(u,S=d.default.Writer.create()){for(const g of u.guestCodes)a.IssuedGuestCode.encode(g,S.uint32(10).fork()).ldelim();return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=tr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.guestCodes.push(a.IssuedGuestCode.decode(g,g.uint32()));break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{guestCodes:Array.isArray(u==null?void 0:u.guestCodes)?u.guestCodes.map(S=>a.IssuedGuestCode.fromJSON(S)):[]}},toJSON(u){const S={};return u.guestCodes?S.guestCodes=u.guestCodes.map(g=>g?a.IssuedGuestCode.toJSON(g):void 0):S.guestCodes=[],S},fromPartial(u){var S;const g=tr();return g.guestCodes=((S=u.guestCodes)===null||S===void 0?void 0:S.map(U=>a.IssuedGuestCode.fromPartial(U)))||[],g}};function nr(){return{code:""}}a.DeleteGuestCodeRequest={encode(u,S=d.default.Writer.create()){return u.code!==""&&S.uint32(10).string(u.code),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=nr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.code=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{code:Q(u.code)?String(u.code):""}},toJSON(u){const S={};return u.code!==void 0&&(S.code=u.code),S},fromPartial(u){var S;const g=nr();return g.code=(S=u.code)!==null&&S!==void 0?S:"",g}};function rr(){return{}}a.DeleteGuestCodeResponse={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=rr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return rr()}};function ir(){return{alg:"",kty:"",use:"",kid:"",e:"",n:""}}a.JsonWebKey={encode(u,S=d.default.Writer.create()){return u.alg!==""&&S.uint32(10).string(u.alg),u.kty!==""&&S.uint32(18).string(u.kty),u.use!==""&&S.uint32(26).string(u.use),u.kid!==""&&S.uint32(34).string(u.kid),u.e!==""&&S.uint32(42).string(u.e),u.n!==""&&S.uint32(50).string(u.n),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=ir();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.alg=g.string();break;case 2:C.kty=g.string();break;case 3:C.use=g.string();break;case 4:C.kid=g.string();break;case 5:C.e=g.string();break;case 6:C.n=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{alg:Q(u.alg)?String(u.alg):"",kty:Q(u.kty)?String(u.kty):"",use:Q(u.use)?String(u.use):"",kid:Q(u.kid)?String(u.kid):"",e:Q(u.e)?String(u.e):"",n:Q(u.n)?String(u.n):""}},toJSON(u){const S={};return u.alg!==void 0&&(S.alg=u.alg),u.kty!==void 0&&(S.kty=u.kty),u.use!==void 0&&(S.use=u.use),u.kid!==void 0&&(S.kid=u.kid),u.e!==void 0&&(S.e=u.e),u.n!==void 0&&(S.n=u.n),S},fromPartial(u){var S,g,U,C,W,ve;const be=ir();return be.alg=(S=u.alg)!==null&&S!==void 0?S:"",be.kty=(g=u.kty)!==null&&g!==void 0?g:"",be.use=(U=u.use)!==null&&U!==void 0?U:"",be.kid=(C=u.kid)!==null&&C!==void 0?C:"",be.e=(W=u.e)!==null&&W!==void 0?W:"",be.n=(ve=u.n)!==null&&ve!==void 0?ve:"",be}};function ar(){return{}}a.GetJsonWebKeySetRequest={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=ar();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return ar()}};function or(){return{keys:[]}}a.GetJsonWebKeySetResponse={encode(u,S=d.default.Writer.create()){for(const g of u.keys)a.JsonWebKey.encode(g,S.uint32(10).fork()).ldelim();return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=or();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.keys.push(a.JsonWebKey.decode(g,g.uint32()));break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{keys:Array.isArray(u==null?void 0:u.keys)?u.keys.map(S=>a.JsonWebKey.fromJSON(S)):[]}},toJSON(u){const S={};return u.keys?S.keys=u.keys.map(g=>g?a.JsonWebKey.toJSON(g):void 0):S.keys=[],S},fromPartial(u){var S;const g=or();return g.keys=((S=u.keys)===null||S===void 0?void 0:S.map(U=>a.JsonWebKey.fromPartial(U)))||[],g}};function sr(){return{}}a.GetTestTokenRequest={encode(u,S=d.default.Writer.create()){return S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=sr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){default:g.skipType(W&7);break}}return C},fromJSON(u){return{}},toJSON(u){return{}},fromPartial(u){return sr()}};function dr(){return{accessToken:""}}a.GetTestTokenResponse={encode(u,S=d.default.Writer.create()){return u.accessToken!==""&&S.uint32(10).string(u.accessToken),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=dr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.accessToken=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{accessToken:Q(u.accessToken)?String(u.accessToken):""}},toJSON(u){const S={};return u.accessToken!==void 0&&(S.accessToken=u.accessToken),S},fromPartial(u){var S;const g=dr();return g.accessToken=(S=u.accessToken)!==null&&S!==void 0?S:"",g}};function ur(){return{collectionId:"",projectId:"",destinationId:"",destination:void 0}}a.DestinationCreateEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.destinationId!==""&&S.uint32(26).string(u.destinationId),u.destination!==void 0&&a.Destination.encode(u.destination,S.uint32(34).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=ur();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.destinationId=g.string();break;case 4:C.destination=a.Destination.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",destinationId:Q(u.destinationId)?String(u.destinationId):"",destination:Q(u.destination)?a.Destination.fromJSON(u.destination):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.destinationId!==void 0&&(S.destinationId=u.destinationId),u.destination!==void 0&&(S.destination=u.destination?a.Destination.toJSON(u.destination):void 0),S},fromPartial(u){var S,g,U;const C=ur();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.destinationId=(U=u.destinationId)!==null&&U!==void 0?U:"",C.destination=u.destination!==void 0&&u.destination!==null?a.Destination.fromPartial(u.destination):void 0,C}};function cr(){return{collectionId:"",projectId:"",destinationId:""}}a.DestinationDeleteEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.destinationId!==""&&S.uint32(26).string(u.destinationId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=cr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.destinationId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",destinationId:Q(u.destinationId)?String(u.destinationId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.destinationId!==void 0&&(S.destinationId=u.destinationId),S},fromPartial(u){var S,g,U;const C=cr();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.destinationId=(U=u.destinationId)!==null&&U!==void 0?U:"",C}};function lr(){return{collectionId:"",projectId:"",destinationId:"",updateMask:[],destination:void 0}}a.DestinationUpdateEvent={encode(u,S=d.default.Writer.create()){u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.destinationId!==""&&S.uint32(26).string(u.destinationId);for(const g of u.updateMask)S.uint32(34).string(g);return u.destination!==void 0&&a.Destination.encode(u.destination,S.uint32(42).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=lr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.destinationId=g.string();break;case 4:C.updateMask.push(g.string());break;case 5:C.destination=a.Destination.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",destinationId:Q(u.destinationId)?String(u.destinationId):"",updateMask:Array.isArray(u==null?void 0:u.updateMask)?u.updateMask.map(S=>String(S)):[],destination:Q(u.destination)?a.Destination.fromJSON(u.destination):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.destinationId!==void 0&&(S.destinationId=u.destinationId),u.updateMask?S.updateMask=u.updateMask.map(g=>g):S.updateMask=[],u.destination!==void 0&&(S.destination=u.destination?a.Destination.toJSON(u.destination):void 0),S},fromPartial(u){var S,g,U,C;const W=lr();return W.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",W.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",W.destinationId=(U=u.destinationId)!==null&&U!==void 0?U:"",W.updateMask=((C=u.updateMask)===null||C===void 0?void 0:C.map(ve=>ve))||[],W.destination=u.destination!==void 0&&u.destination!==null?a.Destination.fromPartial(u.destination):void 0,W}};function fr(){return{collectionId:"",projectId:"",destinationId:"",connect:void 0}}a.DestinationStateEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.destinationId!==""&&S.uint32(26).string(u.destinationId),u.connect!==void 0&&S.uint32(32).int32(tt(u.connect)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=fr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.destinationId=g.string();break;case 4:C.connect=Qe(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",destinationId:Q(u.destinationId)?String(u.destinationId):"",connect:Q(u.connect)?Qe(u.connect):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.destinationId!==void 0&&(S.destinationId=u.destinationId),u.connect!==void 0&&(S.connect=u.connect!==void 0?et(u.connect):void 0),S},fromPartial(u){var S,g,U,C;const W=fr();return W.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",W.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",W.destinationId=(U=u.destinationId)!==null&&U!==void 0?U:"",W.connect=(C=u.connect)!==null&&C!==void 0?C:void 0,W}};function pr(){return{collectionId:"",projectId:"",project:void 0}}a.ProjectCreateEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.project!==void 0&&a.Project.encode(u.project,S.uint32(26).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=pr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.project=a.Project.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",project:Q(u.project)?a.Project.fromJSON(u.project):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.project!==void 0&&(S.project=u.project?a.Project.toJSON(u.project):void 0),S},fromPartial(u){var S,g;const U=pr();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",U.project=u.project!==void 0&&u.project!==null?a.Project.fromPartial(u.project):void 0,U}};function hr(){return{collectionId:"",projectId:""}}a.ProjectDeleteEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=hr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),S},fromPartial(u){var S,g;const U=hr();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",U}};function mr(){return{collectionId:"",projectId:"",updateMask:[],project:void 0}}a.ProjectUpdateEvent={encode(u,S=d.default.Writer.create()){u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId);for(const g of u.updateMask)S.uint32(26).string(g);return u.project!==void 0&&a.Project.encode(u.project,S.uint32(34).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=mr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.updateMask.push(g.string());break;case 4:C.project=a.Project.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",updateMask:Array.isArray(u==null?void 0:u.updateMask)?u.updateMask.map(S=>String(S)):[],project:Q(u.project)?a.Project.fromJSON(u.project):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.updateMask?S.updateMask=u.updateMask.map(g=>g):S.updateMask=[],u.project!==void 0&&(S.project=u.project?a.Project.toJSON(u.project):void 0),S},fromPartial(u){var S,g,U;const C=mr();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",C.updateMask=((U=u.updateMask)===null||U===void 0?void 0:U.map(W=>W))||[],C.project=u.project!==void 0&&u.project!==null?a.Project.fromPartial(u.project):void 0,C}};function vr(){return{collectionId:"",projectId:"",broadcastId:"",phase:void 0,error:void 0}}a.ProjectBroadcastStateEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.broadcastId!==""&&S.uint32(26).string(u.broadcastId),u.phase!==void 0&&S.uint32(32).int32(me(u.phase)),u.error!==void 0&&S.uint32(40).int32(ot(u.error)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=vr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.broadcastId=g.string();break;case 4:C.phase=z(g.int32());break;case 5:C.error=Xe(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",broadcastId:Q(u.broadcastId)?String(u.broadcastId):"",phase:Q(u.phase)?z(u.phase):void 0,error:Q(u.error)?Xe(u.error):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.broadcastId!==void 0&&(S.broadcastId=u.broadcastId),u.phase!==void 0&&(S.phase=u.phase!==void 0?re(u.phase):void 0),u.error!==void 0&&(S.error=u.error!==void 0?at(u.error):void 0),S},fromPartial(u){var S,g,U,C,W;const ve=vr();return ve.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",ve.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",ve.broadcastId=(U=u.broadcastId)!==null&&U!==void 0?U:"",ve.phase=(C=u.phase)!==null&&C!==void 0?C:void 0,ve.error=(W=u.error)!==null&&W!==void 0?W:void 0,ve}};function Sr(){return{collectionId:"",collection:void 0}}a.CollectionCreateEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.collection!==void 0&&a.Collection.encode(u.collection,S.uint32(18).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Sr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.collection=a.Collection.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",collection:Q(u.collection)?a.Collection.fromJSON(u.collection):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.collection!==void 0&&(S.collection=u.collection?a.Collection.toJSON(u.collection):void 0),S},fromPartial(u){var S;const g=Sr();return g.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",g.collection=u.collection!==void 0&&u.collection!==null?a.Collection.fromPartial(u.collection):void 0,g}};function yr(){return{collectionId:""}}a.CollectionDeleteEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=yr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),S},fromPartial(u){var S;const g=yr();return g.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",g}};function gr(){return{collectionId:"",updateMask:[],collection:void 0}}a.CollectionUpdateEvent={encode(u,S=d.default.Writer.create()){u.collectionId!==""&&S.uint32(10).string(u.collectionId);for(const g of u.updateMask)S.uint32(18).string(g);return u.collection!==void 0&&a.Collection.encode(u.collection,S.uint32(26).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=gr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.updateMask.push(g.string());break;case 3:C.collection=a.Collection.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",updateMask:Array.isArray(u==null?void 0:u.updateMask)?u.updateMask.map(S=>String(S)):[],collection:Q(u.collection)?a.Collection.fromJSON(u.collection):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.updateMask?S.updateMask=u.updateMask.map(g=>g):S.updateMask=[],u.collection!==void 0&&(S.collection=u.collection?a.Collection.toJSON(u.collection):void 0),S},fromPartial(u){var S,g;const U=gr();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.updateMask=((g=u.updateMask)===null||g===void 0?void 0:g.map(C=>C))||[],U.collection=u.collection!==void 0&&u.collection!==null?a.Collection.fromPartial(u.collection):void 0,U}};function br(){return{collectionId:"",sourceId:"",source:void 0}}a.SourceCreateEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.sourceId!==""&&S.uint32(18).string(u.sourceId),u.source!==void 0&&a.Source.encode(u.source,S.uint32(26).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=br();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.sourceId=g.string();break;case 3:C.source=a.Source.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",source:Q(u.source)?a.Source.fromJSON(u.source):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.source!==void 0&&(S.source=u.source?a.Source.toJSON(u.source):void 0),S},fromPartial(u){var S,g;const U=br();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.sourceId=(g=u.sourceId)!==null&&g!==void 0?g:"",U.source=u.source!==void 0&&u.source!==null?a.Source.fromPartial(u.source):void 0,U}};function Er(){return{collectionId:"",sourceId:""}}a.SourceDeleteEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.sourceId!==""&&S.uint32(18).string(u.sourceId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Er();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.sourceId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",sourceId:Q(u.sourceId)?String(u.sourceId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),S},fromPartial(u){var S,g;const U=Er();return U.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",U.sourceId=(g=u.sourceId)!==null&&g!==void 0?g:"",U}};function _r(){return{collectionId:"",sourceId:"",updateMask:[],source:void 0}}a.SourceUpdateEvent={encode(u,S=d.default.Writer.create()){u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.sourceId!==""&&S.uint32(18).string(u.sourceId);for(const g of u.updateMask)S.uint32(26).string(g);return u.source!==void 0&&a.Source.encode(u.source,S.uint32(34).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=_r();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.sourceId=g.string();break;case 3:C.updateMask.push(g.string());break;case 4:C.source=a.Source.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",updateMask:Array.isArray(u==null?void 0:u.updateMask)?u.updateMask.map(S=>String(S)):[],source:Q(u.source)?a.Source.fromJSON(u.source):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.updateMask?S.updateMask=u.updateMask.map(g=>g):S.updateMask=[],u.source!==void 0&&(S.source=u.source?a.Source.toJSON(u.source):void 0),S},fromPartial(u){var S,g,U;const C=_r();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.sourceId=(g=u.sourceId)!==null&&g!==void 0?g:"",C.updateMask=((U=u.updateMask)===null||U===void 0?void 0:U.map(W=>W))||[],C.source=u.source!==void 0&&u.source!==null?a.Source.fromPartial(u.source):void 0,C}};function Tr(){return{collectionId:"",sourceId:"",projectId:"",source:void 0}}a.SourceAddEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.sourceId!==""&&S.uint32(18).string(u.sourceId),u.projectId!==""&&S.uint32(26).string(u.projectId),u.source!==void 0&&a.Source.encode(u.source,S.uint32(34).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Tr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.sourceId=g.string();break;case 3:C.projectId=g.string();break;case 4:C.source=a.Source.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",projectId:Q(u.projectId)?String(u.projectId):"",source:Q(u.source)?a.Source.fromJSON(u.source):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.projectId!==void 0&&(S.projectId=u.projectId),u.source!==void 0&&(S.source=u.source?a.Source.toJSON(u.source):void 0),S},fromPartial(u){var S,g,U;const C=Tr();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.sourceId=(g=u.sourceId)!==null&&g!==void 0?g:"",C.projectId=(U=u.projectId)!==null&&U!==void 0?U:"",C.source=u.source!==void 0&&u.source!==null?a.Source.fromPartial(u.source):void 0,C}};function Ir(){return{collectionId:"",sourceId:"",projectId:""}}a.SourceRemoveEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.sourceId!==""&&S.uint32(18).string(u.sourceId),u.projectId!==""&&S.uint32(26).string(u.projectId),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Ir();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.sourceId=g.string();break;case 3:C.projectId=g.string();break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",projectId:Q(u.projectId)?String(u.projectId):""}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.projectId!==void 0&&(S.projectId=u.projectId),S},fromPartial(u){var S,g,U;const C=Ir();return C.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",C.sourceId=(g=u.sourceId)!==null&&g!==void 0?g:"",C.projectId=(U=u.projectId)!==null&&U!==void 0?U:"",C}};function Cr(){return{collectionId:"",projectId:"",sourceId:"",connect:void 0}}a.SourceStateEvent={encode(u,S=d.default.Writer.create()){return u.collectionId!==""&&S.uint32(10).string(u.collectionId),u.projectId!==""&&S.uint32(18).string(u.projectId),u.sourceId!==""&&S.uint32(26).string(u.sourceId),u.connect!==void 0&&S.uint32(32).int32(tt(u.connect)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Cr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collectionId=g.string();break;case 2:C.projectId=g.string();break;case 3:C.sourceId=g.string();break;case 4:C.connect=Qe(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collectionId:Q(u.collectionId)?String(u.collectionId):"",projectId:Q(u.projectId)?String(u.projectId):"",sourceId:Q(u.sourceId)?String(u.sourceId):"",connect:Q(u.connect)?Qe(u.connect):void 0}},toJSON(u){const S={};return u.collectionId!==void 0&&(S.collectionId=u.collectionId),u.projectId!==void 0&&(S.projectId=u.projectId),u.sourceId!==void 0&&(S.sourceId=u.sourceId),u.connect!==void 0&&(S.connect=u.connect!==void 0?et(u.connect):void 0),S},fromPartial(u){var S,g,U,C;const W=Cr();return W.collectionId=(S=u.collectionId)!==null&&S!==void 0?S:"",W.projectId=(g=u.projectId)!==null&&g!==void 0?g:"",W.sourceId=(U=u.sourceId)!==null&&U!==void 0?U:"",W.connect=(C=u.connect)!==null&&C!==void 0?C:void 0,W}};function Rr(){return{create:void 0,update:void 0,delete:void 0}}a.CollectionEvent={encode(u,S=d.default.Writer.create()){return u.create!==void 0&&a.CollectionCreateEvent.encode(u.create,S.uint32(10).fork()).ldelim(),u.update!==void 0&&a.CollectionUpdateEvent.encode(u.update,S.uint32(18).fork()).ldelim(),u.delete!==void 0&&a.CollectionDeleteEvent.encode(u.delete,S.uint32(26).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Rr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.create=a.CollectionCreateEvent.decode(g,g.uint32());break;case 2:C.update=a.CollectionUpdateEvent.decode(g,g.uint32());break;case 3:C.delete=a.CollectionDeleteEvent.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{create:Q(u.create)?a.CollectionCreateEvent.fromJSON(u.create):void 0,update:Q(u.update)?a.CollectionUpdateEvent.fromJSON(u.update):void 0,delete:Q(u.delete)?a.CollectionDeleteEvent.fromJSON(u.delete):void 0}},toJSON(u){const S={};return u.create!==void 0&&(S.create=u.create?a.CollectionCreateEvent.toJSON(u.create):void 0),u.update!==void 0&&(S.update=u.update?a.CollectionUpdateEvent.toJSON(u.update):void 0),u.delete!==void 0&&(S.delete=u.delete?a.CollectionDeleteEvent.toJSON(u.delete):void 0),S},fromPartial(u){const S=Rr();return S.create=u.create!==void 0&&u.create!==null?a.CollectionCreateEvent.fromPartial(u.create):void 0,S.update=u.update!==void 0&&u.update!==null?a.CollectionUpdateEvent.fromPartial(u.update):void 0,S.delete=u.delete!==void 0&&u.delete!==null?a.CollectionDeleteEvent.fromPartial(u.delete):void 0,S}};function Or(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.DestinationEvent={encode(u,S=d.default.Writer.create()){return u.create!==void 0&&a.DestinationCreateEvent.encode(u.create,S.uint32(10).fork()).ldelim(),u.update!==void 0&&a.DestinationUpdateEvent.encode(u.update,S.uint32(18).fork()).ldelim(),u.delete!==void 0&&a.DestinationDeleteEvent.encode(u.delete,S.uint32(26).fork()).ldelim(),u.state!==void 0&&a.DestinationStateEvent.encode(u.state,S.uint32(34).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Or();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.create=a.DestinationCreateEvent.decode(g,g.uint32());break;case 2:C.update=a.DestinationUpdateEvent.decode(g,g.uint32());break;case 3:C.delete=a.DestinationDeleteEvent.decode(g,g.uint32());break;case 4:C.state=a.DestinationStateEvent.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{create:Q(u.create)?a.DestinationCreateEvent.fromJSON(u.create):void 0,update:Q(u.update)?a.DestinationUpdateEvent.fromJSON(u.update):void 0,delete:Q(u.delete)?a.DestinationDeleteEvent.fromJSON(u.delete):void 0,state:Q(u.state)?a.DestinationStateEvent.fromJSON(u.state):void 0}},toJSON(u){const S={};return u.create!==void 0&&(S.create=u.create?a.DestinationCreateEvent.toJSON(u.create):void 0),u.update!==void 0&&(S.update=u.update?a.DestinationUpdateEvent.toJSON(u.update):void 0),u.delete!==void 0&&(S.delete=u.delete?a.DestinationDeleteEvent.toJSON(u.delete):void 0),u.state!==void 0&&(S.state=u.state?a.DestinationStateEvent.toJSON(u.state):void 0),S},fromPartial(u){const S=Or();return S.create=u.create!==void 0&&u.create!==null?a.DestinationCreateEvent.fromPartial(u.create):void 0,S.update=u.update!==void 0&&u.update!==null?a.DestinationUpdateEvent.fromPartial(u.update):void 0,S.delete=u.delete!==void 0&&u.delete!==null?a.DestinationDeleteEvent.fromPartial(u.delete):void 0,S.state=u.state!==void 0&&u.state!==null?a.DestinationStateEvent.fromPartial(u.state):void 0,S}};function kr(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.ProjectEvent={encode(u,S=d.default.Writer.create()){return u.create!==void 0&&a.ProjectCreateEvent.encode(u.create,S.uint32(10).fork()).ldelim(),u.update!==void 0&&a.ProjectUpdateEvent.encode(u.update,S.uint32(18).fork()).ldelim(),u.delete!==void 0&&a.ProjectDeleteEvent.encode(u.delete,S.uint32(26).fork()).ldelim(),u.state!==void 0&&a.ProjectBroadcastStateEvent.encode(u.state,S.uint32(34).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=kr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.create=a.ProjectCreateEvent.decode(g,g.uint32());break;case 2:C.update=a.ProjectUpdateEvent.decode(g,g.uint32());break;case 3:C.delete=a.ProjectDeleteEvent.decode(g,g.uint32());break;case 4:C.state=a.ProjectBroadcastStateEvent.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{create:Q(u.create)?a.ProjectCreateEvent.fromJSON(u.create):void 0,update:Q(u.update)?a.ProjectUpdateEvent.fromJSON(u.update):void 0,delete:Q(u.delete)?a.ProjectDeleteEvent.fromJSON(u.delete):void 0,state:Q(u.state)?a.ProjectBroadcastStateEvent.fromJSON(u.state):void 0}},toJSON(u){const S={};return u.create!==void 0&&(S.create=u.create?a.ProjectCreateEvent.toJSON(u.create):void 0),u.update!==void 0&&(S.update=u.update?a.ProjectUpdateEvent.toJSON(u.update):void 0),u.delete!==void 0&&(S.delete=u.delete?a.ProjectDeleteEvent.toJSON(u.delete):void 0),u.state!==void 0&&(S.state=u.state?a.ProjectBroadcastStateEvent.toJSON(u.state):void 0),S},fromPartial(u){const S=kr();return S.create=u.create!==void 0&&u.create!==null?a.ProjectCreateEvent.fromPartial(u.create):void 0,S.update=u.update!==void 0&&u.update!==null?a.ProjectUpdateEvent.fromPartial(u.update):void 0,S.delete=u.delete!==void 0&&u.delete!==null?a.ProjectDeleteEvent.fromPartial(u.delete):void 0,S.state=u.state!==void 0&&u.state!==null?a.ProjectBroadcastStateEvent.fromPartial(u.state):void 0,S}};function Pr(){return{create:void 0,update:void 0,delete:void 0,add:void 0,remove:void 0,state:void 0}}a.SourceEvent={encode(u,S=d.default.Writer.create()){return u.create!==void 0&&a.SourceCreateEvent.encode(u.create,S.uint32(10).fork()).ldelim(),u.update!==void 0&&a.SourceUpdateEvent.encode(u.update,S.uint32(18).fork()).ldelim(),u.delete!==void 0&&a.SourceDeleteEvent.encode(u.delete,S.uint32(26).fork()).ldelim(),u.add!==void 0&&a.SourceAddEvent.encode(u.add,S.uint32(34).fork()).ldelim(),u.remove!==void 0&&a.SourceDeleteEvent.encode(u.remove,S.uint32(42).fork()).ldelim(),u.state!==void 0&&a.SourceStateEvent.encode(u.state,S.uint32(50).fork()).ldelim(),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Pr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.create=a.SourceCreateEvent.decode(g,g.uint32());break;case 2:C.update=a.SourceUpdateEvent.decode(g,g.uint32());break;case 3:C.delete=a.SourceDeleteEvent.decode(g,g.uint32());break;case 4:C.add=a.SourceAddEvent.decode(g,g.uint32());break;case 5:C.remove=a.SourceDeleteEvent.decode(g,g.uint32());break;case 6:C.state=a.SourceStateEvent.decode(g,g.uint32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{create:Q(u.create)?a.SourceCreateEvent.fromJSON(u.create):void 0,update:Q(u.update)?a.SourceUpdateEvent.fromJSON(u.update):void 0,delete:Q(u.delete)?a.SourceDeleteEvent.fromJSON(u.delete):void 0,add:Q(u.add)?a.SourceAddEvent.fromJSON(u.add):void 0,remove:Q(u.remove)?a.SourceDeleteEvent.fromJSON(u.remove):void 0,state:Q(u.state)?a.SourceStateEvent.fromJSON(u.state):void 0}},toJSON(u){const S={};return u.create!==void 0&&(S.create=u.create?a.SourceCreateEvent.toJSON(u.create):void 0),u.update!==void 0&&(S.update=u.update?a.SourceUpdateEvent.toJSON(u.update):void 0),u.delete!==void 0&&(S.delete=u.delete?a.SourceDeleteEvent.toJSON(u.delete):void 0),u.add!==void 0&&(S.add=u.add?a.SourceAddEvent.toJSON(u.add):void 0),u.remove!==void 0&&(S.remove=u.remove?a.SourceDeleteEvent.toJSON(u.remove):void 0),u.state!==void 0&&(S.state=u.state?a.SourceStateEvent.toJSON(u.state):void 0),S},fromPartial(u){const S=Pr();return S.create=u.create!==void 0&&u.create!==null?a.SourceCreateEvent.fromPartial(u.create):void 0,S.update=u.update!==void 0&&u.update!==null?a.SourceUpdateEvent.fromPartial(u.update):void 0,S.delete=u.delete!==void 0&&u.delete!==null?a.SourceDeleteEvent.fromPartial(u.delete):void 0,S.add=u.add!==void 0&&u.add!==null?a.SourceAddEvent.fromPartial(u.add):void 0,S.remove=u.remove!==void 0&&u.remove!==null?a.SourceDeleteEvent.fromPartial(u.remove):void 0,S.state=u.state!==void 0&&u.state!==null?a.SourceStateEvent.fromPartial(u.state):void 0,S}};function Nr(){return{collection:void 0,destination:void 0,project:void 0,source:void 0,unspecified:void 0}}a.LiveEvent={encode(u,S=d.default.Writer.create()){return u.collection!==void 0&&a.CollectionEvent.encode(u.collection,S.uint32(10).fork()).ldelim(),u.destination!==void 0&&a.DestinationEvent.encode(u.destination,S.uint32(18).fork()).ldelim(),u.project!==void 0&&a.ProjectEvent.encode(u.project,S.uint32(26).fork()).ldelim(),u.source!==void 0&&a.SourceEvent.encode(u.source,S.uint32(34).fork()).ldelim(),u.unspecified!==void 0&&S.uint32(40).int32((0,h.nullValueToNumber)(u.unspecified)),S},decode(u,S){const g=u instanceof d.default.Reader?u:new d.default.Reader(u);let U=S===void 0?g.len:g.pos+S;const C=Nr();for(;g.pos<U;){const W=g.uint32();switch(W>>>3){case 1:C.collection=a.CollectionEvent.decode(g,g.uint32());break;case 2:C.destination=a.DestinationEvent.decode(g,g.uint32());break;case 3:C.project=a.ProjectEvent.decode(g,g.uint32());break;case 4:C.source=a.SourceEvent.decode(g,g.uint32());break;case 5:C.unspecified=(0,h.nullValueFromJSON)(g.int32());break;default:g.skipType(W&7);break}}return C},fromJSON(u){return{collection:Q(u.collection)?a.CollectionEvent.fromJSON(u.collection):void 0,destination:Q(u.destination)?a.DestinationEvent.fromJSON(u.destination):void 0,project:Q(u.project)?a.ProjectEvent.fromJSON(u.project):void 0,source:Q(u.source)?a.SourceEvent.fromJSON(u.source):void 0,unspecified:Q(u.unspecified)?(0,h.nullValueFromJSON)(u.unspecified):void 0}},toJSON(u){const S={};return u.collection!==void 0&&(S.collection=u.collection?a.CollectionEvent.toJSON(u.collection):void 0),u.destination!==void 0&&(S.destination=u.destination?a.DestinationEvent.toJSON(u.destination):void 0),u.project!==void 0&&(S.project=u.project?a.ProjectEvent.toJSON(u.project):void 0),u.source!==void 0&&(S.source=u.source?a.SourceEvent.toJSON(u.source):void 0),u.unspecified!==void 0&&(S.unspecified=u.unspecified!==void 0?(0,h.nullValueToJSON)(u.unspecified):void 0),S},fromPartial(u){var S;const g=Nr();return g.collection=u.collection!==void 0&&u.collection!==null?a.CollectionEvent.fromPartial(u.collection):void 0,g.destination=u.destination!==void 0&&u.destination!==null?a.DestinationEvent.fromPartial(u.destination):void 0,g.project=u.project!==void 0&&u.project!==null?a.ProjectEvent.fromPartial(u.project):void 0,g.source=u.source!==void 0&&u.source!==null?a.SourceEvent.fromPartial(u.source):void 0,g.unspecified=(S=u.unspecified)!==null&&S!==void 0?S:void 0,g}};class wr{constructor(S,g){this.service=(g==null?void 0:g.service)||"live.v21.CollectionService",this.rpc=S,this.CreateCollection=this.CreateCollection.bind(this),this.GetCollection=this.GetCollection.bind(this),this.GetCollections=this.GetCollections.bind(this),this.UpdateCollection=this.UpdateCollection.bind(this),this.DeleteCollection=this.DeleteCollection.bind(this)}CreateCollection(S){const g=a.CreateCollectionRequest.encode(S).finish();return this.rpc.request(this.service,"CreateCollection",g).then(C=>a.CreateCollectionResponse.decode(new d.default.Reader(C)))}GetCollection(S){const g=a.GetCollectionRequest.encode(S).finish();return this.rpc.request(this.service,"GetCollection",g).then(C=>a.GetCollectionResponse.decode(new d.default.Reader(C)))}GetCollections(S){const g=a.GetCollectionsRequest.encode(S).finish();return this.rpc.request(this.service,"GetCollections",g).then(C=>a.GetCollectionsResponse.decode(new d.default.Reader(C)))}UpdateCollection(S){const g=a.UpdateCollectionRequest.encode(S).finish();return this.rpc.request(this.service,"UpdateCollection",g).then(C=>a.UpdateCollectionResponse.decode(new d.default.Reader(C)))}DeleteCollection(S){const g=a.DeleteCollectionRequest.encode(S).finish();return this.rpc.request(this.service,"DeleteCollection",g).then(C=>a.DeleteCollectionResponse.decode(new d.default.Reader(C)))}}a.CollectionServiceClientImpl=wr,a.CollectionServiceDefinition={name:"CollectionService",fullName:"live.v21.CollectionService",methods:{createCollection:{name:"CreateCollection",requestType:a.CreateCollectionRequest,requestStream:!1,responseType:a.CreateCollectionResponse,responseStream:!1,options:{}},getCollection:{name:"GetCollection",requestType:a.GetCollectionRequest,requestStream:!1,responseType:a.GetCollectionResponse,responseStream:!1,options:{}},getCollections:{name:"GetCollections",requestType:a.GetCollectionsRequest,requestStream:!1,responseType:a.GetCollectionsResponse,responseStream:!1,options:{}},updateCollection:{name:"UpdateCollection",requestType:a.UpdateCollectionRequest,requestStream:!1,responseType:a.UpdateCollectionResponse,responseStream:!1,options:{}},deleteCollection:{name:"DeleteCollection",requestType:a.DeleteCollectionRequest,requestStream:!1,responseType:a.DeleteCollectionResponse,responseStream:!1,options:{}}}};class Ar{constructor(S,g){this.service=(g==null?void 0:g.service)||"live.v21.ProjectService",this.rpc=S,this.CreateProject=this.CreateProject.bind(this),this.GetProject=this.GetProject.bind(this),this.DeleteProject=this.DeleteProject.bind(this),this.UpdateProject=this.UpdateProject.bind(this),this.StartProjectBroadcast=this.StartProjectBroadcast.bind(this),this.StopProjectBroadcast=this.StopProjectBroadcast.bind(this),this.StartProjectWebRtc=this.StartProjectWebRtc.bind(this),this.StopProjectWebRtc=this.StopProjectWebRtc.bind(this),this.GetProjectBroadcastSnapshot=this.GetProjectBroadcastSnapshot.bind(this),this.GetProjectBroadcastStatus=this.GetProjectBroadcastStatus.bind(this)}CreateProject(S){const g=a.CreateProjectRequest.encode(S).finish();return this.rpc.request(this.service,"CreateProject",g).then(C=>a.CreateProjectResponse.decode(new d.default.Reader(C)))}GetProject(S){const g=a.GetProjectRequest.encode(S).finish();return this.rpc.request(this.service,"GetProject",g).then(C=>a.GetProjectResponse.decode(new d.default.Reader(C)))}DeleteProject(S){const g=a.DeleteProjectRequest.encode(S).finish();return this.rpc.request(this.service,"DeleteProject",g).then(C=>a.DeleteProjectResponse.decode(new d.default.Reader(C)))}UpdateProject(S){const g=a.UpdateProjectRequest.encode(S).finish();return this.rpc.request(this.service,"UpdateProject",g).then(C=>a.UpdateProjectResponse.decode(new d.default.Reader(C)))}StartProjectBroadcast(S){const g=a.StartProjectBroadcastRequest.encode(S).finish();return this.rpc.request(this.service,"StartProjectBroadcast",g).then(C=>a.StartProjectBroadcastResponse.decode(new d.default.Reader(C)))}StopProjectBroadcast(S){const g=a.StopProjectBroadcastRequest.encode(S).finish();return this.rpc.request(this.service,"StopProjectBroadcast",g).then(C=>a.StopProjectBroadcastResponse.decode(new d.default.Reader(C)))}StartProjectWebRtc(S){const g=a.StartProjectWebRtcRequest.encode(S).finish();return this.rpc.request(this.service,"StartProjectWebRtc",g).then(C=>a.StartProjectWebRtcResponse.decode(new d.default.Reader(C)))}StopProjectWebRtc(S){const g=a.StopProjectWebRtcRequest.encode(S).finish();return this.rpc.request(this.service,"StopProjectWebRtc",g).then(C=>a.StopProjectWebRtcResponse.decode(new d.default.Reader(C)))}GetProjectBroadcastSnapshot(S){const g=a.GetProjectBroadcastSnapshotRequest.encode(S).finish();return this.rpc.request(this.service,"GetProjectBroadcastSnapshot",g).then(C=>a.GetProjectBroadcastSnapshotResponse.decode(new d.default.Reader(C)))}GetProjectBroadcastStatus(S){const g=a.GetProjectBroadcastStatusRequest.encode(S).finish();return this.rpc.request(this.service,"GetProjectBroadcastStatus",g).then(C=>a.GetProjectBroadcastStatusResponse.decode(new d.default.Reader(C)))}}a.ProjectServiceClientImpl=Ar,a.ProjectServiceDefinition={name:"ProjectService",fullName:"live.v21.ProjectService",methods:{createProject:{name:"CreateProject",requestType:a.CreateProjectRequest,requestStream:!1,responseType:a.CreateProjectResponse,responseStream:!1,options:{}},getProject:{name:"GetProject",requestType:a.GetProjectRequest,requestStream:!1,responseType:a.GetProjectResponse,responseStream:!1,options:{}},deleteProject:{name:"DeleteProject",requestType:a.DeleteProjectRequest,requestStream:!1,responseType:a.DeleteProjectResponse,responseStream:!1,options:{}},updateProject:{name:"UpdateProject",requestType:a.UpdateProjectRequest,requestStream:!1,responseType:a.UpdateProjectResponse,responseStream:!1,options:{}},startProjectBroadcast:{name:"StartProjectBroadcast",requestType:a.StartProjectBroadcastRequest,requestStream:!1,responseType:a.StartProjectBroadcastResponse,responseStream:!1,options:{}},stopProjectBroadcast:{name:"StopProjectBroadcast",requestType:a.StopProjectBroadcastRequest,requestStream:!1,responseType:a.StopProjectBroadcastResponse,responseStream:!1,options:{}},startProjectWebRtc:{name:"StartProjectWebRtc",requestType:a.StartProjectWebRtcRequest,requestStream:!1,responseType:a.StartProjectWebRtcResponse,responseStream:!1,options:{}},stopProjectWebRtc:{name:"StopProjectWebRtc",requestType:a.StopProjectWebRtcRequest,requestStream:!1,responseType:a.StopProjectWebRtcResponse,responseStream:!1,options:{}},getProjectBroadcastSnapshot:{name:"GetProjectBroadcastSnapshot",requestType:a.GetProjectBroadcastSnapshotRequest,requestStream:!1,responseType:a.GetProjectBroadcastSnapshotResponse,responseStream:!1,options:{}},getProjectBroadcastStatus:{name:"GetProjectBroadcastStatus",requestType:a.GetProjectBroadcastStatusRequest,requestStream:!1,responseType:a.GetProjectBroadcastStatusResponse,responseStream:!1,options:{}}}};class Lr{constructor(S,g){this.service=(g==null?void 0:g.service)||"live.v21.DestinationService",this.rpc=S,this.CreateDestination=this.CreateDestination.bind(this),this.GetDestination=this.GetDestination.bind(this),this.UpdateDestination=this.UpdateDestination.bind(this),this.DeleteDestination=this.DeleteDestination.bind(this)}CreateDestination(S){const g=a.CreateDestinationRequest.encode(S).finish();return this.rpc.request(this.service,"CreateDestination",g).then(C=>a.CreateDestinationResponse.decode(new d.default.Reader(C)))}GetDestination(S){const g=a.GetDestinationRequest.encode(S).finish();return this.rpc.request(this.service,"GetDestination",g).then(C=>a.GetDestinationResponse.decode(new d.default.Reader(C)))}UpdateDestination(S){const g=a.UpdateDestinationRequest.encode(S).finish();return this.rpc.request(this.service,"UpdateDestination",g).then(C=>a.UpdateDestinationResponse.decode(new d.default.Reader(C)))}DeleteDestination(S){const g=a.DeleteDestinationRequest.encode(S).finish();return this.rpc.request(this.service,"DeleteDestination",g).then(C=>a.DeleteDestinationResponse.decode(new d.default.Reader(C)))}}a.DestinationServiceClientImpl=Lr,a.DestinationServiceDefinition={name:"DestinationService",fullName:"live.v21.DestinationService",methods:{createDestination:{name:"CreateDestination",requestType:a.CreateDestinationRequest,requestStream:!1,responseType:a.CreateDestinationResponse,responseStream:!1,options:{}},getDestination:{name:"GetDestination",requestType:a.GetDestinationRequest,requestStream:!1,responseType:a.GetDestinationResponse,responseStream:!1,options:{}},updateDestination:{name:"UpdateDestination",requestType:a.UpdateDestinationRequest,requestStream:!1,responseType:a.UpdateDestinationResponse,responseStream:!1,options:{}},deleteDestination:{name:"DeleteDestination",requestType:a.DeleteDestinationRequest,requestStream:!1,responseType:a.DeleteDestinationResponse,responseStream:!1,options:{}}}};class Dr{constructor(S,g){this.service=(g==null?void 0:g.service)||"live.v21.SourceService",this.rpc=S,this.CreateSource=this.CreateSource.bind(this),this.DeleteSource=this.DeleteSource.bind(this),this.UpdateSource=this.UpdateSource.bind(this),this.UpdateSourceInProject=this.UpdateSourceInProject.bind(this),this.GetSource=this.GetSource.bind(this),this.GetSources=this.GetSources.bind(this),this.AddSourceToProject=this.AddSourceToProject.bind(this),this.RemoveSourceFromProject=this.RemoveSourceFromProject.bind(this)}CreateSource(S){const g=a.CreateSourceRequest.encode(S).finish();return this.rpc.request(this.service,"CreateSource",g).then(C=>a.CreateSourceResponse.decode(new d.default.Reader(C)))}DeleteSource(S){const g=a.DeleteSourceRequest.encode(S).finish();return this.rpc.request(this.service,"DeleteSource",g).then(C=>a.DeleteSourceResponse.decode(new d.default.Reader(C)))}UpdateSource(S){const g=a.UpdateSourceRequest.encode(S).finish();return this.rpc.request(this.service,"UpdateSource",g).then(C=>a.UpdateSourceResponse.decode(new d.default.Reader(C)))}UpdateSourceInProject(S){const g=a.UpdateSourceInProjectRequest.encode(S).finish();return this.rpc.request(this.service,"UpdateSourceInProject",g).then(C=>a.UpdateSourceInProjectResponse.decode(new d.default.Reader(C)))}GetSource(S){const g=a.GetSourceRequest.encode(S).finish();return this.rpc.request(this.service,"GetSource",g).then(C=>a.GetSourceResponse.decode(new d.default.Reader(C)))}GetSources(S){const g=a.GetSourcesRequest.encode(S).finish();return this.rpc.request(this.service,"GetSources",g).then(C=>a.GetSourcesResponse.decode(new d.default.Reader(C)))}AddSourceToProject(S){const g=a.AddSourceToProjectRequest.encode(S).finish();return this.rpc.request(this.service,"AddSourceToProject",g).then(C=>a.AddSourceToProjectResponse.decode(new d.default.Reader(C)))}RemoveSourceFromProject(S){const g=a.RemoveSourceFromProjectRequest.encode(S).finish();return this.rpc.request(this.service,"RemoveSourceFromProject",g).then(C=>a.RemoveSourceFromProjectResponse.decode(new d.default.Reader(C)))}}a.SourceServiceClientImpl=Dr,a.SourceServiceDefinition={name:"SourceService",fullName:"live.v21.SourceService",methods:{createSource:{name:"CreateSource",requestType:a.CreateSourceRequest,requestStream:!1,responseType:a.CreateSourceResponse,responseStream:!1,options:{}},deleteSource:{name:"DeleteSource",requestType:a.DeleteSourceRequest,requestStream:!1,responseType:a.DeleteSourceResponse,responseStream:!1,options:{}},updateSource:{name:"UpdateSource",requestType:a.UpdateSourceRequest,requestStream:!1,responseType:a.UpdateSourceResponse,responseStream:!1,options:{}},updateSourceInProject:{name:"UpdateSourceInProject",requestType:a.UpdateSourceInProjectRequest,requestStream:!1,responseType:a.UpdateSourceInProjectResponse,responseStream:!1,options:{}},getSource:{name:"GetSource",requestType:a.GetSourceRequest,requestStream:!1,responseType:a.GetSourceResponse,responseStream:!1,options:{}},getSources:{name:"GetSources",requestType:a.GetSourcesRequest,requestStream:!1,responseType:a.GetSourcesResponse,responseStream:!1,options:{}},addSourceToProject:{name:"AddSourceToProject",requestType:a.AddSourceToProjectRequest,requestStream:!1,responseType:a.AddSourceToProjectResponse,responseStream:!1,options:{}},removeSourceFromProject:{name:"RemoveSourceFromProject",requestType:a.RemoveSourceFromProjectRequest,requestStream:!1,responseType:a.RemoveSourceFromProjectResponse,responseStream:!1,options:{}}}};class $r{constructor(S,g){this.service=(g==null?void 0:g.service)||"live.v21.BackendAuthenticationService",this.rpc=S,this.CreateAccessToken=this.CreateAccessToken.bind(this)}CreateAccessToken(S){const g=a.CreateAccessTokenRequest.encode(S).finish();return this.rpc.request(this.service,"CreateAccessToken",g).then(C=>a.CreateAccessTokenResponse.decode(new d.default.Reader(C)))}}a.BackendAuthenticationServiceClientImpl=$r,a.BackendAuthenticationServiceDefinition={name:"BackendAuthenticationService",fullName:"live.v21.BackendAuthenticationService",methods:{createAccessToken:{name:"CreateAccessToken",requestType:a.CreateAccessTokenRequest,requestStream:!1,responseType:a.CreateAccessTokenResponse,responseStream:!1,options:{}}}};class Mr{constructor(S,g){this.service=(g==null?void 0:g.service)||"live.v21.AuthenticationService",this.rpc=S,this.CreateGuestAccessToken=this.CreateGuestAccessToken.bind(this),this.GetGuestCode=this.GetGuestCode.bind(this),this.GetGuestCodes=this.GetGuestCodes.bind(this),this.DeleteGuestCode=this.DeleteGuestCode.bind(this),this.RefreshAccessToken=this.RefreshAccessToken.bind(this),this.CreateWebRtcAccessToken=this.CreateWebRtcAccessToken.bind(this)}CreateGuestAccessToken(S){const g=a.CreateGuestAccessTokenRequest.encode(S).finish();return this.rpc.request(this.service,"CreateGuestAccessToken",g).then(C=>a.CreateGuestAccessTokenResponse.decode(new d.default.Reader(C)))}GetGuestCode(S){const g=a.GetGuestCodeRequest.encode(S).finish();return this.rpc.request(this.service,"GetGuestCode",g).then(C=>a.GetGuestCodeResponse.decode(new d.default.Reader(C)))}GetGuestCodes(S){const g=a.GetGuestCodesRequest.encode(S).finish();return this.rpc.request(this.service,"GetGuestCodes",g).then(C=>a.GetGuestCodesResponse.decode(new d.default.Reader(C)))}DeleteGuestCode(S){const g=a.DeleteGuestCodeRequest.encode(S).finish();return this.rpc.request(this.service,"DeleteGuestCode",g).then(C=>a.DeleteGuestCodeResponse.decode(new d.default.Reader(C)))}RefreshAccessToken(S){const g=a.RefreshAccessTokenRequest.encode(S).finish();return this.rpc.request(this.service,"RefreshAccessToken",g).then(C=>a.RefreshAccessTokenResponse.decode(new d.default.Reader(C)))}CreateWebRtcAccessToken(S){const g=a.CreateWebRtcAccessTokenRequest.encode(S).finish();return this.rpc.request(this.service,"CreateWebRtcAccessToken",g).then(C=>a.CreateWebRtcAccessTokenResponse.decode(new d.default.Reader(C)))}}a.AuthenticationServiceClientImpl=Mr,a.AuthenticationServiceDefinition={name:"AuthenticationService",fullName:"live.v21.AuthenticationService",methods:{createGuestAccessToken:{name:"CreateGuestAccessToken",requestType:a.CreateGuestAccessTokenRequest,requestStream:!1,responseType:a.CreateGuestAccessTokenResponse,responseStream:!1,options:{}},getGuestCode:{name:"GetGuestCode",requestType:a.GetGuestCodeRequest,requestStream:!1,responseType:a.GetGuestCodeResponse,responseStream:!1,options:{}},getGuestCodes:{name:"GetGuestCodes",requestType:a.GetGuestCodesRequest,requestStream:!1,responseType:a.GetGuestCodesResponse,responseStream:!1,options:{}},deleteGuestCode:{name:"DeleteGuestCode",requestType:a.DeleteGuestCodeRequest,requestStream:!1,responseType:a.DeleteGuestCodeResponse,responseStream:!1,options:{}},refreshAccessToken:{name:"RefreshAccessToken",requestType:a.RefreshAccessTokenRequest,requestStream:!1,responseType:a.RefreshAccessTokenResponse,responseStream:!1,options:{}},createWebRtcAccessToken:{name:"CreateWebRtcAccessToken",requestType:a.CreateWebRtcAccessTokenRequest,requestStream:!1,responseType:a.CreateWebRtcAccessTokenResponse,responseStream:!1,options:{}}}};class Ur{constructor(S,g){this.service=(g==null?void 0:g.service)||"live.v21.PublicAuthenticationService",this.rpc=S,this.GetJsonWebKeySet=this.GetJsonWebKeySet.bind(this),this.GuestCodeRedirect=this.GuestCodeRedirect.bind(this),this.UseGuestCode=this.UseGuestCode.bind(this)}GetJsonWebKeySet(S){const g=a.GetJsonWebKeySetRequest.encode(S).finish();return this.rpc.request(this.service,"GetJsonWebKeySet",g).then(C=>a.GetJsonWebKeySetResponse.decode(new d.default.Reader(C)))}GuestCodeRedirect(S){const g=a.GuestCodeRedirectRequest.encode(S).finish();return this.rpc.request(this.service,"GuestCodeRedirect",g).then(C=>a.GuestCodeRedirectResponse.decode(new d.default.Reader(C)))}UseGuestCode(S){const g=a.UseGuestCodeRequest.encode(S).finish();return this.rpc.request(this.service,"UseGuestCode",g).then(C=>a.UseGuestCodeResponse.decode(new d.default.Reader(C)))}}a.PublicAuthenticationServiceClientImpl=Ur,a.PublicAuthenticationServiceDefinition={name:"PublicAuthenticationService",fullName:"live.v21.PublicAuthenticationService",methods:{getJsonWebKeySet:{name:"GetJsonWebKeySet",requestType:a.GetJsonWebKeySetRequest,requestStream:!1,responseType:a.GetJsonWebKeySetResponse,responseStream:!1,options:{}},guestCodeRedirect:{name:"GuestCodeRedirect",requestType:a.GuestCodeRedirectRequest,requestStream:!1,responseType:a.GuestCodeRedirectResponse,responseStream:!1,options:{}},useGuestCode:{name:"UseGuestCode",requestType:a.UseGuestCodeRequest,requestStream:!1,responseType:a.UseGuestCodeResponse,responseStream:!1,options:{}}}};var ge=(()=>{if(typeof ge!="undefined")return ge;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();function Br(u){if(ge.Buffer)return Uint8Array.from(ge.Buffer.from(u,"base64"));{const S=ge.atob(u),g=new Uint8Array(S.length);for(let U=0;U<S.length;++U)g[U]=S.charCodeAt(U);return g}}function Vr(u){if(ge.Buffer)return ge.Buffer.from(u).toString("base64");{const S=[];return u.forEach(g=>{S.push(String.fromCharCode(g))}),ge.btoa(S.join(""))}}function ft(u){const S=new Date(u),g=S.getTime()/1e3,U=S.getTime()%1e3*1e6;return{seconds:g,nanos:U}}function pt(u){let S=u.seconds*1e3;return S+=u.nanos/1e6,new Date(S).toISOString()}function Q(u){return u!=null}})(api$1),function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(A,V,$,L){L===void 0&&(L=$);var D=Object.getOwnPropertyDescriptor(V,$);(!D||("get"in D?!V.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return V[$]}}),Object.defineProperty(A,L,D)}:function(A,V,$,L){L===void 0&&(L=$),A[L]=V[$]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(A,V){Object.defineProperty(A,"default",{enumerable:!0,value:V})}:function(A,V){A.default=V}),c=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(A,V,$,L){var D=arguments.length,H=D<3?V:L===null?L=Object.getOwnPropertyDescriptor(V,$):L,O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(A,V,$,L);else for(var x=A.length-1;x>=0;x--)(O=A[x])&&(H=(D<3?O(H):D>3?O(V,$,H):O(V,$))||H);return D>3&&H&&Object.defineProperty(V,$,H),H},h=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(A){if(A&&A.__esModule)return A;var V={};if(A!=null)for(var $ in A)$!=="default"&&Object.prototype.hasOwnProperty.call(A,$)&&s(V,A,$);return d(V,A),V},v=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(A,V){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(A,V)};Object.defineProperty(a,"__esModule",{value:!0}),a.LiveApi=void 0;const y=h(lib$1),b=api$2,_=h(api$1),T=decorator,I="LiveApi";class N extends b.ApiClient{constructor(V,$,L,D,H,O,x){super(V,L,O,I,x),this.handlers={},this.eventApi=$,this.accessTokenRefreshCallback=D,this.publicAuthentication=this.clientFactory.create(_.PublicAuthenticationServiceDefinition,this.channel),H!=null&&(this.backendAuthentication=this.clientFactory.create(_.BackendAuthenticationServiceDefinition,this.channel,{"*":{metadata:y.Metadata({"X-Api-Key":H})}})),this.eventApi.on("event",{name:`${N.LIVEAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0,allowedSessionEvents:[`${N.LIVEAPI_EVENT_PREFIX}:EVENT_TYPE_PROJECT:EVENT_SUB_TYPE_STATE`]},this.eventCallback.bind(this))}on(V,$){var L;this.handlers[V]=(L=this.handlers[V])!==null&&L!==void 0?L:[],this.handlers[V].push($)}off(V,$){this.handlers[V]=this.handlers[V].filter(L=>L!==$)}emitToHandlers(V,$,L){var D;for(const H of(D=this.handlers[V])!==null&&D!==void 0?D:[])H(Object.values(L).find(O=>!!O),$)}async subscribeToCollection(V){await this.eventApi.subscribe(`${N.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:V}})}async unsubscribeFromCollection(V){await this.eventApi.unsubscribe(`${N.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:V}})}async subscribeToProject(V,$){await this.eventApi.subscribe(`${N.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:V,projectId:$}})}async unsubscribeFromProject(V,$){await this.eventApi.unsubscribe(`${N.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:V,projectId:$}})}eventCallback(V){let L=V.name.split(`${N.LIVEAPI_EVENT_PREFIX}:`)[1].split(":"),D=_.eventTypeFromJSON(L[0]),H=_.eventSubTypeFromJSON(L[1]);this.log.info("processing event: "+D+"/"+H),N.liveApiEventMap[D]&&this.emitToHandlers(D,H,V.payload)}_setup(V){let $=this;V.onHeader=function(L){let D=L.get("Authorization");if(D!=null){const H=D.split(" ");if(H.length==2&&H[0]=="Bearer"){let O=H[1];$.log.info("received refresh token"),$.accessTokenRefreshCallback(O)}}},this.collection=this.clientFactory.create(_.CollectionServiceDefinition,this.channel,{"*":V}),this.project=this.clientFactory.create(_.ProjectServiceDefinition,this.channel,{"*":V}),this.source=this.clientFactory.create(_.SourceServiceDefinition,this.channel,{"*":V}),this.destination=this.clientFactory.create(_.DestinationServiceDefinition,this.channel,{"*":V}),this.authentication=this.clientFactory.create(_.AuthenticationServiceDefinition,this.channel,{"*":V})}}N.LIVEAPI_EVENT_PREFIX="apistream:live",c([(0,T.RequiresSdkAuthentication)(),v("design:type",Object)],N.prototype,"collection",void 0),c([(0,T.RequiresSdkAuthentication)(),v("design:type",Object)],N.prototype,"project",void 0),c([(0,T.RequiresSdkAuthentication)(),v("design:type",Object)],N.prototype,"source",void 0),c([(0,T.RequiresSdkAuthentication)(),v("design:type",Object)],N.prototype,"destination",void 0),c([(0,T.RequiresSdkAuthentication)(),v("design:type",Object)],N.prototype,"authentication",void 0),a.LiveApi=N,function(A){A.liveApiEventMap={[_.EventType.EVENT_TYPE_COLLECTION]:"collection",[_.EventType.EVENT_TYPE_PROJECT]:"project",[_.EventType.EVENT_TYPE_SOURCE]:"source",[_.EventType.EVENT_TYPE_DESTINATION]:"destination",[_.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}}(N=a.LiveApi||(a.LiveApi={}))}(liveapi);var eventapi={},dist$1={},api={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var extendStatics=function(a,s){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var h in c)c.hasOwnProperty(h)&&(d[h]=c[h])},extendStatics(a,s)};function __extends(a,s){extendStatics(a,s);function d(){this.constructor=a}a.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}function isFunction$1(a){return typeof a=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config$2={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){var s=new Error;""+s.stack}_enable_super_gross_mode_that_will_cause_bad_things=a},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(a){setTimeout(function(){throw a},0)}var empty$2={closed:!0,next:function(a){},error:function(a){if(config$2.useDeprecatedSynchronousErrorHandling)throw a;hostReportError(a)},complete:function(){}},isArray$2=function(){return Array.isArray||function(a){return a&&typeof a.length=="number"}}();function isObject$4(a){return a!==null&&typeof a=="object"}var UnsubscriptionErrorImpl=function(){function a(s){return Error.call(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(d,c){return c+1+") "+d.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s,this}return a.prototype=Object.create(Error.prototype),a}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function a(s){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,s&&(this._ctorUnsubscribe=!0,this._unsubscribe=s)}return a.prototype.unsubscribe=function(){var s;if(!this.closed){var d=this,c=d._parentOrParents,h=d._ctorUnsubscribe,v=d._unsubscribe,y=d._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,c instanceof a)c.remove(this);else if(c!==null)for(var b=0;b<c.length;++b){var _=c[b];_.remove(this)}if(isFunction$1(v)){h&&(this._unsubscribe=void 0);try{v.call(this)}catch(N){s=N instanceof UnsubscriptionError?flattenUnsubscriptionErrors(N.errors):[N]}}if(isArray$2(y))for(var b=-1,T=y.length;++b<T;){var I=y[b];if(isObject$4(I))try{I.unsubscribe()}catch(A){s=s||[],A instanceof UnsubscriptionError?s=s.concat(flattenUnsubscriptionErrors(A.errors)):s.push(A)}}if(s)throw new UnsubscriptionError(s)}},a.prototype.add=function(s){var d=s;if(!s)return a.EMPTY;switch(typeof s){case"function":d=new a(s);case"object":if(d===this||d.closed||typeof d.unsubscribe!="function")return d;if(this.closed)return d.unsubscribe(),d;if(!(d instanceof a)){var c=d;d=new a,d._subscriptions=[c]}break;default:throw new Error("unrecognized teardown "+s+" added to Subscription.")}var h=d._parentOrParents;if(h===null)d._parentOrParents=this;else if(h instanceof a){if(h===this)return d;d._parentOrParents=[h,this]}else if(h.indexOf(this)===-1)h.push(this);else return d;var v=this._subscriptions;return v===null?this._subscriptions=[d]:v.push(d),d},a.prototype.remove=function(s){var d=this._subscriptions;if(d){var c=d.indexOf(s);c!==-1&&d.splice(c,1)}},a.EMPTY=function(s){return s.closed=!0,s}(new a),a}();function flattenUnsubscriptionErrors(a){return a.reduce(function(s,d){return s.concat(d instanceof UnsubscriptionError?d.errors:d)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this)||this;switch(v.syncErrorValue=null,v.syncErrorThrown=!1,v.syncErrorThrowable=!1,v.isStopped=!1,arguments.length){case 0:v.destination=empty$2;break;case 1:if(!d){v.destination=empty$2;break}if(typeof d=="object"){d instanceof s?(v.syncErrorThrowable=d.syncErrorThrowable,v.destination=d,d.add(v)):(v.syncErrorThrowable=!0,v.destination=new SafeSubscriber(v,d));break}default:v.syncErrorThrowable=!0,v.destination=new SafeSubscriber(v,d,c,h);break}return v}return s.prototype[rxSubscriber]=function(){return this},s.create=function(d,c,h){var v=new s(d,c,h);return v.syncErrorThrowable=!1,v},s.prototype.next=function(d){this.isStopped||this._next(d)},s.prototype.error=function(d){this.isStopped||(this.isStopped=!0,this._error(d))},s.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},s.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},s.prototype._next=function(d){this.destination.next(d)},s.prototype._error=function(d){this.destination.error(d),this.unsubscribe()},s.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},s.prototype._unsubscribeAndRecycle=function(){var d=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=d,this},s}(Subscription),SafeSubscriber=function(a){__extends(s,a);function s(d,c,h,v){var y=a.call(this)||this;y._parentSubscriber=d;var b,_=y;return isFunction$1(c)?b=c:c&&(b=c.next,h=c.error,v=c.complete,c!==empty$2&&(_=Object.create(c),isFunction$1(_.unsubscribe)&&y.add(_.unsubscribe.bind(_)),_.unsubscribe=y.unsubscribe.bind(y))),y._context=_,y._next=b,y._error=h,y._complete=v,y}return s.prototype.next=function(d){if(!this.isStopped&&this._next){var c=this._parentSubscriber;!config$2.useDeprecatedSynchronousErrorHandling||!c.syncErrorThrowable?this.__tryOrUnsub(this._next,d):this.__tryOrSetError(c,this._next,d)&&this.unsubscribe()}},s.prototype.error=function(d){if(!this.isStopped){var c=this._parentSubscriber,h=config$2.useDeprecatedSynchronousErrorHandling;if(this._error)!h||!c.syncErrorThrowable?(this.__tryOrUnsub(this._error,d),this.unsubscribe()):(this.__tryOrSetError(c,this._error,d),this.unsubscribe());else if(c.syncErrorThrowable)h?(c.syncErrorValue=d,c.syncErrorThrown=!0):hostReportError(d),this.unsubscribe();else{if(this.unsubscribe(),h)throw d;hostReportError(d)}}},s.prototype.complete=function(){var d=this;if(!this.isStopped){var c=this._parentSubscriber;if(this._complete){var h=function(){return d._complete.call(d._context)};!config$2.useDeprecatedSynchronousErrorHandling||!c.syncErrorThrowable?(this.__tryOrUnsub(h),this.unsubscribe()):(this.__tryOrSetError(c,h),this.unsubscribe())}else this.unsubscribe()}},s.prototype.__tryOrUnsub=function(d,c){try{d.call(this._context,c)}catch(h){if(this.unsubscribe(),config$2.useDeprecatedSynchronousErrorHandling)throw h;hostReportError(h)}},s.prototype.__tryOrSetError=function(d,c,h){if(!config$2.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{c.call(this._context,h)}catch(v){return config$2.useDeprecatedSynchronousErrorHandling?(d.syncErrorValue=v,d.syncErrorThrown=!0,!0):(hostReportError(v),!0)}return!1},s.prototype._unsubscribe=function(){var d=this._parentSubscriber;this._context=null,this._parentSubscriber=null,d.unsubscribe()},s}(Subscriber);function canReportError(a){for(;a;){var s=a,d=s.closed,c=s.destination,h=s.isStopped;if(d||h)return!1;c&&c instanceof Subscriber?a=c:a=null}return!0}function toSubscriber(a,s,d){if(a){if(a instanceof Subscriber)return a;if(a[rxSubscriber])return a[rxSubscriber]()}return!a&&!s&&!d?new Subscriber(empty$2):new Subscriber(a,s,d)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(a){return a}function pipe(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return pipeFromArray(a)}function pipeFromArray(a){return a.length===0?identity:a.length===1?a[0]:function(d){return a.reduce(function(c,h){return h(c)},d)}}var Observable=function(){function a(s){this._isScalar=!1,s&&(this._subscribe=s)}return a.prototype.lift=function(s){var d=new a;return d.source=this,d.operator=s,d},a.prototype.subscribe=function(s,d,c){var h=this.operator,v=toSubscriber(s,d,c);if(h?v.add(h.call(v,this.source)):v.add(this.source||config$2.useDeprecatedSynchronousErrorHandling&&!v.syncErrorThrowable?this._subscribe(v):this._trySubscribe(v)),config$2.useDeprecatedSynchronousErrorHandling&&v.syncErrorThrowable&&(v.syncErrorThrowable=!1,v.syncErrorThrown))throw v.syncErrorValue;return v},a.prototype._trySubscribe=function(s){try{return this._subscribe(s)}catch(d){config$2.useDeprecatedSynchronousErrorHandling&&(s.syncErrorThrown=!0,s.syncErrorValue=d),canReportError(s)?s.error(d):console.warn(d)}},a.prototype.forEach=function(s,d){var c=this;return d=getPromiseCtor(d),new d(function(h,v){var y;y=c.subscribe(function(b){try{s(b)}catch(_){v(_),y&&y.unsubscribe()}},v,h)})},a.prototype._subscribe=function(s){var d=this.source;return d&&d.subscribe(s)},a.prototype[observable]=function(){return this},a.prototype.pipe=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];return s.length===0?this:pipeFromArray(s)(this)},a.prototype.toPromise=function(s){var d=this;return s=getPromiseCtor(s),new s(function(c,h){var v;d.subscribe(function(y){return v=y},function(y){return h(y)},function(){return c(v)})})},a.create=function(s){return new a(s)},a}();function getPromiseCtor(a){if(a||(a=config$2.Promise||Promise),!a)throw new Error("no Promise impl found");return a}var subscribeToArray=function(a){return function(s){for(var d=0,c=a.length;d<c&&!s.closed;d++)s.next(a[d]);s.complete()}},subscribeToPromise=function(a){return function(s){return a.then(function(d){s.closed||(s.next(d),s.complete())},function(d){return s.error(d)}).then(null,hostReportError),s}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator(),subscribeToIterable=function(a){return function(s){var d=a[iterator]();do{var c=void 0;try{c=d.next()}catch(h){return s.error(h),s}if(c.done){s.complete();break}if(s.next(c.value),s.closed)break}while(!0);return typeof d.return=="function"&&s.add(function(){d.return&&d.return()}),s}},subscribeToObservable=function(a){return function(s){var d=a[observable]();if(typeof d.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return d.subscribe(s)}},isArrayLike=function(a){return a&&typeof a.length=="number"&&typeof a!="function"};function isPromise(a){return!!a&&typeof a.subscribe!="function"&&typeof a.then=="function"}var subscribeTo=function(a){if(!!a&&typeof a[observable]=="function")return subscribeToObservable(a);if(isArrayLike(a))return subscribeToArray(a);if(isPromise(a))return subscribeToPromise(a);if(!!a&&typeof a[iterator]=="function")return subscribeToIterable(a);var s=isObject$4(a)?"an invalid object":"'"+a+"'",d="You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(d)},SimpleInnerSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this)||this;return c.parent=d,c}return s.prototype._next=function(d){this.parent.notifyNext(d)},s.prototype._error=function(d){this.parent.notifyError(d),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},s}(Subscriber),SimpleOuterSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.notifyNext=function(d){this.destination.next(d)},s.prototype.notifyError=function(d){this.destination.error(d)},s.prototype.notifyComplete=function(){this.destination.complete()},s}(Subscriber);function innerSubscribe(a,s){if(!s.closed){if(a instanceof Observable)return a.subscribe(s);var d;try{d=subscribeTo(a)(s)}catch(c){s.error(c)}return d}}function audit(a){return function(d){return d.lift(new AuditOperator(a))}}var AuditOperator=function(){function a(s){this.durationSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new AuditSubscriber(s,this.durationSelector))},a}(),AuditSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.durationSelector=c,h.hasValue=!1,h}return s.prototype._next=function(d){if(this.value=d,this.hasValue=!0,!this.throttled){var c=void 0;try{var h=this.durationSelector;c=h(d)}catch(y){return this.destination.error(y)}var v=innerSubscribe(c,new SimpleInnerSubscriber(this));!v||v.closed?this.clearThrottle():this.add(this.throttled=v)}},s.prototype.clearThrottle=function(){var d=this,c=d.value,h=d.hasValue,v=d.throttled;v&&(this.remove(v),this.throttled=void 0,v.unsubscribe()),h&&(this.value=void 0,this.hasValue=!1,this.destination.next(c))},s.prototype.notifyNext=function(){this.clearThrottle()},s.prototype.notifyComplete=function(){this.clearThrottle()},s}(SimpleOuterSubscriber),Action=function(a){__extends(s,a);function s(d,c){return a.call(this)||this}return s.prototype.schedule=function(d,c){return this},s}(Subscription),AsyncAction=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d,c)||this;return h.scheduler=d,h.work=c,h.pending=!1,h}return s.prototype.schedule=function(d,c){if(c===void 0&&(c=0),this.closed)return this;this.state=d;var h=this.id,v=this.scheduler;return h!=null&&(this.id=this.recycleAsyncId(v,h,c)),this.pending=!0,this.delay=c,this.id=this.id||this.requestAsyncId(v,this.id,c),this},s.prototype.requestAsyncId=function(d,c,h){return h===void 0&&(h=0),setInterval(d.flush.bind(d,this),h)},s.prototype.recycleAsyncId=function(d,c,h){if(h===void 0&&(h=0),h!==null&&this.delay===h&&this.pending===!1)return c;clearInterval(c)},s.prototype.execute=function(d,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var h=this._execute(d,c);if(h)return h;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},s.prototype._execute=function(d,c){var h=!1,v=void 0;try{this.work(d)}catch(y){h=!0,v=!!y&&y||new Error(y)}if(h)return this.unsubscribe(),v},s.prototype._unsubscribe=function(){var d=this.id,c=this.scheduler,h=c.actions,v=h.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,v!==-1&&h.splice(v,1),d!=null&&(this.id=this.recycleAsyncId(c,d,null)),this.delay=null},s}(Action),Scheduler=function(){function a(s,d){d===void 0&&(d=a.now),this.SchedulerAction=s,this.now=d}return a.prototype.schedule=function(s,d,c){return d===void 0&&(d=0),new this.SchedulerAction(this,s).schedule(c,d)},a.now=function(){return Date.now()},a}(),AsyncScheduler=function(a){__extends(s,a);function s(d,c){c===void 0&&(c=Scheduler.now);var h=a.call(this,d,function(){return s.delegate&&s.delegate!==h?s.delegate.now():c()})||this;return h.actions=[],h.active=!1,h.scheduled=void 0,h}return s.prototype.schedule=function(d,c,h){return c===void 0&&(c=0),s.delegate&&s.delegate!==this?s.delegate.schedule(d,c,h):a.prototype.schedule.call(this,d,c,h)},s.prototype.flush=function(d){var c=this.actions;if(this.active){c.push(d);return}var h;this.active=!0;do if(h=d.execute(d.state,d.delay))break;while(d=c.shift());if(this.active=!1,h){for(;d=c.shift();)d.unsubscribe();throw h}},s}(Scheduler),asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler;function isNumeric(a){return!isArray$2(a)&&a-parseFloat(a)+1>=0}function isScheduler(a){return a&&typeof a.schedule=="function"}function timer(a,s,d){a===void 0&&(a=0);var c=-1;return isNumeric(s)?c=Number(s)<1&&1||Number(s):isScheduler(s)&&(d=s),isScheduler(d)||(d=async),new Observable(function(h){var v=isNumeric(a)?a:+a-d.now();return d.schedule(dispatch$1,v,{index:0,period:c,subscriber:h})})}function dispatch$1(a){var s=a.index,d=a.period,c=a.subscriber;if(c.next(s),!c.closed){if(d===-1)return c.complete();a.index=s+1,this.schedule(a,d)}}function auditTime(a,s){return s===void 0&&(s=async),audit(function(){return timer(a,s)})}function buffer(a){return function(d){return d.lift(new BufferOperator(a))}}var BufferOperator=function(){function a(s){this.closingNotifier=s}return a.prototype.call=function(s,d){return d.subscribe(new BufferSubscriber(s,this.closingNotifier))},a}(),BufferSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.buffer=[],h.add(innerSubscribe(c,new SimpleInnerSubscriber(h))),h}return s.prototype._next=function(d){this.buffer.push(d)},s.prototype.notifyNext=function(){var d=this.buffer;this.buffer=[],this.destination.next(d)},s}(SimpleOuterSubscriber);function bufferCount(a,s){return s===void 0&&(s=null),function(c){return c.lift(new BufferCountOperator(a,s))}}var BufferCountOperator=function(){function a(s,d){this.bufferSize=s,this.startBufferEvery=d,!d||s===d?this.subscriberClass=BufferCountSubscriber:this.subscriberClass=BufferSkipCountSubscriber}return a.prototype.call=function(s,d){return d.subscribe(new this.subscriberClass(s,this.bufferSize,this.startBufferEvery))},a}(),BufferCountSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.bufferSize=c,h.buffer=[],h}return s.prototype._next=function(d){var c=this.buffer;c.push(d),c.length==this.bufferSize&&(this.destination.next(c),this.buffer=[])},s.prototype._complete=function(){var d=this.buffer;d.length>0&&this.destination.next(d),a.prototype._complete.call(this)},s}(Subscriber),BufferSkipCountSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.bufferSize=c,v.startBufferEvery=h,v.buffers=[],v.count=0,v}return s.prototype._next=function(d){var c=this,h=c.bufferSize,v=c.startBufferEvery,y=c.buffers,b=c.count;this.count++,b%v===0&&y.push([]);for(var _=y.length;_--;){var T=y[_];T.push(d),T.length===h&&(y.splice(_,1),this.destination.next(T))}},s.prototype._complete=function(){for(var d=this,c=d.buffers,h=d.destination;c.length>0;){var v=c.shift();v.length>0&&h.next(v)}a.prototype._complete.call(this)},s}(Subscriber);function bufferTime(a){var s=arguments.length,d=async;isScheduler(arguments[arguments.length-1])&&(d=arguments[arguments.length-1],s--);var c=null;s>=2&&(c=arguments[1]);var h=Number.POSITIVE_INFINITY;return s>=3&&(h=arguments[2]),function(y){return y.lift(new BufferTimeOperator(a,c,h,d))}}var BufferTimeOperator=function(){function a(s,d,c,h){this.bufferTimeSpan=s,this.bufferCreationInterval=d,this.maxBufferSize=c,this.scheduler=h}return a.prototype.call=function(s,d){return d.subscribe(new BufferTimeSubscriber(s,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},a}(),Context=function(){function a(){this.buffer=[]}return a}(),BufferTimeSubscriber=function(a){__extends(s,a);function s(d,c,h,v,y){var b=a.call(this,d)||this;b.bufferTimeSpan=c,b.bufferCreationInterval=h,b.maxBufferSize=v,b.scheduler=y,b.contexts=[];var _=b.openContext();if(b.timespanOnly=h==null||h<0,b.timespanOnly){var T={subscriber:b,context:_,bufferTimeSpan:c};b.add(_.closeAction=y.schedule(dispatchBufferTimeSpanOnly,c,T))}else{var I={subscriber:b,context:_},N={bufferTimeSpan:c,bufferCreationInterval:h,subscriber:b,scheduler:y};b.add(_.closeAction=y.schedule(dispatchBufferClose,c,I)),b.add(y.schedule(dispatchBufferCreation,h,N))}return b}return s.prototype._next=function(d){for(var c=this.contexts,h=c.length,v,y=0;y<h;y++){var b=c[y],_=b.buffer;_.push(d),_.length==this.maxBufferSize&&(v=b)}v&&this.onBufferFull(v)},s.prototype._error=function(d){this.contexts.length=0,a.prototype._error.call(this,d)},s.prototype._complete=function(){for(var d=this,c=d.contexts,h=d.destination;c.length>0;){var v=c.shift();h.next(v.buffer)}a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){this.contexts=null},s.prototype.onBufferFull=function(d){this.closeContext(d);var c=d.closeAction;if(c.unsubscribe(),this.remove(c),!this.closed&&this.timespanOnly){d=this.openContext();var h=this.bufferTimeSpan,v={subscriber:this,context:d,bufferTimeSpan:h};this.add(d.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,h,v))}},s.prototype.openContext=function(){var d=new Context;return this.contexts.push(d),d},s.prototype.closeContext=function(d){this.destination.next(d.buffer);var c=this.contexts,h=c?c.indexOf(d):-1;h>=0&&c.splice(c.indexOf(d),1)},s}(Subscriber);function dispatchBufferTimeSpanOnly(a){var s=a.subscriber,d=a.context;d&&s.closeContext(d),s.closed||(a.context=s.openContext(),a.context.closeAction=this.schedule(a,a.bufferTimeSpan))}function dispatchBufferCreation(a){var s=a.bufferCreationInterval,d=a.bufferTimeSpan,c=a.subscriber,h=a.scheduler,v=c.openContext(),y=this;c.closed||(c.add(v.closeAction=h.schedule(dispatchBufferClose,d,{subscriber:c,context:v})),y.schedule(a,s))}function dispatchBufferClose(a){var s=a.subscriber,d=a.context;s.closeContext(d)}var InnerSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this)||this;return v.parent=d,v.outerValue=c,v.outerIndex=h,v.index=0,v}return s.prototype._next=function(d){this.parent.notifyNext(this.outerValue,d,this.outerIndex,this.index++,this)},s.prototype._error=function(d){this.parent.notifyError(d,this),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},s}(Subscriber);function subscribeToResult(a,s,d,c,h){if(h===void 0&&(h=new InnerSubscriber(a,d,c)),!h.closed)return s instanceof Observable?s.subscribe(h):subscribeTo(s)(h)}var OuterSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.notifyNext=function(d,c,h,v,y){this.destination.next(c)},s.prototype.notifyError=function(d,c){this.destination.error(d)},s.prototype.notifyComplete=function(d){this.destination.complete()},s}(Subscriber);function bufferToggle(a,s){return function(c){return c.lift(new BufferToggleOperator(a,s))}}var BufferToggleOperator=function(){function a(s,d){this.openings=s,this.closingSelector=d}return a.prototype.call=function(s,d){return d.subscribe(new BufferToggleSubscriber(s,this.openings,this.closingSelector))},a}(),BufferToggleSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.closingSelector=h,v.contexts=[],v.add(subscribeToResult(v,c)),v}return s.prototype._next=function(d){for(var c=this.contexts,h=c.length,v=0;v<h;v++)c[v].buffer.push(d)},s.prototype._error=function(d){for(var c=this.contexts;c.length>0;){var h=c.shift();h.subscription.unsubscribe(),h.buffer=null,h.subscription=null}this.contexts=null,a.prototype._error.call(this,d)},s.prototype._complete=function(){for(var d=this.contexts;d.length>0;){var c=d.shift();this.destination.next(c.buffer),c.subscription.unsubscribe(),c.buffer=null,c.subscription=null}this.contexts=null,a.prototype._complete.call(this)},s.prototype.notifyNext=function(d,c){d?this.closeBuffer(d):this.openBuffer(c)},s.prototype.notifyComplete=function(d){this.closeBuffer(d.context)},s.prototype.openBuffer=function(d){try{var c=this.closingSelector,h=c.call(this,d);h&&this.trySubscribe(h)}catch(v){this._error(v)}},s.prototype.closeBuffer=function(d){var c=this.contexts;if(c&&d){var h=d.buffer,v=d.subscription;this.destination.next(h),c.splice(c.indexOf(d),1),this.remove(v),v.unsubscribe()}},s.prototype.trySubscribe=function(d){var c=this.contexts,h=[],v=new Subscription,y={buffer:h,subscription:v};c.push(y);var b=subscribeToResult(this,d,y);!b||b.closed?this.closeBuffer(y):(b.context=y,this.add(b),v.add(b))},s}(OuterSubscriber);function bufferWhen(a){return function(s){return s.lift(new BufferWhenOperator(a))}}var BufferWhenOperator=function(){function a(s){this.closingSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new BufferWhenSubscriber(s,this.closingSelector))},a}(),BufferWhenSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.closingSelector=c,h.subscribing=!1,h.openBuffer(),h}return s.prototype._next=function(d){this.buffer.push(d)},s.prototype._complete=function(){var d=this.buffer;d&&this.destination.next(d),a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},s.prototype.notifyNext=function(){this.openBuffer()},s.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},s.prototype.openBuffer=function(){var d=this.closingSubscription;d&&(this.remove(d),d.unsubscribe());var c=this.buffer;this.buffer&&this.destination.next(c),this.buffer=[];var h;try{var v=this.closingSelector;h=v()}catch(y){return this.error(y)}d=new Subscription,this.closingSubscription=d,this.add(d),this.subscribing=!0,d.add(innerSubscribe(h,new SimpleInnerSubscriber(this))),this.subscribing=!1},s}(SimpleOuterSubscriber);function catchError(a){return function(d){var c=new CatchOperator(a),h=d.lift(c);return c.caught=h}}var CatchOperator=function(){function a(s){this.selector=s}return a.prototype.call=function(s,d){return d.subscribe(new CatchSubscriber(s,this.selector,this.caught))},a}(),CatchSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.selector=c,v.caught=h,v}return s.prototype.error=function(d){if(!this.isStopped){var c=void 0;try{c=this.selector(d,this.caught)}catch(y){a.prototype.error.call(this,y);return}this._unsubscribeAndRecycle();var h=new SimpleInnerSubscriber(this);this.add(h);var v=innerSubscribe(c,h);v!==h&&this.add(v)}},s}(SimpleOuterSubscriber);function scheduleArray(a,s){return new Observable(function(d){var c=new Subscription,h=0;return c.add(s.schedule(function(){if(h===a.length){d.complete();return}d.next(a[h++]),d.closed||c.add(this.schedule())})),c})}function fromArray(a,s){return s?scheduleArray(a,s):new Observable(subscribeToArray(a))}var NONE={},CombineLatestOperator=function(){function a(s){this.resultSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new CombineLatestSubscriber(s,this.resultSelector))},a}(),CombineLatestSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.resultSelector=c,h.active=0,h.values=[],h.observables=[],h}return s.prototype._next=function(d){this.values.push(NONE),this.observables.push(d)},s.prototype._complete=function(){var d=this.observables,c=d.length;if(c===0)this.destination.complete();else{this.active=c,this.toRespond=c;for(var h=0;h<c;h++){var v=d[h];this.add(subscribeToResult(this,v,void 0,h))}}},s.prototype.notifyComplete=function(d){(this.active-=1)===0&&this.destination.complete()},s.prototype.notifyNext=function(d,c,h){var v=this.values,y=v[h],b=this.toRespond?y===NONE?--this.toRespond:this.toRespond:0;v[h]=c,b===0&&(this.resultSelector?this._tryResultSelector(v):this.destination.next(v.slice()))},s.prototype._tryResultSelector=function(d){var c;try{c=this.resultSelector.apply(this,d)}catch(h){this.destination.error(h);return}this.destination.next(c)},s}(OuterSubscriber);function combineAll(a){return function(s){return s.lift(new CombineLatestOperator(a))}}function scheduleObservable(a,s){return new Observable(function(d){var c=new Subscription;return c.add(s.schedule(function(){var h=a[observable]();c.add(h.subscribe({next:function(v){c.add(s.schedule(function(){return d.next(v)}))},error:function(v){c.add(s.schedule(function(){return d.error(v)}))},complete:function(){c.add(s.schedule(function(){return d.complete()}))}}))})),c})}function schedulePromise(a,s){return new Observable(function(d){var c=new Subscription;return c.add(s.schedule(function(){return a.then(function(h){c.add(s.schedule(function(){d.next(h),c.add(s.schedule(function(){return d.complete()}))}))},function(h){c.add(s.schedule(function(){return d.error(h)}))})})),c})}function scheduleIterable(a,s){if(!a)throw new Error("Iterable cannot be null");return new Observable(function(d){var c=new Subscription,h;return c.add(function(){h&&typeof h.return=="function"&&h.return()}),c.add(s.schedule(function(){h=a[iterator](),c.add(s.schedule(function(){if(!d.closed){var v,y;try{var b=h.next();v=b.value,y=b.done}catch(_){d.error(_);return}y?d.complete():(d.next(v),this.schedule())}}))})),c})}function isInteropObservable(a){return a&&typeof a[observable]=="function"}function isIterable(a){return a&&typeof a[iterator]=="function"}function scheduled(a,s){if(a!=null){if(isInteropObservable(a))return scheduleObservable(a,s);if(isPromise(a))return schedulePromise(a,s);if(isArrayLike(a))return scheduleArray(a,s);if(isIterable(a)||typeof a=="string")return scheduleIterable(a,s)}throw new TypeError((a!==null&&typeof a||a)+" is not observable")}function from(a,s){return s?scheduled(a,s):a instanceof Observable?a:new Observable(subscribeTo(a))}function combineLatest(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=null;return typeof a[a.length-1]=="function"&&(d=a.pop()),a.length===1&&isArray$2(a[0])&&(a=a[0].slice()),function(c){return c.lift.call(from([c].concat(a)),new CombineLatestOperator(d))}}function of$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a[a.length-1];return isScheduler(d)?(a.pop(),scheduleArray(a,d)):fromArray(a)}function map(a,s){return function(c){if(typeof a!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return c.lift(new MapOperator(a,s))}}var MapOperator=function(){function a(s,d){this.project=s,this.thisArg=d}return a.prototype.call=function(s,d){return d.subscribe(new MapSubscriber(s,this.project,this.thisArg))},a}(),MapSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.project=c,v.count=0,v.thisArg=h||v,v}return s.prototype._next=function(d){var c;try{c=this.project.call(this.thisArg,d,this.count++)}catch(h){this.destination.error(h);return}this.destination.next(c)},s}(Subscriber);function mergeMap(a,s,d){return d===void 0&&(d=Number.POSITIVE_INFINITY),typeof s=="function"?function(c){return c.pipe(mergeMap(function(h,v){return from(a(h,v)).pipe(map(function(y,b){return s(h,y,v,b)}))},d))}:(typeof s=="number"&&(d=s),function(c){return c.lift(new MergeMapOperator(a,d))})}var MergeMapOperator=function(){function a(s,d){d===void 0&&(d=Number.POSITIVE_INFINITY),this.project=s,this.concurrent=d}return a.prototype.call=function(s,d){return d.subscribe(new MergeMapSubscriber(s,this.project,this.concurrent))},a}(),MergeMapSubscriber=function(a){__extends(s,a);function s(d,c,h){h===void 0&&(h=Number.POSITIVE_INFINITY);var v=a.call(this,d)||this;return v.project=c,v.concurrent=h,v.hasCompleted=!1,v.buffer=[],v.active=0,v.index=0,v}return s.prototype._next=function(d){this.active<this.concurrent?this._tryNext(d):this.buffer.push(d)},s.prototype._tryNext=function(d){var c,h=this.index++;try{c=this.project(d,h)}catch(v){this.destination.error(v);return}this.active++,this._innerSub(c)},s.prototype._innerSub=function(d){var c=new SimpleInnerSubscriber(this),h=this.destination;h.add(c);var v=innerSubscribe(d,c);v!==c&&h.add(v)},s.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(d){this.destination.next(d)},s.prototype.notifyComplete=function(){var d=this.buffer;this.active--,d.length>0?this._next(d.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber),flatMap=mergeMap;function mergeAll(a){return a===void 0&&(a=Number.POSITIVE_INFINITY),mergeMap(identity,a)}function concatAll(){return mergeAll(1)}function concat$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return concatAll()(of$1.apply(void 0,a))}function concat(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return d.lift.call(concat$1.apply(void 0,[d].concat(a)))}}function concatMap(a,s){return mergeMap(a,s,1)}function concatMapTo(a,s){return concatMap(function(){return a},s)}function count(a){return function(s){return s.lift(new CountOperator(a,s))}}var CountOperator=function(){function a(s,d){this.predicate=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new CountSubscriber(s,this.predicate,this.source))},a}(),CountSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.predicate=c,v.source=h,v.count=0,v.index=0,v}return s.prototype._next=function(d){this.predicate?this._tryPredicate(d):this.count++},s.prototype._tryPredicate=function(d){var c;try{c=this.predicate(d,this.index++,this.source)}catch(h){this.destination.error(h);return}c&&this.count++},s.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},s}(Subscriber);function debounce(a){return function(s){return s.lift(new DebounceOperator(a))}}var DebounceOperator=function(){function a(s){this.durationSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new DebounceSubscriber(s,this.durationSelector))},a}(),DebounceSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.durationSelector=c,h.hasValue=!1,h}return s.prototype._next=function(d){try{var c=this.durationSelector.call(this,d);c&&this._tryNext(d,c)}catch(h){this.destination.error(h)}},s.prototype._complete=function(){this.emitValue(),this.destination.complete()},s.prototype._tryNext=function(d,c){var h=this.durationSubscription;this.value=d,this.hasValue=!0,h&&(h.unsubscribe(),this.remove(h)),h=innerSubscribe(c,new SimpleInnerSubscriber(this)),h&&!h.closed&&this.add(this.durationSubscription=h)},s.prototype.notifyNext=function(){this.emitValue()},s.prototype.notifyComplete=function(){this.emitValue()},s.prototype.emitValue=function(){if(this.hasValue){var d=this.value,c=this.durationSubscription;c&&(this.durationSubscription=void 0,c.unsubscribe(),this.remove(c)),this.value=void 0,this.hasValue=!1,a.prototype._next.call(this,d)}},s}(SimpleOuterSubscriber);function debounceTime(a,s){return s===void 0&&(s=async),function(d){return d.lift(new DebounceTimeOperator(a,s))}}var DebounceTimeOperator=function(){function a(s,d){this.dueTime=s,this.scheduler=d}return a.prototype.call=function(s,d){return d.subscribe(new DebounceTimeSubscriber(s,this.dueTime,this.scheduler))},a}(),DebounceTimeSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.dueTime=c,v.scheduler=h,v.debouncedSubscription=null,v.lastValue=null,v.hasValue=!1,v}return s.prototype._next=function(d){this.clearDebounce(),this.lastValue=d,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$1,this.dueTime,this))},s.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},s.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var d=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(d)}},s.prototype.clearDebounce=function(){var d=this.debouncedSubscription;d!==null&&(this.remove(d),d.unsubscribe(),this.debouncedSubscription=null)},s}(Subscriber);function dispatchNext$1(a){a.debouncedNext()}function defaultIfEmpty(a){return a===void 0&&(a=null),function(s){return s.lift(new DefaultIfEmptyOperator(a))}}var DefaultIfEmptyOperator=function(){function a(s){this.defaultValue=s}return a.prototype.call=function(s,d){return d.subscribe(new DefaultIfEmptySubscriber(s,this.defaultValue))},a}(),DefaultIfEmptySubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.defaultValue=c,h.isEmpty=!0,h}return s.prototype._next=function(d){this.isEmpty=!1,this.destination.next(d)},s.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},s}(Subscriber);function isDate$1(a){return a instanceof Date&&!isNaN(+a)}var EMPTY=new Observable(function(a){return a.complete()});function empty$1(a){return a?emptyScheduled(a):EMPTY}function emptyScheduled(a){return new Observable(function(s){return a.schedule(function(){return s.complete()})})}function throwError(a,s){return s?new Observable(function(d){return s.schedule(dispatch,0,{error:a,subscriber:d})}):new Observable(function(d){return d.error(a)})}function dispatch(a){var s=a.error,d=a.subscriber;d.error(s)}var Notification=function(){function a(s,d,c){this.kind=s,this.value=d,this.error=c,this.hasValue=s==="N"}return a.prototype.observe=function(s){switch(this.kind){case"N":return s.next&&s.next(this.value);case"E":return s.error&&s.error(this.error);case"C":return s.complete&&s.complete()}},a.prototype.do=function(s,d,c){var h=this.kind;switch(h){case"N":return s&&s(this.value);case"E":return d&&d(this.error);case"C":return c&&c()}},a.prototype.accept=function(s,d,c){return s&&typeof s.next=="function"?this.observe(s):this.do(s,d,c)},a.prototype.toObservable=function(){var s=this.kind;switch(s){case"N":return of$1(this.value);case"E":return throwError(this.error);case"C":return empty$1()}throw new Error("unexpected notification kind value")},a.createNext=function(s){return typeof s!="undefined"?new a("N",s):a.undefinedValueNotification},a.createError=function(s){return new a("E",void 0,s)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0),a}();function delay(a,s){s===void 0&&(s=async);var d=isDate$1(a),c=d?+a-s.now():Math.abs(a);return function(h){return h.lift(new DelayOperator(c,s))}}var DelayOperator=function(){function a(s,d){this.delay=s,this.scheduler=d}return a.prototype.call=function(s,d){return d.subscribe(new DelaySubscriber(s,this.delay,this.scheduler))},a}(),DelaySubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.delay=c,v.scheduler=h,v.queue=[],v.active=!1,v.errored=!1,v}return s.dispatch=function(d){for(var c=d.source,h=c.queue,v=d.scheduler,y=d.destination;h.length>0&&h[0].time-v.now()<=0;)h.shift().notification.observe(y);if(h.length>0){var b=Math.max(0,h[0].time-v.now());this.schedule(d,b)}else this.unsubscribe(),c.active=!1},s.prototype._schedule=function(d){this.active=!0;var c=this.destination;c.add(d.schedule(s.dispatch,this.delay,{source:this,destination:this.destination,scheduler:d}))},s.prototype.scheduleNotification=function(d){if(this.errored!==!0){var c=this.scheduler,h=new DelayMessage(c.now()+this.delay,d);this.queue.push(h),this.active===!1&&this._schedule(c)}},s.prototype._next=function(d){this.scheduleNotification(Notification.createNext(d))},s.prototype._error=function(d){this.errored=!0,this.queue=[],this.destination.error(d),this.unsubscribe()},s.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},s}(Subscriber),DelayMessage=function(){function a(s,d){this.time=s,this.notification=d}return a}();function delayWhen(a,s){return s?function(d){return new SubscriptionDelayObservable(d,s).lift(new DelayWhenOperator(a))}:function(d){return d.lift(new DelayWhenOperator(a))}}var DelayWhenOperator=function(){function a(s){this.delayDurationSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new DelayWhenSubscriber(s,this.delayDurationSelector))},a}(),DelayWhenSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.delayDurationSelector=c,h.completed=!1,h.delayNotifierSubscriptions=[],h.index=0,h}return s.prototype.notifyNext=function(d,c,h,v,y){this.destination.next(d),this.removeSubscription(y),this.tryComplete()},s.prototype.notifyError=function(d,c){this._error(d)},s.prototype.notifyComplete=function(d){var c=this.removeSubscription(d);c&&this.destination.next(c),this.tryComplete()},s.prototype._next=function(d){var c=this.index++;try{var h=this.delayDurationSelector(d,c);h&&this.tryDelay(h,d)}catch(v){this.destination.error(v)}},s.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},s.prototype.removeSubscription=function(d){d.unsubscribe();var c=this.delayNotifierSubscriptions.indexOf(d);return c!==-1&&this.delayNotifierSubscriptions.splice(c,1),d.outerValue},s.prototype.tryDelay=function(d,c){var h=subscribeToResult(this,d,c);if(h&&!h.closed){var v=this.destination;v.add(h),this.delayNotifierSubscriptions.push(h)}},s.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},s}(OuterSubscriber),SubscriptionDelayObservable=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.source=d,h.subscriptionDelay=c,h}return s.prototype._subscribe=function(d){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(d,this.source))},s}(Observable),SubscriptionDelaySubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.parent=d,h.source=c,h.sourceSubscribed=!1,h}return s.prototype._next=function(d){this.subscribeToSource()},s.prototype._error=function(d){this.unsubscribe(),this.parent.error(d)},s.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},s.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},s}(Subscriber);function dematerialize(){return function(s){return s.lift(new DeMaterializeOperator)}}var DeMaterializeOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new DeMaterializeSubscriber(s))},a}(),DeMaterializeSubscriber=function(a){__extends(s,a);function s(d){return a.call(this,d)||this}return s.prototype._next=function(d){d.observe(this.destination)},s}(Subscriber);function distinct(a,s){return function(d){return d.lift(new DistinctOperator(a,s))}}var DistinctOperator=function(){function a(s,d){this.keySelector=s,this.flushes=d}return a.prototype.call=function(s,d){return d.subscribe(new DistinctSubscriber(s,this.keySelector,this.flushes))},a}(),DistinctSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.keySelector=c,v.values=new Set,h&&v.add(innerSubscribe(h,new SimpleInnerSubscriber(v))),v}return s.prototype.notifyNext=function(){this.values.clear()},s.prototype.notifyError=function(d){this._error(d)},s.prototype._next=function(d){this.keySelector?this._useKeySelector(d):this._finalizeNext(d,d)},s.prototype._useKeySelector=function(d){var c,h=this.destination;try{c=this.keySelector(d)}catch(v){h.error(v);return}this._finalizeNext(c,d)},s.prototype._finalizeNext=function(d,c){var h=this.values;h.has(d)||(h.add(d),this.destination.next(c))},s}(SimpleOuterSubscriber);function distinctUntilChanged(a,s){return function(d){return d.lift(new DistinctUntilChangedOperator(a,s))}}var DistinctUntilChangedOperator=function(){function a(s,d){this.compare=s,this.keySelector=d}return a.prototype.call=function(s,d){return d.subscribe(new DistinctUntilChangedSubscriber(s,this.compare,this.keySelector))},a}(),DistinctUntilChangedSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.keySelector=h,v.hasKey=!1,typeof c=="function"&&(v.compare=c),v}return s.prototype.compare=function(d,c){return d===c},s.prototype._next=function(d){var c;try{var h=this.keySelector;c=h?h(d):d}catch(b){return this.destination.error(b)}var v=!1;if(this.hasKey)try{var y=this.compare;v=y(this.key,c)}catch(b){return this.destination.error(b)}else this.hasKey=!0;v||(this.key=c,this.destination.next(d))},s}(Subscriber);function distinctUntilKeyChanged(a,s){return distinctUntilChanged(function(d,c){return s?s(d[a],c[a]):d[a]===c[a]})}var ArgumentOutOfRangeErrorImpl=function(){function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;function filter(a,s){return function(c){return c.lift(new FilterOperator(a,s))}}var FilterOperator=function(){function a(s,d){this.predicate=s,this.thisArg=d}return a.prototype.call=function(s,d){return d.subscribe(new FilterSubscriber(s,this.predicate,this.thisArg))},a}(),FilterSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.predicate=c,v.thisArg=h,v.count=0,v}return s.prototype._next=function(d){var c;try{c=this.predicate.call(this.thisArg,d,this.count++)}catch(h){this.destination.error(h);return}c&&this.destination.next(d)},s}(Subscriber),EmptyErrorImpl=function(){function a(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return a.prototype=Object.create(Error.prototype),a}(),EmptyError=EmptyErrorImpl;function throwIfEmpty(a){return a===void 0&&(a=defaultErrorFactory),function(s){return s.lift(new ThrowIfEmptyOperator(a))}}var ThrowIfEmptyOperator=function(){function a(s){this.errorFactory=s}return a.prototype.call=function(s,d){return d.subscribe(new ThrowIfEmptySubscriber(s,this.errorFactory))},a}(),ThrowIfEmptySubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.errorFactory=c,h.hasValue=!1,h}return s.prototype._next=function(d){this.hasValue=!0,this.destination.next(d)},s.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var d=void 0;try{d=this.errorFactory()}catch(c){d=c}this.destination.error(d)},s}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(a){return function(s){return a===0?empty$1():s.lift(new TakeOperator(a))}}var TakeOperator=function(){function a(s){if(this.total=s,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,d){return d.subscribe(new TakeSubscriber(s,this.total))},a}(),TakeSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.total=c,h.count=0,h}return s.prototype._next=function(d){var c=this.total,h=++this.count;h<=c&&(this.destination.next(d),h===c&&(this.destination.complete(),this.unsubscribe()))},s}(Subscriber);function elementAt(a,s){if(a<0)throw new ArgumentOutOfRangeError;var d=arguments.length>=2;return function(c){return c.pipe(filter(function(h,v){return v===a}),take(1),d?defaultIfEmpty(s):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return concat$1(d,of$1.apply(void 0,a))}}function every(a,s){return function(d){return d.lift(new EveryOperator(a,s,d))}}var EveryOperator=function(){function a(s,d,c){this.predicate=s,this.thisArg=d,this.source=c}return a.prototype.call=function(s,d){return d.subscribe(new EverySubscriber(s,this.predicate,this.thisArg,this.source))},a}(),EverySubscriber=function(a){__extends(s,a);function s(d,c,h,v){var y=a.call(this,d)||this;return y.predicate=c,y.thisArg=h,y.source=v,y.index=0,y.thisArg=h||y,y}return s.prototype.notifyComplete=function(d){this.destination.next(d),this.destination.complete()},s.prototype._next=function(d){var c=!1;try{c=this.predicate.call(this.thisArg,d,this.index++,this.source)}catch(h){this.destination.error(h);return}c||this.notifyComplete(!1)},s.prototype._complete=function(){this.notifyComplete(!0)},s}(Subscriber);function exhaust(){return function(a){return a.lift(new SwitchFirstOperator)}}var SwitchFirstOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new SwitchFirstSubscriber(s))},a}(),SwitchFirstSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.hasCompleted=!1,c.hasSubscription=!1,c}return s.prototype._next=function(d){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe(d,new SimpleInnerSubscriber(this))))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},s.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber);function exhaustMap(a,s){return s?function(d){return d.pipe(exhaustMap(function(c,h){return from(a(c,h)).pipe(map(function(v,y){return s(c,v,h,y)}))}))}:function(d){return d.lift(new ExhaustMapOperator(a))}}var ExhaustMapOperator=function(){function a(s){this.project=s}return a.prototype.call=function(s,d){return d.subscribe(new ExhaustMapSubscriber(s,this.project))},a}(),ExhaustMapSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.project=c,h.hasSubscription=!1,h.hasCompleted=!1,h.index=0,h}return s.prototype._next=function(d){this.hasSubscription||this.tryNext(d)},s.prototype.tryNext=function(d){var c,h=this.index++;try{c=this.project(d,h)}catch(v){this.destination.error(v);return}this.hasSubscription=!0,this._innerSub(c)},s.prototype._innerSub=function(d){var c=new SimpleInnerSubscriber(this),h=this.destination;h.add(c);var v=innerSubscribe(d,c);v!==c&&h.add(v)},s.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(d){this.destination.next(d)},s.prototype.notifyError=function(d){this.destination.error(d)},s.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber);function expand(a,s,d){return s===void 0&&(s=Number.POSITIVE_INFINITY),s=(s||0)<1?Number.POSITIVE_INFINITY:s,function(c){return c.lift(new ExpandOperator(a,s,d))}}var ExpandOperator=function(){function a(s,d,c){this.project=s,this.concurrent=d,this.scheduler=c}return a.prototype.call=function(s,d){return d.subscribe(new ExpandSubscriber(s,this.project,this.concurrent,this.scheduler))},a}(),ExpandSubscriber=function(a){__extends(s,a);function s(d,c,h,v){var y=a.call(this,d)||this;return y.project=c,y.concurrent=h,y.scheduler=v,y.index=0,y.active=0,y.hasCompleted=!1,h<Number.POSITIVE_INFINITY&&(y.buffer=[]),y}return s.dispatch=function(d){var c=d.subscriber,h=d.result,v=d.value,y=d.index;c.subscribeToProjection(h,v,y)},s.prototype._next=function(d){var c=this.destination;if(c.closed){this._complete();return}var h=this.index++;if(this.active<this.concurrent){c.next(d);try{var v=this.project,y=v(d,h);if(!this.scheduler)this.subscribeToProjection(y,d,h);else{var b={subscriber:this,result:y,value:d,index:h},_=this.destination;_.add(this.scheduler.schedule(s.dispatch,0,b))}}catch(T){c.error(T)}}else this.buffer.push(d)},s.prototype.subscribeToProjection=function(d,c,h){this.active++;var v=this.destination;v.add(innerSubscribe(d,new SimpleInnerSubscriber(this)))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(d){this._next(d)},s.prototype.notifyComplete=function(){var d=this.buffer;this.active--,d&&d.length>0&&this._next(d.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},s}(SimpleOuterSubscriber);function finalize(a){return function(s){return s.lift(new FinallyOperator(a))}}var FinallyOperator=function(){function a(s){this.callback=s}return a.prototype.call=function(s,d){return d.subscribe(new FinallySubscriber(s,this.callback))},a}(),FinallySubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.add(new Subscription(c)),h}return s}(Subscriber);function find$1(a,s){if(typeof a!="function")throw new TypeError("predicate is not a function");return function(d){return d.lift(new FindValueOperator(a,d,!1,s))}}var FindValueOperator=function(){function a(s,d,c,h){this.predicate=s,this.source=d,this.yieldIndex=c,this.thisArg=h}return a.prototype.call=function(s,d){return d.subscribe(new FindValueSubscriber(s,this.predicate,this.source,this.yieldIndex,this.thisArg))},a}(),FindValueSubscriber=function(a){__extends(s,a);function s(d,c,h,v,y){var b=a.call(this,d)||this;return b.predicate=c,b.source=h,b.yieldIndex=v,b.thisArg=y,b.index=0,b}return s.prototype.notifyComplete=function(d){var c=this.destination;c.next(d),c.complete(),this.unsubscribe()},s.prototype._next=function(d){var c=this,h=c.predicate,v=c.thisArg,y=this.index++;try{var b=h.call(v||this,d,y,this.source);b&&this.notifyComplete(this.yieldIndex?y:d)}catch(_){this.destination.error(_)}},s.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},s}(Subscriber);function findIndex(a,s){return function(d){return d.lift(new FindValueOperator(a,d,!0,s))}}function first(a,s){var d=arguments.length>=2;return function(c){return c.pipe(a?filter(function(h,v){return a(h,v,c)}):identity,take(1),d?defaultIfEmpty(s):throwIfEmpty(function(){return new EmptyError}))}}var ObjectUnsubscribedErrorImpl=function(){function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.subject=d,h.subscriber=c,h.closed=!1,h}return s.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var d=this.subject,c=d.observers;if(this.subject=null,!(!c||c.length===0||d.isStopped||d.closed)){var h=c.indexOf(this.subscriber);h!==-1&&c.splice(h,1)}}},s}(Subscription),SubjectSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.destination=d,c}return s}(Subscriber),Subject=function(a){__extends(s,a);function s(){var d=a.call(this)||this;return d.observers=[],d.closed=!1,d.isStopped=!1,d.hasError=!1,d.thrownError=null,d}return s.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},s.prototype.lift=function(d){var c=new AnonymousSubject(this,this);return c.operator=d,c},s.prototype.next=function(d){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var c=this.observers,h=c.length,v=c.slice(),y=0;y<h;y++)v[y].next(d)},s.prototype.error=function(d){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=d,this.isStopped=!0;for(var c=this.observers,h=c.length,v=c.slice(),y=0;y<h;y++)v[y].error(d);this.observers.length=0},s.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var d=this.observers,c=d.length,h=d.slice(),v=0;v<c;v++)h[v].complete();this.observers.length=0},s.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},s.prototype._trySubscribe=function(d){if(this.closed)throw new ObjectUnsubscribedError;return a.prototype._trySubscribe.call(this,d)},s.prototype._subscribe=function(d){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(d.error(this.thrownError),Subscription.EMPTY):this.isStopped?(d.complete(),Subscription.EMPTY):(this.observers.push(d),new SubjectSubscription(this,d))},s.prototype.asObservable=function(){var d=new Observable;return d.source=this,d},s.create=function(d,c){return new AnonymousSubject(d,c)},s}(Observable),AnonymousSubject=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.destination=d,h.source=c,h}return s.prototype.next=function(d){var c=this.destination;c&&c.next&&c.next(d)},s.prototype.error=function(d){var c=this.destination;c&&c.error&&this.destination.error(d)},s.prototype.complete=function(){var d=this.destination;d&&d.complete&&this.destination.complete()},s.prototype._subscribe=function(d){var c=this.source;return c?this.source.subscribe(d):Subscription.EMPTY},s}(Subject);function groupBy(a,s,d,c){return function(h){return h.lift(new GroupByOperator(a,s,d,c))}}var GroupByOperator=function(){function a(s,d,c,h){this.keySelector=s,this.elementSelector=d,this.durationSelector=c,this.subjectSelector=h}return a.prototype.call=function(s,d){return d.subscribe(new GroupBySubscriber(s,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},a}(),GroupBySubscriber=function(a){__extends(s,a);function s(d,c,h,v,y){var b=a.call(this,d)||this;return b.keySelector=c,b.elementSelector=h,b.durationSelector=v,b.subjectSelector=y,b.groups=null,b.attemptedToUnsubscribe=!1,b.count=0,b}return s.prototype._next=function(d){var c;try{c=this.keySelector(d)}catch(h){this.error(h);return}this._group(d,c)},s.prototype._group=function(d,c){var h=this.groups;h||(h=this.groups=new Map);var v=h.get(c),y;if(this.elementSelector)try{y=this.elementSelector(d)}catch(T){this.error(T)}else y=d;if(!v){v=this.subjectSelector?this.subjectSelector():new Subject,h.set(c,v);var b=new GroupedObservable(c,v,this);if(this.destination.next(b),this.durationSelector){var _=void 0;try{_=this.durationSelector(new GroupedObservable(c,v))}catch(T){this.error(T);return}this.add(_.subscribe(new GroupDurationSubscriber(c,v,this)))}}v.closed||v.next(y)},s.prototype._error=function(d){var c=this.groups;c&&(c.forEach(function(h,v){h.error(d)}),c.clear()),this.destination.error(d)},s.prototype._complete=function(){var d=this.groups;d&&(d.forEach(function(c,h){c.complete()}),d.clear()),this.destination.complete()},s.prototype.removeGroup=function(d){this.groups.delete(d)},s.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&a.prototype.unsubscribe.call(this))},s}(Subscriber),GroupDurationSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,c)||this;return v.key=d,v.group=c,v.parent=h,v}return s.prototype._next=function(d){this.complete()},s.prototype._unsubscribe=function(){var d=this,c=d.parent,h=d.key;this.key=this.parent=null,c&&c.removeGroup(h)},s}(Subscriber),GroupedObservable=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this)||this;return v.key=d,v.groupSubject=c,v.refCountSubscription=h,v}return s.prototype._subscribe=function(d){var c=new Subscription,h=this,v=h.refCountSubscription,y=h.groupSubject;return v&&!v.closed&&c.add(new InnerRefCountSubscription(v)),c.add(y.subscribe(d)),c},s}(Observable),InnerRefCountSubscription=function(a){__extends(s,a);function s(d){var c=a.call(this)||this;return c.parent=d,d.count++,c}return s.prototype.unsubscribe=function(){var d=this.parent;!d.closed&&!this.closed&&(a.prototype.unsubscribe.call(this),d.count-=1,d.count===0&&d.attemptedToUnsubscribe&&d.unsubscribe())},s}(Subscription);function ignoreElements(){return function(s){return s.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new IgnoreElementsSubscriber(s))},a}(),IgnoreElementsSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype._next=function(d){},s}(Subscriber);function isEmpty(){return function(a){return a.lift(new IsEmptyOperator)}}var IsEmptyOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new IsEmptySubscriber(s))},a}(),IsEmptySubscriber=function(a){__extends(s,a);function s(d){return a.call(this,d)||this}return s.prototype.notifyComplete=function(d){var c=this.destination;c.next(d),c.complete()},s.prototype._next=function(d){this.notifyComplete(!1)},s.prototype._complete=function(){this.notifyComplete(!0)},s}(Subscriber);function takeLast(a){return function(d){return a===0?empty$1():d.lift(new TakeLastOperator(a))}}var TakeLastOperator=function(){function a(s){if(this.total=s,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,d){return d.subscribe(new TakeLastSubscriber(s,this.total))},a}(),TakeLastSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.total=c,h.ring=new Array,h.count=0,h}return s.prototype._next=function(d){var c=this.ring,h=this.total,v=this.count++;if(c.length<h)c.push(d);else{var y=v%h;c[y]=d}},s.prototype._complete=function(){var d=this.destination,c=this.count;if(c>0)for(var h=this.count>=this.total?this.total:this.count,v=this.ring,y=0;y<h;y++){var b=c++%h;d.next(v[b])}d.complete()},s}(Subscriber);function last(a,s){var d=arguments.length>=2;return function(c){return c.pipe(a?filter(function(h,v){return a(h,v,c)}):identity,takeLast(1),d?defaultIfEmpty(s):throwIfEmpty(function(){return new EmptyError}))}}function mapTo(a){return function(s){return s.lift(new MapToOperator(a))}}var MapToOperator=function(){function a(s){this.value=s}return a.prototype.call=function(s,d){return d.subscribe(new MapToSubscriber(s,this.value))},a}(),MapToSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.value=c,h}return s.prototype._next=function(d){this.destination.next(this.value)},s}(Subscriber);function materialize(){return function(s){return s.lift(new MaterializeOperator)}}var MaterializeOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new MaterializeSubscriber(s))},a}(),MaterializeSubscriber=function(a){__extends(s,a);function s(d){return a.call(this,d)||this}return s.prototype._next=function(d){this.destination.next(Notification.createNext(d))},s.prototype._error=function(d){var c=this.destination;c.next(Notification.createError(d)),c.complete()},s.prototype._complete=function(){var d=this.destination;d.next(Notification.createComplete()),d.complete()},s}(Subscriber);function scan(a,s){var d=!1;return arguments.length>=2&&(d=!0),function(h){return h.lift(new ScanOperator(a,s,d))}}var ScanOperator=function(){function a(s,d,c){c===void 0&&(c=!1),this.accumulator=s,this.seed=d,this.hasSeed=c}return a.prototype.call=function(s,d){return d.subscribe(new ScanSubscriber(s,this.accumulator,this.seed,this.hasSeed))},a}(),ScanSubscriber=function(a){__extends(s,a);function s(d,c,h,v){var y=a.call(this,d)||this;return y.accumulator=c,y._seed=h,y.hasSeed=v,y.index=0,y}return Object.defineProperty(s.prototype,"seed",{get:function(){return this._seed},set:function(d){this.hasSeed=!0,this._seed=d},enumerable:!0,configurable:!0}),s.prototype._next=function(d){if(!this.hasSeed)this.seed=d,this.destination.next(d);else return this._tryNext(d)},s.prototype._tryNext=function(d){var c=this.index++,h;try{h=this.accumulator(this.seed,d,c)}catch(v){this.destination.error(v)}this.seed=h,this.destination.next(h)},s}(Subscriber);function reduce(a,s){return arguments.length>=2?function(c){return pipe(scan(a,s),takeLast(1),defaultIfEmpty(s))(c)}:function(c){return pipe(scan(function(h,v,y){return a(h,v,y+1)}),takeLast(1))(c)}}function max(a){var s=typeof a=="function"?function(d,c){return a(d,c)>0?d:c}:function(d,c){return d>c?d:c};return reduce(s)}function merge$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=Number.POSITIVE_INFINITY,c=null,h=a[a.length-1];return isScheduler(h)?(c=a.pop(),a.length>1&&typeof a[a.length-1]=="number"&&(d=a.pop())):typeof h=="number"&&(d=a.pop()),c===null&&a.length===1&&a[0]instanceof Observable?a[0]:mergeAll(d)(fromArray(a,c))}function merge$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return d.lift.call(merge$2.apply(void 0,[d].concat(a)))}}function mergeMapTo(a,s,d){return d===void 0&&(d=Number.POSITIVE_INFINITY),typeof s=="function"?mergeMap(function(){return a},s,d):(typeof s=="number"&&(d=s),mergeMap(function(){return a},d))}function mergeScan(a,s,d){return d===void 0&&(d=Number.POSITIVE_INFINITY),function(c){return c.lift(new MergeScanOperator(a,s,d))}}var MergeScanOperator=function(){function a(s,d,c){this.accumulator=s,this.seed=d,this.concurrent=c}return a.prototype.call=function(s,d){return d.subscribe(new MergeScanSubscriber(s,this.accumulator,this.seed,this.concurrent))},a}(),MergeScanSubscriber=function(a){__extends(s,a);function s(d,c,h,v){var y=a.call(this,d)||this;return y.accumulator=c,y.acc=h,y.concurrent=v,y.hasValue=!1,y.hasCompleted=!1,y.buffer=[],y.active=0,y.index=0,y}return s.prototype._next=function(d){if(this.active<this.concurrent){var c=this.index++,h=this.destination,v=void 0;try{var y=this.accumulator;v=y(this.acc,d,c)}catch(b){return h.error(b)}this.active++,this._innerSub(v)}else this.buffer.push(d)},s.prototype._innerSub=function(d){var c=new SimpleInnerSubscriber(this),h=this.destination;h.add(c);var v=innerSubscribe(d,c);v!==c&&h.add(v)},s.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},s.prototype.notifyNext=function(d){var c=this.destination;this.acc=d,this.hasValue=!0,c.next(d)},s.prototype.notifyComplete=function(){var d=this.buffer;this.active--,d.length>0?this._next(d.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},s}(SimpleOuterSubscriber);function min(a){var s=typeof a=="function"?function(d,c){return a(d,c)<0?d:c}:function(d,c){return d<c?d:c};return reduce(s)}function refCount(){return function(s){return s.lift(new RefCountOperator(s))}}var RefCountOperator=function(){function a(s){this.connectable=s}return a.prototype.call=function(s,d){var c=this.connectable;c._refCount++;var h=new RefCountSubscriber(s,c),v=d.subscribe(h);return h.closed||(h.connection=c.connect()),v},a}(),RefCountSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.connectable=c,h}return s.prototype._unsubscribe=function(){var d=this.connectable;if(!d){this.connection=null;return}this.connectable=null;var c=d._refCount;if(c<=0){this.connection=null;return}if(d._refCount=c-1,c>1){this.connection=null;return}var h=this.connection,v=d._connection;this.connection=null,v&&(!h||v===h)&&v.unsubscribe()},s}(Subscriber),ConnectableObservable=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.source=d,h.subjectFactory=c,h._refCount=0,h._isComplete=!1,h}return s.prototype._subscribe=function(d){return this.getSubject().subscribe(d)},s.prototype.getSubject=function(){var d=this._subject;return(!d||d.isStopped)&&(this._subject=this.subjectFactory()),this._subject},s.prototype.connect=function(){var d=this._connection;return d||(this._isComplete=!1,d=this._connection=new Subscription,d.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),d.closed&&(this._connection=null,d=Subscription.EMPTY)),d},s.prototype.refCount=function(){return refCount()(this)},s}(Observable),connectableObservableDescriptor=function(){var a=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}}}(),ConnectableSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.connectable=c,h}return s.prototype._error=function(d){this._unsubscribe(),a.prototype._error.call(this,d)},s.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){var d=this.connectable;if(d){this.connectable=null;var c=d._connection;d._refCount=0,d._subject=null,d._connection=null,c&&c.unsubscribe()}},s}(SubjectSubscriber);function multicast(a,s){return function(c){var h;if(typeof a=="function"?h=a:h=function(){return a},typeof s=="function")return c.lift(new MulticastOperator(h,s));var v=Object.create(c,connectableObservableDescriptor);return v.source=c,v.subjectFactory=h,v}}var MulticastOperator=function(){function a(s,d){this.subjectFactory=s,this.selector=d}return a.prototype.call=function(s,d){var c=this.selector,h=this.subjectFactory(),v=c(h).subscribe(s);return v.add(d.subscribe(h)),v},a}();function observeOn(a,s){return s===void 0&&(s=0),function(c){return c.lift(new ObserveOnOperator(a,s))}}var ObserveOnOperator=function(){function a(s,d){d===void 0&&(d=0),this.scheduler=s,this.delay=d}return a.prototype.call=function(s,d){return d.subscribe(new ObserveOnSubscriber(s,this.scheduler,this.delay))},a}(),ObserveOnSubscriber=function(a){__extends(s,a);function s(d,c,h){h===void 0&&(h=0);var v=a.call(this,d)||this;return v.scheduler=c,v.delay=h,v}return s.dispatch=function(d){var c=d.notification,h=d.destination;c.observe(h),this.unsubscribe()},s.prototype.scheduleMessage=function(d){var c=this.destination;c.add(this.scheduler.schedule(s.dispatch,this.delay,new ObserveOnMessage(d,this.destination)))},s.prototype._next=function(d){this.scheduleMessage(Notification.createNext(d))},s.prototype._error=function(d){this.scheduleMessage(Notification.createError(d)),this.unsubscribe()},s.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},s}(Subscriber),ObserveOnMessage=function(){function a(s,d){this.notification=s,this.destination=d}return a}();function onErrorResumeNext(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return a.length===1&&isArray$2(a[0])&&(a=a[0]),function(d){return d.lift(new OnErrorResumeNextOperator(a))}}var OnErrorResumeNextOperator=function(){function a(s){this.nextSources=s}return a.prototype.call=function(s,d){return d.subscribe(new OnErrorResumeNextSubscriber(s,this.nextSources))},a}(),OnErrorResumeNextSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.destination=d,h.nextSources=c,h}return s.prototype.notifyError=function(){this.subscribeToNextSource()},s.prototype.notifyComplete=function(){this.subscribeToNextSource()},s.prototype._error=function(d){this.subscribeToNextSource(),this.unsubscribe()},s.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},s.prototype.subscribeToNextSource=function(){var d=this.nextSources.shift();if(d){var c=new SimpleInnerSubscriber(this),h=this.destination;h.add(c);var v=innerSubscribe(d,c);v!==c&&h.add(v)}else this.destination.complete()},s}(SimpleOuterSubscriber);function pairwise(){return function(a){return a.lift(new PairwiseOperator)}}var PairwiseOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new PairwiseSubscriber(s))},a}(),PairwiseSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.hasPrev=!1,c}return s.prototype._next=function(d){var c;this.hasPrev?c=[this.prev,d]:this.hasPrev=!0,this.prev=d,c&&this.destination.next(c)},s}(Subscriber);function not(a,s){function d(){return!d.pred.apply(d.thisArg,arguments)}return d.pred=a,d.thisArg=s,d}function partition(a,s){return function(d){return[filter(a,s)(d),filter(not(a,s))(d)]}}function pluck(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a.length;if(d===0)throw new Error("list of properties cannot be empty.");return function(c){return map(plucker(a,d))(c)}}function plucker(a,s){var d=function(c){for(var h=c,v=0;v<s;v++){var y=h!=null?h[a[v]]:void 0;if(y!==void 0)h=y;else return}return h};return d}function publish(a){return a?multicast(function(){return new Subject},a):multicast(new Subject)}var BehaviorSubject=function(a){__extends(s,a);function s(d){var c=a.call(this)||this;return c._value=d,c}return Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),s.prototype._subscribe=function(d){var c=a.prototype._subscribe.call(this,d);return c&&!c.closed&&d.next(this._value),c},s.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},s.prototype.next=function(d){a.prototype.next.call(this,this._value=d)},s}(Subject);function publishBehavior(a){return function(s){return multicast(new BehaviorSubject(a))(s)}}var AsyncSubject=function(a){__extends(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d.value=null,d.hasNext=!1,d.hasCompleted=!1,d}return s.prototype._subscribe=function(d){return this.hasError?(d.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(d.next(this.value),d.complete(),Subscription.EMPTY):a.prototype._subscribe.call(this,d)},s.prototype.next=function(d){this.hasCompleted||(this.value=d,this.hasNext=!0)},s.prototype.error=function(d){this.hasCompleted||a.prototype.error.call(this,d)},s.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&a.prototype.next.call(this,this.value),a.prototype.complete.call(this)},s}(Subject);function publishLast(){return function(a){return multicast(new AsyncSubject)(a)}}var QueueAction=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d,c)||this;return h.scheduler=d,h.work=c,h}return s.prototype.schedule=function(d,c){return c===void 0&&(c=0),c>0?a.prototype.schedule.call(this,d,c):(this.delay=c,this.state=d,this.scheduler.flush(this),this)},s.prototype.execute=function(d,c){return c>0||this.closed?a.prototype.execute.call(this,d,c):this._execute(d,c)},s.prototype.requestAsyncId=function(d,c,h){return h===void 0&&(h=0),h!==null&&h>0||h===null&&this.delay>0?a.prototype.requestAsyncId.call(this,d,c,h):d.flush(this)},s}(AsyncAction),QueueScheduler=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,ReplaySubject=function(a){__extends(s,a);function s(d,c,h){d===void 0&&(d=Number.POSITIVE_INFINITY),c===void 0&&(c=Number.POSITIVE_INFINITY);var v=a.call(this)||this;return v.scheduler=h,v._events=[],v._infiniteTimeWindow=!1,v._bufferSize=d<1?1:d,v._windowTime=c<1?1:c,c===Number.POSITIVE_INFINITY?(v._infiniteTimeWindow=!0,v.next=v.nextInfiniteTimeWindow):v.next=v.nextTimeWindow,v}return s.prototype.nextInfiniteTimeWindow=function(d){if(!this.isStopped){var c=this._events;c.push(d),c.length>this._bufferSize&&c.shift()}a.prototype.next.call(this,d)},s.prototype.nextTimeWindow=function(d){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),d)),this._trimBufferThenGetEvents()),a.prototype.next.call(this,d)},s.prototype._subscribe=function(d){var c=this._infiniteTimeWindow,h=c?this._events:this._trimBufferThenGetEvents(),v=this.scheduler,y=h.length,b;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?b=Subscription.EMPTY:(this.observers.push(d),b=new SubjectSubscription(this,d)),v&&d.add(d=new ObserveOnSubscriber(d,v)),c)for(var _=0;_<y&&!d.closed;_++)d.next(h[_]);else for(var _=0;_<y&&!d.closed;_++)d.next(h[_].value);return this.hasError?d.error(this.thrownError):this.isStopped&&d.complete(),b},s.prototype._getNow=function(){return(this.scheduler||queue).now()},s.prototype._trimBufferThenGetEvents=function(){for(var d=this._getNow(),c=this._bufferSize,h=this._windowTime,v=this._events,y=v.length,b=0;b<y&&!(d-v[b].time<h);)b++;return y>c&&(b=Math.max(b,y-c)),b>0&&v.splice(0,b),v},s}(Subject),ReplayEvent=function(){function a(s,d){this.time=s,this.value=d}return a}();function publishReplay(a,s,d,c){d&&typeof d!="function"&&(c=d);var h=typeof d=="function"?d:void 0,v=new ReplaySubject(a,s,c);return function(y){return multicast(function(){return v},h)(y)}}function race$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(a.length===1)if(isArray$2(a[0]))a=a[0];else return a[0];return fromArray(a,void 0).lift(new RaceOperator)}var RaceOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new RaceSubscriber(s))},a}(),RaceSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.hasFirst=!1,c.observables=[],c.subscriptions=[],c}return s.prototype._next=function(d){this.observables.push(d)},s.prototype._complete=function(){var d=this.observables,c=d.length;if(c===0)this.destination.complete();else{for(var h=0;h<c&&!this.hasFirst;h++){var v=d[h],y=subscribeToResult(this,v,void 0,h);this.subscriptions&&this.subscriptions.push(y),this.add(y)}this.observables=null}},s.prototype.notifyNext=function(d,c,h){if(!this.hasFirst){this.hasFirst=!0;for(var v=0;v<this.subscriptions.length;v++)if(v!==h){var y=this.subscriptions[v];y.unsubscribe(),this.remove(y)}this.subscriptions=null}this.destination.next(c)},s}(OuterSubscriber);function race(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(c){return a.length===1&&isArray$2(a[0])&&(a=a[0]),c.lift.call(race$1.apply(void 0,[c].concat(a)))}}function repeat(a){return a===void 0&&(a=-1),function(s){return a===0?empty$1():a<0?s.lift(new RepeatOperator(-1,s)):s.lift(new RepeatOperator(a-1,s))}}var RepeatOperator=function(){function a(s,d){this.count=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new RepeatSubscriber(s,this.count,this.source))},a}(),RepeatSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.count=c,v.source=h,v}return s.prototype.complete=function(){if(!this.isStopped){var d=this,c=d.source,h=d.count;if(h===0)return a.prototype.complete.call(this);h>-1&&(this.count=h-1),c.subscribe(this._unsubscribeAndRecycle())}},s}(Subscriber);function repeatWhen(a){return function(s){return s.lift(new RepeatWhenOperator(a))}}var RepeatWhenOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){return d.subscribe(new RepeatWhenSubscriber(s,this.notifier,d))},a}(),RepeatWhenSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.notifier=c,v.source=h,v.sourceIsBeingSubscribedTo=!0,v}return s.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},s.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return a.prototype.complete.call(this)},s.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return a.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},s.prototype._unsubscribe=function(){var d=this,c=d.notifications,h=d.retriesSubscription;c&&(c.unsubscribe(),this.notifications=void 0),h&&(h.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},s.prototype._unsubscribeAndRecycle=function(){var d=this._unsubscribe;return this._unsubscribe=null,a.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=d,this},s.prototype.subscribeToRetries=function(){this.notifications=new Subject;var d;try{var c=this.notifier;d=c(this.notifications)}catch{return a.prototype.complete.call(this)}this.retries=d,this.retriesSubscription=innerSubscribe(d,new SimpleInnerSubscriber(this))},s}(SimpleOuterSubscriber);function retry(a){return a===void 0&&(a=-1),function(s){return s.lift(new RetryOperator(a,s))}}var RetryOperator=function(){function a(s,d){this.count=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new RetrySubscriber(s,this.count,this.source))},a}(),RetrySubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.count=c,v.source=h,v}return s.prototype.error=function(d){if(!this.isStopped){var c=this,h=c.source,v=c.count;if(v===0)return a.prototype.error.call(this,d);v>-1&&(this.count=v-1),h.subscribe(this._unsubscribeAndRecycle())}},s}(Subscriber);function retryWhen(a){return function(s){return s.lift(new RetryWhenOperator(a,s))}}var RetryWhenOperator=function(){function a(s,d){this.notifier=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new RetryWhenSubscriber(s,this.notifier,this.source))},a}(),RetryWhenSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.notifier=c,v.source=h,v}return s.prototype.error=function(d){if(!this.isStopped){var c=this.errors,h=this.retries,v=this.retriesSubscription;if(h)this.errors=void 0,this.retriesSubscription=void 0;else{c=new Subject;try{var y=this.notifier;h=y(c)}catch(b){return a.prototype.error.call(this,b)}v=innerSubscribe(h,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=c,this.retries=h,this.retriesSubscription=v,c.next(d)}},s.prototype._unsubscribe=function(){var d=this,c=d.errors,h=d.retriesSubscription;c&&(c.unsubscribe(),this.errors=void 0),h&&(h.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},s.prototype.notifyNext=function(){var d=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=d,this.source.subscribe(this)},s}(SimpleOuterSubscriber);function sample(a){return function(s){return s.lift(new SampleOperator(a))}}var SampleOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){var c=new SampleSubscriber(s),h=d.subscribe(c);return h.add(innerSubscribe(this.notifier,new SimpleInnerSubscriber(c))),h},a}(),SampleSubscriber=function(a){__extends(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d.hasValue=!1,d}return s.prototype._next=function(d){this.value=d,this.hasValue=!0},s.prototype.notifyNext=function(){this.emitValue()},s.prototype.notifyComplete=function(){this.emitValue()},s.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},s}(SimpleOuterSubscriber);function sampleTime(a,s){return s===void 0&&(s=async),function(d){return d.lift(new SampleTimeOperator(a,s))}}var SampleTimeOperator=function(){function a(s,d){this.period=s,this.scheduler=d}return a.prototype.call=function(s,d){return d.subscribe(new SampleTimeSubscriber(s,this.period,this.scheduler))},a}(),SampleTimeSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.period=c,v.scheduler=h,v.hasValue=!1,v.add(h.schedule(dispatchNotification,c,{subscriber:v,period:c})),v}return s.prototype._next=function(d){this.lastValue=d,this.hasValue=!0},s.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},s}(Subscriber);function dispatchNotification(a){var s=a.subscriber,d=a.period;s.notifyNext(),this.schedule(a,d)}function sequenceEqual(a,s){return function(d){return d.lift(new SequenceEqualOperator(a,s))}}var SequenceEqualOperator=function(){function a(s,d){this.compareTo=s,this.comparator=d}return a.prototype.call=function(s,d){return d.subscribe(new SequenceEqualSubscriber(s,this.compareTo,this.comparator))},a}(),SequenceEqualSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.compareTo=c,v.comparator=h,v._a=[],v._b=[],v._oneComplete=!1,v.destination.add(c.subscribe(new SequenceEqualCompareToSubscriber(d,v))),v}return s.prototype._next=function(d){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(d),this.checkValues())},s.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},s.prototype.checkValues=function(){for(var d=this,c=d._a,h=d._b,v=d.comparator;c.length>0&&h.length>0;){var y=c.shift(),b=h.shift(),_=!1;try{_=v?v(y,b):y===b}catch(T){this.destination.error(T)}_||this.emit(!1)}},s.prototype.emit=function(d){var c=this.destination;c.next(d),c.complete()},s.prototype.nextB=function(d){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(d),this.checkValues())},s.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},s}(Subscriber),SequenceEqualCompareToSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.parent=c,h}return s.prototype._next=function(d){this.parent.nextB(d)},s.prototype._error=function(d){this.parent.error(d),this.unsubscribe()},s.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},s}(Subscriber);function shareSubjectFactory(){return new Subject}function share(){return function(a){return refCount()(multicast(shareSubjectFactory)(a))}}function shareReplay(a,s,d){var c;return a&&typeof a=="object"?c=a:c={bufferSize:a,windowTime:s,refCount:!1,scheduler:d},function(h){return h.lift(shareReplayOperator(c))}}function shareReplayOperator(a){var s=a.bufferSize,d=s===void 0?Number.POSITIVE_INFINITY:s,c=a.windowTime,h=c===void 0?Number.POSITIVE_INFINITY:c,v=a.refCount,y=a.scheduler,b,_=0,T,I=!1,N=!1;return function(V){_++;var $;!b||I?(I=!1,b=new ReplaySubject(d,h,y),$=b.subscribe(this),T=V.subscribe({next:function(L){b.next(L)},error:function(L){I=!0,b.error(L)},complete:function(){N=!0,T=void 0,b.complete()}}),N&&(T=void 0)):$=b.subscribe(this),this.add(function(){_--,$.unsubscribe(),$=void 0,T&&!N&&v&&_===0&&(T.unsubscribe(),T=void 0,b=void 0)})}}function single(a){return function(s){return s.lift(new SingleOperator(a,s))}}var SingleOperator=function(){function a(s,d){this.predicate=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new SingleSubscriber(s,this.predicate,this.source))},a}(),SingleSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.predicate=c,v.source=h,v.seenValue=!1,v.index=0,v}return s.prototype.applySingleValue=function(d){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=d)},s.prototype._next=function(d){var c=this.index++;this.predicate?this.tryNext(d,c):this.applySingleValue(d)},s.prototype.tryNext=function(d,c){try{this.predicate(d,c,this.source)&&this.applySingleValue(d)}catch(h){this.destination.error(h)}},s.prototype._complete=function(){var d=this.destination;this.index>0?(d.next(this.seenValue?this.singleValue:void 0),d.complete()):d.error(new EmptyError)},s}(Subscriber);function skip(a){return function(s){return s.lift(new SkipOperator(a))}}var SkipOperator=function(){function a(s){this.total=s}return a.prototype.call=function(s,d){return d.subscribe(new SkipSubscriber(s,this.total))},a}(),SkipSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.total=c,h.count=0,h}return s.prototype._next=function(d){++this.count>this.total&&this.destination.next(d)},s}(Subscriber);function skipLast(a){return function(s){return s.lift(new SkipLastOperator(a))}}var SkipLastOperator=function(){function a(s){if(this._skipCount=s,this._skipCount<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,d){return this._skipCount===0?d.subscribe(new Subscriber(s)):d.subscribe(new SkipLastSubscriber(s,this._skipCount))},a}(),SkipLastSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h._skipCount=c,h._count=0,h._ring=new Array(c),h}return s.prototype._next=function(d){var c=this._skipCount,h=this._count++;if(h<c)this._ring[h]=d;else{var v=h%c,y=this._ring,b=y[v];y[v]=d,this.destination.next(b)}},s}(Subscriber);function skipUntil(a){return function(s){return s.lift(new SkipUntilOperator(a))}}var SkipUntilOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){return d.subscribe(new SkipUntilSubscriber(s,this.notifier))},a}(),SkipUntilSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;h.hasValue=!1;var v=new SimpleInnerSubscriber(h);h.add(v),h.innerSubscription=v;var y=innerSubscribe(c,v);return y!==v&&(h.add(y),h.innerSubscription=y),h}return s.prototype._next=function(d){this.hasValue&&a.prototype._next.call(this,d)},s.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},s.prototype.notifyComplete=function(){},s}(SimpleOuterSubscriber);function skipWhile(a){return function(s){return s.lift(new SkipWhileOperator(a))}}var SkipWhileOperator=function(){function a(s){this.predicate=s}return a.prototype.call=function(s,d){return d.subscribe(new SkipWhileSubscriber(s,this.predicate))},a}(),SkipWhileSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.predicate=c,h.skipping=!0,h.index=0,h}return s.prototype._next=function(d){var c=this.destination;this.skipping&&this.tryCallPredicate(d),this.skipping||c.next(d)},s.prototype.tryCallPredicate=function(d){try{var c=this.predicate(d,this.index++);this.skipping=Boolean(c)}catch(h){this.destination.error(h)}},s}(Subscriber);function startWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a[a.length-1];return isScheduler(d)?(a.pop(),function(c){return concat$1(a,c,d)}):function(c){return concat$1(a,c)}}var nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(a){return a in activeHandles?(delete activeHandles[a],!0):!1}var Immediate={setImmediate:function(a){var s=nextHandle++;return activeHandles[s]=!0,RESOLVED.then(function(){return findAndClearHandle(s)&&a()}),s},clearImmediate:function(a){findAndClearHandle(a)}},AsapAction=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d,c)||this;return h.scheduler=d,h.work=c,h}return s.prototype.requestAsyncId=function(d,c,h){return h===void 0&&(h=0),h!==null&&h>0?a.prototype.requestAsyncId.call(this,d,c,h):(d.actions.push(this),d.scheduled||(d.scheduled=Immediate.setImmediate(d.flush.bind(d,null))))},s.prototype.recycleAsyncId=function(d,c,h){if(h===void 0&&(h=0),h!==null&&h>0||h===null&&this.delay>0)return a.prototype.recycleAsyncId.call(this,d,c,h);d.actions.length===0&&(Immediate.clearImmediate(c),d.scheduled=void 0)},s}(AsyncAction),AsapScheduler=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.flush=function(d){this.active=!0,this.scheduled=void 0;var c=this.actions,h,v=-1,y=c.length;d=d||c.shift();do if(h=d.execute(d.state,d.delay))break;while(++v<y&&(d=c.shift()));if(this.active=!1,h){for(;++v<y&&(d=c.shift());)d.unsubscribe();throw h}},s}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,SubscribeOnObservable=function(a){__extends(s,a);function s(d,c,h){c===void 0&&(c=0),h===void 0&&(h=asap);var v=a.call(this)||this;return v.source=d,v.delayTime=c,v.scheduler=h,(!isNumeric(c)||c<0)&&(v.delayTime=0),(!h||typeof h.schedule!="function")&&(v.scheduler=asap),v}return s.create=function(d,c,h){return c===void 0&&(c=0),h===void 0&&(h=asap),new s(d,c,h)},s.dispatch=function(d){var c=d.source,h=d.subscriber;return this.add(c.subscribe(h))},s.prototype._subscribe=function(d){var c=this.delayTime,h=this.source,v=this.scheduler;return v.schedule(s.dispatch,c,{source:h,subscriber:d})},s}(Observable);function subscribeOn(a,s){return s===void 0&&(s=0),function(c){return c.lift(new SubscribeOnOperator(a,s))}}var SubscribeOnOperator=function(){function a(s,d){this.scheduler=s,this.delay=d}return a.prototype.call=function(s,d){return new SubscribeOnObservable(d,this.delay,this.scheduler).subscribe(s)},a}();function switchMap(a,s){return typeof s=="function"?function(d){return d.pipe(switchMap(function(c,h){return from(a(c,h)).pipe(map(function(v,y){return s(c,v,h,y)}))}))}:function(d){return d.lift(new SwitchMapOperator(a))}}var SwitchMapOperator=function(){function a(s){this.project=s}return a.prototype.call=function(s,d){return d.subscribe(new SwitchMapSubscriber(s,this.project))},a}(),SwitchMapSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.project=c,h.index=0,h}return s.prototype._next=function(d){var c,h=this.index++;try{c=this.project(d,h)}catch(v){this.destination.error(v);return}this._innerSub(c)},s.prototype._innerSub=function(d){var c=this.innerSubscription;c&&c.unsubscribe();var h=new SimpleInnerSubscriber(this),v=this.destination;v.add(h),this.innerSubscription=innerSubscribe(d,h),this.innerSubscription!==h&&v.add(this.innerSubscription)},s.prototype._complete=function(){var d=this.innerSubscription;(!d||d.closed)&&a.prototype._complete.call(this),this.unsubscribe()},s.prototype._unsubscribe=function(){this.innerSubscription=void 0},s.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&a.prototype._complete.call(this)},s.prototype.notifyNext=function(d){this.destination.next(d)},s}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity)}function switchMapTo(a,s){return s?switchMap(function(){return a},s):switchMap(function(){return a})}function takeUntil(a){return function(s){return s.lift(new TakeUntilOperator(a))}}var TakeUntilOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){var c=new TakeUntilSubscriber(s),h=innerSubscribe(this.notifier,new SimpleInnerSubscriber(c));return h&&!c.seenValue?(c.add(h),d.subscribe(c)):c},a}(),TakeUntilSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.seenValue=!1,c}return s.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},s.prototype.notifyComplete=function(){},s}(SimpleOuterSubscriber);function takeWhile(a,s){return s===void 0&&(s=!1),function(d){return d.lift(new TakeWhileOperator(a,s))}}var TakeWhileOperator=function(){function a(s,d){this.predicate=s,this.inclusive=d}return a.prototype.call=function(s,d){return d.subscribe(new TakeWhileSubscriber(s,this.predicate,this.inclusive))},a}(),TakeWhileSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.predicate=c,v.inclusive=h,v.index=0,v}return s.prototype._next=function(d){var c=this.destination,h;try{h=this.predicate(d,this.index++)}catch(v){c.error(v);return}this.nextOrComplete(d,h)},s.prototype.nextOrComplete=function(d,c){var h=this.destination;Boolean(c)?h.next(d):(this.inclusive&&h.next(d),h.complete())},s}(Subscriber);function noop$2(){}function tap(a,s,d){return function(h){return h.lift(new DoOperator(a,s,d))}}var DoOperator=function(){function a(s,d,c){this.nextOrObserver=s,this.error=d,this.complete=c}return a.prototype.call=function(s,d){return d.subscribe(new TapSubscriber(s,this.nextOrObserver,this.error,this.complete))},a}(),TapSubscriber=function(a){__extends(s,a);function s(d,c,h,v){var y=a.call(this,d)||this;return y._tapNext=noop$2,y._tapError=noop$2,y._tapComplete=noop$2,y._tapError=h||noop$2,y._tapComplete=v||noop$2,isFunction$1(c)?(y._context=y,y._tapNext=c):c&&(y._context=c,y._tapNext=c.next||noop$2,y._tapError=c.error||noop$2,y._tapComplete=c.complete||noop$2),y}return s.prototype._next=function(d){try{this._tapNext.call(this._context,d)}catch(c){this.destination.error(c);return}this.destination.next(d)},s.prototype._error=function(d){try{this._tapError.call(this._context,d)}catch(c){this.destination.error(c);return}this.destination.error(d)},s.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(d){this.destination.error(d);return}return this.destination.complete()},s}(Subscriber),defaultThrottleConfig={leading:!0,trailing:!1};function throttle(a,s){return s===void 0&&(s=defaultThrottleConfig),function(d){return d.lift(new ThrottleOperator(a,!!s.leading,!!s.trailing))}}var ThrottleOperator=function(){function a(s,d,c){this.durationSelector=s,this.leading=d,this.trailing=c}return a.prototype.call=function(s,d){return d.subscribe(new ThrottleSubscriber(s,this.durationSelector,this.leading,this.trailing))},a}(),ThrottleSubscriber=function(a){__extends(s,a);function s(d,c,h,v){var y=a.call(this,d)||this;return y.destination=d,y.durationSelector=c,y._leading=h,y._trailing=v,y._hasValue=!1,y}return s.prototype._next=function(d){this._hasValue=!0,this._sendValue=d,this._throttled||(this._leading?this.send():this.throttle(d))},s.prototype.send=function(){var d=this,c=d._hasValue,h=d._sendValue;c&&(this.destination.next(h),this.throttle(h)),this._hasValue=!1,this._sendValue=void 0},s.prototype.throttle=function(d){var c=this.tryDurationSelector(d);c&&this.add(this._throttled=innerSubscribe(c,new SimpleInnerSubscriber(this)))},s.prototype.tryDurationSelector=function(d){try{return this.durationSelector(d)}catch(c){return this.destination.error(c),null}},s.prototype.throttlingDone=function(){var d=this,c=d._throttled,h=d._trailing;c&&c.unsubscribe(),this._throttled=void 0,h&&this.send()},s.prototype.notifyNext=function(){this.throttlingDone()},s.prototype.notifyComplete=function(){this.throttlingDone()},s}(SimpleOuterSubscriber);function throttleTime(a,s,d){return s===void 0&&(s=async),d===void 0&&(d=defaultThrottleConfig),function(c){return c.lift(new ThrottleTimeOperator(a,s,d.leading,d.trailing))}}var ThrottleTimeOperator=function(){function a(s,d,c,h){this.duration=s,this.scheduler=d,this.leading=c,this.trailing=h}return a.prototype.call=function(s,d){return d.subscribe(new ThrottleTimeSubscriber(s,this.duration,this.scheduler,this.leading,this.trailing))},a}(),ThrottleTimeSubscriber=function(a){__extends(s,a);function s(d,c,h,v,y){var b=a.call(this,d)||this;return b.duration=c,b.scheduler=h,b.leading=v,b.trailing=y,b._hasTrailingValue=!1,b._trailingValue=null,b}return s.prototype._next=function(d){this.throttled?this.trailing&&(this._trailingValue=d,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(d):this.trailing&&(this._trailingValue=d,this._hasTrailingValue=!0))},s.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},s.prototype.clearThrottle=function(){var d=this.throttled;d&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),d.unsubscribe(),this.remove(d),this.throttled=null)},s}(Subscriber);function dispatchNext(a){var s=a.subscriber;s.clearThrottle()}function defer(a){return new Observable(function(s){var d;try{d=a()}catch(h){s.error(h);return}var c=d?from(d):empty$1();return c.subscribe(s)})}function timeInterval(a){return a===void 0&&(a=async),function(s){return defer(function(){return s.pipe(scan(function(d,c){var h=d.current;return{value:c,current:a.now(),last:h}},{current:a.now(),value:void 0,last:void 0}),map(function(d){var c=d.current,h=d.last,v=d.value;return new TimeInterval(v,c-h)}))})}}var TimeInterval=function(){function a(s,d){this.value=s,this.interval=d}return a}(),TimeoutErrorImpl=function(){function a(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return a.prototype=Object.create(Error.prototype),a}(),TimeoutError=TimeoutErrorImpl;function timeoutWith(a,s,d){return d===void 0&&(d=async),function(c){var h=isDate$1(a),v=h?+a-d.now():Math.abs(a);return c.lift(new TimeoutWithOperator(v,h,s,d))}}var TimeoutWithOperator=function(){function a(s,d,c,h){this.waitFor=s,this.absoluteTimeout=d,this.withObservable=c,this.scheduler=h}return a.prototype.call=function(s,d){return d.subscribe(new TimeoutWithSubscriber(s,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},a}(),TimeoutWithSubscriber=function(a){__extends(s,a);function s(d,c,h,v,y){var b=a.call(this,d)||this;return b.absoluteTimeout=c,b.waitFor=h,b.withObservable=v,b.scheduler=y,b.scheduleTimeout(),b}return s.dispatchTimeout=function(d){var c=d.withObservable;d._unsubscribeAndRecycle(),d.add(innerSubscribe(c,new SimpleInnerSubscriber(d)))},s.prototype.scheduleTimeout=function(){var d=this.action;d?this.action=d.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(s.dispatchTimeout,this.waitFor,this))},s.prototype._next=function(d){this.absoluteTimeout||this.scheduleTimeout(),a.prototype._next.call(this,d)},s.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},s}(SimpleOuterSubscriber);function timeout(a,s){return s===void 0&&(s=async),timeoutWith(a,throwError(new TimeoutError),s)}function timestamp(a){return a===void 0&&(a=async),map(function(s){return new Timestamp(s,a.now())})}var Timestamp=function(){function a(s,d){this.value=s,this.timestamp=d}return a}();function toArrayReducer(a,s,d){return d===0?[s]:(a.push(s),a)}function toArray(){return reduce(toArrayReducer,[])}function window$1(a){return function(d){return d.lift(new WindowOperator$1(a))}}var WindowOperator$1=function(){function a(s){this.windowBoundaries=s}return a.prototype.call=function(s,d){var c=new WindowSubscriber$1(s),h=d.subscribe(c);return h.closed||c.add(innerSubscribe(this.windowBoundaries,new SimpleInnerSubscriber(c))),h},a}(),WindowSubscriber$1=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.window=new Subject,d.next(c.window),c}return s.prototype.notifyNext=function(){this.openWindow()},s.prototype.notifyError=function(d){this._error(d)},s.prototype.notifyComplete=function(){this._complete()},s.prototype._next=function(d){this.window.next(d)},s.prototype._error=function(d){this.window.error(d),this.destination.error(d)},s.prototype._complete=function(){this.window.complete(),this.destination.complete()},s.prototype._unsubscribe=function(){this.window=null},s.prototype.openWindow=function(){var d=this.window;d&&d.complete();var c=this.destination,h=this.window=new Subject;c.next(h)},s}(SimpleOuterSubscriber);function windowCount(a,s){return s===void 0&&(s=0),function(c){return c.lift(new WindowCountOperator(a,s))}}var WindowCountOperator=function(){function a(s,d){this.windowSize=s,this.startWindowEvery=d}return a.prototype.call=function(s,d){return d.subscribe(new WindowCountSubscriber(s,this.windowSize,this.startWindowEvery))},a}(),WindowCountSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.destination=d,v.windowSize=c,v.startWindowEvery=h,v.windows=[new Subject],v.count=0,d.next(v.windows[0]),v}return s.prototype._next=function(d){for(var c=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,h=this.destination,v=this.windowSize,y=this.windows,b=y.length,_=0;_<b&&!this.closed;_++)y[_].next(d);var T=this.count-v+1;if(T>=0&&T%c===0&&!this.closed&&y.shift().complete(),++this.count%c===0&&!this.closed){var I=new Subject;y.push(I),h.next(I)}},s.prototype._error=function(d){var c=this.windows;if(c)for(;c.length>0&&!this.closed;)c.shift().error(d);this.destination.error(d)},s.prototype._complete=function(){var d=this.windows;if(d)for(;d.length>0&&!this.closed;)d.shift().complete();this.destination.complete()},s.prototype._unsubscribe=function(){this.count=0,this.windows=null},s}(Subscriber);function windowTime(a){var s=async,d=null,c=Number.POSITIVE_INFINITY;return isScheduler(arguments[3])&&(s=arguments[3]),isScheduler(arguments[2])?s=arguments[2]:isNumeric(arguments[2])&&(c=Number(arguments[2])),isScheduler(arguments[1])?s=arguments[1]:isNumeric(arguments[1])&&(d=Number(arguments[1])),function(v){return v.lift(new WindowTimeOperator(a,d,c,s))}}var WindowTimeOperator=function(){function a(s,d,c,h){this.windowTimeSpan=s,this.windowCreationInterval=d,this.maxWindowSize=c,this.scheduler=h}return a.prototype.call=function(s,d){return d.subscribe(new WindowTimeSubscriber(s,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},a}(),CountedSubject=function(a){__extends(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d._numberOfNextedValues=0,d}return s.prototype.next=function(d){this._numberOfNextedValues++,a.prototype.next.call(this,d)},Object.defineProperty(s.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),s}(Subject),WindowTimeSubscriber=function(a){__extends(s,a);function s(d,c,h,v,y){var b=a.call(this,d)||this;b.destination=d,b.windowTimeSpan=c,b.windowCreationInterval=h,b.maxWindowSize=v,b.scheduler=y,b.windows=[];var _=b.openWindow();if(h!==null&&h>=0){var T={subscriber:b,window:_,context:null},I={windowTimeSpan:c,windowCreationInterval:h,subscriber:b,scheduler:y};b.add(y.schedule(dispatchWindowClose,c,T)),b.add(y.schedule(dispatchWindowCreation,h,I))}else{var N={subscriber:b,window:_,windowTimeSpan:c};b.add(y.schedule(dispatchWindowTimeSpanOnly,c,N))}return b}return s.prototype._next=function(d){for(var c=this.windows,h=c.length,v=0;v<h;v++){var y=c[v];y.closed||(y.next(d),y.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(y))}},s.prototype._error=function(d){for(var c=this.windows;c.length>0;)c.shift().error(d);this.destination.error(d)},s.prototype._complete=function(){for(var d=this.windows;d.length>0;){var c=d.shift();c.closed||c.complete()}this.destination.complete()},s.prototype.openWindow=function(){var d=new CountedSubject;this.windows.push(d);var c=this.destination;return c.next(d),d},s.prototype.closeWindow=function(d){d.complete();var c=this.windows;c.splice(c.indexOf(d),1)},s}(Subscriber);function dispatchWindowTimeSpanOnly(a){var s=a.subscriber,d=a.windowTimeSpan,c=a.window;c&&s.closeWindow(c),a.window=s.openWindow(),this.schedule(a,d)}function dispatchWindowCreation(a){var s=a.windowTimeSpan,d=a.subscriber,c=a.scheduler,h=a.windowCreationInterval,v=d.openWindow(),y=this,b={action:y,subscription:null},_={subscriber:d,window:v,context:b};b.subscription=c.schedule(dispatchWindowClose,s,_),y.add(b.subscription),y.schedule(a,h)}function dispatchWindowClose(a){var s=a.subscriber,d=a.window,c=a.context;c&&c.action&&c.subscription&&c.action.remove(c.subscription),s.closeWindow(d)}function windowToggle(a,s){return function(d){return d.lift(new WindowToggleOperator(a,s))}}var WindowToggleOperator=function(){function a(s,d){this.openings=s,this.closingSelector=d}return a.prototype.call=function(s,d){return d.subscribe(new WindowToggleSubscriber(s,this.openings,this.closingSelector))},a}(),WindowToggleSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.openings=c,v.closingSelector=h,v.contexts=[],v.add(v.openSubscription=subscribeToResult(v,c,c)),v}return s.prototype._next=function(d){var c=this.contexts;if(c)for(var h=c.length,v=0;v<h;v++)c[v].window.next(d)},s.prototype._error=function(d){var c=this.contexts;if(this.contexts=null,c)for(var h=c.length,v=-1;++v<h;){var y=c[v];y.window.error(d),y.subscription.unsubscribe()}a.prototype._error.call(this,d)},s.prototype._complete=function(){var d=this.contexts;if(this.contexts=null,d)for(var c=d.length,h=-1;++h<c;){var v=d[h];v.window.complete(),v.subscription.unsubscribe()}a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){var d=this.contexts;if(this.contexts=null,d)for(var c=d.length,h=-1;++h<c;){var v=d[h];v.window.unsubscribe(),v.subscription.unsubscribe()}},s.prototype.notifyNext=function(d,c,h,v,y){if(d===this.openings){var b=void 0;try{var _=this.closingSelector;b=_(c)}catch(V){return this.error(V)}var T=new Subject,I=new Subscription,N={window:T,subscription:I};this.contexts.push(N);var A=subscribeToResult(this,b,N);A.closed?this.closeWindow(this.contexts.length-1):(A.context=N,I.add(A)),this.destination.next(T)}else this.closeWindow(this.contexts.indexOf(d))},s.prototype.notifyError=function(d){this.error(d)},s.prototype.notifyComplete=function(d){d!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(d.context))},s.prototype.closeWindow=function(d){if(d!==-1){var c=this.contexts,h=c[d],v=h.window,y=h.subscription;c.splice(d,1),v.complete(),y.unsubscribe()}},s}(OuterSubscriber);function windowWhen(a){return function(d){return d.lift(new WindowOperator(a))}}var WindowOperator=function(){function a(s){this.closingSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new WindowSubscriber(s,this.closingSelector))},a}(),WindowSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.destination=d,h.closingSelector=c,h.openWindow(),h}return s.prototype.notifyNext=function(d,c,h,v,y){this.openWindow(y)},s.prototype.notifyError=function(d){this._error(d)},s.prototype.notifyComplete=function(d){this.openWindow(d)},s.prototype._next=function(d){this.window.next(d)},s.prototype._error=function(d){this.window.error(d),this.destination.error(d),this.unsubscribeClosingNotification()},s.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},s.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},s.prototype.openWindow=function(d){d===void 0&&(d=null),d&&(this.remove(d),d.unsubscribe());var c=this.window;c&&c.complete();var h=this.window=new Subject;this.destination.next(h);var v;try{var y=this.closingSelector;v=y()}catch(b){this.destination.error(b),this.window.error(b);return}this.add(this.closingNotification=subscribeToResult(this,v))},s}(OuterSubscriber);function withLatestFrom(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){var c;typeof a[a.length-1]=="function"&&(c=a.pop());var h=a;return d.lift(new WithLatestFromOperator(h,c))}}var WithLatestFromOperator=function(){function a(s,d){this.observables=s,this.project=d}return a.prototype.call=function(s,d){return d.subscribe(new WithLatestFromSubscriber(s,this.observables,this.project))},a}(),WithLatestFromSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;v.observables=c,v.project=h,v.toRespond=[];var y=c.length;v.values=new Array(y);for(var b=0;b<y;b++)v.toRespond.push(b);for(var b=0;b<y;b++){var _=c[b];v.add(subscribeToResult(v,_,void 0,b))}return v}return s.prototype.notifyNext=function(d,c,h){this.values[h]=c;var v=this.toRespond;if(v.length>0){var y=v.indexOf(h);y!==-1&&v.splice(y,1)}},s.prototype.notifyComplete=function(){},s.prototype._next=function(d){if(this.toRespond.length===0){var c=[d].concat(this.values);this.project?this._tryProject(c):this.destination.next(c)}},s.prototype._tryProject=function(d){var c;try{c=this.project.apply(this,d)}catch(h){this.destination.error(h);return}this.destination.next(c)},s}(OuterSubscriber);function zip$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a[a.length-1];return typeof d=="function"&&a.pop(),fromArray(a,void 0).lift(new ZipOperator(d))}var ZipOperator=function(){function a(s){this.resultSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new ZipSubscriber(s,this.resultSelector))},a}(),ZipSubscriber=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.resultSelector=c,v.iterators=[],v.active=0,v.resultSelector=typeof c=="function"?c:void 0,v}return s.prototype._next=function(d){var c=this.iterators;isArray$2(d)?c.push(new StaticArrayIterator(d)):typeof d[iterator]=="function"?c.push(new StaticIterator(d[iterator]())):c.push(new ZipBufferIterator(this.destination,this,d))},s.prototype._complete=function(){var d=this.iterators,c=d.length;if(this.unsubscribe(),c===0){this.destination.complete();return}this.active=c;for(var h=0;h<c;h++){var v=d[h];if(v.stillUnsubscribed){var y=this.destination;y.add(v.subscribe())}else this.active--}},s.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},s.prototype.checkIterators=function(){for(var d=this.iterators,c=d.length,h=this.destination,v=0;v<c;v++){var y=d[v];if(typeof y.hasValue=="function"&&!y.hasValue())return}for(var b=!1,_=[],v=0;v<c;v++){var y=d[v],T=y.next();if(y.hasCompleted()&&(b=!0),T.done){h.complete();return}_.push(T.value)}this.resultSelector?this._tryresultSelector(_):h.next(_),b&&h.complete()},s.prototype._tryresultSelector=function(d){var c;try{c=this.resultSelector.apply(this,d)}catch(h){this.destination.error(h);return}this.destination.next(c)},s}(Subscriber),StaticIterator=function(){function a(s){this.iterator=s,this.nextResult=s.next()}return a.prototype.hasValue=function(){return!0},a.prototype.next=function(){var s=this.nextResult;return this.nextResult=this.iterator.next(),s},a.prototype.hasCompleted=function(){var s=this.nextResult;return Boolean(s&&s.done)},a}(),StaticArrayIterator=function(){function a(s){this.array=s,this.index=0,this.length=0,this.length=s.length}return a.prototype[iterator]=function(){return this},a.prototype.next=function(s){var d=this.index++,c=this.array;return d<this.length?{value:c[d],done:!1}:{value:null,done:!0}},a.prototype.hasValue=function(){return this.array.length>this.index},a.prototype.hasCompleted=function(){return this.array.length===this.index},a}(),ZipBufferIterator=function(a){__extends(s,a);function s(d,c,h){var v=a.call(this,d)||this;return v.parent=c,v.observable=h,v.stillUnsubscribed=!0,v.buffer=[],v.isComplete=!1,v}return s.prototype[iterator]=function(){return this},s.prototype.next=function(){var d=this.buffer;return d.length===0&&this.isComplete?{value:null,done:!0}:{value:d.shift(),done:!1}},s.prototype.hasValue=function(){return this.buffer.length>0},s.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},s.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},s.prototype.notifyNext=function(d){this.buffer.push(d),this.parent.checkIterators()},s.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},s}(SimpleOuterSubscriber);function zip(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(c){return c.lift.call(zip$1.apply(void 0,[c].concat(a)))}}function zipAll(a){return function(s){return s.lift(new ZipOperator(a))}}var operators=Object.freeze(Object.defineProperty({__proto__:null,audit,auditTime,buffer,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatest,concat,concatAll,concatMap,concatMapTo,count,debounce,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustMap,expand,filter,finalize,find:find$1,findIndex,first,groupBy,ignoreElements,isEmpty,last,map,mapTo,materialize,max,merge:merge$1,mergeAll,mergeMap,flatMap,mergeMapTo,mergeScan,min,multicast,observeOn,onErrorResumeNext,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,reduce,repeat,repeatWhen,retry,retryWhen,refCount,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,take,takeLast,takeUntil,takeWhile,tap,throttle,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp,toArray,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(operators),struct={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(O,x,j,X){X===void 0&&(X=j),Object.defineProperty(O,X,{enumerable:!0,get:function(){return x[j]}})}:function(O,x,j,X){X===void 0&&(X=j),O[X]=x[j]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(O,x){Object.defineProperty(O,"default",{enumerable:!0,value:x})}:function(O,x){O.default=x}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(O){if(O&&O.__esModule)return O;var x={};if(O!=null)for(var j in O)j!=="default"&&Object.hasOwnProperty.call(O,j)&&s(x,O,j);return d(x,O),x},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const v=h(umd.exports),y=c(minimal$2);a.protobufPackage="google.protobuf";var b;(function(O){O.NULL_VALUE="NULL_VALUE"})(b=a.NullValue||(a.NullValue={}));function _(O){switch(O){case 0:case"NULL_VALUE":return b.NULL_VALUE;default:throw new L.Error("Unrecognized enum value "+O+" for enum NullValue")}}a.nullValueFromJSON=_;function T(O){switch(O){case b.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=T;function I(O){switch(O){case b.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=I;function N(){return{fields:{}}}a.Struct={encode(O,x=y.Writer.create()){return Object.entries(O.fields).forEach(([j,X])=>{X!==void 0&&a.Struct_FieldsEntry.encode({key:j,value:X},x.uint32(10).fork()).ldelim()}),x},decode(O,x){const j=O instanceof y.Reader?O:new y.Reader(O);let X=x===void 0?j.len:j.pos+x;const te=N();for(;j.pos<X;){const se=j.uint32();switch(se>>>3){case 1:const oe=a.Struct_FieldsEntry.decode(j,j.uint32());oe.value!==void 0&&(te.fields[oe.key]=oe.value);break;default:j.skipType(se&7);break}}return te},fromJSON(O){return{fields:D(O.fields)?Object.entries(O.fields).reduce((x,[j,X])=>(x[j]=X,x),{}):{}}},toJSON(O){const x={};return x.fields={},O.fields&&Object.entries(O.fields).forEach(([j,X])=>{x.fields[j]=X}),x},fromPartial(O){var x;const j=N();return j.fields=Object.entries((x=O.fields)!==null&&x!==void 0?x:{}).reduce((X,[te,se])=>(se!==void 0&&(X[te]=se),X),{}),j},wrap(O){const x=N();return O!==void 0&&Object.keys(O).forEach(j=>{x.fields[j]=O[j]}),x},unwrap(O){const x={};return Object.keys(O.fields).forEach(j=>{x[j]=O.fields[j]}),x}};function A(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(O,x=y.Writer.create()){return O.key!==""&&x.uint32(10).string(O.key),O.value!==void 0&&a.Value.encode(a.Value.wrap(O.value),x.uint32(18).fork()).ldelim(),x},decode(O,x){const j=O instanceof y.Reader?O:new y.Reader(O);let X=x===void 0?j.len:j.pos+x;const te=A();for(;j.pos<X;){const se=j.uint32();switch(se>>>3){case 1:te.key=j.string();break;case 2:te.value=a.Value.unwrap(a.Value.decode(j,j.uint32()));break;default:j.skipType(se&7);break}}return te},fromJSON(O){return{key:H(O.key)?String(O.key):"",value:H(O==null?void 0:O.value)?O.value:void 0}},toJSON(O){const x={};return O.key!==void 0&&(x.key=O.key),O.value!==void 0&&(x.value=O.value),x},fromPartial(O){var x,j;const X=A();return X.key=(x=O.key)!==null&&x!==void 0?x:"",X.value=(j=O.value)!==null&&j!==void 0?j:void 0,X}};function V(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(O,x=y.Writer.create()){return O.nullValue!==void 0&&x.uint32(8).int32(I(O.nullValue)),O.numberValue!==void 0&&x.uint32(17).double(O.numberValue),O.stringValue!==void 0&&x.uint32(26).string(O.stringValue),O.boolValue!==void 0&&x.uint32(32).bool(O.boolValue),O.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(O.structValue),x.uint32(42).fork()).ldelim(),O.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(O.listValue),x.uint32(50).fork()).ldelim(),x},decode(O,x){const j=O instanceof y.Reader?O:new y.Reader(O);let X=x===void 0?j.len:j.pos+x;const te=V();for(;j.pos<X;){const se=j.uint32();switch(se>>>3){case 1:te.nullValue=_(j.int32());break;case 2:te.numberValue=j.double();break;case 3:te.stringValue=j.string();break;case 4:te.boolValue=j.bool();break;case 5:te.structValue=a.Struct.unwrap(a.Struct.decode(j,j.uint32()));break;case 6:te.listValue=a.ListValue.unwrap(a.ListValue.decode(j,j.uint32()));break;default:j.skipType(se&7);break}}return te},fromJSON(O){return{nullValue:H(O.nullValue)?_(O.nullValue):void 0,numberValue:H(O.numberValue)?Number(O.numberValue):void 0,stringValue:H(O.stringValue)?String(O.stringValue):void 0,boolValue:H(O.boolValue)?Boolean(O.boolValue):void 0,structValue:D(O.structValue)?O.structValue:void 0,listValue:Array.isArray(O.listValue)?[...O.listValue]:void 0}},toJSON(O){const x={};return O.nullValue!==void 0&&(x.nullValue=O.nullValue!==void 0?T(O.nullValue):void 0),O.numberValue!==void 0&&(x.numberValue=O.numberValue),O.stringValue!==void 0&&(x.stringValue=O.stringValue),O.boolValue!==void 0&&(x.boolValue=O.boolValue),O.structValue!==void 0&&(x.structValue=O.structValue),O.listValue!==void 0&&(x.listValue=O.listValue),x},fromPartial(O){var x,j,X,te,se,oe;const F=V();return F.nullValue=(x=O.nullValue)!==null&&x!==void 0?x:void 0,F.numberValue=(j=O.numberValue)!==null&&j!==void 0?j:void 0,F.stringValue=(X=O.stringValue)!==null&&X!==void 0?X:void 0,F.boolValue=(te=O.boolValue)!==null&&te!==void 0?te:void 0,F.structValue=(se=O.structValue)!==null&&se!==void 0?se:void 0,F.listValue=(oe=O.listValue)!==null&&oe!==void 0?oe:void 0,F},wrap(O){const x=V();if(O===null)x.nullValue=b.NULL_VALUE;else if(typeof O=="boolean")x.boolValue=O;else if(typeof O=="number")x.numberValue=O;else if(typeof O=="string")x.stringValue=O;else if(Array.isArray(O))x.listValue=O;else if(typeof O=="object")x.structValue=O;else if(typeof O!="undefined")throw new Error("Unsupported any value type: "+typeof O);return x},unwrap(O){if((O==null?void 0:O.stringValue)!==void 0)return O.stringValue;if((O==null?void 0:O.numberValue)!==void 0)return O.numberValue;if((O==null?void 0:O.boolValue)!==void 0)return O.boolValue;if((O==null?void 0:O.structValue)!==void 0)return O.structValue;if((O==null?void 0:O.listValue)!==void 0)return O.listValue;if((O==null?void 0:O.nullValue)!==void 0)return null}};function $(){return{values:[]}}a.ListValue={encode(O,x=y.Writer.create()){for(const j of O.values)a.Value.encode(a.Value.wrap(j),x.uint32(10).fork()).ldelim();return x},decode(O,x){const j=O instanceof y.Reader?O:new y.Reader(O);let X=x===void 0?j.len:j.pos+x;const te=$();for(;j.pos<X;){const se=j.uint32();switch(se>>>3){case 1:te.values.push(a.Value.unwrap(a.Value.decode(j,j.uint32())));break;default:j.skipType(se&7);break}}return te},fromJSON(O){return{values:Array.isArray(O==null?void 0:O.values)?[...O.values]:[]}},toJSON(O){const x={};return O.values?x.values=O.values.map(j=>j):x.values=[],x},fromPartial(O){var x;const j=$();return j.values=((x=O.values)===null||x===void 0?void 0:x.map(X=>X))||[],j},wrap(O){const x=$();return x.values=O!=null?O:[],x},unwrap(O){return O.values}};var L=(()=>{if(typeof L!="undefined")return L;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();y.util.Long!==v.default&&(y.util.Long=v.default,y.configure());function D(O){return typeof O=="object"&&O!==null}function H(O){return O!=null}})(struct),function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(F,Z,ne,M){M===void 0&&(M=ne),Object.defineProperty(F,M,{enumerable:!0,get:function(){return Z[ne]}})}:function(F,Z,ne,M){M===void 0&&(M=ne),F[M]=Z[ne]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(F,Z){Object.defineProperty(F,"default",{enumerable:!0,value:Z})}:function(F,Z){F.default=Z}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(F){if(F&&F.__esModule)return F;var Z={};if(F!=null)for(var ne in F)ne!=="default"&&Object.hasOwnProperty.call(F,ne)&&s(Z,F,ne);return d(Z,F),Z},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(a,"__esModule",{value:!0}),a.EventServiceDefinition=a.EventServiceClientImpl=a.EventsStreamResponse=a.EventsStreamRequest=a.EventsStreamReconnectRequest=a.EventsStreamError=a.SubscribePayload=a.PublishEventResponse=a.PublishEventRequest=a.EventTarget=a.eventsStreamMessageTypeToNumber=a.eventsStreamMessageTypeToJSON=a.eventsStreamMessageTypeFromJSON=a.EventsStreamMessageType=a.protobufPackage=void 0;const v=h(umd.exports),y=c(minimal$2),b=require$$2,_=struct;a.protobufPackage="apis.event.v2";var T;(function(F){F.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED="EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED",F.EVENTS_STREAM_MESSAGE_TYPE_PING="EVENTS_STREAM_MESSAGE_TYPE_PING",F.EVENTS_STREAM_MESSAGE_TYPE_ERROR="EVENTS_STREAM_MESSAGE_TYPE_ERROR",F.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED",F.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED",F.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED="EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED"})(T=a.EventsStreamMessageType||(a.EventsStreamMessageType={}));function I(F){switch(F){case 0:case"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED":return T.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED;case 1:case"EVENTS_STREAM_MESSAGE_TYPE_PING":return T.EVENTS_STREAM_MESSAGE_TYPE_PING;case 2:case"EVENTS_STREAM_MESSAGE_TYPE_ERROR":return T.EVENTS_STREAM_MESSAGE_TYPE_ERROR;case 3:case"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED":return T.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED;case 4:case"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED":return T.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED;case 5:case"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED":return T.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED;default:throw new te.Error("Unrecognized enum value "+F+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeFromJSON=I;function N(F){switch(F){case T.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED";case T.EVENTS_STREAM_MESSAGE_TYPE_PING:return"EVENTS_STREAM_MESSAGE_TYPE_PING";case T.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return"EVENTS_STREAM_MESSAGE_TYPE_ERROR";case T.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED";case T.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED";case T.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";default:return"UNKNOWN"}}a.eventsStreamMessageTypeToJSON=N;function A(F){switch(F){case T.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return 0;case T.EVENTS_STREAM_MESSAGE_TYPE_PING:return 1;case T.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return 2;case T.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return 3;case T.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return 4;case T.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return 5;default:return 0}}a.eventsStreamMessageTypeToNumber=A;function V(){return{collectionId:void 0,projectId:void 0,layoutId:void 0}}a.EventTarget={encode(F,Z=y.Writer.create()){return F.collectionId!==void 0&&Z.uint32(42).string(F.collectionId),F.projectId!==void 0&&Z.uint32(34).string(F.projectId),F.layoutId!==void 0&&Z.uint32(10).string(F.layoutId),Z},decode(F,Z){const ne=F instanceof y.Reader?F:new y.Reader(F);let M=Z===void 0?ne.len:ne.pos+Z;const G=V();for(;ne.pos<M;){const J=ne.uint32();switch(J>>>3){case 5:G.collectionId=ne.string();break;case 4:G.projectId=ne.string();break;case 1:G.layoutId=ne.string();break;default:ne.skipType(J&7);break}}return G},fromJSON(F){return{collectionId:oe(F.collectionId)?String(F.collectionId):void 0,projectId:oe(F.projectId)?String(F.projectId):void 0,layoutId:oe(F.layoutId)?String(F.layoutId):void 0}},toJSON(F){const Z={};return F.collectionId!==void 0&&(Z.collectionId=F.collectionId),F.projectId!==void 0&&(Z.projectId=F.projectId),F.layoutId!==void 0&&(Z.layoutId=F.layoutId),Z},fromPartial(F){var Z,ne,M;const G=V();return G.collectionId=(Z=F.collectionId)!==null&&Z!==void 0?Z:void 0,G.projectId=(ne=F.projectId)!==null&&ne!==void 0?ne:void 0,G.layoutId=(M=F.layoutId)!==null&&M!==void 0?M:void 0,G}};function $(){return{name:"",payload:void 0,requestMetadata:void 0,target:void 0}}a.PublishEventRequest={encode(F,Z=y.Writer.create()){return F.name!==""&&Z.uint32(10).string(F.name),F.payload!==void 0&&_.Struct.encode(_.Struct.wrap(F.payload),Z.uint32(18).fork()).ldelim(),F.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(F.requestMetadata),Z.uint32(34).fork()).ldelim(),F.target!==void 0&&a.EventTarget.encode(F.target,Z.uint32(26).fork()).ldelim(),Z},decode(F,Z){const ne=F instanceof y.Reader?F:new y.Reader(F);let M=Z===void 0?ne.len:ne.pos+Z;const G=$();for(;ne.pos<M;){const J=ne.uint32();switch(J>>>3){case 1:G.name=ne.string();break;case 2:G.payload=_.Struct.unwrap(_.Struct.decode(ne,ne.uint32()));break;case 4:G.requestMetadata=_.Value.unwrap(_.Value.decode(ne,ne.uint32()));break;case 3:G.target=a.EventTarget.decode(ne,ne.uint32());break;default:ne.skipType(J&7);break}}return G},fromJSON(F){return{name:oe(F.name)?String(F.name):"",payload:se(F.payload)?F.payload:void 0,requestMetadata:oe(F==null?void 0:F.requestMetadata)?F.requestMetadata:void 0,target:oe(F.target)?a.EventTarget.fromJSON(F.target):void 0}},toJSON(F){const Z={};return F.name!==void 0&&(Z.name=F.name),F.payload!==void 0&&(Z.payload=F.payload),F.requestMetadata!==void 0&&(Z.requestMetadata=F.requestMetadata),F.target!==void 0&&(Z.target=F.target?a.EventTarget.toJSON(F.target):void 0),Z},fromPartial(F){var Z,ne,M;const G=$();return G.name=(Z=F.name)!==null&&Z!==void 0?Z:"",G.payload=(ne=F.payload)!==null&&ne!==void 0?ne:void 0,G.requestMetadata=(M=F.requestMetadata)!==null&&M!==void 0?M:void 0,G.target=F.target!==void 0&&F.target!==null?a.EventTarget.fromPartial(F.target):void 0,G}};function L(){return{name:"",payload:void 0,target:void 0,requestMetadata:void 0,id:""}}a.PublishEventResponse={encode(F,Z=y.Writer.create()){return F.name!==""&&Z.uint32(10).string(F.name),F.payload!==void 0&&_.Struct.encode(_.Struct.wrap(F.payload),Z.uint32(18).fork()).ldelim(),F.target!==void 0&&a.EventTarget.encode(F.target,Z.uint32(26).fork()).ldelim(),F.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(F.requestMetadata),Z.uint32(34).fork()).ldelim(),F.id!==""&&Z.uint32(42).string(F.id),Z},decode(F,Z){const ne=F instanceof y.Reader?F:new y.Reader(F);let M=Z===void 0?ne.len:ne.pos+Z;const G=L();for(;ne.pos<M;){const J=ne.uint32();switch(J>>>3){case 1:G.name=ne.string();break;case 2:G.payload=_.Struct.unwrap(_.Struct.decode(ne,ne.uint32()));break;case 3:G.target=a.EventTarget.decode(ne,ne.uint32());break;case 4:G.requestMetadata=_.Value.unwrap(_.Value.decode(ne,ne.uint32()));break;case 5:G.id=ne.string();break;default:ne.skipType(J&7);break}}return G},fromJSON(F){return{name:oe(F.name)?String(F.name):"",payload:se(F.payload)?F.payload:void 0,target:oe(F.target)?a.EventTarget.fromJSON(F.target):void 0,requestMetadata:oe(F==null?void 0:F.requestMetadata)?F.requestMetadata:void 0,id:oe(F.id)?String(F.id):""}},toJSON(F){const Z={};return F.name!==void 0&&(Z.name=F.name),F.payload!==void 0&&(Z.payload=F.payload),F.target!==void 0&&(Z.target=F.target?a.EventTarget.toJSON(F.target):void 0),F.requestMetadata!==void 0&&(Z.requestMetadata=F.requestMetadata),F.id!==void 0&&(Z.id=F.id),Z},fromPartial(F){var Z,ne,M,G;const J=L();return J.name=(Z=F.name)!==null&&Z!==void 0?Z:"",J.payload=(ne=F.payload)!==null&&ne!==void 0?ne:void 0,J.target=F.target!==void 0&&F.target!==null?a.EventTarget.fromPartial(F.target):void 0,J.requestMetadata=(M=F.requestMetadata)!==null&&M!==void 0?M:void 0,J.id=(G=F.id)!==null&&G!==void 0?G:"",J}};function D(){return{name:"",target:void 0}}a.SubscribePayload={encode(F,Z=y.Writer.create()){return F.name!==""&&Z.uint32(10).string(F.name),F.target!==void 0&&a.EventTarget.encode(F.target,Z.uint32(18).fork()).ldelim(),Z},decode(F,Z){const ne=F instanceof y.Reader?F:new y.Reader(F);let M=Z===void 0?ne.len:ne.pos+Z;const G=D();for(;ne.pos<M;){const J=ne.uint32();switch(J>>>3){case 1:G.name=ne.string();break;case 2:G.target=a.EventTarget.decode(ne,ne.uint32());break;default:ne.skipType(J&7);break}}return G},fromJSON(F){return{name:oe(F.name)?String(F.name):"",target:oe(F.target)?a.EventTarget.fromJSON(F.target):void 0}},toJSON(F){const Z={};return F.name!==void 0&&(Z.name=F.name),F.target!==void 0&&(Z.target=F.target?a.EventTarget.toJSON(F.target):void 0),Z},fromPartial(F){var Z;const ne=D();return ne.name=(Z=F.name)!==null&&Z!==void 0?Z:"",ne.target=F.target!==void 0&&F.target!==null?a.EventTarget.fromPartial(F.target):void 0,ne}};function H(){return{code:0,message:""}}a.EventsStreamError={encode(F,Z=y.Writer.create()){return F.code!==0&&Z.uint32(8).int32(F.code),F.message!==""&&Z.uint32(18).string(F.message),Z},decode(F,Z){const ne=F instanceof y.Reader?F:new y.Reader(F);let M=Z===void 0?ne.len:ne.pos+Z;const G=H();for(;ne.pos<M;){const J=ne.uint32();switch(J>>>3){case 1:G.code=ne.int32();break;case 2:G.message=ne.string();break;default:ne.skipType(J&7);break}}return G},fromJSON(F){return{code:oe(F.code)?Number(F.code):0,message:oe(F.message)?String(F.message):""}},toJSON(F){const Z={};return F.code!==void 0&&(Z.code=Math.round(F.code)),F.message!==void 0&&(Z.message=F.message),Z},fromPartial(F){var Z,ne;const M=H();return M.code=(Z=F.code)!==null&&Z!==void 0?Z:0,M.message=(ne=F.message)!==null&&ne!==void 0?ne:"",M}};function O(){return{reauthenticate:!1,beforeTimestamp:""}}a.EventsStreamReconnectRequest={encode(F,Z=y.Writer.create()){return F.reauthenticate===!0&&Z.uint32(8).bool(F.reauthenticate),F.beforeTimestamp!==""&&Z.uint32(18).string(F.beforeTimestamp),Z},decode(F,Z){const ne=F instanceof y.Reader?F:new y.Reader(F);let M=Z===void 0?ne.len:ne.pos+Z;const G=O();for(;ne.pos<M;){const J=ne.uint32();switch(J>>>3){case 1:G.reauthenticate=ne.bool();break;case 2:G.beforeTimestamp=ne.string();break;default:ne.skipType(J&7);break}}return G},fromJSON(F){return{reauthenticate:oe(F.reauthenticate)?Boolean(F.reauthenticate):!1,beforeTimestamp:oe(F.beforeTimestamp)?String(F.beforeTimestamp):""}},toJSON(F){const Z={};return F.reauthenticate!==void 0&&(Z.reauthenticate=F.reauthenticate),F.beforeTimestamp!==void 0&&(Z.beforeTimestamp=F.beforeTimestamp),Z},fromPartial(F){var Z,ne;const M=O();return M.reauthenticate=(Z=F.reauthenticate)!==null&&Z!==void 0?Z:!1,M.beforeTimestamp=(ne=F.beforeTimestamp)!==null&&ne!==void 0?ne:"",M}};function x(){return{correlationId:void 0,subscribe:void 0,unsubscribe:void 0,publish:void 0,ping:void 0}}a.EventsStreamRequest={encode(F,Z=y.Writer.create()){return F.correlationId!==void 0&&Z.uint32(10).string(F.correlationId),F.subscribe!==void 0&&a.SubscribePayload.encode(F.subscribe,Z.uint32(802).fork()).ldelim(),F.unsubscribe!==void 0&&a.SubscribePayload.encode(F.unsubscribe,Z.uint32(810).fork()).ldelim(),F.publish!==void 0&&a.PublishEventRequest.encode(F.publish,Z.uint32(818).fork()).ldelim(),F.ping!==void 0&&Z.uint32(826).string(F.ping),Z},decode(F,Z){const ne=F instanceof y.Reader?F:new y.Reader(F);let M=Z===void 0?ne.len:ne.pos+Z;const G=x();for(;ne.pos<M;){const J=ne.uint32();switch(J>>>3){case 1:G.correlationId=ne.string();break;case 100:G.subscribe=a.SubscribePayload.decode(ne,ne.uint32());break;case 101:G.unsubscribe=a.SubscribePayload.decode(ne,ne.uint32());break;case 102:G.publish=a.PublishEventRequest.decode(ne,ne.uint32());break;case 103:G.ping=ne.string();break;default:ne.skipType(J&7);break}}return G},fromJSON(F){return{correlationId:oe(F.correlationId)?String(F.correlationId):void 0,subscribe:oe(F.subscribe)?a.SubscribePayload.fromJSON(F.subscribe):void 0,unsubscribe:oe(F.unsubscribe)?a.SubscribePayload.fromJSON(F.unsubscribe):void 0,publish:oe(F.publish)?a.PublishEventRequest.fromJSON(F.publish):void 0,ping:oe(F.ping)?String(F.ping):void 0}},toJSON(F){const Z={};return F.correlationId!==void 0&&(Z.correlationId=F.correlationId),F.subscribe!==void 0&&(Z.subscribe=F.subscribe?a.SubscribePayload.toJSON(F.subscribe):void 0),F.unsubscribe!==void 0&&(Z.unsubscribe=F.unsubscribe?a.SubscribePayload.toJSON(F.unsubscribe):void 0),F.publish!==void 0&&(Z.publish=F.publish?a.PublishEventRequest.toJSON(F.publish):void 0),F.ping!==void 0&&(Z.ping=F.ping),Z},fromPartial(F){var Z,ne;const M=x();return M.correlationId=(Z=F.correlationId)!==null&&Z!==void 0?Z:void 0,M.subscribe=F.subscribe!==void 0&&F.subscribe!==null?a.SubscribePayload.fromPartial(F.subscribe):void 0,M.unsubscribe=F.unsubscribe!==void 0&&F.unsubscribe!==null?a.SubscribePayload.fromPartial(F.unsubscribe):void 0,M.publish=F.publish!==void 0&&F.publish!==null?a.PublishEventRequest.fromPartial(F.publish):void 0,M.ping=(ne=F.ping)!==null&&ne!==void 0?ne:void 0,M}};function j(){return{correlationId:void 0,sessionId:void 0,event:void 0,pong:void 0,error:void 0,subscribed:void 0,unsubscribed:void 0,published:void 0,reconnectBefore:void 0}}a.EventsStreamResponse={encode(F,Z=y.Writer.create()){return F.correlationId!==void 0&&Z.uint32(18).string(F.correlationId),F.sessionId!==void 0&&Z.uint32(26).string(F.sessionId),F.event!==void 0&&a.PublishEventResponse.encode(F.event,Z.uint32(802).fork()).ldelim(),F.pong!==void 0&&Z.uint32(1602).string(F.pong),F.error!==void 0&&a.EventsStreamError.encode(F.error,Z.uint32(1610).fork()).ldelim(),F.subscribed!==void 0&&a.SubscribePayload.encode(F.subscribed,Z.uint32(1618).fork()).ldelim(),F.unsubscribed!==void 0&&a.SubscribePayload.encode(F.unsubscribed,Z.uint32(1626).fork()).ldelim(),F.published!==void 0&&a.PublishEventResponse.encode(F.published,Z.uint32(1634).fork()).ldelim(),F.reconnectBefore!==void 0&&a.EventsStreamReconnectRequest.encode(F.reconnectBefore,Z.uint32(1642).fork()).ldelim(),Z},decode(F,Z){const ne=F instanceof y.Reader?F:new y.Reader(F);let M=Z===void 0?ne.len:ne.pos+Z;const G=j();for(;ne.pos<M;){const J=ne.uint32();switch(J>>>3){case 2:G.correlationId=ne.string();break;case 3:G.sessionId=ne.string();break;case 100:G.event=a.PublishEventResponse.decode(ne,ne.uint32());break;case 200:G.pong=ne.string();break;case 201:G.error=a.EventsStreamError.decode(ne,ne.uint32());break;case 202:G.subscribed=a.SubscribePayload.decode(ne,ne.uint32());break;case 203:G.unsubscribed=a.SubscribePayload.decode(ne,ne.uint32());break;case 204:G.published=a.PublishEventResponse.decode(ne,ne.uint32());break;case 205:G.reconnectBefore=a.EventsStreamReconnectRequest.decode(ne,ne.uint32());break;default:ne.skipType(J&7);break}}return G},fromJSON(F){return{correlationId:oe(F.correlationId)?String(F.correlationId):void 0,sessionId:oe(F.sessionId)?String(F.sessionId):void 0,event:oe(F.event)?a.PublishEventResponse.fromJSON(F.event):void 0,pong:oe(F.pong)?String(F.pong):void 0,error:oe(F.error)?a.EventsStreamError.fromJSON(F.error):void 0,subscribed:oe(F.subscribed)?a.SubscribePayload.fromJSON(F.subscribed):void 0,unsubscribed:oe(F.unsubscribed)?a.SubscribePayload.fromJSON(F.unsubscribed):void 0,published:oe(F.published)?a.PublishEventResponse.fromJSON(F.published):void 0,reconnectBefore:oe(F.reconnectBefore)?a.EventsStreamReconnectRequest.fromJSON(F.reconnectBefore):void 0}},toJSON(F){const Z={};return F.correlationId!==void 0&&(Z.correlationId=F.correlationId),F.sessionId!==void 0&&(Z.sessionId=F.sessionId),F.event!==void 0&&(Z.event=F.event?a.PublishEventResponse.toJSON(F.event):void 0),F.pong!==void 0&&(Z.pong=F.pong),F.error!==void 0&&(Z.error=F.error?a.EventsStreamError.toJSON(F.error):void 0),F.subscribed!==void 0&&(Z.subscribed=F.subscribed?a.SubscribePayload.toJSON(F.subscribed):void 0),F.unsubscribed!==void 0&&(Z.unsubscribed=F.unsubscribed?a.SubscribePayload.toJSON(F.unsubscribed):void 0),F.published!==void 0&&(Z.published=F.published?a.PublishEventResponse.toJSON(F.published):void 0),F.reconnectBefore!==void 0&&(Z.reconnectBefore=F.reconnectBefore?a.EventsStreamReconnectRequest.toJSON(F.reconnectBefore):void 0),Z},fromPartial(F){var Z,ne,M;const G=j();return G.correlationId=(Z=F.correlationId)!==null&&Z!==void 0?Z:void 0,G.sessionId=(ne=F.sessionId)!==null&&ne!==void 0?ne:void 0,G.event=F.event!==void 0&&F.event!==null?a.PublishEventResponse.fromPartial(F.event):void 0,G.pong=(M=F.pong)!==null&&M!==void 0?M:void 0,G.error=F.error!==void 0&&F.error!==null?a.EventsStreamError.fromPartial(F.error):void 0,G.subscribed=F.subscribed!==void 0&&F.subscribed!==null?a.SubscribePayload.fromPartial(F.subscribed):void 0,G.unsubscribed=F.unsubscribed!==void 0&&F.unsubscribed!==null?a.SubscribePayload.fromPartial(F.unsubscribed):void 0,G.published=F.published!==void 0&&F.published!==null?a.PublishEventResponse.fromPartial(F.published):void 0,G.reconnectBefore=F.reconnectBefore!==void 0&&F.reconnectBefore!==null?a.EventsStreamReconnectRequest.fromPartial(F.reconnectBefore):void 0,G}};class X{constructor(Z){this.rpc=Z,this.Stream=this.Stream.bind(this),this.Publish=this.Publish.bind(this)}Stream(Z){const ne=Z.pipe(b.map(G=>a.EventsStreamRequest.encode(G).finish()));return this.rpc.bidirectionalStreamingRequest("apis.event.v2.EventService","Stream",ne).pipe(b.map(G=>a.EventsStreamResponse.decode(new y.Reader(G))))}Publish(Z){const ne=a.PublishEventRequest.encode(Z).finish();return this.rpc.request("apis.event.v2.EventService","Publish",ne).then(G=>a.PublishEventResponse.decode(new y.Reader(G)))}}a.EventServiceClientImpl=X,a.EventServiceDefinition={name:"EventService",fullName:"apis.event.v2.EventService",methods:{stream:{name:"Stream",requestType:a.EventsStreamRequest,requestStream:!0,responseType:a.EventsStreamResponse,responseStream:!0,options:{}},publish:{name:"Publish",requestType:a.PublishEventRequest,requestStream:!1,responseType:a.PublishEventResponse,responseStream:!1,options:{}}}};var te=(()=>{if(typeof te!="undefined")return te;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();y.util.Long!==v.default&&(y.util.Long=v.default,y.configure());function se(F){return typeof F=="object"&&F!==null}function oe(F){return F!=null}}(api),function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(c,h,v,y){y===void 0&&(y=v),Object.defineProperty(c,y,{enumerable:!0,get:function(){return h[v]}})}:function(c,h,v,y){y===void 0&&(y=v),c[y]=h[v]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(c,h){for(var v in c)v!=="default"&&!h.hasOwnProperty(v)&&s(h,c,v)};Object.defineProperty(a,"__esModule",{value:!0}),a.eventsApiSupportedEvents=a.eventsApiEventRpcCalls=void 0,d(api,a),a.eventsApiEventRpcCalls={ping:"pong",publish:"published",subscribe:"subscribed",unsubscribe:"unsubscribed"},a.eventsApiSupportedEvents=[...Object.values(a.eventsApiEventRpcCalls),"error","event","reconnectBefore"]}(dist$1);var ws=null;typeof WebSocket!="undefined"?ws=WebSocket:typeof MozWebSocket!="undefined"?ws=MozWebSocket:typeof commonjsGlobal$1!="undefined"?ws=commonjsGlobal$1.WebSocket||commonjsGlobal$1.MozWebSocket:typeof window!="undefined"?ws=window.WebSocket||window.MozWebSocket:typeof self!="undefined"&&(ws=self.WebSocket||self.MozWebSocket);var browser$1=ws,matcher={exports:{}},escapeStringRegexp$1=a=>{if(typeof a!="string")throw new TypeError("Expected a string");return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};const escapeStringRegexp=escapeStringRegexp$1,regexpCache=new Map;function sanitizeArray(a,s){if(!Array.isArray(a))switch(typeof a){case"string":a=[a];break;case"undefined":a=[];break;default:throw new TypeError(`Expected '${s}' to be a string or an array, but got a type of '${typeof a}'`)}return a.filter(d=>{if(typeof d!="string"){if(typeof d=="undefined")return!1;throw new TypeError(`Expected '${s}' to be an array of strings, but found a type of '${typeof d}' in the array`)}return!0})}function makeRegexp(a,s){s={caseSensitive:!1,...s};const d=a+JSON.stringify(s);if(regexpCache.has(d))return regexpCache.get(d);const c=a[0]==="!";c&&(a=a.slice(1)),a=escapeStringRegexp(a).replace(/\\\*/g,"[\\s\\S]*");const h=new RegExp(`^${a}$`,s.caseSensitive?"":"i");return h.negated=c,regexpCache.set(d,h),h}matcher.exports=(a,s,d)=>{if(a=sanitizeArray(a,"inputs"),s=sanitizeArray(s,"patterns"),s.length===0)return[];const c=s[0][0]==="!";s=s.map(v=>makeRegexp(v,d));const h=[];for(const v of a){let y=c;for(const b of s)b.test(v)&&(y=!b.negated);y&&h.push(v)}return h},matcher.exports.isMatch=(a,s,d)=>(a=sanitizeArray(a,"inputs"),s=sanitizeArray(s,"patterns"),s.length===0?!1:a.some(c=>s.every(h=>{const v=makeRegexp(h,d),y=v.test(c);return v.negated?!y:y})));var __createBinding=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,h)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding(s,a,d);return __setModuleDefault(s,a),s},__importDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(eventapi,"__esModule",{value:!0}),eventapi.EventApi=void 0;const EventApiModel=__importStar(dist$1),isomorphic_ws_1=__importDefault$2(browser$1),uuid_1=require$$1$2,NiceGrpc=__importStar(lib$1),matcher_1=matcher.exports,api_1=api$2,clientVersion=version$2,WS_PING_INTERVAL=2e4,WS_PING_TIMEOUT=1e4,WS_RECONNECT_DELAY=2e3,WS_MAX_BADAUTH_ATTEMPTS=3,LOG_CATEGORY="EventApi";class EventApi extends api_1.ApiClient{constructor(s,d,c,h,v,y){super(s,d,h,LOG_CATEGORY,v,y),this.websocketServer=c,this.subscriptions=new Set,this.eventHandlers={},this.calls={},this.messageQueue=[],this.websocketReady=!1,this.reconnectionAttempts=0,this.badAuthentication=!1,this.eventsClient=null}publish(...s){return this.websocketReady?this.call("publish",s[0]):this.eventsClient.publish(...s)}connect(){if(!this.ws){this.cleanup();const s=this.accessToken,d=[`version=${clientVersion}`,`sessionid=${this.sessionId}`];this.sdkVersion&&d.push(`sdkversion=${this.sdkVersion}`),this.ws=new isomorphic_ws_1.default(`${this.websocketServer}/stream?${d.join("&")}`,["Bearer",this.accessToken]);let c;this.ws.addEventListener("message",h=>{const v=JSON.parse(h.data.toString()),y=v.result;if(v.error&&(c=v.error,this.handleEvent("error",{error:{code:v.code,message:v.message}}),["You do not have permission to this resource","You do not have permission to this resource"].includes(v.message)&&(this.badAuthentication=!0)),!y)return;y.reconnectBefore&&y.reconnectBefore.reauthenticate&&this.accessToken===s&&(this.badAuthentication=!0);const b=EventApiModel.eventsApiSupportedEvents.find(_=>!!y[_]);b&&this.handleEvent(b,y)}),this.ws.addEventListener("open",()=>{this.log.info("websocket connected"),this.call("ping","hello",{timeout:WS_PING_TIMEOUT,skipQueue:!0}).then(()=>{this.ready()}).catch(h=>{!c&&h.message!=="Stream connection closed"&&this.disconnect("hello timeout")})}),this.ws.addEventListener("close",h=>{var v;c?this.reconnect(`${(v=c==null?void 0:c.message)!==null&&v!==void 0?v:"unknown"}`):this.reconnect(`closed - ${h.reason||h.code}`)}),this.ws.addEventListener("error",h=>{c=h})}}async subscribe(s,d={}){return this.call("subscribe",{name:s,...d}).then(()=>{this.subscriptions.add(JSON.stringify({name:s,...d}))})}async unsubscribe(s,d={}){this.subscriptions.delete(JSON.stringify({name:s,payload:d})),await this.call("unsubscribe",{name:s,...d})}on(s,d,c){const h=c||d,v={ignoreSessionEvents:!1,allowedSessionEvents:[],...c?d:{}};this.eventHandlers[s]||(this.eventHandlers[s]=[]),this.eventHandlers[s].push({...v,handler:h})}off(s,d,c){var h;const v=c||d,y={ignoreSessionEvents:!1,allowedSessionEvents:[],...c?d:{}};this.eventHandlers[s]=((h=this.eventHandlers[s])!==null&&h!==void 0?h:[]).filter(b=>!(b.ignoreSessionEvents===y.ignoreSessionEvents&&b.allowedSessionEvents===y.allowedSessionEvents&&b.handler===v&&b.name===y.name))}disconnect(s){this.log.warn(`disconnected from events reason=${s}`),Object.values(this.calls).forEach(d=>{clearTimeout(d.timeout),d.reject(new Error("Stream connection closed"))}),this.calls={},this.cleanup()}_setup(s){this.eventsClient=this.clientFactory.create(EventApiModel.EventServiceDefinition,this.channel,{"*":s}),this.badAuthentication&&(this.badAuthentication=!1,this.reconnectionAttempts=0,this.reconnect("updated token"))}ready(){this.reconnectionAttempts=0,this.badAuthentication=!1,this.websocketReady=!0,this.handleEvent("connected",{connected:void 0});for(const s of this.subscriptions.values())this.send({subscribe:JSON.parse(s),correlationId:(0,uuid_1.v4)()});for(const s of this.messageQueue)this.send(s);this.messageQueue=[],this.pingLoop=setInterval(()=>{this.ping()},WS_PING_INTERVAL)}ping(){this.call("ping",`${+new Date}`,{timeout:WS_PING_TIMEOUT}).catch(()=>{this.reconnect("connection stalled")})}reconnect(s){this.disconnect(s),this.reconnectTimeout=setTimeout(()=>{if(this.reconnectionAttempts++,this.badAuthentication&&this.reconnectionAttempts>=WS_MAX_BADAUTH_ATTEMPTS){this.log.warn("Maximum number of reconnection attempts reached with bad authentication, please re-authenticate the SDK");return}this.connect()},WS_RECONNECT_DELAY)}send(s){this.ws&&this.ws.readyState===this.ws.OPEN?this.ws.send(JSON.stringify(s)):this.log.warn("Message sent to a disconnected stream")}handleEvent(s,d){var c;if(this.calls[d.correlationId]){const h=EventApiModel.eventsApiEventRpcCalls[this.calls[d.correlationId].method]===s,v=!!d.error;if(h||v){this.resolveCall(s,d);return}}for(const h of(c=this.eventHandlers[s])!==null&&c!==void 0?c:[]){if(s==="event"&&d.event){if(d.sessionId===this.sessionId&&h.ignoreSessionEvents&&!h.allowedSessionEvents.includes(d.event.name)){this.log.trace("ignorning user event from self: "+d.event.name+", payload.sessionId="+d.sessionId+", this.sessionId");continue}if(h.name&&!(0,matcher_1.isMatch)(d.event.name,h.name))continue;if(this.eventLogCallback){let v,y=d.event.name,b;if(d.event.name.startsWith(EventApi.APISTREAM_EVENT_PREFIX)){let _=d.event.name.split(":");_.length==4&&(v=_[1],y=_[2],b=_[3]),this.eventLogCallback(v,y,b,d)}}}else if(d.sessionId===this.sessionId&&h.ignoreSessionEvents){this.log.trace("ignorning event from self: "+d.event.name+", payload.sessionId="+d.sessionId+", this.sessionId");continue}this.log.trace("processing event: payload.sessionId="+d.sessionId+", this.sessionId"),h.handler(d?d[s]:void 0,{isFromCurrentSession:d.sessionId===this.sessionId})}}async call(s,d,c={timeout:2e4,skipQueue:!1}){this.ws||this.connect();const h=(0,uuid_1.v4)();return new Promise((v,y)=>{const b=setTimeout(()=>{delete this.calls[h],y(new Error("Request timed out"))},c.timeout);this.calls[h]={resolve:v,reject:y,timeout:b,method:s},this.websocketReady||c.skipQueue?this.send({[s]:d,correlationId:h}):this.messageQueue.push({[s]:d,correlationId:h})})}resolveCall(s,d){const c=this.calls[d.correlationId];if(!!c){if(clearTimeout(c.timeout),delete this.calls[d.correlationId],s==="error"&&d.error){c.reject(new NiceGrpc.ClientError("error",d.error.code,d.error.message));return}c.resolve(d[s])}}cleanup(){clearTimeout(this.pingLoop),clearTimeout(this.reconnectTimeout),this.websocketReady=!1,this.ws&&(this.ws.onclose=function(){},this.ws.close(),this.ws=null)}}eventapi.EventApi=EventApi,EventApi.APISTREAM_EVENT_PREFIX="apistream";var livekit={},__importDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(livekit,"__esModule",{value:!0}),livekit.LiveKitUtils=void 0;const jwt_decode_1=__importDefault$1(require$$0$1);class LiveKitUtils{static decodeJwt(s){return(0,jwt_decode_1.default)(s,{header:!1})}static isRoomAdmin(s){return LiveKitUtils.decodeJwt(s).video.roomAdmin}static getRoomName(s){return LiveKitUtils.decodeJwt(s).video.room}}livekit.LiveKitUtils=LiveKitUtils,function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(oe,F,Z,ne){ne===void 0&&(ne=Z);var M=Object.getOwnPropertyDescriptor(F,Z);(!M||("get"in M?!F.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return F[Z]}}),Object.defineProperty(oe,ne,M)}:function(oe,F,Z,ne){ne===void 0&&(ne=Z),oe[ne]=F[Z]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(oe,F){Object.defineProperty(oe,"default",{enumerable:!0,value:F})}:function(oe,F){oe.default=F}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(oe){if(oe&&oe.__esModule)return oe;var F={};if(oe!=null)for(var Z in oe)Z!=="default"&&Object.prototype.hasOwnProperty.call(oe,Z)&&s(F,oe,Z);return d(F,oe),F},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(a,"__esModule",{value:!0}),a.ApiStream=a.LiveKitUtils=a.EventApiModel=a.LayoutApiModel=a.LiveApiModel=void 0;const v=h(require$$0$1),y=require$$1$2,b=require$$2$1,_=layoutapi,T=liveapi,I=eventapi,N=c(api$1);a.LiveApiModel=N;const A=c(dist$2);a.LayoutApiModel=A;const V=c(dist$1);a.EventApiModel=V;const $=livekit;Object.defineProperty(a,"LiveKitUtils",{enumerable:!0,get:function(){return $.LiveKitUtils}});const L=logger,D=version$2,H={dev:"http://127.0.0.1:8081",stage:"https://live.stream.horse/grpcweb/live/v2",prod:"https://live.api.stream/grpcweb/live/v2"},O={dev:"https://live.stream.horse/grpcweb/layout/v2",stage:"https://live.stream.horse/grpcweb/layout/v2",prod:"https://live.api.stream/grpcweb/layout/v2"},x={dev:"wss://live.stream.horse/event/v2",stage:"wss://live.stream.horse/event/v2",prod:"wss://live.api.stream/event/v2"},j={dev:"https://live.stream.horse/grpcweb/event/v2",stage:"https://live.stream.horse/grpcweb/event/v2",prod:"https://live.api.stream/grpcweb/event/v2"},X={dev:"wss://live.stream.horse/webrtc/v2",stage:"wss://live.stream.horse/webrtc/v2",prod:"wss://live.api.stream/webrtc/v2"},te={dev:"https://live.stream.horse/webrtc/v2",stage:"https://live.stream.horse/webrtc/v2",prod:"https://live.api.stream/webrtc/v2"};class se{constructor(F={}){var Z;const ne={env:"prod",logLevel:"Warn",...F};this.env=ne.env;let M=(0,y.v4)();ne.sessionId!=null&&(M=ne.sessionId),this.log=L.logger.getCategory("ApiStream"),this.setLogLevel(ne.env=="dev"?"Trace":ne.logLevel);const G=(Z=ne.overrideEndpoints)!==null&&Z!==void 0?Z:{};G.liveApiServer==null&&(G.liveApiServer=H[this.env]),G.layoutApiServer==null&&(G.layoutApiServer=O[this.env]),G.eventApiServer==null&&(G.eventApiServer=j[this.env]),G.eventApiWebSocketServer==null&&(G.eventApiWebSocketServer=x[this.env]),this.eventApi=new I.EventApi(M,G.eventApiServer,G.eventApiWebSocketServer,ne.sdkVersion,ne.apiLogCallback,ne.eventLogCallback),this.layoutApi=new _.LayoutApi(M,this.eventApi,G.layoutApiServer,ne.sdkVersion,ne.apiLogCallback),this.liveApi=new T.LiveApi(M,this.eventApi,G.liveApiServer,this.setAccessToken.bind(this),ne.apiKey,ne.sdkVersion,ne.apiLogCallback),this.eventApi.on("reconnectBefore",J=>{J.reauthenticate&&this.liveApi.authentication.refreshAccessToken({}).catch(()=>{})}),this.log.info("api.stream: sessionid="+M+", version="+D+", sdkVersion="+ne.sdkVersion)}LiveApi(){return this.liveApi}LayoutApi(){return this.layoutApi}EventApi(){return this.eventApi}setLogLevel(F){try{let Z=b.LogLevel.toLogLevel(F);L.logger.updateRuntimeSettings({level:Z})}catch{this.log.warn(`unknown logging level ${F}`)}}setAccessToken(F){this.decodedAccessToken=se.decodeAccessToken(F),this.log.debug("setting accessToken",F,this.decodedAccessToken),this.layoutApi.setAccessToken(F),this.liveApi.setAccessToken(F),this.eventApi.setAccessToken(F)}getAccessToken(){return this.decodedAccessToken}getGuestProject(){return this.decodedAccessToken.guestControl}async load(F){let Z=typeof F=="string"?F:void 0;if(F==null&&typeof window!="undefined"){let ne=this.parseQuery();ne.get(se.ACCESS_TOKEN_QUERY_PARAM)!=null&&(Z=ne.get(se.ACCESS_TOKEN_QUERY_PARAM))}else typeof F=="object"&&F.guestCode!==void 0?await this.liveApi.publicAuthentication.useGuestCode({code:F.guestCode,serviceId:F.serviceId}).then(ne=>{Z=ne.accessToken}):typeof F=="object"&&F.accessToken!==void 0&&(Z=F.accessToken);return Z!=null&&(this.setAccessToken(Z),this.decodedAccessToken.guestControl!=null)?(this.log.info("loading guest token and exchanging"),await this.LiveApi().authentication.refreshAccessToken({}),this.log.info("auto-loading project = "+JSON.stringify(this.decodedAccessToken.guestControl)),this.decodedAccessToken.guestControl):null}getLiveKitServer(F=!1){return F?te[this.env]:X[this.env]}parseQuery(){let F=window.location.search,Z=new Map,ne=(F[0]==="?"?F.substr(1):F).split("&");for(let M=0;M<ne.length;M++){let G=ne[M].split("=");G.length==2&&(Z.set(decodeURIComponent(G[0]),decodeURIComponent(G[1]||"")),this.log.debug(`found query param: ${decodeURIComponent(G[0])}=${decodeURIComponent(G[1]||"")}`))}return Z}static decodeAccessToken(F){let Z=(0,v.default)(F,{header:!1}),ne={serviceUserId:Z.user.serviceUserId,userId:Z.user.userId,displayName:Z.user.displayName,trial:Z.user.trial,demo:Z.user.demo};return Z.guestControl!=null&&(ne.guestControl={collectionId:Z.guestControl.collectionId,projectId:Z.guestControl.projectId,role:N.roleFromJSON(Z.guestControl.role)}),ne}}a.ApiStream=se,se.ACCESS_TOKEN_QUERY_PARAM="at"}(lib$2);function _mergeNamespaces$1(a,s){return s.forEach(function(d){d&&typeof d!="string"&&!Array.isArray(d)&&Object.keys(d).forEach(function(c){if(c!=="default"&&!(c in a)){var h=Object.getOwnPropertyDescriptor(d,c);Object.defineProperty(a,c,h.get?h:{enumerable:!0,get:function(){return d[c]}})}})}),Object.freeze(a)}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},loglevel={exports:{}};(function(a){(function(s,d){a.exports?a.exports=d():s.log=d()})(commonjsGlobal,function(){var s=function(){},d="undefined",c=typeof window!==d&&typeof window.navigator!==d&&/Trident\/|MSIE /.test(window.navigator.userAgent),h=["trace","debug","info","warn","error"];function v(L,D){var H=L[D];if(typeof H.bind=="function")return H.bind(L);try{return Function.prototype.bind.call(H,L)}catch{return function(){return Function.prototype.apply.apply(H,[L,arguments])}}}function y(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function b(L){return L==="debug"&&(L="log"),typeof console===d?!1:L==="trace"&&c?y:console[L]!==void 0?v(console,L):console.log!==void 0?v(console,"log"):s}function _(L,D){for(var H=0;H<h.length;H++){var O=h[H];this[O]=H<L?s:this.methodFactory(O,L,D)}this.log=this.debug}function T(L,D,H){return function(){typeof console!==d&&(_.call(this,D,H),this[L].apply(this,arguments))}}function I(L,D,H){return b(L)||T.apply(this,arguments)}function N(L,D,H){var O=this,x;D=D==null?"WARN":D;var j="loglevel";typeof L=="string"?j+=":"+L:typeof L=="symbol"&&(j=void 0);function X(F){var Z=(h[F]||"silent").toUpperCase();if(!(typeof window===d||!j)){try{window.localStorage[j]=Z;return}catch{}try{window.document.cookie=encodeURIComponent(j)+"="+Z+";"}catch{}}}function te(){var F;if(!(typeof window===d||!j)){try{F=window.localStorage[j]}catch{}if(typeof F===d)try{var Z=window.document.cookie,ne=Z.indexOf(encodeURIComponent(j)+"=");ne!==-1&&(F=/^([^;]+)/.exec(Z.slice(ne))[1])}catch{}return O.levels[F]===void 0&&(F=void 0),F}}function se(){if(!(typeof window===d||!j)){try{window.localStorage.removeItem(j);return}catch{}try{window.document.cookie=encodeURIComponent(j)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}O.name=L,O.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},O.methodFactory=H||I,O.getLevel=function(){return x},O.setLevel=function(F,Z){if(typeof F=="string"&&O.levels[F.toUpperCase()]!==void 0&&(F=O.levels[F.toUpperCase()]),typeof F=="number"&&F>=0&&F<=O.levels.SILENT){if(x=F,Z!==!1&&X(F),_.call(O,F,L),typeof console===d&&F<O.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+F},O.setDefaultLevel=function(F){D=F,te()||O.setLevel(F,!1)},O.resetLevel=function(){O.setLevel(D,!1),se()},O.enableAll=function(F){O.setLevel(O.levels.TRACE,F)},O.disableAll=function(F){O.setLevel(O.levels.SILENT,F)};var oe=te();oe==null&&(oe=D),O.setLevel(oe,!1)}var A=new N,V={};A.getLogger=function(D){if(typeof D!="symbol"&&typeof D!="string"||D==="")throw new TypeError("You must supply a name when creating a logger.");var H=V[D];return H||(H=V[D]=new N(D,A.getLevel(),A.methodFactory)),H};var $=typeof window!==d?window.log:void 0;return A.noConflict=function(){return typeof window!==d&&window.log===A&&(window.log=$),A},A.getLoggers=function(){return V},A.default=A,A})})(loglevel);var LogLevel;(function(a){a[a.trace=0]="trace",a[a.debug=1]="debug",a[a.info=2]="info",a[a.warn=3]="warn",a[a.error=4]="error",a[a.silent=5]="silent"})(LogLevel||(LogLevel={}));const livekitLogger=loglevel.exports.getLogger("livekit");livekitLogger.setLevel(LogLevel.info);function setLogLevel(a){livekitLogger.setLevel(a)}var long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(a){}function Long(a,s,d){this.low=a|0,this.high=s|0,this.unsigned=!!d}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(a){return(a&&a.__isLong__)===!0}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(a,s){var d,c,h;return s?(a>>>=0,(h=0<=a&&a<256)&&(c=UINT_CACHE[a],c)?c:(d=fromBits(a,(a|0)<0?-1:0,!0),h&&(UINT_CACHE[a]=d),d)):(a|=0,(h=-128<=a&&a<128)&&(c=INT_CACHE[a],c)?c:(d=fromBits(a,a<0?-1:0,!1),h&&(INT_CACHE[a]=d),d))}Long.fromInt=fromInt;function fromNumber(a,s){if(isNaN(a))return s?UZERO:ZERO;if(s){if(a<0)return UZERO;if(a>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(a<=-TWO_PWR_63_DBL)return MIN_VALUE;if(a+1>=TWO_PWR_63_DBL)return MAX_VALUE}return a<0?fromNumber(-a,s).neg():fromBits(a%TWO_PWR_32_DBL|0,a/TWO_PWR_32_DBL|0,s)}Long.fromNumber=fromNumber;function fromBits(a,s,d){return new Long(a,s,d)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(a,s,d){if(a.length===0)throw Error("empty string");if(a==="NaN"||a==="Infinity"||a==="+Infinity"||a==="-Infinity")return ZERO;if(typeof s=="number"?(d=s,s=!1):s=!!s,d=d||10,d<2||36<d)throw RangeError("radix");var c;if((c=a.indexOf("-"))>0)throw Error("interior hyphen");if(c===0)return fromString(a.substring(1),s,d).neg();for(var h=fromNumber(pow_dbl(d,8)),v=ZERO,y=0;y<a.length;y+=8){var b=Math.min(8,a.length-y),_=parseInt(a.substring(y,y+b),d);if(b<8){var T=fromNumber(pow_dbl(d,b));v=v.mul(T).add(fromNumber(_))}else v=v.mul(h),v=v.add(fromNumber(_))}return v.unsigned=s,v}Long.fromString=fromString;function fromValue(a,s){return typeof a=="number"?fromNumber(a,s):typeof a=="string"?fromString(a,s):fromBits(a.low,a.high,typeof s=="boolean"?s:a.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function a(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function a(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function a(s){if(s=s||10,s<2||36<s)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var d=fromNumber(s),c=this.div(d),h=c.mul(d).sub(this);return c.toString(s)+h.toInt().toString(s)}else return"-"+this.neg().toString(s);for(var v=fromNumber(pow_dbl(s,6),this.unsigned),y=this,b="";;){var _=y.div(v),T=y.sub(_.mul(v)).toInt()>>>0,I=T.toString(s);if(y=_,y.isZero())return I+b;for(;I.length<6;)I="0"+I;b=""+I+b}},LongPrototype.getHighBits=function a(){return this.high},LongPrototype.getHighBitsUnsigned=function a(){return this.high>>>0},LongPrototype.getLowBits=function a(){return this.low},LongPrototype.getLowBitsUnsigned=function a(){return this.low>>>0},LongPrototype.getNumBitsAbs=function a(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var s=this.high!=0?this.high:this.low,d=31;d>0&&(s&1<<d)==0;d--);return this.high!=0?d+33:d+1},LongPrototype.isZero=function a(){return this.high===0&&this.low===0},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function a(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function a(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function a(){return(this.low&1)===1},LongPrototype.isEven=function a(){return(this.low&1)===0},LongPrototype.equals=function a(s){return isLong(s)||(s=fromValue(s)),this.unsigned!==s.unsigned&&this.high>>>31===1&&s.high>>>31===1?!1:this.high===s.high&&this.low===s.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function a(s){return!this.eq(s)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function a(s){return this.comp(s)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function a(s){return this.comp(s)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function a(s){return this.comp(s)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function a(s){return this.comp(s)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function a(s){if(isLong(s)||(s=fromValue(s)),this.eq(s))return 0;var d=this.isNegative(),c=s.isNegative();return d&&!c?-1:!d&&c?1:this.unsigned?s.high>>>0>this.high>>>0||s.high===this.high&&s.low>>>0>this.low>>>0?-1:1:this.sub(s).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function a(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function a(s){isLong(s)||(s=fromValue(s));var d=this.high>>>16,c=this.high&65535,h=this.low>>>16,v=this.low&65535,y=s.high>>>16,b=s.high&65535,_=s.low>>>16,T=s.low&65535,I=0,N=0,A=0,V=0;return V+=v+T,A+=V>>>16,V&=65535,A+=h+_,N+=A>>>16,A&=65535,N+=c+b,I+=N>>>16,N&=65535,I+=d+y,I&=65535,fromBits(A<<16|V,I<<16|N,this.unsigned)},LongPrototype.subtract=function a(s){return isLong(s)||(s=fromValue(s)),this.add(s.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function a(s){if(this.isZero())return ZERO;if(isLong(s)||(s=fromValue(s)),wasm){var d=wasm.mul(this.low,this.high,s.low,s.high);return fromBits(d,wasm.get_high(),this.unsigned)}if(s.isZero())return ZERO;if(this.eq(MIN_VALUE))return s.isOdd()?MIN_VALUE:ZERO;if(s.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return s.isNegative()?this.neg().mul(s.neg()):this.neg().mul(s).neg();if(s.isNegative())return this.mul(s.neg()).neg();if(this.lt(TWO_PWR_24)&&s.lt(TWO_PWR_24))return fromNumber(this.toNumber()*s.toNumber(),this.unsigned);var c=this.high>>>16,h=this.high&65535,v=this.low>>>16,y=this.low&65535,b=s.high>>>16,_=s.high&65535,T=s.low>>>16,I=s.low&65535,N=0,A=0,V=0,$=0;return $+=y*I,V+=$>>>16,$&=65535,V+=v*I,A+=V>>>16,V&=65535,V+=y*T,A+=V>>>16,V&=65535,A+=h*I,N+=A>>>16,A&=65535,A+=v*T,N+=A>>>16,A&=65535,A+=y*_,N+=A>>>16,A&=65535,N+=c*I+h*T+v*_+y*b,N&=65535,fromBits(V<<16|$,N<<16|A,this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function a(s){if(isLong(s)||(s=fromValue(s)),s.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&s.low===-1&&s.high===-1)return this;var d=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,s.low,s.high);return fromBits(d,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var c,h,v;if(this.unsigned){if(s.unsigned||(s=s.toUnsigned()),s.gt(this))return UZERO;if(s.gt(this.shru(1)))return UONE;v=UZERO}else{if(this.eq(MIN_VALUE)){if(s.eq(ONE)||s.eq(NEG_ONE))return MIN_VALUE;if(s.eq(MIN_VALUE))return ONE;var y=this.shr(1);return c=y.div(s).shl(1),c.eq(ZERO)?s.isNegative()?ONE:NEG_ONE:(h=this.sub(s.mul(c)),v=c.add(h.div(s)),v)}else if(s.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return s.isNegative()?this.neg().div(s.neg()):this.neg().div(s).neg();if(s.isNegative())return this.div(s.neg()).neg();v=ZERO}for(h=this;h.gte(s);){c=Math.max(1,Math.floor(h.toNumber()/s.toNumber()));for(var b=Math.ceil(Math.log(c)/Math.LN2),_=b<=48?1:pow_dbl(2,b-48),T=fromNumber(c),I=T.mul(s);I.isNegative()||I.gt(h);)c-=_,T=fromNumber(c,this.unsigned),I=T.mul(s);T.isZero()&&(T=ONE),v=v.add(T),h=h.sub(I)}return v},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function a(s){if(isLong(s)||(s=fromValue(s)),wasm){var d=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,s.low,s.high);return fromBits(d,wasm.get_high(),this.unsigned)}return this.sub(this.div(s).mul(s))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function a(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function a(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low&s.low,this.high&s.high,this.unsigned)},LongPrototype.or=function a(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low|s.low,this.high|s.high,this.unsigned)},LongPrototype.xor=function a(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low^s.low,this.high^s.high,this.unsigned)},LongPrototype.shiftLeft=function a(s){return isLong(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?fromBits(this.low<<s,this.high<<s|this.low>>>32-s,this.unsigned):fromBits(0,this.low<<s-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function a(s){return isLong(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?fromBits(this.low>>>s|this.high<<32-s,this.high>>s,this.unsigned):fromBits(this.high>>s-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function a(s){if(isLong(s)&&(s=s.toInt()),s&=63,s===0)return this;var d=this.high;if(s<32){var c=this.low;return fromBits(c>>>s|d<<32-s,d>>>s,this.unsigned)}else return s===32?fromBits(d,0,this.unsigned):fromBits(d>>>s-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function a(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function a(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function a(s){return s?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function a(){var s=this.high,d=this.low;return[d&255,d>>>8&255,d>>>16&255,d>>>24,s&255,s>>>8&255,s>>>16&255,s>>>24]},LongPrototype.toBytesBE=function a(){var s=this.high,d=this.low;return[s>>>24,s>>>16&255,s>>>8&255,s&255,d>>>24,d>>>16&255,d>>>8&255,d&255]},Long.fromBytes=function a(s,d,c){return c?Long.fromBytesLE(s,d):Long.fromBytesBE(s,d)},Long.fromBytesLE=function a(s,d){return new Long(s[0]|s[1]<<8|s[2]<<16|s[3]<<24,s[4]|s[5]<<8|s[6]<<16|s[7]<<24,d)},Long.fromBytesBE=function a(s,d){return new Long(s[4]<<24|s[5]<<16|s[6]<<8|s[7],s[0]<<24|s[1]<<16|s[2]<<8|s[3],d)};var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(a,s){for(var d=new Array(arguments.length-1),c=0,h=2,v=!0;h<arguments.length;)d[c++]=arguments[h++];return new Promise(function(b,_){d[c]=function(I){if(v)if(v=!1,I)_(I);else{for(var N=new Array(arguments.length-1),A=0;A<N.length;)N[A++]=arguments[A];b.apply(null,N)}};try{a.apply(s||null,d)}catch(T){v&&(v=!1,_(T))}})}var base64$1={};(function(a){var s=a;s.length=function(b){var _=b.length;if(!_)return 0;for(var T=0;--_%4>1&&b.charAt(_)==="=";)++T;return Math.ceil(b.length*3)/4-T};for(var d=new Array(64),c=new Array(123),h=0;h<64;)c[d[h]=h<26?h+65:h<52?h+71:h<62?h-4:h-59|43]=h++;s.encode=function(b,_,T){for(var I=null,N=[],A=0,V=0,$;_<T;){var L=b[_++];switch(V){case 0:N[A++]=d[L>>2],$=(L&3)<<4,V=1;break;case 1:N[A++]=d[$|L>>4],$=(L&15)<<2,V=2;break;case 2:N[A++]=d[$|L>>6],N[A++]=d[L&63],V=0;break}A>8191&&((I||(I=[])).push(String.fromCharCode.apply(String,N)),A=0)}return V&&(N[A++]=d[$],N[A++]=61,V===1&&(N[A++]=61)),I?(A&&I.push(String.fromCharCode.apply(String,N.slice(0,A))),I.join("")):String.fromCharCode.apply(String,N.slice(0,A))};var v="invalid encoding";s.decode=function(b,_,T){for(var I=T,N=0,A,V=0;V<b.length;){var $=b.charCodeAt(V++);if($===61&&N>1)break;if(($=c[$])===void 0)throw Error(v);switch(N){case 0:A=$,N=1;break;case 1:_[T++]=A<<2|($&48)>>4,A=$,N=2;break;case 2:_[T++]=(A&15)<<4|($&60)>>2,A=$,N=3;break;case 3:_[T++]=(A&3)<<6|$,N=0;break}}if(N===1)throw Error(v);return T-I},s.test=function(b){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(b)}})(base64$1);var eventemitter=EventEmitter$1;function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function a(s,d,c){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:d,ctx:c||this}),this},EventEmitter$1.prototype.off=function a(s,d){if(s===void 0)this._listeners={};else if(d===void 0)this._listeners[s]=[];else for(var c=this._listeners[s],h=0;h<c.length;)c[h].fn===d?c.splice(h,1):++h;return this},EventEmitter$1.prototype.emit=function a(s){var d=this._listeners[s];if(d){for(var c=[],h=1;h<arguments.length;)c.push(arguments[h++]);for(h=0;h<d.length;)d[h].fn.apply(d[h++].ctx,c)}return this};var float=factory(factory);function factory(a){return typeof Float32Array!="undefined"?function(){var s=new Float32Array([-0]),d=new Uint8Array(s.buffer),c=d[3]===128;function h(_,T,I){s[0]=_,T[I]=d[0],T[I+1]=d[1],T[I+2]=d[2],T[I+3]=d[3]}function v(_,T,I){s[0]=_,T[I]=d[3],T[I+1]=d[2],T[I+2]=d[1],T[I+3]=d[0]}a.writeFloatLE=c?h:v,a.writeFloatBE=c?v:h;function y(_,T){return d[0]=_[T],d[1]=_[T+1],d[2]=_[T+2],d[3]=_[T+3],s[0]}function b(_,T){return d[3]=_[T],d[2]=_[T+1],d[1]=_[T+2],d[0]=_[T+3],s[0]}a.readFloatLE=c?y:b,a.readFloatBE=c?b:y}():function(){function s(c,h,v,y){var b=h<0?1:0;if(b&&(h=-h),h===0)c(1/h>0?0:2147483648,v,y);else if(isNaN(h))c(2143289344,v,y);else if(h>34028234663852886e22)c((b<<31|2139095040)>>>0,v,y);else if(h<11754943508222875e-54)c((b<<31|Math.round(h/1401298464324817e-60))>>>0,v,y);else{var _=Math.floor(Math.log(h)/Math.LN2),T=Math.round(h*Math.pow(2,-_)*8388608)&8388607;c((b<<31|_+127<<23|T)>>>0,v,y)}}a.writeFloatLE=s.bind(null,writeUintLE),a.writeFloatBE=s.bind(null,writeUintBE);function d(c,h,v){var y=c(h,v),b=(y>>31)*2+1,_=y>>>23&255,T=y&8388607;return _===255?T?NaN:b*(1/0):_===0?b*1401298464324817e-60*T:b*Math.pow(2,_-150)*(T+8388608)}a.readFloatLE=d.bind(null,readUintLE),a.readFloatBE=d.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var s=new Float64Array([-0]),d=new Uint8Array(s.buffer),c=d[7]===128;function h(_,T,I){s[0]=_,T[I]=d[0],T[I+1]=d[1],T[I+2]=d[2],T[I+3]=d[3],T[I+4]=d[4],T[I+5]=d[5],T[I+6]=d[6],T[I+7]=d[7]}function v(_,T,I){s[0]=_,T[I]=d[7],T[I+1]=d[6],T[I+2]=d[5],T[I+3]=d[4],T[I+4]=d[3],T[I+5]=d[2],T[I+6]=d[1],T[I+7]=d[0]}a.writeDoubleLE=c?h:v,a.writeDoubleBE=c?v:h;function y(_,T){return d[0]=_[T],d[1]=_[T+1],d[2]=_[T+2],d[3]=_[T+3],d[4]=_[T+4],d[5]=_[T+5],d[6]=_[T+6],d[7]=_[T+7],s[0]}function b(_,T){return d[7]=_[T],d[6]=_[T+1],d[5]=_[T+2],d[4]=_[T+3],d[3]=_[T+4],d[2]=_[T+5],d[1]=_[T+6],d[0]=_[T+7],s[0]}a.readDoubleLE=c?y:b,a.readDoubleBE=c?b:y}():function(){function s(c,h,v,y,b,_){var T=y<0?1:0;if(T&&(y=-y),y===0)c(0,b,_+h),c(1/y>0?0:2147483648,b,_+v);else if(isNaN(y))c(0,b,_+h),c(2146959360,b,_+v);else if(y>17976931348623157e292)c(0,b,_+h),c((T<<31|2146435072)>>>0,b,_+v);else{var I;if(y<22250738585072014e-324)I=y/5e-324,c(I>>>0,b,_+h),c((T<<31|I/4294967296)>>>0,b,_+v);else{var N=Math.floor(Math.log(y)/Math.LN2);N===1024&&(N=1023),I=y*Math.pow(2,-N),c(I*4503599627370496>>>0,b,_+h),c((T<<31|N+1023<<20|I*1048576&1048575)>>>0,b,_+v)}}}a.writeDoubleLE=s.bind(null,writeUintLE,0,4),a.writeDoubleBE=s.bind(null,writeUintBE,4,0);function d(c,h,v,y,b){var _=c(y,b+h),T=c(y,b+v),I=(T>>31)*2+1,N=T>>>20&2047,A=4294967296*(T&1048575)+_;return N===2047?A?NaN:I*(1/0):N===0?I*5e-324*A:I*Math.pow(2,N-1075)*(A+4503599627370496)}a.readDoubleLE=d.bind(null,readUintLE,0,4),a.readDoubleBE=d.bind(null,readUintBE,4,0)}(),a}function writeUintLE(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}function writeUintBE(a,s,d){s[d]=a>>>24,s[d+1]=a>>>16&255,s[d+2]=a>>>8&255,s[d+3]=a&255}function readUintLE(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16|a[s+3]<<24)>>>0}function readUintBE(a,s){return(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3])>>>0}var inquire_1=inquire;function inquire(a){try{var s=void 0;if(s&&(s.length||Object.keys(s).length))return s}catch{}return null}var utf8$2={};(function(a){var s=a;s.length=function(c){for(var h=0,v=0,y=0;y<c.length;++y)v=c.charCodeAt(y),v<128?h+=1:v<2048?h+=2:(v&64512)===55296&&(c.charCodeAt(y+1)&64512)===56320?(++y,h+=4):h+=3;return h},s.read=function(c,h,v){var y=v-h;if(y<1)return"";for(var b=null,_=[],T=0,I;h<v;)I=c[h++],I<128?_[T++]=I:I>191&&I<224?_[T++]=(I&31)<<6|c[h++]&63:I>239&&I<365?(I=((I&7)<<18|(c[h++]&63)<<12|(c[h++]&63)<<6|c[h++]&63)-65536,_[T++]=55296+(I>>10),_[T++]=56320+(I&1023)):_[T++]=(I&15)<<12|(c[h++]&63)<<6|c[h++]&63,T>8191&&((b||(b=[])).push(String.fromCharCode.apply(String,_)),T=0);return b?(T&&b.push(String.fromCharCode.apply(String,_.slice(0,T))),b.join("")):String.fromCharCode.apply(String,_.slice(0,T))},s.write=function(c,h,v){for(var y=v,b,_,T=0;T<c.length;++T)b=c.charCodeAt(T),b<128?h[v++]=b:b<2048?(h[v++]=b>>6|192,h[v++]=b&63|128):(b&64512)===55296&&((_=c.charCodeAt(T+1))&64512)===56320?(b=65536+((b&1023)<<10)+(_&1023),++T,h[v++]=b>>18|240,h[v++]=b>>12&63|128,h[v++]=b>>6&63|128,h[v++]=b&63|128):(h[v++]=b>>12|224,h[v++]=b>>6&63|128,h[v++]=b&63|128);return v-y}})(utf8$2);var pool_1=pool;function pool(a,s,d){var c=d||8192,h=c>>>1,v=null,y=c;return function(_){if(_<1||_>h)return a(_);y+_>c&&(v=a(c),y=0);var T=s.call(v,y,y+=_);return y&7&&(y=(y|7)+1),T}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(a,s){this.lo=a>>>0,this.hi=s>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function a(s){if(s===0)return zero;var d=s<0;d&&(s=-s);var c=s>>>0,h=(s-c)/4294967296>>>0;return d&&(h=~h>>>0,c=~c>>>0,++c>4294967295&&(c=0,++h>4294967295&&(h=0))),new LongBits$2(c,h)},LongBits$2.from=function a(s){if(typeof s=="number")return LongBits$2.fromNumber(s);if(util$5.isString(s))if(util$5.Long)s=util$5.Long.fromString(s);else return LongBits$2.fromNumber(parseInt(s,10));return s.low||s.high?new LongBits$2(s.low>>>0,s.high>>>0):zero},LongBits$2.prototype.toNumber=function a(s){if(!s&&this.hi>>>31){var d=~this.lo+1>>>0,c=~this.hi>>>0;return d||(c=c+1>>>0),-(d+c*4294967296)}return this.lo+this.hi*4294967296},LongBits$2.prototype.toLong=function a(s){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(s)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(s)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function a(s){return s===zeroHash?zero:new LongBits$2((charCodeAt.call(s,0)|charCodeAt.call(s,1)<<8|charCodeAt.call(s,2)<<16|charCodeAt.call(s,3)<<24)>>>0,(charCodeAt.call(s,4)|charCodeAt.call(s,5)<<8|charCodeAt.call(s,6)<<16|charCodeAt.call(s,7)<<24)>>>0)},LongBits$2.prototype.toHash=function a(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$2.prototype.zzEncode=function a(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},LongBits$2.prototype.zzDecode=function a(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},LongBits$2.prototype.length=function a(){var s=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return c===0?d===0?s<16384?s<128?1:2:s<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:c<128?9:10},function(a){var s=a;s.asPromise=aspromise,s.base64=base64$1,s.EventEmitter=eventemitter,s.float=float,s.inquire=inquire_1,s.utf8=utf8$2,s.pool=pool_1,s.LongBits=longbits,s.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),s.global=s.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(v){return typeof v=="number"&&isFinite(v)&&Math.floor(v)===v},s.isString=function(v){return typeof v=="string"||v instanceof String},s.isObject=function(v){return v&&typeof v=="object"},s.isset=s.isSet=function(v,y){var b=v[y];return b!=null&&v.hasOwnProperty(y)?typeof b!="object"||(Array.isArray(b)?b.length:Object.keys(b).length)>0:!1},s.Buffer=function(){try{var h=s.inquire("buffer").Buffer;return h.prototype.utf8Write?h:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(v){return typeof v=="number"?s.Buffer?s._Buffer_allocUnsafe(v):new s.Array(v):s.Buffer?s._Buffer_from(v):typeof Uint8Array=="undefined"?v:new Uint8Array(v)},s.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(v){return v?s.LongBits.from(v).toHash():s.LongBits.zeroHash},s.longFromHash=function(v,y){var b=s.LongBits.fromHash(v);return s.Long?s.Long.fromBits(b.lo,b.hi,y):b.toNumber(Boolean(y))};function d(h,v,y){for(var b=Object.keys(v),_=0;_<b.length;++_)(h[b[_]]===void 0||!y)&&(h[b[_]]=v[b[_]]);return h}s.merge=d,s.lcFirst=function(v){return v.charAt(0).toLowerCase()+v.substring(1)};function c(h){function v(y,b){if(!(this instanceof v))return new v(y,b);Object.defineProperty(this,"message",{get:function(){return y}}),Error.captureStackTrace?Error.captureStackTrace(this,v):Object.defineProperty(this,"stack",{value:new Error().stack||""}),b&&d(this,b)}return(v.prototype=Object.create(Error.prototype)).constructor=v,Object.defineProperty(v.prototype,"name",{get:function(){return h}}),v.prototype.toString=function(){return this.name+": "+this.message},v}s.newError=c,s.ProtocolError=c("ProtocolError"),s.oneOfGetter=function(v){for(var y={},b=0;b<v.length;++b)y[v[b]]=1;return function(){for(var _=Object.keys(this),T=_.length-1;T>-1;--T)if(y[_[T]]===1&&this[_[T]]!==void 0&&this[_[T]]!==null)return _[T]}},s.oneOfSetter=function(v){return function(y){for(var b=0;b<v.length;++b)v[b]!==y&&delete this[v[b]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var h=s.Buffer;if(!h){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=h.from!==Uint8Array.from&&h.from||function(y,b){return new h(y,b)},s._Buffer_allocUnsafe=h.allocUnsafe||function(y){return new h(y)}}}(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(a,s,d){this.fn=a,this.len=s,this.next=void 0,this.val=d}function noop$1(){}function State(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1$1=function a(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1$1(),Writer$1.alloc=function a(s){return new util$4.Array(s)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function a(s,d,c){return this.tail=this.tail.next=new Op(s,d,c),this.len+=d,this};function writeByte(a,s,d){s[d]=a&255}function writeVarint32(a,s,d){for(;a>127;)s[d++]=a&127|128,a>>>=7;s[d]=a}function VarintOp(a,s){this.len=a,this.next=void 0,this.val=s}VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function a(s){return this.len+=(this.tail=this.tail.next=new VarintOp((s=s>>>0)<128?1:s<16384?2:s<2097152?3:s<268435456?4:5,s)).len,this},Writer$1.prototype.int32=function a(s){return s<0?this._push(writeVarint64,10,LongBits$1.fromNumber(s)):this.uint32(s)},Writer$1.prototype.sint32=function a(s){return this.uint32((s<<1^s>>31)>>>0)};function writeVarint64(a,s,d){for(;a.hi;)s[d++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)s[d++]=a.lo&127|128,a.lo=a.lo>>>7;s[d++]=a.lo}Writer$1.prototype.uint64=function a(s){var d=LongBits$1.from(s);return this._push(writeVarint64,d.length(),d)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function a(s){var d=LongBits$1.from(s).zzEncode();return this._push(writeVarint64,d.length(),d)},Writer$1.prototype.bool=function a(s){return this._push(writeByte,1,s?1:0)};function writeFixed32(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}Writer$1.prototype.fixed32=function a(s){return this._push(writeFixed32,4,s>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function a(s){var d=LongBits$1.from(s);return this._push(writeFixed32,4,d.lo)._push(writeFixed32,4,d.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function a(s){return this._push(util$4.float.writeFloatLE,4,s)},Writer$1.prototype.double=function a(s){return this._push(util$4.float.writeDoubleLE,8,s)};var writeBytes=util$4.Array.prototype.set?function a(s,d,c){d.set(s,c)}:function a(s,d,c){for(var h=0;h<s.length;++h)d[c+h]=s[h]};Writer$1.prototype.bytes=function a(s){var d=s.length>>>0;if(!d)return this._push(writeByte,1,0);if(util$4.isString(s)){var c=Writer$1.alloc(d=base64.length(s));base64.decode(s,c,0),s=c}return this.uint32(d)._push(writeBytes,d,s)},Writer$1.prototype.string=function a(s){var d=utf8$1.length(s);return d?this.uint32(d)._push(utf8$1.write,d,s):this._push(writeByte,1,0)},Writer$1.prototype.fork=function a(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this},Writer$1.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this},Writer$1.prototype.ldelim=function a(){var s=this.head,d=this.tail,c=this.len;return this.reset().uint32(c),c&&(this.tail.next=s.next,this.tail=d,this.len+=c),this},Writer$1.prototype.finish=function a(){for(var s=this.head.next,d=this.constructor.alloc(this.len),c=0;s;)s.fn(s.val,d,c),c+=s.len,s=s.next;return d},Writer$1._configure=function(a){BufferWriter$1=a,Writer$1.create=create$1$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(s,d,c){d.set(s,c)}:function(s,d,c){if(s.copy)s.copy(d,c,0,s.length);else for(var h=0;h<s.length;)d[c++]=s[h++]}},BufferWriter.prototype.bytes=function a(s){util$3.isString(s)&&(s=util$3._Buffer_from(s,"base64"));var d=s.length>>>0;return this.uint32(d),d&&this._push(BufferWriter.writeBytesBuffer,d,s),this};function writeStringBuffer(a,s,d){a.length<40?util$3.utf8.write(a,s,d):s.utf8Write?s.utf8Write(a,d):s.write(a,d)}BufferWriter.prototype.string=function a(s){var d=util$3.Buffer.byteLength(s);return this.uint32(d),d&&this._push(writeStringBuffer,d,s),this},BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(a,s){return RangeError("index out of range: "+a.pos+" + "+(s||1)+" > "+a.len)}function Reader$1(a){this.buf=a,this.pos=0,this.len=a.length}var create_array=typeof Uint8Array!="undefined"?function a(s){if(s instanceof Uint8Array||Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")}:function a(s){if(Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")},create$2=function a(){return util$2.Buffer?function(d){return(Reader$1.create=function(h){return util$2.Buffer.isBuffer(h)?new BufferReader$1(h):create_array(h)})(d)}:create_array};Reader$1.create=create$2(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=function a(){var s=4294967295;return function(){if(s=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(s=(s|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return s;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return s}}(),Reader$1.prototype.int32=function a(){return this.uint32()|0},Reader$1.prototype.sint32=function a(){var s=this.uint32();return s>>>1^-(s&1)|0};function readLongVarint(){var a=new LongBits(0,0),s=0;if(this.len-this.pos>4){for(;s<4;++s)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;s=0}else{for(;s<3;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<s*7)>>>0,a}if(this.len-this.pos>4){for(;s<5;++s)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;s<5;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end(a,s){return(a[s-4]|a[s-3]<<8|a[s-2]<<16|a[s-1]<<24)>>>0}Reader$1.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s},Reader$1.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s},Reader$1.prototype.bytes=function a(){var s=this.uint32(),d=this.pos,c=this.pos+s;if(c>this.len)throw indexOutOfRange(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(d,c):d===c?new this.buf.constructor(0):this._slice.call(this.buf,d,c)},Reader$1.prototype.string=function a(){var s=this.bytes();return utf8.read(s,0,s.length)},Reader$1.prototype.skip=function a(s){if(typeof s=="number"){if(this.pos+s>this.len)throw indexOutOfRange(this,s);this.pos+=s}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this},Reader$1.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this},Reader$1._configure=function(a){BufferReader$1=a,Reader$1.create=create$2(),BufferReader$1._configure();var s=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[s](!1)},uint64:function(){return readLongVarint.call(this)[s](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[s](!1)},fixed64:function(){return readFixed64.call(this)[s](!0)},sfixed64:function(){return readFixed64.call(this)[s](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(a){Reader.call(this,a)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function a(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(a,s,d){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(s),this.responseDelimited=Boolean(d)}Service.prototype.rpcCall=function a(s,d,c,h,v){if(!h)throw TypeError("request must be specified");var y=this;if(!v)return util.asPromise(a,y,s,d,c,h);if(!y.rpcImpl){setTimeout(function(){v(Error("already ended"))},0);return}try{return y.rpcImpl(s,d[y.requestDelimited?"encodeDelimited":"encode"](h).finish(),function(_,T){if(_)return y.emit("error",_,s),v(_);if(T===null){y.end(!0);return}if(!(T instanceof c))try{T=c[y.responseDelimited?"decodeDelimited":"decode"](T)}catch(I){return y.emit("error",I,s),v(I)}return y.emit("data",T,s),v(null,T)})}catch(b){y.emit("error",b,s),setTimeout(function(){v(b)},0);return}},Service.prototype.end=function a(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},function(a){var s=a;s.Service=service}(rpc);var roots={};(function(a){var s=a;s.build="minimal",s.Writer=writer,s.BufferWriter=writer_buffer,s.Reader=reader,s.BufferReader=reader_buffer,s.util=minimal$1,s.rpc=rpc,s.roots=roots,s.configure=d;function d(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}d()})(indexMinimal);var minimal=indexMinimal,globalThis$2=(()=>{if(typeof globalThis$2!="undefined")return globalThis$2;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw"Unable to locate global object"})();minimal.util.Long!==long&&(minimal.util.Long=long,minimal.configure());var TrackType;(function(a){a[a.AUDIO=0]="AUDIO",a[a.VIDEO=1]="VIDEO",a[a.DATA=2]="DATA",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackType||(TrackType={}));function trackTypeFromJSON(a){switch(a){case 0:case"AUDIO":return TrackType.AUDIO;case 1:case"VIDEO":return TrackType.VIDEO;case 2:case"DATA":return TrackType.DATA;case-1:case"UNRECOGNIZED":default:return TrackType.UNRECOGNIZED}}function trackTypeToJSON(a){switch(a){case TrackType.AUDIO:return"AUDIO";case TrackType.VIDEO:return"VIDEO";case TrackType.DATA:return"DATA";default:return"UNKNOWN"}}var TrackSource;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.CAMERA=1]="CAMERA",a[a.MICROPHONE=2]="MICROPHONE",a[a.SCREEN_SHARE=3]="SCREEN_SHARE",a[a.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackSource||(TrackSource={}));function trackSourceFromJSON(a){switch(a){case 0:case"UNKNOWN":return TrackSource.UNKNOWN;case 1:case"CAMERA":return TrackSource.CAMERA;case 2:case"MICROPHONE":return TrackSource.MICROPHONE;case 3:case"SCREEN_SHARE":return TrackSource.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return TrackSource.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return TrackSource.UNRECOGNIZED}}function trackSourceToJSON(a){switch(a){case TrackSource.UNKNOWN:return"UNKNOWN";case TrackSource.CAMERA:return"CAMERA";case TrackSource.MICROPHONE:return"MICROPHONE";case TrackSource.SCREEN_SHARE:return"SCREEN_SHARE";case TrackSource.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";default:return"UNKNOWN"}}var VideoQuality;(function(a){a[a.LOW=0]="LOW",a[a.MEDIUM=1]="MEDIUM",a[a.HIGH=2]="HIGH",a[a.OFF=3]="OFF",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(VideoQuality||(VideoQuality={}));function videoQualityFromJSON(a){switch(a){case 0:case"LOW":return VideoQuality.LOW;case 1:case"MEDIUM":return VideoQuality.MEDIUM;case 2:case"HIGH":return VideoQuality.HIGH;case 3:case"OFF":return VideoQuality.OFF;case-1:case"UNRECOGNIZED":default:return VideoQuality.UNRECOGNIZED}}function videoQualityToJSON(a){switch(a){case VideoQuality.LOW:return"LOW";case VideoQuality.MEDIUM:return"MEDIUM";case VideoQuality.HIGH:return"HIGH";case VideoQuality.OFF:return"OFF";default:return"UNKNOWN"}}var ConnectionQuality$1;(function(a){a[a.POOR=0]="POOR",a[a.GOOD=1]="GOOD",a[a.EXCELLENT=2]="EXCELLENT",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ConnectionQuality$1||(ConnectionQuality$1={}));function connectionQualityFromJSON(a){switch(a){case 0:case"POOR":return ConnectionQuality$1.POOR;case 1:case"GOOD":return ConnectionQuality$1.GOOD;case 2:case"EXCELLENT":return ConnectionQuality$1.EXCELLENT;case-1:case"UNRECOGNIZED":default:return ConnectionQuality$1.UNRECOGNIZED}}function connectionQualityToJSON(a){switch(a){case ConnectionQuality$1.POOR:return"POOR";case ConnectionQuality$1.GOOD:return"GOOD";case ConnectionQuality$1.EXCELLENT:return"EXCELLENT";default:return"UNKNOWN"}}var ClientConfigSetting;(function(a){a[a.UNSET=0]="UNSET",a[a.DISABLED=1]="DISABLED",a[a.ENABLED=2]="ENABLED",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientConfigSetting||(ClientConfigSetting={}));function clientConfigSettingFromJSON(a){switch(a){case 0:case"UNSET":return ClientConfigSetting.UNSET;case 1:case"DISABLED":return ClientConfigSetting.DISABLED;case 2:case"ENABLED":return ClientConfigSetting.ENABLED;case-1:case"UNRECOGNIZED":default:return ClientConfigSetting.UNRECOGNIZED}}function clientConfigSettingToJSON(a){switch(a){case ClientConfigSetting.UNSET:return"UNSET";case ClientConfigSetting.DISABLED:return"DISABLED";case ClientConfigSetting.ENABLED:return"ENABLED";default:return"UNKNOWN"}}var ParticipantInfo_State;(function(a){a[a.JOINING=0]="JOINING",a[a.JOINED=1]="JOINED",a[a.ACTIVE=2]="ACTIVE",a[a.DISCONNECTED=3]="DISCONNECTED",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ParticipantInfo_State||(ParticipantInfo_State={}));function participantInfo_StateFromJSON(a){switch(a){case 0:case"JOINING":return ParticipantInfo_State.JOINING;case 1:case"JOINED":return ParticipantInfo_State.JOINED;case 2:case"ACTIVE":return ParticipantInfo_State.ACTIVE;case 3:case"DISCONNECTED":return ParticipantInfo_State.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return ParticipantInfo_State.UNRECOGNIZED}}function participantInfo_StateToJSON(a){switch(a){case ParticipantInfo_State.JOINING:return"JOINING";case ParticipantInfo_State.JOINED:return"JOINED";case ParticipantInfo_State.ACTIVE:return"ACTIVE";case ParticipantInfo_State.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}var DataPacket_Kind;(function(a){a[a.RELIABLE=0]="RELIABLE",a[a.LOSSY=1]="LOSSY",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(DataPacket_Kind||(DataPacket_Kind={}));function dataPacket_KindFromJSON(a){switch(a){case 0:case"RELIABLE":return DataPacket_Kind.RELIABLE;case 1:case"LOSSY":return DataPacket_Kind.LOSSY;case-1:case"UNRECOGNIZED":default:return DataPacket_Kind.UNRECOGNIZED}}function dataPacket_KindToJSON(a){switch(a){case DataPacket_Kind.RELIABLE:return"RELIABLE";case DataPacket_Kind.LOSSY:return"LOSSY";default:return"UNKNOWN"}}var ClientInfo_SDK;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.JS=1]="JS",a[a.SWIFT=2]="SWIFT",a[a.ANDROID=3]="ANDROID",a[a.FLUTTER=4]="FLUTTER",a[a.GO=5]="GO",a[a.UNITY=6]="UNITY",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientInfo_SDK||(ClientInfo_SDK={}));function clientInfo_SDKFromJSON(a){switch(a){case 0:case"UNKNOWN":return ClientInfo_SDK.UNKNOWN;case 1:case"JS":return ClientInfo_SDK.JS;case 2:case"SWIFT":return ClientInfo_SDK.SWIFT;case 3:case"ANDROID":return ClientInfo_SDK.ANDROID;case 4:case"FLUTTER":return ClientInfo_SDK.FLUTTER;case 5:case"GO":return ClientInfo_SDK.GO;case 6:case"UNITY":return ClientInfo_SDK.UNITY;case-1:case"UNRECOGNIZED":default:return ClientInfo_SDK.UNRECOGNIZED}}function clientInfo_SDKToJSON(a){switch(a){case ClientInfo_SDK.UNKNOWN:return"UNKNOWN";case ClientInfo_SDK.JS:return"JS";case ClientInfo_SDK.SWIFT:return"SWIFT";case ClientInfo_SDK.ANDROID:return"ANDROID";case ClientInfo_SDK.FLUTTER:return"FLUTTER";case ClientInfo_SDK.GO:return"GO";case ClientInfo_SDK.UNITY:return"UNITY";default:return"UNKNOWN"}}function createBaseRoom(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1}}const Room$1={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.sid!==""&&s.uint32(10).string(a.sid),a.name!==""&&s.uint32(18).string(a.name),a.emptyTimeout!==0&&s.uint32(24).uint32(a.emptyTimeout),a.maxParticipants!==0&&s.uint32(32).uint32(a.maxParticipants),a.creationTime!==0&&s.uint32(40).int64(a.creationTime),a.turnPassword!==""&&s.uint32(50).string(a.turnPassword);for(const d of a.enabledCodecs)Codec.encode(d,s.uint32(58).fork()).ldelim();return a.metadata!==""&&s.uint32(66).string(a.metadata),a.numParticipants!==0&&s.uint32(72).uint32(a.numParticipants),a.activeRecording===!0&&s.uint32(80).bool(a.activeRecording),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseRoom();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.sid=d.string();break;case 2:h.name=d.string();break;case 3:h.emptyTimeout=d.uint32();break;case 4:h.maxParticipants=d.uint32();break;case 5:h.creationTime=longToNumber(d.int64());break;case 6:h.turnPassword=d.string();break;case 7:h.enabledCodecs.push(Codec.decode(d,d.uint32()));break;case 8:h.metadata=d.string();break;case 9:h.numParticipants=d.uint32();break;case 10:h.activeRecording=d.bool();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{sid:isSet$1(a.sid)?String(a.sid):"",name:isSet$1(a.name)?String(a.name):"",emptyTimeout:isSet$1(a.emptyTimeout)?Number(a.emptyTimeout):0,maxParticipants:isSet$1(a.maxParticipants)?Number(a.maxParticipants):0,creationTime:isSet$1(a.creationTime)?Number(a.creationTime):0,turnPassword:isSet$1(a.turnPassword)?String(a.turnPassword):"",enabledCodecs:Array.isArray(a==null?void 0:a.enabledCodecs)?a.enabledCodecs.map(s=>Codec.fromJSON(s)):[],metadata:isSet$1(a.metadata)?String(a.metadata):"",numParticipants:isSet$1(a.numParticipants)?Number(a.numParticipants):0,activeRecording:isSet$1(a.activeRecording)?Boolean(a.activeRecording):!1}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.name!==void 0&&(s.name=a.name),a.emptyTimeout!==void 0&&(s.emptyTimeout=Math.round(a.emptyTimeout)),a.maxParticipants!==void 0&&(s.maxParticipants=Math.round(a.maxParticipants)),a.creationTime!==void 0&&(s.creationTime=Math.round(a.creationTime)),a.turnPassword!==void 0&&(s.turnPassword=a.turnPassword),a.enabledCodecs?s.enabledCodecs=a.enabledCodecs.map(d=>d?Codec.toJSON(d):void 0):s.enabledCodecs=[],a.metadata!==void 0&&(s.metadata=a.metadata),a.numParticipants!==void 0&&(s.numParticipants=Math.round(a.numParticipants)),a.activeRecording!==void 0&&(s.activeRecording=a.activeRecording),s},fromPartial(a){var s,d,c,h,v,y,b,_,T,I;const N=createBaseRoom();return N.sid=(s=a.sid)!==null&&s!==void 0?s:"",N.name=(d=a.name)!==null&&d!==void 0?d:"",N.emptyTimeout=(c=a.emptyTimeout)!==null&&c!==void 0?c:0,N.maxParticipants=(h=a.maxParticipants)!==null&&h!==void 0?h:0,N.creationTime=(v=a.creationTime)!==null&&v!==void 0?v:0,N.turnPassword=(y=a.turnPassword)!==null&&y!==void 0?y:"",N.enabledCodecs=((b=a.enabledCodecs)===null||b===void 0?void 0:b.map(A=>Codec.fromPartial(A)))||[],N.metadata=(_=a.metadata)!==null&&_!==void 0?_:"",N.numParticipants=(T=a.numParticipants)!==null&&T!==void 0?T:0,N.activeRecording=(I=a.activeRecording)!==null&&I!==void 0?I:!1,N}};function createBaseCodec(){return{mime:"",fmtpLine:""}}const Codec={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.mime!==""&&s.uint32(10).string(a.mime),a.fmtpLine!==""&&s.uint32(18).string(a.fmtpLine),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseCodec();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.mime=d.string();break;case 2:h.fmtpLine=d.string();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{mime:isSet$1(a.mime)?String(a.mime):"",fmtpLine:isSet$1(a.fmtpLine)?String(a.fmtpLine):""}},toJSON(a){const s={};return a.mime!==void 0&&(s.mime=a.mime),a.fmtpLine!==void 0&&(s.fmtpLine=a.fmtpLine),s},fromPartial(a){var s,d;const c=createBaseCodec();return c.mime=(s=a.mime)!==null&&s!==void 0?s:"",c.fmtpLine=(d=a.fmtpLine)!==null&&d!==void 0?d:"",c}};function createBaseParticipantPermission(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,hidden:!1,recorder:!1}}const ParticipantPermission={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.canSubscribe===!0&&s.uint32(8).bool(a.canSubscribe),a.canPublish===!0&&s.uint32(16).bool(a.canPublish),a.canPublishData===!0&&s.uint32(24).bool(a.canPublishData),a.hidden===!0&&s.uint32(56).bool(a.hidden),a.recorder===!0&&s.uint32(64).bool(a.recorder),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseParticipantPermission();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.canSubscribe=d.bool();break;case 2:h.canPublish=d.bool();break;case 3:h.canPublishData=d.bool();break;case 7:h.hidden=d.bool();break;case 8:h.recorder=d.bool();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{canSubscribe:isSet$1(a.canSubscribe)?Boolean(a.canSubscribe):!1,canPublish:isSet$1(a.canPublish)?Boolean(a.canPublish):!1,canPublishData:isSet$1(a.canPublishData)?Boolean(a.canPublishData):!1,hidden:isSet$1(a.hidden)?Boolean(a.hidden):!1,recorder:isSet$1(a.recorder)?Boolean(a.recorder):!1}},toJSON(a){const s={};return a.canSubscribe!==void 0&&(s.canSubscribe=a.canSubscribe),a.canPublish!==void 0&&(s.canPublish=a.canPublish),a.canPublishData!==void 0&&(s.canPublishData=a.canPublishData),a.hidden!==void 0&&(s.hidden=a.hidden),a.recorder!==void 0&&(s.recorder=a.recorder),s},fromPartial(a){var s,d,c,h,v;const y=createBaseParticipantPermission();return y.canSubscribe=(s=a.canSubscribe)!==null&&s!==void 0?s:!1,y.canPublish=(d=a.canPublish)!==null&&d!==void 0?d:!1,y.canPublishData=(c=a.canPublishData)!==null&&c!==void 0?c:!1,y.hidden=(h=a.hidden)!==null&&h!==void 0?h:!1,y.recorder=(v=a.recorder)!==null&&v!==void 0?v:!1,y}};function createBaseParticipantInfo(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}const ParticipantInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.sid!==""&&s.uint32(10).string(a.sid),a.identity!==""&&s.uint32(18).string(a.identity),a.state!==0&&s.uint32(24).int32(a.state);for(const d of a.tracks)TrackInfo.encode(d,s.uint32(34).fork()).ldelim();return a.metadata!==""&&s.uint32(42).string(a.metadata),a.joinedAt!==0&&s.uint32(48).int64(a.joinedAt),a.name!==""&&s.uint32(74).string(a.name),a.version!==0&&s.uint32(80).uint32(a.version),a.permission!==void 0&&ParticipantPermission.encode(a.permission,s.uint32(90).fork()).ldelim(),a.region!==""&&s.uint32(98).string(a.region),a.isPublisher===!0&&s.uint32(104).bool(a.isPublisher),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseParticipantInfo();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.sid=d.string();break;case 2:h.identity=d.string();break;case 3:h.state=d.int32();break;case 4:h.tracks.push(TrackInfo.decode(d,d.uint32()));break;case 5:h.metadata=d.string();break;case 6:h.joinedAt=longToNumber(d.int64());break;case 9:h.name=d.string();break;case 10:h.version=d.uint32();break;case 11:h.permission=ParticipantPermission.decode(d,d.uint32());break;case 12:h.region=d.string();break;case 13:h.isPublisher=d.bool();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{sid:isSet$1(a.sid)?String(a.sid):"",identity:isSet$1(a.identity)?String(a.identity):"",state:isSet$1(a.state)?participantInfo_StateFromJSON(a.state):0,tracks:Array.isArray(a==null?void 0:a.tracks)?a.tracks.map(s=>TrackInfo.fromJSON(s)):[],metadata:isSet$1(a.metadata)?String(a.metadata):"",joinedAt:isSet$1(a.joinedAt)?Number(a.joinedAt):0,name:isSet$1(a.name)?String(a.name):"",version:isSet$1(a.version)?Number(a.version):0,permission:isSet$1(a.permission)?ParticipantPermission.fromJSON(a.permission):void 0,region:isSet$1(a.region)?String(a.region):"",isPublisher:isSet$1(a.isPublisher)?Boolean(a.isPublisher):!1}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.identity!==void 0&&(s.identity=a.identity),a.state!==void 0&&(s.state=participantInfo_StateToJSON(a.state)),a.tracks?s.tracks=a.tracks.map(d=>d?TrackInfo.toJSON(d):void 0):s.tracks=[],a.metadata!==void 0&&(s.metadata=a.metadata),a.joinedAt!==void 0&&(s.joinedAt=Math.round(a.joinedAt)),a.name!==void 0&&(s.name=a.name),a.version!==void 0&&(s.version=Math.round(a.version)),a.permission!==void 0&&(s.permission=a.permission?ParticipantPermission.toJSON(a.permission):void 0),a.region!==void 0&&(s.region=a.region),a.isPublisher!==void 0&&(s.isPublisher=a.isPublisher),s},fromPartial(a){var s,d,c,h,v,y,b,_,T,I;const N=createBaseParticipantInfo();return N.sid=(s=a.sid)!==null&&s!==void 0?s:"",N.identity=(d=a.identity)!==null&&d!==void 0?d:"",N.state=(c=a.state)!==null&&c!==void 0?c:0,N.tracks=((h=a.tracks)===null||h===void 0?void 0:h.map(A=>TrackInfo.fromPartial(A)))||[],N.metadata=(v=a.metadata)!==null&&v!==void 0?v:"",N.joinedAt=(y=a.joinedAt)!==null&&y!==void 0?y:0,N.name=(b=a.name)!==null&&b!==void 0?b:"",N.version=(_=a.version)!==null&&_!==void 0?_:0,N.permission=a.permission!==void 0&&a.permission!==null?ParticipantPermission.fromPartial(a.permission):void 0,N.region=(T=a.region)!==null&&T!==void 0?T:"",N.isPublisher=(I=a.isPublisher)!==null&&I!==void 0?I:!1,N}};function createBaseTrackInfo(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:""}}const TrackInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.sid!==""&&s.uint32(10).string(a.sid),a.type!==0&&s.uint32(16).int32(a.type),a.name!==""&&s.uint32(26).string(a.name),a.muted===!0&&s.uint32(32).bool(a.muted),a.width!==0&&s.uint32(40).uint32(a.width),a.height!==0&&s.uint32(48).uint32(a.height),a.simulcast===!0&&s.uint32(56).bool(a.simulcast),a.disableDtx===!0&&s.uint32(64).bool(a.disableDtx),a.source!==0&&s.uint32(72).int32(a.source);for(const d of a.layers)VideoLayer.encode(d,s.uint32(82).fork()).ldelim();return a.mimeType!==""&&s.uint32(90).string(a.mimeType),a.mid!==""&&s.uint32(98).string(a.mid),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrackInfo();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.sid=d.string();break;case 2:h.type=d.int32();break;case 3:h.name=d.string();break;case 4:h.muted=d.bool();break;case 5:h.width=d.uint32();break;case 6:h.height=d.uint32();break;case 7:h.simulcast=d.bool();break;case 8:h.disableDtx=d.bool();break;case 9:h.source=d.int32();break;case 10:h.layers.push(VideoLayer.decode(d,d.uint32()));break;case 11:h.mimeType=d.string();break;case 12:h.mid=d.string();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{sid:isSet$1(a.sid)?String(a.sid):"",type:isSet$1(a.type)?trackTypeFromJSON(a.type):0,name:isSet$1(a.name)?String(a.name):"",muted:isSet$1(a.muted)?Boolean(a.muted):!1,width:isSet$1(a.width)?Number(a.width):0,height:isSet$1(a.height)?Number(a.height):0,simulcast:isSet$1(a.simulcast)?Boolean(a.simulcast):!1,disableDtx:isSet$1(a.disableDtx)?Boolean(a.disableDtx):!1,source:isSet$1(a.source)?trackSourceFromJSON(a.source):0,layers:Array.isArray(a==null?void 0:a.layers)?a.layers.map(s=>VideoLayer.fromJSON(s)):[],mimeType:isSet$1(a.mimeType)?String(a.mimeType):"",mid:isSet$1(a.mid)?String(a.mid):""}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.type!==void 0&&(s.type=trackTypeToJSON(a.type)),a.name!==void 0&&(s.name=a.name),a.muted!==void 0&&(s.muted=a.muted),a.width!==void 0&&(s.width=Math.round(a.width)),a.height!==void 0&&(s.height=Math.round(a.height)),a.simulcast!==void 0&&(s.simulcast=a.simulcast),a.disableDtx!==void 0&&(s.disableDtx=a.disableDtx),a.source!==void 0&&(s.source=trackSourceToJSON(a.source)),a.layers?s.layers=a.layers.map(d=>d?VideoLayer.toJSON(d):void 0):s.layers=[],a.mimeType!==void 0&&(s.mimeType=a.mimeType),a.mid!==void 0&&(s.mid=a.mid),s},fromPartial(a){var s,d,c,h,v,y,b,_,T,I,N,A;const V=createBaseTrackInfo();return V.sid=(s=a.sid)!==null&&s!==void 0?s:"",V.type=(d=a.type)!==null&&d!==void 0?d:0,V.name=(c=a.name)!==null&&c!==void 0?c:"",V.muted=(h=a.muted)!==null&&h!==void 0?h:!1,V.width=(v=a.width)!==null&&v!==void 0?v:0,V.height=(y=a.height)!==null&&y!==void 0?y:0,V.simulcast=(b=a.simulcast)!==null&&b!==void 0?b:!1,V.disableDtx=(_=a.disableDtx)!==null&&_!==void 0?_:!1,V.source=(T=a.source)!==null&&T!==void 0?T:0,V.layers=((I=a.layers)===null||I===void 0?void 0:I.map($=>VideoLayer.fromPartial($)))||[],V.mimeType=(N=a.mimeType)!==null&&N!==void 0?N:"",V.mid=(A=a.mid)!==null&&A!==void 0?A:"",V}};function createBaseVideoLayer(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}const VideoLayer={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.quality!==0&&s.uint32(8).int32(a.quality),a.width!==0&&s.uint32(16).uint32(a.width),a.height!==0&&s.uint32(24).uint32(a.height),a.bitrate!==0&&s.uint32(32).uint32(a.bitrate),a.ssrc!==0&&s.uint32(40).uint32(a.ssrc),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseVideoLayer();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.quality=d.int32();break;case 2:h.width=d.uint32();break;case 3:h.height=d.uint32();break;case 4:h.bitrate=d.uint32();break;case 5:h.ssrc=d.uint32();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{quality:isSet$1(a.quality)?videoQualityFromJSON(a.quality):0,width:isSet$1(a.width)?Number(a.width):0,height:isSet$1(a.height)?Number(a.height):0,bitrate:isSet$1(a.bitrate)?Number(a.bitrate):0,ssrc:isSet$1(a.ssrc)?Number(a.ssrc):0}},toJSON(a){const s={};return a.quality!==void 0&&(s.quality=videoQualityToJSON(a.quality)),a.width!==void 0&&(s.width=Math.round(a.width)),a.height!==void 0&&(s.height=Math.round(a.height)),a.bitrate!==void 0&&(s.bitrate=Math.round(a.bitrate)),a.ssrc!==void 0&&(s.ssrc=Math.round(a.ssrc)),s},fromPartial(a){var s,d,c,h,v;const y=createBaseVideoLayer();return y.quality=(s=a.quality)!==null&&s!==void 0?s:0,y.width=(d=a.width)!==null&&d!==void 0?d:0,y.height=(c=a.height)!==null&&c!==void 0?c:0,y.bitrate=(h=a.bitrate)!==null&&h!==void 0?h:0,y.ssrc=(v=a.ssrc)!==null&&v!==void 0?v:0,y}};function createBaseDataPacket(){return{kind:0,user:void 0,speaker:void 0}}const DataPacket={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.kind!==0&&s.uint32(8).int32(a.kind),a.user!==void 0&&UserPacket.encode(a.user,s.uint32(18).fork()).ldelim(),a.speaker!==void 0&&ActiveSpeakerUpdate.encode(a.speaker,s.uint32(26).fork()).ldelim(),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseDataPacket();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.kind=d.int32();break;case 2:h.user=UserPacket.decode(d,d.uint32());break;case 3:h.speaker=ActiveSpeakerUpdate.decode(d,d.uint32());break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{kind:isSet$1(a.kind)?dataPacket_KindFromJSON(a.kind):0,user:isSet$1(a.user)?UserPacket.fromJSON(a.user):void 0,speaker:isSet$1(a.speaker)?ActiveSpeakerUpdate.fromJSON(a.speaker):void 0}},toJSON(a){const s={};return a.kind!==void 0&&(s.kind=dataPacket_KindToJSON(a.kind)),a.user!==void 0&&(s.user=a.user?UserPacket.toJSON(a.user):void 0),a.speaker!==void 0&&(s.speaker=a.speaker?ActiveSpeakerUpdate.toJSON(a.speaker):void 0),s},fromPartial(a){var s;const d=createBaseDataPacket();return d.kind=(s=a.kind)!==null&&s!==void 0?s:0,d.user=a.user!==void 0&&a.user!==null?UserPacket.fromPartial(a.user):void 0,d.speaker=a.speaker!==void 0&&a.speaker!==null?ActiveSpeakerUpdate.fromPartial(a.speaker):void 0,d}};function createBaseActiveSpeakerUpdate(){return{speakers:[]}}const ActiveSpeakerUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();for(const d of a.speakers)SpeakerInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseActiveSpeakerUpdate();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.speakers.push(SpeakerInfo.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{speakers:Array.isArray(a==null?void 0:a.speakers)?a.speakers.map(s=>SpeakerInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.speakers?s.speakers=a.speakers.map(d=>d?SpeakerInfo.toJSON(d):void 0):s.speakers=[],s},fromPartial(a){var s;const d=createBaseActiveSpeakerUpdate();return d.speakers=((s=a.speakers)===null||s===void 0?void 0:s.map(c=>SpeakerInfo.fromPartial(c)))||[],d}};function createBaseSpeakerInfo(){return{sid:"",level:0,active:!1}}const SpeakerInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.sid!==""&&s.uint32(10).string(a.sid),a.level!==0&&s.uint32(21).float(a.level),a.active===!0&&s.uint32(24).bool(a.active),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSpeakerInfo();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.sid=d.string();break;case 2:h.level=d.float();break;case 3:h.active=d.bool();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{sid:isSet$1(a.sid)?String(a.sid):"",level:isSet$1(a.level)?Number(a.level):0,active:isSet$1(a.active)?Boolean(a.active):!1}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.level!==void 0&&(s.level=a.level),a.active!==void 0&&(s.active=a.active),s},fromPartial(a){var s,d,c;const h=createBaseSpeakerInfo();return h.sid=(s=a.sid)!==null&&s!==void 0?s:"",h.level=(d=a.level)!==null&&d!==void 0?d:0,h.active=(c=a.active)!==null&&c!==void 0?c:!1,h}};function createBaseUserPacket(){return{participantSid:"",payload:new Uint8Array,destinationSids:[]}}const UserPacket={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.payload.length!==0&&s.uint32(18).bytes(a.payload);for(const d of a.destinationSids)s.uint32(26).string(d);return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseUserPacket();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.participantSid=d.string();break;case 2:h.payload=d.bytes();break;case 3:h.destinationSids.push(d.string());break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{participantSid:isSet$1(a.participantSid)?String(a.participantSid):"",payload:isSet$1(a.payload)?bytesFromBase64(a.payload):new Uint8Array,destinationSids:Array.isArray(a==null?void 0:a.destinationSids)?a.destinationSids.map(s=>String(s)):[]}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.payload!==void 0&&(s.payload=base64FromBytes(a.payload!==void 0?a.payload:new Uint8Array)),a.destinationSids?s.destinationSids=a.destinationSids.map(d=>d):s.destinationSids=[],s},fromPartial(a){var s,d,c;const h=createBaseUserPacket();return h.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",h.payload=(d=a.payload)!==null&&d!==void 0?d:new Uint8Array,h.destinationSids=((c=a.destinationSids)===null||c===void 0?void 0:c.map(v=>v))||[],h}};function createBaseParticipantTracks(){return{participantSid:"",trackSids:[]}}const ParticipantTracks={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.participantSid!==""&&s.uint32(10).string(a.participantSid);for(const d of a.trackSids)s.uint32(18).string(d);return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseParticipantTracks();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.participantSid=d.string();break;case 2:h.trackSids.push(d.string());break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{participantSid:isSet$1(a.participantSid)?String(a.participantSid):"",trackSids:Array.isArray(a==null?void 0:a.trackSids)?a.trackSids.map(s=>String(s)):[]}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.trackSids?s.trackSids=a.trackSids.map(d=>d):s.trackSids=[],s},fromPartial(a){var s,d;const c=createBaseParticipantTracks();return c.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",c.trackSids=((d=a.trackSids)===null||d===void 0?void 0:d.map(h=>h))||[],c}};function createBaseClientInfo(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:""}}const ClientInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.sdk!==0&&s.uint32(8).int32(a.sdk),a.version!==""&&s.uint32(18).string(a.version),a.protocol!==0&&s.uint32(24).int32(a.protocol),a.os!==""&&s.uint32(34).string(a.os),a.osVersion!==""&&s.uint32(42).string(a.osVersion),a.deviceModel!==""&&s.uint32(50).string(a.deviceModel),a.browser!==""&&s.uint32(58).string(a.browser),a.browserVersion!==""&&s.uint32(66).string(a.browserVersion),a.address!==""&&s.uint32(74).string(a.address),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseClientInfo();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.sdk=d.int32();break;case 2:h.version=d.string();break;case 3:h.protocol=d.int32();break;case 4:h.os=d.string();break;case 5:h.osVersion=d.string();break;case 6:h.deviceModel=d.string();break;case 7:h.browser=d.string();break;case 8:h.browserVersion=d.string();break;case 9:h.address=d.string();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{sdk:isSet$1(a.sdk)?clientInfo_SDKFromJSON(a.sdk):0,version:isSet$1(a.version)?String(a.version):"",protocol:isSet$1(a.protocol)?Number(a.protocol):0,os:isSet$1(a.os)?String(a.os):"",osVersion:isSet$1(a.osVersion)?String(a.osVersion):"",deviceModel:isSet$1(a.deviceModel)?String(a.deviceModel):"",browser:isSet$1(a.browser)?String(a.browser):"",browserVersion:isSet$1(a.browserVersion)?String(a.browserVersion):"",address:isSet$1(a.address)?String(a.address):""}},toJSON(a){const s={};return a.sdk!==void 0&&(s.sdk=clientInfo_SDKToJSON(a.sdk)),a.version!==void 0&&(s.version=a.version),a.protocol!==void 0&&(s.protocol=Math.round(a.protocol)),a.os!==void 0&&(s.os=a.os),a.osVersion!==void 0&&(s.osVersion=a.osVersion),a.deviceModel!==void 0&&(s.deviceModel=a.deviceModel),a.browser!==void 0&&(s.browser=a.browser),a.browserVersion!==void 0&&(s.browserVersion=a.browserVersion),a.address!==void 0&&(s.address=a.address),s},fromPartial(a){var s,d,c,h,v,y,b,_,T;const I=createBaseClientInfo();return I.sdk=(s=a.sdk)!==null&&s!==void 0?s:0,I.version=(d=a.version)!==null&&d!==void 0?d:"",I.protocol=(c=a.protocol)!==null&&c!==void 0?c:0,I.os=(h=a.os)!==null&&h!==void 0?h:"",I.osVersion=(v=a.osVersion)!==null&&v!==void 0?v:"",I.deviceModel=(y=a.deviceModel)!==null&&y!==void 0?y:"",I.browser=(b=a.browser)!==null&&b!==void 0?b:"",I.browserVersion=(_=a.browserVersion)!==null&&_!==void 0?_:"",I.address=(T=a.address)!==null&&T!==void 0?T:"",I}};function createBaseClientConfiguration(){return{video:void 0,screen:void 0,resumeConnection:0}}const ClientConfiguration={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.video!==void 0&&VideoConfiguration.encode(a.video,s.uint32(10).fork()).ldelim(),a.screen!==void 0&&VideoConfiguration.encode(a.screen,s.uint32(18).fork()).ldelim(),a.resumeConnection!==0&&s.uint32(24).int32(a.resumeConnection),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseClientConfiguration();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.video=VideoConfiguration.decode(d,d.uint32());break;case 2:h.screen=VideoConfiguration.decode(d,d.uint32());break;case 3:h.resumeConnection=d.int32();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{video:isSet$1(a.video)?VideoConfiguration.fromJSON(a.video):void 0,screen:isSet$1(a.screen)?VideoConfiguration.fromJSON(a.screen):void 0,resumeConnection:isSet$1(a.resumeConnection)?clientConfigSettingFromJSON(a.resumeConnection):0}},toJSON(a){const s={};return a.video!==void 0&&(s.video=a.video?VideoConfiguration.toJSON(a.video):void 0),a.screen!==void 0&&(s.screen=a.screen?VideoConfiguration.toJSON(a.screen):void 0),a.resumeConnection!==void 0&&(s.resumeConnection=clientConfigSettingToJSON(a.resumeConnection)),s},fromPartial(a){var s;const d=createBaseClientConfiguration();return d.video=a.video!==void 0&&a.video!==null?VideoConfiguration.fromPartial(a.video):void 0,d.screen=a.screen!==void 0&&a.screen!==null?VideoConfiguration.fromPartial(a.screen):void 0,d.resumeConnection=(s=a.resumeConnection)!==null&&s!==void 0?s:0,d}};function createBaseVideoConfiguration(){return{hardwareEncoder:0}}const VideoConfiguration={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.hardwareEncoder!==0&&s.uint32(8).int32(a.hardwareEncoder),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseVideoConfiguration();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.hardwareEncoder=d.int32();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{hardwareEncoder:isSet$1(a.hardwareEncoder)?clientConfigSettingFromJSON(a.hardwareEncoder):0}},toJSON(a){const s={};return a.hardwareEncoder!==void 0&&(s.hardwareEncoder=clientConfigSettingToJSON(a.hardwareEncoder)),s},fromPartial(a){var s;const d=createBaseVideoConfiguration();return d.hardwareEncoder=(s=a.hardwareEncoder)!==null&&s!==void 0?s:0,d}};var globalThis$1=(()=>{if(typeof globalThis$1!="undefined")return globalThis$1;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw"Unable to locate global object"})();const atob$1=globalThis$1.atob||(a=>globalThis$1.Buffer.from(a,"base64").toString("binary"));function bytesFromBase64(a){const s=atob$1(a),d=new Uint8Array(s.length);for(let c=0;c<s.length;++c)d[c]=s.charCodeAt(c);return d}const btoa$1=globalThis$1.btoa||(a=>globalThis$1.Buffer.from(a,"binary").toString("base64"));function base64FromBytes(a){const s=[];return a.forEach(d=>{s.push(String.fromCharCode(d))}),btoa$1(s.join(""))}function longToNumber(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}minimal.util.Long!==long&&(minimal.util.Long=long,minimal.configure());function isSet$1(a){return a!=null}function ownKeys(a,s){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),d.push.apply(d,c)}return d}function _objectSpread2(a){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(d),!0).forEach(function(c){_defineProperty(a,c,d[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):ownKeys(Object(d)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(d,c))})}return a}function _defineProperty(a,s,d){return s in a?Object.defineProperty(a,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[s]=d,a}var SignalTarget;(function(a){a[a.PUBLISHER=0]="PUBLISHER",a[a.SUBSCRIBER=1]="SUBSCRIBER",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(SignalTarget||(SignalTarget={}));function signalTargetFromJSON(a){switch(a){case 0:case"PUBLISHER":return SignalTarget.PUBLISHER;case 1:case"SUBSCRIBER":return SignalTarget.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return SignalTarget.UNRECOGNIZED}}function signalTargetToJSON(a){switch(a){case SignalTarget.PUBLISHER:return"PUBLISHER";case SignalTarget.SUBSCRIBER:return"SUBSCRIBER";default:return"UNKNOWN"}}var StreamState;(function(a){a[a.ACTIVE=0]="ACTIVE",a[a.PAUSED=1]="PAUSED",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(StreamState||(StreamState={}));function streamStateFromJSON(a){switch(a){case 0:case"ACTIVE":return StreamState.ACTIVE;case 1:case"PAUSED":return StreamState.PAUSED;case-1:case"UNRECOGNIZED":default:return StreamState.UNRECOGNIZED}}function streamStateToJSON(a){switch(a){case StreamState.ACTIVE:return"ACTIVE";case StreamState.PAUSED:return"PAUSED";default:return"UNKNOWN"}}function createBaseSignalRequest(){return{offer:void 0,answer:void 0,trickle:void 0,addTrack:void 0,mute:void 0,subscription:void 0,trackSetting:void 0,leave:void 0,updateLayers:void 0,subscriptionPermission:void 0,syncState:void 0,simulate:void 0}}const SignalRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.offer!==void 0&&SessionDescription.encode(a.offer,s.uint32(10).fork()).ldelim(),a.answer!==void 0&&SessionDescription.encode(a.answer,s.uint32(18).fork()).ldelim(),a.trickle!==void 0&&TrickleRequest.encode(a.trickle,s.uint32(26).fork()).ldelim(),a.addTrack!==void 0&&AddTrackRequest.encode(a.addTrack,s.uint32(34).fork()).ldelim(),a.mute!==void 0&&MuteTrackRequest.encode(a.mute,s.uint32(42).fork()).ldelim(),a.subscription!==void 0&&UpdateSubscription.encode(a.subscription,s.uint32(50).fork()).ldelim(),a.trackSetting!==void 0&&UpdateTrackSettings.encode(a.trackSetting,s.uint32(58).fork()).ldelim(),a.leave!==void 0&&LeaveRequest.encode(a.leave,s.uint32(66).fork()).ldelim(),a.updateLayers!==void 0&&UpdateVideoLayers.encode(a.updateLayers,s.uint32(82).fork()).ldelim(),a.subscriptionPermission!==void 0&&SubscriptionPermission.encode(a.subscriptionPermission,s.uint32(90).fork()).ldelim(),a.syncState!==void 0&&SyncState.encode(a.syncState,s.uint32(98).fork()).ldelim(),a.simulate!==void 0&&SimulateScenario.encode(a.simulate,s.uint32(106).fork()).ldelim(),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSignalRequest();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.offer=SessionDescription.decode(d,d.uint32());break;case 2:h.answer=SessionDescription.decode(d,d.uint32());break;case 3:h.trickle=TrickleRequest.decode(d,d.uint32());break;case 4:h.addTrack=AddTrackRequest.decode(d,d.uint32());break;case 5:h.mute=MuteTrackRequest.decode(d,d.uint32());break;case 6:h.subscription=UpdateSubscription.decode(d,d.uint32());break;case 7:h.trackSetting=UpdateTrackSettings.decode(d,d.uint32());break;case 8:h.leave=LeaveRequest.decode(d,d.uint32());break;case 10:h.updateLayers=UpdateVideoLayers.decode(d,d.uint32());break;case 11:h.subscriptionPermission=SubscriptionPermission.decode(d,d.uint32());break;case 12:h.syncState=SyncState.decode(d,d.uint32());break;case 13:h.simulate=SimulateScenario.decode(d,d.uint32());break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{offer:isSet(a.offer)?SessionDescription.fromJSON(a.offer):void 0,answer:isSet(a.answer)?SessionDescription.fromJSON(a.answer):void 0,trickle:isSet(a.trickle)?TrickleRequest.fromJSON(a.trickle):void 0,addTrack:isSet(a.addTrack)?AddTrackRequest.fromJSON(a.addTrack):void 0,mute:isSet(a.mute)?MuteTrackRequest.fromJSON(a.mute):void 0,subscription:isSet(a.subscription)?UpdateSubscription.fromJSON(a.subscription):void 0,trackSetting:isSet(a.trackSetting)?UpdateTrackSettings.fromJSON(a.trackSetting):void 0,leave:isSet(a.leave)?LeaveRequest.fromJSON(a.leave):void 0,updateLayers:isSet(a.updateLayers)?UpdateVideoLayers.fromJSON(a.updateLayers):void 0,subscriptionPermission:isSet(a.subscriptionPermission)?SubscriptionPermission.fromJSON(a.subscriptionPermission):void 0,syncState:isSet(a.syncState)?SyncState.fromJSON(a.syncState):void 0,simulate:isSet(a.simulate)?SimulateScenario.fromJSON(a.simulate):void 0}},toJSON(a){const s={};return a.offer!==void 0&&(s.offer=a.offer?SessionDescription.toJSON(a.offer):void 0),a.answer!==void 0&&(s.answer=a.answer?SessionDescription.toJSON(a.answer):void 0),a.trickle!==void 0&&(s.trickle=a.trickle?TrickleRequest.toJSON(a.trickle):void 0),a.addTrack!==void 0&&(s.addTrack=a.addTrack?AddTrackRequest.toJSON(a.addTrack):void 0),a.mute!==void 0&&(s.mute=a.mute?MuteTrackRequest.toJSON(a.mute):void 0),a.subscription!==void 0&&(s.subscription=a.subscription?UpdateSubscription.toJSON(a.subscription):void 0),a.trackSetting!==void 0&&(s.trackSetting=a.trackSetting?UpdateTrackSettings.toJSON(a.trackSetting):void 0),a.leave!==void 0&&(s.leave=a.leave?LeaveRequest.toJSON(a.leave):void 0),a.updateLayers!==void 0&&(s.updateLayers=a.updateLayers?UpdateVideoLayers.toJSON(a.updateLayers):void 0),a.subscriptionPermission!==void 0&&(s.subscriptionPermission=a.subscriptionPermission?SubscriptionPermission.toJSON(a.subscriptionPermission):void 0),a.syncState!==void 0&&(s.syncState=a.syncState?SyncState.toJSON(a.syncState):void 0),a.simulate!==void 0&&(s.simulate=a.simulate?SimulateScenario.toJSON(a.simulate):void 0),s},fromPartial(a){const s=createBaseSignalRequest();return s.offer=a.offer!==void 0&&a.offer!==null?SessionDescription.fromPartial(a.offer):void 0,s.answer=a.answer!==void 0&&a.answer!==null?SessionDescription.fromPartial(a.answer):void 0,s.trickle=a.trickle!==void 0&&a.trickle!==null?TrickleRequest.fromPartial(a.trickle):void 0,s.addTrack=a.addTrack!==void 0&&a.addTrack!==null?AddTrackRequest.fromPartial(a.addTrack):void 0,s.mute=a.mute!==void 0&&a.mute!==null?MuteTrackRequest.fromPartial(a.mute):void 0,s.subscription=a.subscription!==void 0&&a.subscription!==null?UpdateSubscription.fromPartial(a.subscription):void 0,s.trackSetting=a.trackSetting!==void 0&&a.trackSetting!==null?UpdateTrackSettings.fromPartial(a.trackSetting):void 0,s.leave=a.leave!==void 0&&a.leave!==null?LeaveRequest.fromPartial(a.leave):void 0,s.updateLayers=a.updateLayers!==void 0&&a.updateLayers!==null?UpdateVideoLayers.fromPartial(a.updateLayers):void 0,s.subscriptionPermission=a.subscriptionPermission!==void 0&&a.subscriptionPermission!==null?SubscriptionPermission.fromPartial(a.subscriptionPermission):void 0,s.syncState=a.syncState!==void 0&&a.syncState!==null?SyncState.fromPartial(a.syncState):void 0,s.simulate=a.simulate!==void 0&&a.simulate!==null?SimulateScenario.fromPartial(a.simulate):void 0,s}};function createBaseSignalResponse(){return{join:void 0,answer:void 0,offer:void 0,trickle:void 0,update:void 0,trackPublished:void 0,leave:void 0,mute:void 0,speakersChanged:void 0,roomUpdate:void 0,connectionQuality:void 0,streamStateUpdate:void 0,subscribedQualityUpdate:void 0,subscriptionPermissionUpdate:void 0,refreshToken:void 0,trackUnpublished:void 0}}const SignalResponse={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.join!==void 0&&JoinResponse.encode(a.join,s.uint32(10).fork()).ldelim(),a.answer!==void 0&&SessionDescription.encode(a.answer,s.uint32(18).fork()).ldelim(),a.offer!==void 0&&SessionDescription.encode(a.offer,s.uint32(26).fork()).ldelim(),a.trickle!==void 0&&TrickleRequest.encode(a.trickle,s.uint32(34).fork()).ldelim(),a.update!==void 0&&ParticipantUpdate.encode(a.update,s.uint32(42).fork()).ldelim(),a.trackPublished!==void 0&&TrackPublishedResponse.encode(a.trackPublished,s.uint32(50).fork()).ldelim(),a.leave!==void 0&&LeaveRequest.encode(a.leave,s.uint32(66).fork()).ldelim(),a.mute!==void 0&&MuteTrackRequest.encode(a.mute,s.uint32(74).fork()).ldelim(),a.speakersChanged!==void 0&&SpeakersChanged.encode(a.speakersChanged,s.uint32(82).fork()).ldelim(),a.roomUpdate!==void 0&&RoomUpdate.encode(a.roomUpdate,s.uint32(90).fork()).ldelim(),a.connectionQuality!==void 0&&ConnectionQualityUpdate.encode(a.connectionQuality,s.uint32(98).fork()).ldelim(),a.streamStateUpdate!==void 0&&StreamStateUpdate.encode(a.streamStateUpdate,s.uint32(106).fork()).ldelim(),a.subscribedQualityUpdate!==void 0&&SubscribedQualityUpdate.encode(a.subscribedQualityUpdate,s.uint32(114).fork()).ldelim(),a.subscriptionPermissionUpdate!==void 0&&SubscriptionPermissionUpdate.encode(a.subscriptionPermissionUpdate,s.uint32(122).fork()).ldelim(),a.refreshToken!==void 0&&s.uint32(130).string(a.refreshToken),a.trackUnpublished!==void 0&&TrackUnpublishedResponse.encode(a.trackUnpublished,s.uint32(138).fork()).ldelim(),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSignalResponse();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.join=JoinResponse.decode(d,d.uint32());break;case 2:h.answer=SessionDescription.decode(d,d.uint32());break;case 3:h.offer=SessionDescription.decode(d,d.uint32());break;case 4:h.trickle=TrickleRequest.decode(d,d.uint32());break;case 5:h.update=ParticipantUpdate.decode(d,d.uint32());break;case 6:h.trackPublished=TrackPublishedResponse.decode(d,d.uint32());break;case 8:h.leave=LeaveRequest.decode(d,d.uint32());break;case 9:h.mute=MuteTrackRequest.decode(d,d.uint32());break;case 10:h.speakersChanged=SpeakersChanged.decode(d,d.uint32());break;case 11:h.roomUpdate=RoomUpdate.decode(d,d.uint32());break;case 12:h.connectionQuality=ConnectionQualityUpdate.decode(d,d.uint32());break;case 13:h.streamStateUpdate=StreamStateUpdate.decode(d,d.uint32());break;case 14:h.subscribedQualityUpdate=SubscribedQualityUpdate.decode(d,d.uint32());break;case 15:h.subscriptionPermissionUpdate=SubscriptionPermissionUpdate.decode(d,d.uint32());break;case 16:h.refreshToken=d.string();break;case 17:h.trackUnpublished=TrackUnpublishedResponse.decode(d,d.uint32());break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{join:isSet(a.join)?JoinResponse.fromJSON(a.join):void 0,answer:isSet(a.answer)?SessionDescription.fromJSON(a.answer):void 0,offer:isSet(a.offer)?SessionDescription.fromJSON(a.offer):void 0,trickle:isSet(a.trickle)?TrickleRequest.fromJSON(a.trickle):void 0,update:isSet(a.update)?ParticipantUpdate.fromJSON(a.update):void 0,trackPublished:isSet(a.trackPublished)?TrackPublishedResponse.fromJSON(a.trackPublished):void 0,leave:isSet(a.leave)?LeaveRequest.fromJSON(a.leave):void 0,mute:isSet(a.mute)?MuteTrackRequest.fromJSON(a.mute):void 0,speakersChanged:isSet(a.speakersChanged)?SpeakersChanged.fromJSON(a.speakersChanged):void 0,roomUpdate:isSet(a.roomUpdate)?RoomUpdate.fromJSON(a.roomUpdate):void 0,connectionQuality:isSet(a.connectionQuality)?ConnectionQualityUpdate.fromJSON(a.connectionQuality):void 0,streamStateUpdate:isSet(a.streamStateUpdate)?StreamStateUpdate.fromJSON(a.streamStateUpdate):void 0,subscribedQualityUpdate:isSet(a.subscribedQualityUpdate)?SubscribedQualityUpdate.fromJSON(a.subscribedQualityUpdate):void 0,subscriptionPermissionUpdate:isSet(a.subscriptionPermissionUpdate)?SubscriptionPermissionUpdate.fromJSON(a.subscriptionPermissionUpdate):void 0,refreshToken:isSet(a.refreshToken)?String(a.refreshToken):void 0,trackUnpublished:isSet(a.trackUnpublished)?TrackUnpublishedResponse.fromJSON(a.trackUnpublished):void 0}},toJSON(a){const s={};return a.join!==void 0&&(s.join=a.join?JoinResponse.toJSON(a.join):void 0),a.answer!==void 0&&(s.answer=a.answer?SessionDescription.toJSON(a.answer):void 0),a.offer!==void 0&&(s.offer=a.offer?SessionDescription.toJSON(a.offer):void 0),a.trickle!==void 0&&(s.trickle=a.trickle?TrickleRequest.toJSON(a.trickle):void 0),a.update!==void 0&&(s.update=a.update?ParticipantUpdate.toJSON(a.update):void 0),a.trackPublished!==void 0&&(s.trackPublished=a.trackPublished?TrackPublishedResponse.toJSON(a.trackPublished):void 0),a.leave!==void 0&&(s.leave=a.leave?LeaveRequest.toJSON(a.leave):void 0),a.mute!==void 0&&(s.mute=a.mute?MuteTrackRequest.toJSON(a.mute):void 0),a.speakersChanged!==void 0&&(s.speakersChanged=a.speakersChanged?SpeakersChanged.toJSON(a.speakersChanged):void 0),a.roomUpdate!==void 0&&(s.roomUpdate=a.roomUpdate?RoomUpdate.toJSON(a.roomUpdate):void 0),a.connectionQuality!==void 0&&(s.connectionQuality=a.connectionQuality?ConnectionQualityUpdate.toJSON(a.connectionQuality):void 0),a.streamStateUpdate!==void 0&&(s.streamStateUpdate=a.streamStateUpdate?StreamStateUpdate.toJSON(a.streamStateUpdate):void 0),a.subscribedQualityUpdate!==void 0&&(s.subscribedQualityUpdate=a.subscribedQualityUpdate?SubscribedQualityUpdate.toJSON(a.subscribedQualityUpdate):void 0),a.subscriptionPermissionUpdate!==void 0&&(s.subscriptionPermissionUpdate=a.subscriptionPermissionUpdate?SubscriptionPermissionUpdate.toJSON(a.subscriptionPermissionUpdate):void 0),a.refreshToken!==void 0&&(s.refreshToken=a.refreshToken),a.trackUnpublished!==void 0&&(s.trackUnpublished=a.trackUnpublished?TrackUnpublishedResponse.toJSON(a.trackUnpublished):void 0),s},fromPartial(a){var s;const d=createBaseSignalResponse();return d.join=a.join!==void 0&&a.join!==null?JoinResponse.fromPartial(a.join):void 0,d.answer=a.answer!==void 0&&a.answer!==null?SessionDescription.fromPartial(a.answer):void 0,d.offer=a.offer!==void 0&&a.offer!==null?SessionDescription.fromPartial(a.offer):void 0,d.trickle=a.trickle!==void 0&&a.trickle!==null?TrickleRequest.fromPartial(a.trickle):void 0,d.update=a.update!==void 0&&a.update!==null?ParticipantUpdate.fromPartial(a.update):void 0,d.trackPublished=a.trackPublished!==void 0&&a.trackPublished!==null?TrackPublishedResponse.fromPartial(a.trackPublished):void 0,d.leave=a.leave!==void 0&&a.leave!==null?LeaveRequest.fromPartial(a.leave):void 0,d.mute=a.mute!==void 0&&a.mute!==null?MuteTrackRequest.fromPartial(a.mute):void 0,d.speakersChanged=a.speakersChanged!==void 0&&a.speakersChanged!==null?SpeakersChanged.fromPartial(a.speakersChanged):void 0,d.roomUpdate=a.roomUpdate!==void 0&&a.roomUpdate!==null?RoomUpdate.fromPartial(a.roomUpdate):void 0,d.connectionQuality=a.connectionQuality!==void 0&&a.connectionQuality!==null?ConnectionQualityUpdate.fromPartial(a.connectionQuality):void 0,d.streamStateUpdate=a.streamStateUpdate!==void 0&&a.streamStateUpdate!==null?StreamStateUpdate.fromPartial(a.streamStateUpdate):void 0,d.subscribedQualityUpdate=a.subscribedQualityUpdate!==void 0&&a.subscribedQualityUpdate!==null?SubscribedQualityUpdate.fromPartial(a.subscribedQualityUpdate):void 0,d.subscriptionPermissionUpdate=a.subscriptionPermissionUpdate!==void 0&&a.subscriptionPermissionUpdate!==null?SubscriptionPermissionUpdate.fromPartial(a.subscriptionPermissionUpdate):void 0,d.refreshToken=(s=a.refreshToken)!==null&&s!==void 0?s:void 0,d.trackUnpublished=a.trackUnpublished!==void 0&&a.trackUnpublished!==null?TrackUnpublishedResponse.fromPartial(a.trackUnpublished):void 0,d}};function createBaseAddTrackRequest(){return{cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[]}}const AddTrackRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.cid!==""&&s.uint32(10).string(a.cid),a.name!==""&&s.uint32(18).string(a.name),a.type!==0&&s.uint32(24).int32(a.type),a.width!==0&&s.uint32(32).uint32(a.width),a.height!==0&&s.uint32(40).uint32(a.height),a.muted===!0&&s.uint32(48).bool(a.muted),a.disableDtx===!0&&s.uint32(56).bool(a.disableDtx),a.source!==0&&s.uint32(64).int32(a.source);for(const d of a.layers)VideoLayer.encode(d,s.uint32(74).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseAddTrackRequest();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.cid=d.string();break;case 2:h.name=d.string();break;case 3:h.type=d.int32();break;case 4:h.width=d.uint32();break;case 5:h.height=d.uint32();break;case 6:h.muted=d.bool();break;case 7:h.disableDtx=d.bool();break;case 8:h.source=d.int32();break;case 9:h.layers.push(VideoLayer.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{cid:isSet(a.cid)?String(a.cid):"",name:isSet(a.name)?String(a.name):"",type:isSet(a.type)?trackTypeFromJSON(a.type):0,width:isSet(a.width)?Number(a.width):0,height:isSet(a.height)?Number(a.height):0,muted:isSet(a.muted)?Boolean(a.muted):!1,disableDtx:isSet(a.disableDtx)?Boolean(a.disableDtx):!1,source:isSet(a.source)?trackSourceFromJSON(a.source):0,layers:Array.isArray(a==null?void 0:a.layers)?a.layers.map(s=>VideoLayer.fromJSON(s)):[]}},toJSON(a){const s={};return a.cid!==void 0&&(s.cid=a.cid),a.name!==void 0&&(s.name=a.name),a.type!==void 0&&(s.type=trackTypeToJSON(a.type)),a.width!==void 0&&(s.width=Math.round(a.width)),a.height!==void 0&&(s.height=Math.round(a.height)),a.muted!==void 0&&(s.muted=a.muted),a.disableDtx!==void 0&&(s.disableDtx=a.disableDtx),a.source!==void 0&&(s.source=trackSourceToJSON(a.source)),a.layers?s.layers=a.layers.map(d=>d?VideoLayer.toJSON(d):void 0):s.layers=[],s},fromPartial(a){var s,d,c,h,v,y,b,_,T;const I=createBaseAddTrackRequest();return I.cid=(s=a.cid)!==null&&s!==void 0?s:"",I.name=(d=a.name)!==null&&d!==void 0?d:"",I.type=(c=a.type)!==null&&c!==void 0?c:0,I.width=(h=a.width)!==null&&h!==void 0?h:0,I.height=(v=a.height)!==null&&v!==void 0?v:0,I.muted=(y=a.muted)!==null&&y!==void 0?y:!1,I.disableDtx=(b=a.disableDtx)!==null&&b!==void 0?b:!1,I.source=(_=a.source)!==null&&_!==void 0?_:0,I.layers=((T=a.layers)===null||T===void 0?void 0:T.map(N=>VideoLayer.fromPartial(N)))||[],I}};function createBaseTrickleRequest(){return{candidateInit:"",target:0}}const TrickleRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.candidateInit!==""&&s.uint32(10).string(a.candidateInit),a.target!==0&&s.uint32(16).int32(a.target),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrickleRequest();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.candidateInit=d.string();break;case 2:h.target=d.int32();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{candidateInit:isSet(a.candidateInit)?String(a.candidateInit):"",target:isSet(a.target)?signalTargetFromJSON(a.target):0}},toJSON(a){const s={};return a.candidateInit!==void 0&&(s.candidateInit=a.candidateInit),a.target!==void 0&&(s.target=signalTargetToJSON(a.target)),s},fromPartial(a){var s,d;const c=createBaseTrickleRequest();return c.candidateInit=(s=a.candidateInit)!==null&&s!==void 0?s:"",c.target=(d=a.target)!==null&&d!==void 0?d:0,c}};function createBaseMuteTrackRequest(){return{sid:"",muted:!1}}const MuteTrackRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.sid!==""&&s.uint32(10).string(a.sid),a.muted===!0&&s.uint32(16).bool(a.muted),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseMuteTrackRequest();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.sid=d.string();break;case 2:h.muted=d.bool();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{sid:isSet(a.sid)?String(a.sid):"",muted:isSet(a.muted)?Boolean(a.muted):!1}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.muted!==void 0&&(s.muted=a.muted),s},fromPartial(a){var s,d;const c=createBaseMuteTrackRequest();return c.sid=(s=a.sid)!==null&&s!==void 0?s:"",c.muted=(d=a.muted)!==null&&d!==void 0?d:!1,c}};function createBaseJoinResponse(){return{room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:""}}const JoinResponse={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.room!==void 0&&Room$1.encode(a.room,s.uint32(10).fork()).ldelim(),a.participant!==void 0&&ParticipantInfo.encode(a.participant,s.uint32(18).fork()).ldelim();for(const d of a.otherParticipants)ParticipantInfo.encode(d,s.uint32(26).fork()).ldelim();a.serverVersion!==""&&s.uint32(34).string(a.serverVersion);for(const d of a.iceServers)ICEServer.encode(d,s.uint32(42).fork()).ldelim();return a.subscriberPrimary===!0&&s.uint32(48).bool(a.subscriberPrimary),a.alternativeUrl!==""&&s.uint32(58).string(a.alternativeUrl),a.clientConfiguration!==void 0&&ClientConfiguration.encode(a.clientConfiguration,s.uint32(66).fork()).ldelim(),a.serverRegion!==""&&s.uint32(74).string(a.serverRegion),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseJoinResponse();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.room=Room$1.decode(d,d.uint32());break;case 2:h.participant=ParticipantInfo.decode(d,d.uint32());break;case 3:h.otherParticipants.push(ParticipantInfo.decode(d,d.uint32()));break;case 4:h.serverVersion=d.string();break;case 5:h.iceServers.push(ICEServer.decode(d,d.uint32()));break;case 6:h.subscriberPrimary=d.bool();break;case 7:h.alternativeUrl=d.string();break;case 8:h.clientConfiguration=ClientConfiguration.decode(d,d.uint32());break;case 9:h.serverRegion=d.string();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{room:isSet(a.room)?Room$1.fromJSON(a.room):void 0,participant:isSet(a.participant)?ParticipantInfo.fromJSON(a.participant):void 0,otherParticipants:Array.isArray(a==null?void 0:a.otherParticipants)?a.otherParticipants.map(s=>ParticipantInfo.fromJSON(s)):[],serverVersion:isSet(a.serverVersion)?String(a.serverVersion):"",iceServers:Array.isArray(a==null?void 0:a.iceServers)?a.iceServers.map(s=>ICEServer.fromJSON(s)):[],subscriberPrimary:isSet(a.subscriberPrimary)?Boolean(a.subscriberPrimary):!1,alternativeUrl:isSet(a.alternativeUrl)?String(a.alternativeUrl):"",clientConfiguration:isSet(a.clientConfiguration)?ClientConfiguration.fromJSON(a.clientConfiguration):void 0,serverRegion:isSet(a.serverRegion)?String(a.serverRegion):""}},toJSON(a){const s={};return a.room!==void 0&&(s.room=a.room?Room$1.toJSON(a.room):void 0),a.participant!==void 0&&(s.participant=a.participant?ParticipantInfo.toJSON(a.participant):void 0),a.otherParticipants?s.otherParticipants=a.otherParticipants.map(d=>d?ParticipantInfo.toJSON(d):void 0):s.otherParticipants=[],a.serverVersion!==void 0&&(s.serverVersion=a.serverVersion),a.iceServers?s.iceServers=a.iceServers.map(d=>d?ICEServer.toJSON(d):void 0):s.iceServers=[],a.subscriberPrimary!==void 0&&(s.subscriberPrimary=a.subscriberPrimary),a.alternativeUrl!==void 0&&(s.alternativeUrl=a.alternativeUrl),a.clientConfiguration!==void 0&&(s.clientConfiguration=a.clientConfiguration?ClientConfiguration.toJSON(a.clientConfiguration):void 0),a.serverRegion!==void 0&&(s.serverRegion=a.serverRegion),s},fromPartial(a){var s,d,c,h,v,y;const b=createBaseJoinResponse();return b.room=a.room!==void 0&&a.room!==null?Room$1.fromPartial(a.room):void 0,b.participant=a.participant!==void 0&&a.participant!==null?ParticipantInfo.fromPartial(a.participant):void 0,b.otherParticipants=((s=a.otherParticipants)===null||s===void 0?void 0:s.map(_=>ParticipantInfo.fromPartial(_)))||[],b.serverVersion=(d=a.serverVersion)!==null&&d!==void 0?d:"",b.iceServers=((c=a.iceServers)===null||c===void 0?void 0:c.map(_=>ICEServer.fromPartial(_)))||[],b.subscriberPrimary=(h=a.subscriberPrimary)!==null&&h!==void 0?h:!1,b.alternativeUrl=(v=a.alternativeUrl)!==null&&v!==void 0?v:"",b.clientConfiguration=a.clientConfiguration!==void 0&&a.clientConfiguration!==null?ClientConfiguration.fromPartial(a.clientConfiguration):void 0,b.serverRegion=(y=a.serverRegion)!==null&&y!==void 0?y:"",b}};function createBaseTrackPublishedResponse(){return{cid:"",track:void 0}}const TrackPublishedResponse={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.cid!==""&&s.uint32(10).string(a.cid),a.track!==void 0&&TrackInfo.encode(a.track,s.uint32(18).fork()).ldelim(),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrackPublishedResponse();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.cid=d.string();break;case 2:h.track=TrackInfo.decode(d,d.uint32());break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{cid:isSet(a.cid)?String(a.cid):"",track:isSet(a.track)?TrackInfo.fromJSON(a.track):void 0}},toJSON(a){const s={};return a.cid!==void 0&&(s.cid=a.cid),a.track!==void 0&&(s.track=a.track?TrackInfo.toJSON(a.track):void 0),s},fromPartial(a){var s;const d=createBaseTrackPublishedResponse();return d.cid=(s=a.cid)!==null&&s!==void 0?s:"",d.track=a.track!==void 0&&a.track!==null?TrackInfo.fromPartial(a.track):void 0,d}};function createBaseTrackUnpublishedResponse(){return{trackSid:""}}const TrackUnpublishedResponse={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.trackSid!==""&&s.uint32(10).string(a.trackSid),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrackUnpublishedResponse();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.trackSid=d.string();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{trackSid:isSet(a.trackSid)?String(a.trackSid):""}},toJSON(a){const s={};return a.trackSid!==void 0&&(s.trackSid=a.trackSid),s},fromPartial(a){var s;const d=createBaseTrackUnpublishedResponse();return d.trackSid=(s=a.trackSid)!==null&&s!==void 0?s:"",d}};function createBaseSessionDescription(){return{type:"",sdp:""}}const SessionDescription={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.type!==""&&s.uint32(10).string(a.type),a.sdp!==""&&s.uint32(18).string(a.sdp),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSessionDescription();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.type=d.string();break;case 2:h.sdp=d.string();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{type:isSet(a.type)?String(a.type):"",sdp:isSet(a.sdp)?String(a.sdp):""}},toJSON(a){const s={};return a.type!==void 0&&(s.type=a.type),a.sdp!==void 0&&(s.sdp=a.sdp),s},fromPartial(a){var s,d;const c=createBaseSessionDescription();return c.type=(s=a.type)!==null&&s!==void 0?s:"",c.sdp=(d=a.sdp)!==null&&d!==void 0?d:"",c}};function createBaseParticipantUpdate(){return{participants:[]}}const ParticipantUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();for(const d of a.participants)ParticipantInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseParticipantUpdate();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.participants.push(ParticipantInfo.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{participants:Array.isArray(a==null?void 0:a.participants)?a.participants.map(s=>ParticipantInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.participants?s.participants=a.participants.map(d=>d?ParticipantInfo.toJSON(d):void 0):s.participants=[],s},fromPartial(a){var s;const d=createBaseParticipantUpdate();return d.participants=((s=a.participants)===null||s===void 0?void 0:s.map(c=>ParticipantInfo.fromPartial(c)))||[],d}};function createBaseUpdateSubscription(){return{trackSids:[],subscribe:!1,participantTracks:[]}}const UpdateSubscription={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();for(const d of a.trackSids)s.uint32(10).string(d);a.subscribe===!0&&s.uint32(16).bool(a.subscribe);for(const d of a.participantTracks)ParticipantTracks.encode(d,s.uint32(26).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseUpdateSubscription();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.trackSids.push(d.string());break;case 2:h.subscribe=d.bool();break;case 3:h.participantTracks.push(ParticipantTracks.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{trackSids:Array.isArray(a==null?void 0:a.trackSids)?a.trackSids.map(s=>String(s)):[],subscribe:isSet(a.subscribe)?Boolean(a.subscribe):!1,participantTracks:Array.isArray(a==null?void 0:a.participantTracks)?a.participantTracks.map(s=>ParticipantTracks.fromJSON(s)):[]}},toJSON(a){const s={};return a.trackSids?s.trackSids=a.trackSids.map(d=>d):s.trackSids=[],a.subscribe!==void 0&&(s.subscribe=a.subscribe),a.participantTracks?s.participantTracks=a.participantTracks.map(d=>d?ParticipantTracks.toJSON(d):void 0):s.participantTracks=[],s},fromPartial(a){var s,d,c;const h=createBaseUpdateSubscription();return h.trackSids=((s=a.trackSids)===null||s===void 0?void 0:s.map(v=>v))||[],h.subscribe=(d=a.subscribe)!==null&&d!==void 0?d:!1,h.participantTracks=((c=a.participantTracks)===null||c===void 0?void 0:c.map(v=>ParticipantTracks.fromPartial(v)))||[],h}};function createBaseUpdateTrackSettings(){return{trackSids:[],disabled:!1,quality:0,width:0,height:0}}const UpdateTrackSettings={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();for(const d of a.trackSids)s.uint32(10).string(d);return a.disabled===!0&&s.uint32(24).bool(a.disabled),a.quality!==0&&s.uint32(32).int32(a.quality),a.width!==0&&s.uint32(40).uint32(a.width),a.height!==0&&s.uint32(48).uint32(a.height),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseUpdateTrackSettings();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.trackSids.push(d.string());break;case 3:h.disabled=d.bool();break;case 4:h.quality=d.int32();break;case 5:h.width=d.uint32();break;case 6:h.height=d.uint32();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{trackSids:Array.isArray(a==null?void 0:a.trackSids)?a.trackSids.map(s=>String(s)):[],disabled:isSet(a.disabled)?Boolean(a.disabled):!1,quality:isSet(a.quality)?videoQualityFromJSON(a.quality):0,width:isSet(a.width)?Number(a.width):0,height:isSet(a.height)?Number(a.height):0}},toJSON(a){const s={};return a.trackSids?s.trackSids=a.trackSids.map(d=>d):s.trackSids=[],a.disabled!==void 0&&(s.disabled=a.disabled),a.quality!==void 0&&(s.quality=videoQualityToJSON(a.quality)),a.width!==void 0&&(s.width=Math.round(a.width)),a.height!==void 0&&(s.height=Math.round(a.height)),s},fromPartial(a){var s,d,c,h,v;const y=createBaseUpdateTrackSettings();return y.trackSids=((s=a.trackSids)===null||s===void 0?void 0:s.map(b=>b))||[],y.disabled=(d=a.disabled)!==null&&d!==void 0?d:!1,y.quality=(c=a.quality)!==null&&c!==void 0?c:0,y.width=(h=a.width)!==null&&h!==void 0?h:0,y.height=(v=a.height)!==null&&v!==void 0?v:0,y}};function createBaseLeaveRequest(){return{canReconnect:!1}}const LeaveRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.canReconnect===!0&&s.uint32(8).bool(a.canReconnect),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseLeaveRequest();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.canReconnect=d.bool();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{canReconnect:isSet(a.canReconnect)?Boolean(a.canReconnect):!1}},toJSON(a){const s={};return a.canReconnect!==void 0&&(s.canReconnect=a.canReconnect),s},fromPartial(a){var s;const d=createBaseLeaveRequest();return d.canReconnect=(s=a.canReconnect)!==null&&s!==void 0?s:!1,d}};function createBaseUpdateVideoLayers(){return{trackSid:"",layers:[]}}const UpdateVideoLayers={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.trackSid!==""&&s.uint32(10).string(a.trackSid);for(const d of a.layers)VideoLayer.encode(d,s.uint32(18).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseUpdateVideoLayers();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.trackSid=d.string();break;case 2:h.layers.push(VideoLayer.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{trackSid:isSet(a.trackSid)?String(a.trackSid):"",layers:Array.isArray(a==null?void 0:a.layers)?a.layers.map(s=>VideoLayer.fromJSON(s)):[]}},toJSON(a){const s={};return a.trackSid!==void 0&&(s.trackSid=a.trackSid),a.layers?s.layers=a.layers.map(d=>d?VideoLayer.toJSON(d):void 0):s.layers=[],s},fromPartial(a){var s,d;const c=createBaseUpdateVideoLayers();return c.trackSid=(s=a.trackSid)!==null&&s!==void 0?s:"",c.layers=((d=a.layers)===null||d===void 0?void 0:d.map(h=>VideoLayer.fromPartial(h)))||[],c}};function createBaseICEServer(){return{urls:[],username:"",credential:""}}const ICEServer={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();for(const d of a.urls)s.uint32(10).string(d);return a.username!==""&&s.uint32(18).string(a.username),a.credential!==""&&s.uint32(26).string(a.credential),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseICEServer();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.urls.push(d.string());break;case 2:h.username=d.string();break;case 3:h.credential=d.string();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{urls:Array.isArray(a==null?void 0:a.urls)?a.urls.map(s=>String(s)):[],username:isSet(a.username)?String(a.username):"",credential:isSet(a.credential)?String(a.credential):""}},toJSON(a){const s={};return a.urls?s.urls=a.urls.map(d=>d):s.urls=[],a.username!==void 0&&(s.username=a.username),a.credential!==void 0&&(s.credential=a.credential),s},fromPartial(a){var s,d,c;const h=createBaseICEServer();return h.urls=((s=a.urls)===null||s===void 0?void 0:s.map(v=>v))||[],h.username=(d=a.username)!==null&&d!==void 0?d:"",h.credential=(c=a.credential)!==null&&c!==void 0?c:"",h}};function createBaseSpeakersChanged(){return{speakers:[]}}const SpeakersChanged={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();for(const d of a.speakers)SpeakerInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSpeakersChanged();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.speakers.push(SpeakerInfo.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{speakers:Array.isArray(a==null?void 0:a.speakers)?a.speakers.map(s=>SpeakerInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.speakers?s.speakers=a.speakers.map(d=>d?SpeakerInfo.toJSON(d):void 0):s.speakers=[],s},fromPartial(a){var s;const d=createBaseSpeakersChanged();return d.speakers=((s=a.speakers)===null||s===void 0?void 0:s.map(c=>SpeakerInfo.fromPartial(c)))||[],d}};function createBaseRoomUpdate(){return{room:void 0}}const RoomUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.room!==void 0&&Room$1.encode(a.room,s.uint32(10).fork()).ldelim(),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseRoomUpdate();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.room=Room$1.decode(d,d.uint32());break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{room:isSet(a.room)?Room$1.fromJSON(a.room):void 0}},toJSON(a){const s={};return a.room!==void 0&&(s.room=a.room?Room$1.toJSON(a.room):void 0),s},fromPartial(a){const s=createBaseRoomUpdate();return s.room=a.room!==void 0&&a.room!==null?Room$1.fromPartial(a.room):void 0,s}};function createBaseConnectionQualityInfo(){return{participantSid:"",quality:0,score:0}}const ConnectionQualityInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.quality!==0&&s.uint32(16).int32(a.quality),a.score!==0&&s.uint32(29).float(a.score),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseConnectionQualityInfo();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.participantSid=d.string();break;case 2:h.quality=d.int32();break;case 3:h.score=d.float();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{participantSid:isSet(a.participantSid)?String(a.participantSid):"",quality:isSet(a.quality)?connectionQualityFromJSON(a.quality):0,score:isSet(a.score)?Number(a.score):0}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.quality!==void 0&&(s.quality=connectionQualityToJSON(a.quality)),a.score!==void 0&&(s.score=a.score),s},fromPartial(a){var s,d,c;const h=createBaseConnectionQualityInfo();return h.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",h.quality=(d=a.quality)!==null&&d!==void 0?d:0,h.score=(c=a.score)!==null&&c!==void 0?c:0,h}};function createBaseConnectionQualityUpdate(){return{updates:[]}}const ConnectionQualityUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();for(const d of a.updates)ConnectionQualityInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseConnectionQualityUpdate();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.updates.push(ConnectionQualityInfo.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{updates:Array.isArray(a==null?void 0:a.updates)?a.updates.map(s=>ConnectionQualityInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.updates?s.updates=a.updates.map(d=>d?ConnectionQualityInfo.toJSON(d):void 0):s.updates=[],s},fromPartial(a){var s;const d=createBaseConnectionQualityUpdate();return d.updates=((s=a.updates)===null||s===void 0?void 0:s.map(c=>ConnectionQualityInfo.fromPartial(c)))||[],d}};function createBaseStreamStateInfo(){return{participantSid:"",trackSid:"",state:0}}const StreamStateInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.trackSid!==""&&s.uint32(18).string(a.trackSid),a.state!==0&&s.uint32(24).int32(a.state),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseStreamStateInfo();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.participantSid=d.string();break;case 2:h.trackSid=d.string();break;case 3:h.state=d.int32();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{participantSid:isSet(a.participantSid)?String(a.participantSid):"",trackSid:isSet(a.trackSid)?String(a.trackSid):"",state:isSet(a.state)?streamStateFromJSON(a.state):0}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.trackSid!==void 0&&(s.trackSid=a.trackSid),a.state!==void 0&&(s.state=streamStateToJSON(a.state)),s},fromPartial(a){var s,d,c;const h=createBaseStreamStateInfo();return h.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",h.trackSid=(d=a.trackSid)!==null&&d!==void 0?d:"",h.state=(c=a.state)!==null&&c!==void 0?c:0,h}};function createBaseStreamStateUpdate(){return{streamStates:[]}}const StreamStateUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();for(const d of a.streamStates)StreamStateInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseStreamStateUpdate();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.streamStates.push(StreamStateInfo.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{streamStates:Array.isArray(a==null?void 0:a.streamStates)?a.streamStates.map(s=>StreamStateInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.streamStates?s.streamStates=a.streamStates.map(d=>d?StreamStateInfo.toJSON(d):void 0):s.streamStates=[],s},fromPartial(a){var s;const d=createBaseStreamStateUpdate();return d.streamStates=((s=a.streamStates)===null||s===void 0?void 0:s.map(c=>StreamStateInfo.fromPartial(c)))||[],d}};function createBaseSubscribedQuality(){return{quality:0,enabled:!1}}const SubscribedQuality={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.quality!==0&&s.uint32(8).int32(a.quality),a.enabled===!0&&s.uint32(16).bool(a.enabled),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSubscribedQuality();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.quality=d.int32();break;case 2:h.enabled=d.bool();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{quality:isSet(a.quality)?videoQualityFromJSON(a.quality):0,enabled:isSet(a.enabled)?Boolean(a.enabled):!1}},toJSON(a){const s={};return a.quality!==void 0&&(s.quality=videoQualityToJSON(a.quality)),a.enabled!==void 0&&(s.enabled=a.enabled),s},fromPartial(a){var s,d;const c=createBaseSubscribedQuality();return c.quality=(s=a.quality)!==null&&s!==void 0?s:0,c.enabled=(d=a.enabled)!==null&&d!==void 0?d:!1,c}};function createBaseSubscribedQualityUpdate(){return{trackSid:"",subscribedQualities:[]}}const SubscribedQualityUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.trackSid!==""&&s.uint32(10).string(a.trackSid);for(const d of a.subscribedQualities)SubscribedQuality.encode(d,s.uint32(18).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSubscribedQualityUpdate();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.trackSid=d.string();break;case 2:h.subscribedQualities.push(SubscribedQuality.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{trackSid:isSet(a.trackSid)?String(a.trackSid):"",subscribedQualities:Array.isArray(a==null?void 0:a.subscribedQualities)?a.subscribedQualities.map(s=>SubscribedQuality.fromJSON(s)):[]}},toJSON(a){const s={};return a.trackSid!==void 0&&(s.trackSid=a.trackSid),a.subscribedQualities?s.subscribedQualities=a.subscribedQualities.map(d=>d?SubscribedQuality.toJSON(d):void 0):s.subscribedQualities=[],s},fromPartial(a){var s,d;const c=createBaseSubscribedQualityUpdate();return c.trackSid=(s=a.trackSid)!==null&&s!==void 0?s:"",c.subscribedQualities=((d=a.subscribedQualities)===null||d===void 0?void 0:d.map(h=>SubscribedQuality.fromPartial(h)))||[],c}};function createBaseTrackPermission(){return{participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""}}const TrackPermission={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.allTracks===!0&&s.uint32(16).bool(a.allTracks);for(const d of a.trackSids)s.uint32(26).string(d);return a.participantIdentity!==""&&s.uint32(34).string(a.participantIdentity),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrackPermission();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.participantSid=d.string();break;case 2:h.allTracks=d.bool();break;case 3:h.trackSids.push(d.string());break;case 4:h.participantIdentity=d.string();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{participantSid:isSet(a.participantSid)?String(a.participantSid):"",allTracks:isSet(a.allTracks)?Boolean(a.allTracks):!1,trackSids:Array.isArray(a==null?void 0:a.trackSids)?a.trackSids.map(s=>String(s)):[],participantIdentity:isSet(a.participantIdentity)?String(a.participantIdentity):""}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.allTracks!==void 0&&(s.allTracks=a.allTracks),a.trackSids?s.trackSids=a.trackSids.map(d=>d):s.trackSids=[],a.participantIdentity!==void 0&&(s.participantIdentity=a.participantIdentity),s},fromPartial(a){var s,d,c,h;const v=createBaseTrackPermission();return v.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",v.allTracks=(d=a.allTracks)!==null&&d!==void 0?d:!1,v.trackSids=((c=a.trackSids)===null||c===void 0?void 0:c.map(y=>y))||[],v.participantIdentity=(h=a.participantIdentity)!==null&&h!==void 0?h:"",v}};function createBaseSubscriptionPermission(){return{allParticipants:!1,trackPermissions:[]}}const SubscriptionPermission={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.allParticipants===!0&&s.uint32(8).bool(a.allParticipants);for(const d of a.trackPermissions)TrackPermission.encode(d,s.uint32(18).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSubscriptionPermission();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.allParticipants=d.bool();break;case 2:h.trackPermissions.push(TrackPermission.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{allParticipants:isSet(a.allParticipants)?Boolean(a.allParticipants):!1,trackPermissions:Array.isArray(a==null?void 0:a.trackPermissions)?a.trackPermissions.map(s=>TrackPermission.fromJSON(s)):[]}},toJSON(a){const s={};return a.allParticipants!==void 0&&(s.allParticipants=a.allParticipants),a.trackPermissions?s.trackPermissions=a.trackPermissions.map(d=>d?TrackPermission.toJSON(d):void 0):s.trackPermissions=[],s},fromPartial(a){var s,d;const c=createBaseSubscriptionPermission();return c.allParticipants=(s=a.allParticipants)!==null&&s!==void 0?s:!1,c.trackPermissions=((d=a.trackPermissions)===null||d===void 0?void 0:d.map(h=>TrackPermission.fromPartial(h)))||[],c}};function createBaseSubscriptionPermissionUpdate(){return{participantSid:"",trackSid:"",allowed:!1}}const SubscriptionPermissionUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.trackSid!==""&&s.uint32(18).string(a.trackSid),a.allowed===!0&&s.uint32(24).bool(a.allowed),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSubscriptionPermissionUpdate();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.participantSid=d.string();break;case 2:h.trackSid=d.string();break;case 3:h.allowed=d.bool();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{participantSid:isSet(a.participantSid)?String(a.participantSid):"",trackSid:isSet(a.trackSid)?String(a.trackSid):"",allowed:isSet(a.allowed)?Boolean(a.allowed):!1}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.trackSid!==void 0&&(s.trackSid=a.trackSid),a.allowed!==void 0&&(s.allowed=a.allowed),s},fromPartial(a){var s,d,c;const h=createBaseSubscriptionPermissionUpdate();return h.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",h.trackSid=(d=a.trackSid)!==null&&d!==void 0?d:"",h.allowed=(c=a.allowed)!==null&&c!==void 0?c:!1,h}};function createBaseSyncState(){return{answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[]}}const SyncState={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();a.answer!==void 0&&SessionDescription.encode(a.answer,s.uint32(10).fork()).ldelim(),a.subscription!==void 0&&UpdateSubscription.encode(a.subscription,s.uint32(18).fork()).ldelim();for(const d of a.publishTracks)TrackPublishedResponse.encode(d,s.uint32(26).fork()).ldelim();for(const d of a.dataChannels)DataChannelInfo.encode(d,s.uint32(34).fork()).ldelim();return s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSyncState();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.answer=SessionDescription.decode(d,d.uint32());break;case 2:h.subscription=UpdateSubscription.decode(d,d.uint32());break;case 3:h.publishTracks.push(TrackPublishedResponse.decode(d,d.uint32()));break;case 4:h.dataChannels.push(DataChannelInfo.decode(d,d.uint32()));break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{answer:isSet(a.answer)?SessionDescription.fromJSON(a.answer):void 0,subscription:isSet(a.subscription)?UpdateSubscription.fromJSON(a.subscription):void 0,publishTracks:Array.isArray(a==null?void 0:a.publishTracks)?a.publishTracks.map(s=>TrackPublishedResponse.fromJSON(s)):[],dataChannels:Array.isArray(a==null?void 0:a.dataChannels)?a.dataChannels.map(s=>DataChannelInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.answer!==void 0&&(s.answer=a.answer?SessionDescription.toJSON(a.answer):void 0),a.subscription!==void 0&&(s.subscription=a.subscription?UpdateSubscription.toJSON(a.subscription):void 0),a.publishTracks?s.publishTracks=a.publishTracks.map(d=>d?TrackPublishedResponse.toJSON(d):void 0):s.publishTracks=[],a.dataChannels?s.dataChannels=a.dataChannels.map(d=>d?DataChannelInfo.toJSON(d):void 0):s.dataChannels=[],s},fromPartial(a){var s,d;const c=createBaseSyncState();return c.answer=a.answer!==void 0&&a.answer!==null?SessionDescription.fromPartial(a.answer):void 0,c.subscription=a.subscription!==void 0&&a.subscription!==null?UpdateSubscription.fromPartial(a.subscription):void 0,c.publishTracks=((s=a.publishTracks)===null||s===void 0?void 0:s.map(h=>TrackPublishedResponse.fromPartial(h)))||[],c.dataChannels=((d=a.dataChannels)===null||d===void 0?void 0:d.map(h=>DataChannelInfo.fromPartial(h)))||[],c}};function createBaseDataChannelInfo(){return{label:"",id:0,target:0}}const DataChannelInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.label!==""&&s.uint32(10).string(a.label),a.id!==0&&s.uint32(16).uint32(a.id),a.target!==0&&s.uint32(24).int32(a.target),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseDataChannelInfo();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.label=d.string();break;case 2:h.id=d.uint32();break;case 3:h.target=d.int32();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{label:isSet(a.label)?String(a.label):"",id:isSet(a.id)?Number(a.id):0,target:isSet(a.target)?signalTargetFromJSON(a.target):0}},toJSON(a){const s={};return a.label!==void 0&&(s.label=a.label),a.id!==void 0&&(s.id=Math.round(a.id)),a.target!==void 0&&(s.target=signalTargetToJSON(a.target)),s},fromPartial(a){var s,d,c;const h=createBaseDataChannelInfo();return h.label=(s=a.label)!==null&&s!==void 0?s:"",h.id=(d=a.id)!==null&&d!==void 0?d:0,h.target=(c=a.target)!==null&&c!==void 0?c:0,h}};function createBaseSimulateScenario(){return{speakerUpdate:void 0,nodeFailure:void 0,migration:void 0,serverLeave:void 0}}const SimulateScenario={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:minimal.Writer.create();return a.speakerUpdate!==void 0&&s.uint32(8).int32(a.speakerUpdate),a.nodeFailure!==void 0&&s.uint32(16).bool(a.nodeFailure),a.migration!==void 0&&s.uint32(24).bool(a.migration),a.serverLeave!==void 0&&s.uint32(32).bool(a.serverLeave),s},decode(a,s){const d=a instanceof minimal.Reader?a:new minimal.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSimulateScenario();for(;d.pos<c;){const v=d.uint32();switch(v>>>3){case 1:h.speakerUpdate=d.int32();break;case 2:h.nodeFailure=d.bool();break;case 3:h.migration=d.bool();break;case 4:h.serverLeave=d.bool();break;default:d.skipType(v&7);break}}return h},fromJSON(a){return{speakerUpdate:isSet(a.speakerUpdate)?Number(a.speakerUpdate):void 0,nodeFailure:isSet(a.nodeFailure)?Boolean(a.nodeFailure):void 0,migration:isSet(a.migration)?Boolean(a.migration):void 0,serverLeave:isSet(a.serverLeave)?Boolean(a.serverLeave):void 0}},toJSON(a){const s={};return a.speakerUpdate!==void 0&&(s.speakerUpdate=Math.round(a.speakerUpdate)),a.nodeFailure!==void 0&&(s.nodeFailure=a.nodeFailure),a.migration!==void 0&&(s.migration=a.migration),a.serverLeave!==void 0&&(s.serverLeave=a.serverLeave),s},fromPartial(a){var s,d,c,h;const v=createBaseSimulateScenario();return v.speakerUpdate=(s=a.speakerUpdate)!==null&&s!==void 0?s:void 0,v.nodeFailure=(d=a.nodeFailure)!==null&&d!==void 0?d:void 0,v.migration=(c=a.migration)!==null&&c!==void 0?c:void 0,v.serverLeave=(h=a.serverLeave)!==null&&h!==void 0?h:void 0,v}};minimal.util.Long!==long&&(minimal.util.Long=long,minimal.configure());function isSet(a){return a!=null}class LivekitError extends Error{constructor(s,d){super(d||"an error has occured"),this.code=s}}class ConnectionError extends LivekitError{constructor(s){super(1,s)}}class TrackInvalidError extends LivekitError{constructor(s){super(20,s||"Track is invalid")}}class UnsupportedServer extends LivekitError{constructor(s){super(10,s||"Unsupported server")}}class UnexpectedConnectionState extends LivekitError{constructor(s){super(12,s||"Unexpected connection state")}}var MediaDeviceFailure;(function(a){a.PermissionDenied="PermissionDenied",a.NotFound="NotFound",a.DeviceInUse="DeviceInUse",a.Other="Other"})(MediaDeviceFailure||(MediaDeviceFailure={})),function(a){function s(d){if(d&&"name"in d)return d.name==="NotFoundError"||d.name==="DevicesNotFoundError"?a.NotFound:d.name==="NotAllowedError"||d.name==="PermissionDeniedError"?a.PermissionDenied:d.name==="NotReadableError"||d.name==="TrackStartError"?a.DeviceInUse:a.Other}a.getFailure=s}(MediaDeviceFailure||(MediaDeviceFailure={}));var RoomEvent;(function(a){a.Reconnecting="reconnecting",a.Reconnected="reconnected",a.Disconnected="disconnected",a.StateChanged="stateChanged",a.MediaDevicesChanged="mediaDevicesChanged",a.ParticipantConnected="participantConnected",a.ParticipantDisconnected="participantDisconnected",a.TrackPublished="trackPublished",a.TrackSubscribed="trackSubscribed",a.TrackSubscriptionFailed="trackSubscriptionFailed",a.TrackUnpublished="trackUnpublished",a.TrackUnsubscribed="trackUnsubscribed",a.TrackMuted="trackMuted",a.TrackUnmuted="trackUnmuted",a.LocalTrackPublished="localTrackPublished",a.LocalTrackUnpublished="localTrackUnpublished",a.ActiveSpeakersChanged="activeSpeakersChanged",a.MetadataChanged="metadataChanged",a.ParticipantMetadataChanged="participantMetadataChanged",a.RoomMetadataChanged="roomMetadataChanged",a.DataReceived="dataReceived",a.ConnectionQualityChanged="connectionQualityChanged",a.TrackStreamStateChanged="trackStreamStateChanged",a.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",a.AudioPlaybackStatusChanged="audioPlaybackChanged",a.MediaDevicesError="mediaDevicesError",a.ParticipantPermissionsChanged="participantPermissionsChanged"})(RoomEvent||(RoomEvent={}));var ParticipantEvent;(function(a){a.TrackPublished="trackPublished",a.TrackSubscribed="trackSubscribed",a.TrackSubscriptionFailed="trackSubscriptionFailed",a.TrackUnpublished="trackUnpublished",a.TrackUnsubscribed="trackUnsubscribed",a.TrackMuted="trackMuted",a.TrackUnmuted="trackUnmuted",a.LocalTrackPublished="localTrackPublished",a.LocalTrackUnpublished="localTrackUnpublished",a.MetadataChanged="metadataChanged",a.ParticipantMetadataChanged="participantMetadataChanged",a.DataReceived="dataReceived",a.IsSpeakingChanged="isSpeakingChanged",a.ConnectionQualityChanged="connectionQualityChanged",a.TrackStreamStateChanged="trackStreamStateChanged",a.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",a.MediaDevicesError="mediaDevicesError",a.ParticipantPermissionsChanged="participantPermissionsChanged"})(ParticipantEvent||(ParticipantEvent={}));var EngineEvent;(function(a){a.TransportsCreated="transportsCreated",a.Connected="connected",a.Disconnected="disconnected",a.Resuming="resuming",a.Resumed="resumed",a.Restarting="restarting",a.Restarted="restarted",a.SignalResumed="signalResumed",a.MediaTrackAdded="mediaTrackAdded",a.ActiveSpeakersUpdate="activeSpeakersUpdate",a.DataPacketReceived="dataPacketReceived"})(EngineEvent||(EngineEvent={}));var TrackEvent;(function(a){a.Message="message",a.Muted="muted",a.Unmuted="unmuted",a.Ended="ended",a.UpdateSettings="updateSettings",a.UpdateSubscription="updateSubscription",a.AudioPlaybackStarted="audioPlaybackStarted",a.AudioPlaybackFailed="audioPlaybackFailed",a.AudioSilenceDetected="audioSilenceDetected",a.VisibilityChanged="visibilityChanged",a.VideoDimensionsChanged="videoDimensionsChanged",a.ElementAttached="elementAttached",a.ElementDetached="elementDetached",a.UpstreamPaused="upstreamPaused",a.UpstreamResumed="upstreamResumed"})(TrackEvent||(TrackEvent={}));const monitorFrequency=2e3;function computeBitrate(a,s){if(!s)return 0;let d,c;return"bytesReceived"in a?(d=a.bytesReceived,c=s.bytesReceived):"bytesSent"in a&&(d=a.bytesSent,c=s.bytesSent),d===void 0||c===void 0||a.timestamp===void 0||s.timestamp===void 0?0:(d-c)*8*1e3/(a.timestamp-s.timestamp)}const defaultId="default";class DeviceManager{static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}async getDevices(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,c=await navigator.mediaDevices.enumerateDevices();if(d&&(c.length===0||c.some(v=>{const y=v.label==="",b=s?v.kind===s:!0;return y&&b}))){const v={video:s!=="audioinput"&&s!=="audiooutput",audio:s!=="videoinput"};await navigator.mediaDevices.getUserMedia(v),c=await navigator.mediaDevices.enumerateDevices()}if(s&&(c=c.filter(h=>h.kind===s)),c.length>1&&c[0].deviceId===defaultId){const h=c[0];for(let v=1;v<c.length;v+=1)if(c[v].groupId===h.groupId){const y=c[0];c[0]=c[v],c[v]=y;break}return c.filter(v=>v!==h)}return c}async normalizeDeviceId(s,d,c){if(d!==defaultId)return d;const v=(await this.getDevices(s)).find(y=>y.groupId===c&&y.deviceId!==defaultId);return v==null?void 0:v.deviceId}}DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];const version$1="0.18.6",protocolVersion=7,separator="|";function unpackStreamId(a){const s=a.split(separator);return s.length>1?[s[0],a.substr(s[0].length+1)]:[a,""]}async function sleep(a){return new Promise(s=>setTimeout(s,a))}function isFireFox(){return isWeb()?navigator.userAgent.indexOf("Firefox")!==-1:!1}function isSafari(){return isWeb()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}function isMobile(){return isWeb()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function isWeb(){return typeof document!="undefined"}function roDispatchCallback(a){for(const s of a)s.target.handleResize(s)}function ioDispatchCallback(a){for(const s of a)s.target.handleVisibilityChanged(s)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback,{root:document,rootMargin:"0px"})),intersectionObserver);function getClientInfo(){return ClientInfo.fromPartial({sdk:ClientInfo_SDK.JS,protocol:protocolVersion,version:version$1})}let emptyVideoStreamTrack;function getEmptyVideoStreamTrack(){var a;if(!emptyVideoStreamTrack){const s=document.createElement("canvas");if(s.width=2,s.height=2,(a=s.getContext("2d"))===null||a===void 0||a.fillRect(0,0,s.width,s.height),[emptyVideoStreamTrack]=s.captureStream().getTracks(),!emptyVideoStreamTrack)throw Error("Could not get empty media stream video track");emptyVideoStreamTrack.enabled=!1}return emptyVideoStreamTrack}let emptyAudioStreamTrack;function getEmptyAudioStreamTrack(){if(!emptyAudioStreamTrack){const a=new AudioContext,s=a.createOscillator(),d=a.createMediaStreamDestination();if(s.connect(d),s.start(),[emptyAudioStreamTrack]=d.stream.getAudioTracks(),!emptyAudioStreamTrack)throw Error("Could not get empty media stream audio track");emptyAudioStreamTrack.enabled=!1}return emptyAudioStreamTrack}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function a(s,d,c){return Function.prototype.apply.call(s,d,c)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:ReflectOwnKeys=function(s){return Object.getOwnPropertyNames(s)};function ProcessEmitWarning(a){console&&console.warn&&console.warn(a)}var NumberIsNaN=Number.isNaN||function a(s){return s!==s};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter,events.exports.once=once,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(a){if(typeof a!="number"||a<0||NumberIsNaN(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");defaultMaxListeners=a}}),EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function a(s){if(typeof s!="number"||s<0||NumberIsNaN(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this};function _getMaxListeners(a){return a._maxListeners===void 0?EventEmitter.defaultMaxListeners:a._maxListeners}EventEmitter.prototype.getMaxListeners=function a(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function a(s){for(var d=[],c=1;c<arguments.length;c++)d.push(arguments[c]);var h=s==="error",v=this._events;if(v!==void 0)h=h&&v.error===void 0;else if(!h)return!1;if(h){var y;if(d.length>0&&(y=d[0]),y instanceof Error)throw y;var b=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw b.context=y,b}var _=v[s];if(_===void 0)return!1;if(typeof _=="function")ReflectApply(_,this,d);else for(var T=_.length,I=arrayClone(_,T),c=0;c<T;++c)ReflectApply(I[c],this,d);return!0};function _addListener(a,s,d,c){var h,v,y;if(checkListener(d),v=a._events,v===void 0?(v=a._events=Object.create(null),a._eventsCount=0):(v.newListener!==void 0&&(a.emit("newListener",s,d.listener?d.listener:d),v=a._events),y=v[s]),y===void 0)y=v[s]=d,++a._eventsCount;else if(typeof y=="function"?y=v[s]=c?[d,y]:[y,d]:c?y.unshift(d):y.push(d),h=_getMaxListeners(a),h>0&&y.length>h&&!y.warned){y.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=a,b.type=s,b.count=y.length,ProcessEmitWarning(b)}return a}EventEmitter.prototype.addListener=function a(s,d){return _addListener(this,s,d,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function a(s,d){return _addListener(this,s,d,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(a,s,d){var c={fired:!1,wrapFn:void 0,target:a,type:s,listener:d},h=onceWrapper.bind(c);return h.listener=d,c.wrapFn=h,h}EventEmitter.prototype.once=function a(s,d){return checkListener(d),this.on(s,_onceWrap(this,s,d)),this},EventEmitter.prototype.prependOnceListener=function a(s,d){return checkListener(d),this.prependListener(s,_onceWrap(this,s,d)),this},EventEmitter.prototype.removeListener=function a(s,d){var c,h,v,y,b;if(checkListener(d),h=this._events,h===void 0)return this;if(c=h[s],c===void 0)return this;if(c===d||c.listener===d)--this._eventsCount===0?this._events=Object.create(null):(delete h[s],h.removeListener&&this.emit("removeListener",s,c.listener||d));else if(typeof c!="function"){for(v=-1,y=c.length-1;y>=0;y--)if(c[y]===d||c[y].listener===d){b=c[y].listener,v=y;break}if(v<0)return this;v===0?c.shift():spliceOne(c,v),c.length===1&&(h[s]=c[0]),h.removeListener!==void 0&&this.emit("removeListener",s,b||d)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function a(s){var d,c,h;if(c=this._events,c===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[s]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete c[s]),this;if(arguments.length===0){var v=Object.keys(c),y;for(h=0;h<v.length;++h)y=v[h],y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(d=c[s],typeof d=="function")this.removeListener(s,d);else if(d!==void 0)for(h=d.length-1;h>=0;h--)this.removeListener(s,d[h]);return this};function _listeners(a,s,d){var c=a._events;if(c===void 0)return[];var h=c[s];return h===void 0?[]:typeof h=="function"?d?[h.listener||h]:[h]:d?unwrapListeners(h):arrayClone(h,h.length)}EventEmitter.prototype.listeners=function a(s){return _listeners(this,s,!0)},EventEmitter.prototype.rawListeners=function a(s){return _listeners(this,s,!1)},EventEmitter.listenerCount=function(a,s){return typeof a.listenerCount=="function"?a.listenerCount(s):listenerCount.call(a,s)},EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(a){var s=this._events;if(s!==void 0){var d=s[a];if(typeof d=="function")return 1;if(d!==void 0)return d.length}return 0}EventEmitter.prototype.eventNames=function a(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(a,s){for(var d=new Array(s),c=0;c<s;++c)d[c]=a[c];return d}function spliceOne(a,s){for(;s+1<a.length;s++)a[s]=a[s+1];a.pop()}function unwrapListeners(a){for(var s=new Array(a.length),d=0;d<s.length;++d)s[d]=a[d].listener||a[d];return s}function once(a,s){return new Promise(function(d,c){function h(y){a.removeListener(s,v),c(y)}function v(){typeof a.removeListener=="function"&&a.removeListener("error",h),d([].slice.call(arguments))}eventTargetAgnosticAddListener(a,s,v,{once:!0}),s!=="error"&&addErrorHandlerIfEventEmitter(a,h,{once:!0})})}function addErrorHandlerIfEventEmitter(a,s,d){typeof a.on=="function"&&eventTargetAgnosticAddListener(a,"error",s,d)}function eventTargetAgnosticAddListener(a,s,d,c){if(typeof a.on=="function")c.once?a.once(s,d):a.on(s,d);else if(typeof a.addEventListener=="function")a.addEventListener(s,function h(v){c.once&&a.removeEventListener(s,h),d(v)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}const recycledElements=[];class Track extends events.exports.EventEmitter{constructor(s,d){super(),this.attachedElements=[],this.isMuted=!1,this._currentBitrate=0,this.appVisibilityChangedListener=()=>{this.handleAppVisibilityChanged()},this.kind=d,this._mediaStreamTrack=s,this.source=Track.Source.Unknown,isWeb()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}attach(s){let d="audio";return this.kind===Track.Kind.Video&&(d="video"),s||(d==="audio"&&(recycledElements.forEach(c=>{c.parentElement===null&&!s&&(s=c)}),s&&recycledElements.splice(recycledElements.indexOf(s),1)),s||(s=document.createElement(d))),this.attachedElements.includes(s)||this.attachedElements.push(s),attachToElement(this._mediaStreamTrack,s),s instanceof HTMLAudioElement&&s.play().then(()=>{this.emit(TrackEvent.AudioPlaybackStarted)}).catch(c=>{this.emit(TrackEvent.AudioPlaybackFailed,c)}),this.emit(TrackEvent.ElementAttached,s),s}detach(s){if(s){detachTrack(this._mediaStreamTrack,s);const c=this.attachedElements.indexOf(s);return c>=0&&(this.attachedElements.splice(c,1),this.recycleElement(s),this.emit(TrackEvent.ElementDetached,s)),s}const d=[];return this.attachedElements.forEach(c=>{detachTrack(this._mediaStreamTrack,c),d.push(c),this.recycleElement(c),this.emit(TrackEvent.ElementDetached,c)}),this.attachedElements=[],d}stop(){this._mediaStreamTrack.stop(),isWeb()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}recycleElement(s){if(s instanceof HTMLAudioElement){let d=!0;s.pause(),recycledElements.forEach(c=>{c.parentElement||(d=!1)}),d&&recycledElements.push(s)}}async handleAppVisibilityChanged(){this.isInBackground=document.visibilityState==="hidden"}}function attachToElement(a,s){let d;s.srcObject instanceof MediaStream?d=s.srcObject:d=new MediaStream;let c;a.kind==="audio"?c=d.getAudioTracks():c=d.getVideoTracks(),c.includes(a)||(c.forEach(h=>{d.removeTrack(h)}),d.addTrack(a)),s.srcObject!==d&&(s.srcObject=d,(isSafari()||isFireFox())&&s instanceof HTMLVideoElement&&setTimeout(()=>{s.srcObject=d,s.play().catch(()=>{})},0)),s.autoplay=!0,s instanceof HTMLVideoElement&&(s.playsInline=!0)}function detachTrack(a,s){if(s.srcObject instanceof MediaStream){const d=s.srcObject;d.removeTrack(a),d.getTracks().length>0?s.srcObject=d:s.srcObject=null}}(function(a){let s;(function(T){T.Audio="audio",T.Video="video",T.Unknown="unknown"})(s=a.Kind||(a.Kind={}));let d;(function(T){T.Camera="camera",T.Microphone="microphone",T.ScreenShare="screen_share",T.ScreenShareAudio="screen_share_audio",T.Unknown="unknown"})(d=a.Source||(a.Source={}));let c;(function(T){T.Active="active",T.Paused="paused",T.Unknown="unknown"})(c=a.StreamState||(a.StreamState={}));function h(T){switch(T){case s.Audio:return TrackType.AUDIO;case s.Video:return TrackType.VIDEO;default:return TrackType.UNRECOGNIZED}}a.kindToProto=h;function v(T){switch(T){case TrackType.AUDIO:return s.Audio;case TrackType.VIDEO:return s.Video;default:return s.Unknown}}a.kindFromProto=v;function y(T){switch(T){case d.Camera:return TrackSource.CAMERA;case d.Microphone:return TrackSource.MICROPHONE;case d.ScreenShare:return TrackSource.SCREEN_SHARE;case d.ScreenShareAudio:return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNRECOGNIZED}}a.sourceToProto=y;function b(T){switch(T){case TrackSource.CAMERA:return d.Camera;case TrackSource.MICROPHONE:return d.Microphone;case TrackSource.SCREEN_SHARE:return d.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return d.ScreenShareAudio;default:return d.Unknown}}a.sourceFromProto=b;function _(T){switch(T){case StreamState.ACTIVE:return c.Active;case StreamState.PAUSED:return c.Paused;default:return c.Unknown}}a.streamStateFromProto=_})(Track||(Track={}));class LocalTrack extends Track{constructor(s,d,c){super(s,d),this._isUpstreamPaused=!1,this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this.emit(TrackEvent.Ended,this)},this._mediaStreamTrack.addEventListener("ended",this.handleEnded),this.constraints=c!=null?c:s.getConstraints(),this.reacquireTrack=!1,this.wasMuted=!1}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Track.Kind.Video)return;const{width:s,height:d}=this._mediaStreamTrack.getSettings();if(s&&d)return{width:s,height:d}}get isUpstreamPaused(){return this._isUpstreamPaused}async getDeviceId(){if(this.source===Track.Source.ScreenShare)return;const{deviceId:s,groupId:d}=this._mediaStreamTrack.getSettings(),c=this.kind===Track.Kind.Audio?"audioinput":"videoinput";return DeviceManager.getInstance().normalizeDeviceId(c,s,d)}async mute(){return this.setTrackMuted(!0),this}async unmute(){return this.setTrackMuted(!1),this}async replaceTrack(s){if(!this.sender)throw new TrackInvalidError("unable to replace an unpublished track");return this.attachedElements.forEach(d=>{detachTrack(this._mediaStreamTrack,d)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop(),s.addEventListener("ended",this.handleEnded),livekitLogger.debug("replace MediaStreamTrack"),await this.sender.replaceTrack(s),this._mediaStreamTrack=s,this.attachedElements.forEach(d=>{attachToElement(s,d)}),this.mediaStream=new MediaStream([s]),this}async restart(s){if(!this.sender)throw new TrackInvalidError("unable to restart an unpublished track");s||(s=this.constraints),livekitLogger.debug("restarting track with constraints",s);const d={audio:!1,video:!1};this.kind===Track.Kind.Video?d.video=s:d.audio=s,this.attachedElements.forEach(v=>{detachTrack(this._mediaStreamTrack,v)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const c=await navigator.mediaDevices.getUserMedia(d),h=c.getTracks()[0];return h.addEventListener("ended",this.handleEnded),livekitLogger.debug("re-acquired MediaStreamTrack"),await this.sender.replaceTrack(h),this._mediaStreamTrack=h,this.attachedElements.forEach(v=>{attachToElement(h,v)}),this.mediaStream=c,this.constraints=s,this}setTrackMuted(s){this.isMuted!==s&&(this.isMuted=s,this._mediaStreamTrack.enabled=!s,this.emit(s?TrackEvent.Muted:TrackEvent.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),isMobile()&&(livekitLogger.debug("visibility changed, is in Background: ".concat(this.isInBackground)),!this.isInBackground&&this.needsReAcquisition&&(livekitLogger.debug("track needs to be reaquired, restarting ".concat(this.source)),await this.restart(),this.reacquireTrack=!1,this.setTrackMuted(this.wasMuted)),this.isInBackground&&(this.wasMuted=this.isMuted))}async pauseUpstream(){if(this._isUpstreamPaused===!0)return;if(!this.sender){livekitLogger.warn("unable to pause upstream for an unpublished track");return}this._isUpstreamPaused=!0,this.emit(TrackEvent.UpstreamPaused,this);const s=this.kind===Track.Kind.Audio?getEmptyAudioStreamTrack():getEmptyVideoStreamTrack();await this.sender.replaceTrack(s)}async resumeUpstream(){if(this._isUpstreamPaused!==!1){if(!this.sender){livekitLogger.warn("unable to resume upstream for an unpublished track");return}this._isUpstreamPaused=!1,this.emit(TrackEvent.UpstreamResumed,this),await this.sender.replaceTrack(this._mediaStreamTrack)}}}function mergeDefaultOptions(a,s,d){const c=_objectSpread2({},a);return c.audio===!0&&(c.audio={}),c.video===!0&&(c.video={}),c.audio&&mergeObjectWithoutOverwriting(c.audio,s),c.video&&mergeObjectWithoutOverwriting(c.video,d),c}function mergeObjectWithoutOverwriting(a,s){return Object.keys(s).forEach(d=>{a[d]===void 0&&(a[d]=s[d])}),a}function constraintsForOptions(a){const s={};if(a.video)if(typeof a.video=="object"){const d={},c=d,h=a.video;Object.keys(h).forEach(v=>{switch(v){case"resolution":mergeObjectWithoutOverwriting(c,h.resolution);break;default:c[v]=h[v]}}),s.video=d}else s.video=a.video;else s.video=!1;return a.audio?typeof a.audio=="object"?s.audio=a.audio:s.audio=!0:s.audio=!1,s}async function detectSilence(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;const d=getNewAudioContext();if(d){const c=d.createAnalyser();c.fftSize=2048;const h=c.frequencyBinCount,v=new Uint8Array(h);d.createMediaStreamSource(new MediaStream([a.mediaStreamTrack])).connect(c),await sleep(s),c.getByteTimeDomainData(v);const b=v.some(_=>_!==128&&_!==0);return d.close(),!b}return!1}function getNewAudioContext(){const a=window.AudioContext||window.webkitAudioContext;if(a)return new a}class LocalAudioTrack extends LocalTrack{constructor(s,d){super(s,Track.Kind.Audio,d),this.stopOnMute=!1,this.monitorSender=async()=>{if(!this.sender){this._currentBitrate=0;return}let c;try{c=await this.getSenderStats()}catch(h){livekitLogger.error("could not get audio sender stats",{error:h});return}c&&this.prevStats&&(this._currentBitrate=computeBitrate(c,this.prevStats)),this.prevStats=c,setTimeout(()=>{this.monitorSender()},monitorFrequency)},this.checkForSilence()}async setDeviceId(s){this.constraints.deviceId!==s&&(this.constraints.deviceId=s,this.isMuted||await this.restartTrack())}async mute(){return this.source===Track.Source.Microphone&&this.stopOnMute&&(livekitLogger.debug("stopping mic track"),this._mediaStreamTrack.stop()),await super.mute(),this}async unmute(){return this.source===Track.Source.Microphone&&this.stopOnMute&&(livekitLogger.debug("reacquiring mic track"),await this.restartTrack()),await super.unmute(),this}async restartTrack(s){let d;if(s){const c=constraintsForOptions({audio:s});typeof c.audio!="boolean"&&(d=c.audio)}await this.restart(d)}async restart(s){const d=await super.restart(s);return this.checkForSilence(),d}startMonitor(){setTimeout(()=>{this.monitorSender()},monitorFrequency)}async getSenderStats(){if(!this.sender)return;const s=await this.sender.getStats();let d;return s.forEach(c=>{c.type==="outbound-rtp"&&(d={type:"audio",streamId:c.id,packetsSent:c.packetsSent,packetsLost:c.packetsLost,bytesSent:c.bytesSent,timestamp:c.timestamp,roundTripTime:c.roundTripTime,jitter:c.jitter})}),d}async checkForSilence(){await detectSilence(this)&&(this.isMuted||livekitLogger.warn("silence detected on local audio track"),this.emit(TrackEvent.AudioSilenceDetected))}}class LocalVideoTrack extends LocalTrack{constructor(s,d){super(s,Track.Kind.Video,d),this.monitorSender=async()=>{if(!this.sender){this._currentBitrate=0;return}let c;try{c=await this.getSenderStats()}catch(v){livekitLogger.error("could not get audio sender stats",{error:v});return}const h=new Map(c.map(v=>[v.rid,v]));if(this.prevStats){let v=0;h.forEach((y,b)=>{var _;const T=(_=this.prevStats)===null||_===void 0?void 0:_.get(b);v+=computeBitrate(y,T)}),this._currentBitrate=v}this.prevStats=h,setTimeout(()=>{this.monitorSender()},monitorFrequency)}}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(s){var d;this.signalClient=s;const c=(d=this.sender)===null||d===void 0?void 0:d.getParameters();c&&(this.encodings=c.encodings),setTimeout(()=>{this.monitorSender()},monitorFrequency)}stop(){this.sender=void 0,this._mediaStreamTrack.getConstraints(),super.stop()}async mute(){return this.source===Track.Source.Camera&&(livekitLogger.debug("stopping camera track"),this._mediaStreamTrack.stop()),await super.mute(),this}async unmute(){return this.source===Track.Source.Camera&&(livekitLogger.debug("reacquiring camera track"),await this.restartTrack()),await super.unmute(),this}async getSenderStats(){if(!this.sender)return[];const s=[],d=await this.sender.getStats();return d.forEach(c=>{var h;if(c.type==="outbound-rtp"){const v={type:"video",streamId:c.id,frameHeight:c.frameHeight,frameWidth:c.frameWidth,firCount:c.firCount,pliCount:c.pliCount,nackCount:c.nackCount,packetsSent:c.packetsSent,bytesSent:c.bytesSent,framesSent:c.framesSent,timestamp:c.timestamp,rid:(h=c.rid)!==null&&h!==void 0?h:"",retransmittedPacketsSent:c.retransmittedPacketsSent,qualityLimitationReason:c.qualityLimitationReason,qualityLimitationResolutionChanges:c.qualityLimitationResolutionChanges},y=d.get(c.remoteId);y&&(v.jitter=y.jitter,v.packetsLost=y.packetsLost,v.roundTripTime=y.roundTripTime),s.push(v)}}),s}setPublishingQuality(s){const d=[];for(let c=VideoQuality.LOW;c<=VideoQuality.HIGH;c+=1)d.push({quality:c,enabled:c<=s});livekitLogger.debug("setting publishing quality. max quality ".concat(s)),this.setPublishingLayers(d)}async setDeviceId(s){this.constraints.deviceId!==s&&(this.constraints.deviceId=s,this.isMuted||await this.restartTrack())}async restartTrack(s){let d;if(s){const c=constraintsForOptions({video:s});typeof c.video!="boolean"&&(d=c.video)}await this.restart(d)}async setPublishingLayers(s){if(livekitLogger.debug("setting publishing layers",s),!this.sender||!this.encodings)return;const d=this.sender.getParameters(),{encodings:c}=d;if(!c)return;if(c.length!==this.encodings.length){livekitLogger.warn("cannot set publishing layers, encodings mismatch");return}let h=!1;c.forEach((v,y)=>{var b;let _=(b=v.rid)!==null&&b!==void 0?b:"";_===""&&(_="q");const T=videoQualityForRid(_),I=s.find(N=>N.quality===T);!I||v.active!==I.enabled&&(h=!0,v.active=I.enabled,livekitLogger.debug("setting layer ".concat(I.quality," to ").concat(v.active?"enabled":"disabled")),isFireFox()&&(I.enabled?(v.scaleResolutionDownBy=this.encodings[y].scaleResolutionDownBy,v.maxBitrate=this.encodings[y].maxBitrate,v.maxFrameRate=this.encodings[y].maxFrameRate):(v.scaleResolutionDownBy=4,v.maxBitrate=10,v.maxFrameRate=2)))}),h&&(d.encodings=c,await this.sender.setParameters(d))}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),!!isMobile()&&this.isInBackground&&this.source===Track.Source.Camera&&(this._mediaStreamTrack.enabled=!1)}}function videoQualityForRid(a){switch(a){case"f":return VideoQuality.HIGH;case"h":return VideoQuality.MEDIUM;case"q":return VideoQuality.LOW;default:return VideoQuality.UNRECOGNIZED}}function videoLayersFromEncodings(a,s,d){return d?d.map(c=>{var h,v,y;const b=(h=c.scaleResolutionDownBy)!==null&&h!==void 0?h:1;let _=videoQualityForRid((v=c.rid)!==null&&v!==void 0?v:"");return _===VideoQuality.UNRECOGNIZED&&d.length===1&&(_=VideoQuality.HIGH),{quality:_,width:a/b,height:s/b,bitrate:(y=c.maxBitrate)!==null&&y!==void 0?y:0,ssrc:0}}):[{quality:VideoQuality.HIGH,width:a,height:s,bitrate:0,ssrc:0}]}class RemoteTrack extends Track{constructor(s,d,c,h){super(s,c),this.streamState=Track.StreamState.Active,this.sid=d,this.receiver=h}setMuted(s){this.isMuted!==s&&(this.isMuted=s,this.emit(s?TrackEvent.Muted:TrackEvent.Unmuted,this))}setMediaStream(s){this.mediaStream=s,s.onremovetrack=()=>{this.receiver=void 0,this._currentBitrate=0,this.emit(TrackEvent.Ended,this)}}start(){this.startMonitor(),super.enable()}stop(){super.disable()}startMonitor(){setTimeout(()=>{this.monitorReceiver()},monitorFrequency)}}class RemoteAudioTrack extends RemoteTrack{constructor(s,d,c){super(s,d,Track.Kind.Audio,c),this.monitorReceiver=async()=>{if(!this.receiver){this._currentBitrate=0;return}const h=await this.getReceiverStats();h&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(h,this.prevStats)),this.prevStats=h,setTimeout(()=>{this.monitorReceiver()},monitorFrequency)},this.elementVolume=1}setVolume(s){for(const d of this.attachedElements)d.volume=s;this.elementVolume=s}getVolume(){return this.elementVolume}attach(s){return s?super.attach(s):s=super.attach(),s.volume=this.elementVolume,s}async getReceiverStats(){if(!this.receiver)return;const s=await this.receiver.getStats();let d;return s.forEach(c=>{c.type==="inbound-rtp"&&(d={type:"audio",timestamp:c.timestamp,jitter:c.jitter,bytesReceived:c.bytesReceived,concealedSamples:c.concealedSamples,concealmentEvents:c.concealmentEvents,silentConcealedSamples:c.silentConcealedSamples,silentConcealmentEvents:c.silentConcealmentEvents,totalAudioEnergy:c.totalAudioEnergy,totalSamplesDuration:c.totalSamplesDuration})}),d}}function r(a,s,d){var c,h,v;s===void 0&&(s=50),d===void 0&&(d={});var y=(c=d.isImmediate)!=null&&c,b=(h=d.callback)!=null&&h,_=d.maxWait,T=Date.now(),I=[];function N(){if(_!==void 0){var V=Date.now()-T;if(V+s>=_)return _-V}return s}var A=function(){var V=[].slice.call(arguments),$=this;return new Promise(function(L,D){var H=y&&v===void 0;if(v!==void 0&&clearTimeout(v),v=setTimeout(function(){if(v=void 0,T=Date.now(),!y){var x=a.apply($,V);b&&b(x),I.forEach(function(j){return(0,j.resolve)(x)}),I=[]}},N()),H){var O=a.apply($,V);return b&&b(O),L(O)}I.push({resolve:L,reject:D})})};return A.cancel=function(V){v!==void 0&&clearTimeout(v),I.forEach(function($){return(0,$.reject)(V)}),I=[]},A}const REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack{constructor(s,d,c,h){super(s,d,Track.Kind.Video,c),this.elementInfos=[],this.hasUsedAttach=!1,this.monitorReceiver=async()=>{if(!this.receiver){this._currentBitrate=0;return}const v=await this.getReceiverStats();v&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(v,this.prevStats)),this.prevStats=v,setTimeout(()=>{this.monitorReceiver()},monitorFrequency)},this.handleVisibilityChanged=v=>{const{target:y,isIntersecting:b}=v,_=this.elementInfos.find(T=>T.element===y);_&&(_.visible=b,_.visibilityChangedAt=Date.now()),this.updateVisibility()},this.debouncedHandleResize=r(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStreamSettings=h,this.isAdaptiveStream&&(this.streamState=Track.StreamState.Paused)}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this.isAdaptiveStream&&!this.hasUsedAttach&&livekitLogger.warn("When using adaptiveStream, you need to use remoteVideoTrack.attach() to add the track to a HTMLVideoElement, otherwise your video tracks might never start"),this._mediaStreamTrack}setMuted(s){super.setMuted(s),this.attachedElements.forEach(d=>{s?detachTrack(this._mediaStreamTrack,d):attachToElement(this._mediaStreamTrack,d)})}attach(s){return s?super.attach(s):s=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(d=>d.element===s)===void 0&&(this.elementInfos.push({element:s,visible:!0}),s.handleResize=this.debouncedHandleResize,s.handleVisibilityChanged=this.handleVisibilityChanged,getIntersectionObserver().observe(s),getResizeObserver().observe(s),this.debouncedHandleResize()),this.hasUsedAttach=!0,s}detach(s){let d=[];if(s)return this.stopObservingElement(s),super.detach(s);d=super.detach();for(const c of d)this.stopObservingElement(c);return d}async getReceiverStats(){if(!this.receiver)return;const s=await this.receiver.getStats();let d;return s.forEach(c=>{c.type==="inbound-rtp"&&(d={type:"video",framesDecoded:c.framesDecoded,framesDropped:c.framesDropped,framesReceived:c.framesReceived,packetsReceived:c.packetsReceived,packetsLost:c.packetsLost,frameWidth:c.frameWidth,frameHeight:c.frameHeight,pliCount:c.pliCount,firCount:c.firCount,nackCount:c.nackCount,jitter:c.jitter,timestamp:c.timestamp,bytesReceived:c.bytesReceived})}),d}stopObservingElement(s){var d,c;(d=getIntersectionObserver())===null||d===void 0||d.unobserve(s),(c=getResizeObserver())===null||c===void 0||c.unobserve(s),this.elementInfos=this.elementInfos.filter(h=>h.element!==s)}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),this.isAdaptiveStream&&(!isMobile()||this.updateVisibility())}updateVisibility(){const s=this.elementInfos.reduce((c,h)=>Math.max(c,h.visibilityChangedAt||0),0),d=this.elementInfos.some(c=>c.visible)&&!this.isInBackground;if(this.lastVisible!==d){if(!d&&Date.now()-s<REACTION_DELAY){setTimeout(()=>{this.updateVisibility()},REACTION_DELAY);return}this.lastVisible=d,this.emit(TrackEvent.VisibilityChanged,d,this)}}updateDimensions(){var s,d,c,h;let v=0,y=0;for(const b of this.elementInfos){const _=(d=(s=this.adaptiveStreamSettings)===null||s===void 0?void 0:s.pixelDensity)!==null&&d!==void 0?d:1,T=_==="screen"?window.devicePixelRatio:_,I=b.element.clientWidth*T,N=b.element.clientHeight*T;I+N>v+y&&(v=I,y=N)}((c=this.lastDimensions)===null||c===void 0?void 0:c.width)===v&&((h=this.lastDimensions)===null||h===void 0?void 0:h.height)===y||(this.lastDimensions={width:v,height:y},this.emit(TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}}class TrackPublication extends events.exports.EventEmitter{constructor(s,d,c){super(),this.metadataMuted=!1,this.handleMuted=()=>{this.emit(TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(TrackEvent.Unmuted)},this.kind=s,this.trackSid=d,this.trackName=c,this.source=Track.Source.Unknown}setTrack(s){this.track&&(this.track.off(TrackEvent.Muted,this.handleMuted),this.track.off(TrackEvent.Unmuted,this.handleUnmuted)),this.track=s,s&&(s.on(TrackEvent.Muted,this.handleMuted),s.on(TrackEvent.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get audioTrack(){if(this.track instanceof LocalAudioTrack||this.track instanceof RemoteAudioTrack)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack||this.track instanceof RemoteVideoTrack)return this.track}updateInfo(s){this.trackSid=s.sid,this.trackName=s.name,this.source=Track.sourceFromProto(s.source),this.mimeType=s.mimeType,this.kind===Track.Kind.Video&&s.width>0&&(this.dimensions={width:s.width,height:s.height},this.simulcasted=s.simulcast),this.trackInfo=s}}(function(a){(function(s){s.Subscribed="subscribed",s.NotAllowed="not_allowed",s.Unsubscribed="unsubscribed"})(a.SubscriptionStatus||(a.SubscriptionStatus={}))})(TrackPublication||(TrackPublication={}));class LocalTrackPublication extends TrackPublication{constructor(s,d,c){super(s,d.sid,d.name),this.track=void 0,this.handleTrackEnded=()=>{this.emit(TrackEvent.Ended)},this.updateInfo(d),this.setTrack(c)}get isUpstreamPaused(){var s;return(s=this.track)===null||s===void 0?void 0:s.isUpstreamPaused}setTrack(s){this.track&&this.track.off(TrackEvent.Ended,this.handleTrackEnded),super.setTrack(s),s&&s.on(TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}async mute(){var s;return(s=this.track)===null||s===void 0?void 0:s.mute()}async unmute(){var s;return(s=this.track)===null||s===void 0?void 0:s.unmute()}async pauseUpstream(){var s;await((s=this.track)===null||s===void 0?void 0:s.pauseUpstream())}async resumeUpstream(){var s;await((s=this.track)===null||s===void 0?void 0:s.resumeUpstream())}}class VideoPreset{constructor(s,d,c,h){this.width=s,this.height=d,this.encoding={maxBitrate:c,maxFramerate:h}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}var AudioPresets;(function(a){a.telephone={maxBitrate:12e3},a.speech={maxBitrate:2e4},a.music={maxBitrate:32e3}})(AudioPresets||(AudioPresets={}));const VideoPresets={h90:new VideoPreset(160,90,6e4,15),h180:new VideoPreset(320,180,12e4,15),h216:new VideoPreset(384,216,18e4,15),h360:new VideoPreset(640,360,3e5,20),h540:new VideoPreset(960,540,6e5,25),h720:new VideoPreset(1280,720,17e5,30),h1080:new VideoPreset(1920,1080,3e6,30),h1440:new VideoPreset(2560,1440,5e6,30),h2160:new VideoPreset(3840,2160,8e6,30),qvga:new VideoPreset(320,180,12e4,10),vga:new VideoPreset(640,360,3e5,20),qhd:new VideoPreset(960,540,6e5,25),hd:new VideoPreset(1280,720,17e5,30),fhd:new VideoPreset(1920,1080,3e6,30)},VideoPresets43={h120:new VideoPreset(160,120,8e4,15),h180:new VideoPreset(240,180,1e5,15),h240:new VideoPreset(320,240,15e4,15),h360:new VideoPreset(480,360,225e3,20),h480:new VideoPreset(640,480,3e5,20),h540:new VideoPreset(720,540,45e4,25),h720:new VideoPreset(960,720,15e5,30),h1080:new VideoPreset(1440,1080,25e5,30),h1440:new VideoPreset(1920,1440,35e5,30),qvga:new VideoPreset(240,180,9e4,10),vga:new VideoPreset(480,360,225e3,20),qhd:new VideoPreset(720,540,45e4,25),hd:new VideoPreset(960,720,15e5,30),fhd:new VideoPreset(1440,1080,28e5,30)},ScreenSharePresets={h360fps3:new VideoPreset(640,360,2e5,3),h720fps5:new VideoPreset(1280,720,4e5,5),h720fps15:new VideoPreset(1280,720,1e6,15),h1080fps15:new VideoPreset(1920,1080,15e5,15),h1080fps30:new VideoPreset(1920,1080,3e6,30),vga:new VideoPreset(640,360,2e5,3),hd_8:new VideoPreset(1280,720,4e5,5),hd_15:new VideoPreset(1280,720,1e6,15),fhd_15:new VideoPreset(1920,1080,15e5,15),fhd_30:new VideoPreset(1920,1080,3e6,30)};var ConnectionQuality;(function(a){a.Excellent="excellent",a.Good="good",a.Poor="poor",a.Unknown="unknown"})(ConnectionQuality||(ConnectionQuality={}));function qualityFromProto(a){switch(a){case ConnectionQuality$1.EXCELLENT:return ConnectionQuality.Excellent;case ConnectionQuality$1.GOOD:return ConnectionQuality.Good;case ConnectionQuality$1.POOR:return ConnectionQuality.Poor;default:return ConnectionQuality.Unknown}}class Participant extends events.exports.EventEmitter{constructor(s,d){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ConnectionQuality.Unknown,this.sid=s,this.identity=d,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(s){if(s!==Track.Source.Unknown){for(const[,d]of this.tracks)if(d.source===s||d.source===Track.Source.Unknown&&(s===Track.Source.Microphone&&d.kind===Track.Kind.Audio&&d.trackName!=="screen"||s===Track.Source.Camera&&d.kind===Track.Kind.Video&&d.trackName!=="screen"||s===Track.Source.ScreenShare&&d.kind===Track.Kind.Video&&d.trackName==="screen"||s===Track.Source.ScreenShareAudio&&d.kind===Track.Kind.Audio&&d.trackName==="screen"))return d}}getTrackByName(s){for(const[,d]of this.tracks)if(d.trackName===s)return d}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var s;const d=this.getTrack(Track.Source.Camera);return!(!((s=d==null?void 0:d.isMuted)!==null&&s!==void 0)||s)}get isMicrophoneEnabled(){var s;const d=this.getTrack(Track.Source.Microphone);return!(!((s=d==null?void 0:d.isMuted)!==null&&s!==void 0)||s)}get isScreenShareEnabled(){return!!this.getTrack(Track.Source.ScreenShare)}get joinedAt(){return this.participantInfo?new Date(this.participantInfo.joinedAt*1e3):new Date}updateInfo(s){this.identity=s.identity,this.sid=s.sid,this.name=s.name,this.setMetadata(s.metadata),s.permission&&this.setPermissions(s.permission),this.participantInfo=s}setMetadata(s){const d=this.metadata!==s,c=this.metadata;this.metadata=s,d&&(this.emit(ParticipantEvent.MetadataChanged,c),this.emit(ParticipantEvent.ParticipantMetadataChanged,c))}setPermissions(s){var d,c,h,v,y;const b=s.canPublish!==((d=this.permissions)===null||d===void 0?void 0:d.canPublish)||s.canSubscribe!==((c=this.permissions)===null||c===void 0?void 0:c.canSubscribe)||s.canPublishData!==((h=this.permissions)===null||h===void 0?void 0:h.canPublishData)||s.hidden!==((v=this.permissions)===null||v===void 0?void 0:v.hidden)||s.recorder!==((y=this.permissions)===null||y===void 0?void 0:y.recorder);return this.permissions=s,b}setIsSpeaking(s){s!==this.isSpeaking&&(this.isSpeaking=s,s&&(this.lastSpokeAt=new Date),this.emit(ParticipantEvent.IsSpeakingChanged,s))}setConnectionQuality(s){const d=this._connectionQuality;this._connectionQuality=qualityFromProto(s),d!==this._connectionQuality&&this.emit(ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}addTrackPublication(s){s.on(TrackEvent.Muted,()=>{this.emit(ParticipantEvent.TrackMuted,s)}),s.on(TrackEvent.Unmuted,()=>{this.emit(ParticipantEvent.TrackUnmuted,s)});const d=s;switch(d.track&&(d.track.sid=s.trackSid),this.tracks.set(s.trackSid,s),s.kind){case Track.Kind.Audio:this.audioTracks.set(s.trackSid,s);break;case Track.Kind.Video:this.videoTracks.set(s.trackSid,s);break}}}function trackPermissionToProto(a){var s,d,c;if(!a.participantSid&&!a.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return{participantIdentity:(s=a.participantIdentity)!==null&&s!==void 0?s:"",participantSid:(d=a.participantSid)!==null&&d!==void 0?d:"",allTracks:(c=a.allowAll)!==null&&c!==void 0?c:!1,trackSids:a.allowedTrackSids||[]}}function mediaTrackToLocalTrack(a,s){switch(a.kind){case"audio":return new LocalAudioTrack(a,s);case"video":return new LocalVideoTrack(a,s);default:throw new TrackInvalidError("unsupported track type: ".concat(a.kind))}}const presets169=Object.values(VideoPresets),presets43=Object.values(VideoPresets43),presetsScreenShare=Object.values(ScreenSharePresets),defaultSimulcastPresets169=[VideoPresets.h180,VideoPresets.h360],defaultSimulcastPresets43=[VideoPresets43.h180,VideoPresets43.h360],computeDefaultScreenShareSimulcastPresets=a=>[{scaleResolutionDownBy:2,fps:3}].map(d=>{var c;return new VideoPreset(Math.floor(a.width/d.scaleResolutionDownBy),Math.floor(a.height/d.scaleResolutionDownBy),Math.max(15e4,Math.floor(a.encoding.maxBitrate/(d.scaleResolutionDownBy**2*(((c=a.encoding.maxFramerate)!==null&&c!==void 0?c:30)/d.fps)))),d.fps)}),videoRids=["q","h","f"];function computeVideoEncodings(a,s,d,c){var h,v;let y=c==null?void 0:c.videoEncoding;a&&(y=c==null?void 0:c.screenShareEncoding);const b=c==null?void 0:c.simulcast,_=c==null?void 0:c.scalabilityMode;if(!y&&!b&&!_||!s||!d)return[{}];y||(y=determineAppropriateEncoding(a,s,d),livekitLogger.debug("using video encoding",y));const T=new VideoPreset(s,d,y.maxBitrate,y.maxFramerate);if(livekitLogger.debug("scalabilityMode ".concat(_)),_){const $=[];switch(_){case"L3T3":for(let L=0;L<3;L+=1)$.push({rid:videoRids[2-L],scaleResolutionDownBy:2**L,maxBitrate:y?y.maxBitrate/2**L:0,maxFramerate:T.encoding.maxFramerate,scalabilityMode:"L3T3"});return livekitLogger.debug("encodings",$),$;default:throw new Error("unsupported scalabilityMode: ".concat(_))}}if(!b)return[y];let I=[];a?I=(h=sortPresets(c==null?void 0:c.screenShareSimulcastLayers))!==null&&h!==void 0?h:defaultSimulcastLayers(a,T):I=(v=sortPresets(c==null?void 0:c.videoSimulcastLayers))!==null&&v!==void 0?v:defaultSimulcastLayers(a,T);let N;const A=I[0];I.length>1&&([,N]=I);const V=Math.max(s,d);return V>=960&&N?encodingsFromPresets(s,d,[A,N,T]):V>=480?encodingsFromPresets(s,d,[A,T]):encodingsFromPresets(s,d,[T])}function determineAppropriateEncoding(a,s,d){const c=presetsForResolution(a,s,d);let{encoding:h}=c[0];const v=Math.max(s,d);for(let y=0;y<c.length;y+=1){const b=c[y];if(h=b.encoding,b.width>=v)break}return h}function presetsForResolution(a,s,d){if(a)return presetsScreenShare;const c=s>d?s/d:d/s;return Math.abs(c-16/9)<Math.abs(c-4/3)?presets169:presets43}function defaultSimulcastLayers(a,s){if(a)return computeDefaultScreenShareSimulcastPresets(s);const{width:d,height:c}=s,h=d>c?d/c:c/d;return Math.abs(h-16/9)<Math.abs(h-4/3)?defaultSimulcastPresets169:defaultSimulcastPresets43}function encodingsFromPresets(a,s,d){const c=[];return d.forEach((h,v)=>{if(v>=videoRids.length)return;const y=Math.min(a,s),b=videoRids[v];c.push({rid:b,scaleResolutionDownBy:y/Math.min(h.width,h.height),maxBitrate:h.encoding.maxBitrate,maxFramerate:h.encoding.maxFramerate})}),c}function sortPresets(a){if(!!a)return a.sort((s,d)=>{const{encoding:c}=s,{encoding:h}=d;return c.maxBitrate>h.maxBitrate?1:c.maxBitrate<h.maxBitrate?-1:c.maxBitrate===h.maxBitrate&&c.maxFramerate&&h.maxFramerate?c.maxFramerate>h.maxFramerate?1:-1:0})}class RemoteTrackPublication extends TrackPublication{constructor(){super(...arguments),this._allowed=!0,this.disabled=!1,this.currentVideoQuality=VideoQuality.HIGH,this.handleEnded=s=>{this.emit(TrackEvent.Ended,s)},this.handleVisibilityChange=s=>{livekitLogger.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),{trackSid:this.trackSid}),this.disabled=!s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{livekitLogger.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),{trackSid:this.trackSid}),this.videoDimensions=s,this.emitTrackUpdate()}}setSubscribed(s){this.subscribed=s;const d={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[{participantSid:"",trackSids:[this.trackSid]}]};this.emit(TrackEvent.UpdateSubscription,d)}get subscriptionStatus(){return this.subscribed===!1||!super.isSubscribed?TrackPublication.SubscriptionStatus.Unsubscribed:this._allowed?TrackPublication.SubscriptionStatus.Subscribed:TrackPublication.SubscriptionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1||!this._allowed?!1:super.isSubscribed}get isEnabled(){return!this.disabled}setEnabled(s){!this.isManualOperationAllowed()||this.disabled===!s||(this.disabled=!s,this.emitTrackUpdate())}setVideoQuality(s){!this.isManualOperationAllowed()||this.currentVideoQuality===s||(this.currentVideoQuality=s,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(s){var d,c;!this.isManualOperationAllowed()||((d=this.videoDimensions)===null||d===void 0?void 0:d.width)===s.width&&((c=this.videoDimensions)===null||c===void 0?void 0:c.height)===s.height||(this.track instanceof RemoteVideoTrack&&(this.videoDimensions=s),this.currentVideoQuality=void 0,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(s){this.track&&(this.track.off(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),this.track.off(TrackEvent.VisibilityChanged,this.handleVisibilityChange),this.track.off(TrackEvent.Ended,this.handleEnded)),super.setTrack(s),s&&(s.sid=this.trackSid,s.on(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),s.on(TrackEvent.VisibilityChanged,this.handleVisibilityChange),s.on(TrackEvent.Ended,this.handleEnded))}updateInfo(s){var d;super.updateInfo(s),this.metadataMuted=s.muted,(d=this.track)===null||d===void 0||d.setMuted(s.muted)}isManualOperationAllowed(){return this.isAdaptiveStream?(livekitLogger.warn("adaptive stream is enabled, cannot change track settings",{trackSid:this.trackSid}),!1):this.isSubscribed?!0:(livekitLogger.warn("cannot update track settings when not subscribed",{trackSid:this.trackSid}),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack&&this.track.isAdaptiveStream}emitTrackUpdate(){const s=UpdateTrackSettings.fromPartial({trackSids:[this.trackSid],disabled:this.disabled});this.videoDimensions?(s.width=this.videoDimensions.width,s.height=this.videoDimensions.height):this.currentVideoQuality!==void 0?s.quality=this.currentVideoQuality:s.quality=VideoQuality.HIGH,this.emit(TrackEvent.UpdateSettings,s)}}class RemoteParticipant extends Participant{constructor(s,d,c){super(d,c||""),this.signalClient=s,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}static fromParticipantInfo(s,d){const c=new RemoteParticipant(s,d.sid,d.identity);return c.updateInfo(d),c}addTrackPublication(s){super.addTrackPublication(s),s.on(TrackEvent.UpdateSettings,d=>{this.signalClient.sendUpdateTrackSettings(d)}),s.on(TrackEvent.UpdateSubscription,d=>{d.participantTracks.forEach(c=>{c.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(d)}),s.on(TrackEvent.Ended,d=>{this.emit(ParticipantEvent.TrackUnsubscribed,d,s)})}getTrack(s){const d=super.getTrack(s);if(d)return d}getTrackByName(s){const d=super.getTrackByName(s);if(d)return d}setVolume(s){const d=this.getTrack(Track.Source.Microphone);d&&d.track.setVolume(s)}getVolume(){const s=this.getTrack(Track.Source.Microphone);if(s)return s.track.getVolume()}addSubscribedMediaTrack(s,d,c,h,v,y){let b=this.getTrackPublication(d);if(b||d.startsWith("TR")||this.tracks.forEach(I=>{!b&&s.kind===I.kind.toString()&&(b=I)}),!b){if(y===0){livekitLogger.error("could not find published track",{participant:this.sid,trackSid:d}),this.emit(ParticipantEvent.TrackSubscriptionFailed,d);return}y===void 0&&(y=20),setTimeout(()=>{this.addSubscribedMediaTrack(s,d,c,h,v,y-1)},150);return}const _=s.kind==="video";let T;return _?T=new RemoteVideoTrack(s,d,h,v):T=new RemoteAudioTrack(s,d,h),T.source=b.source,T.isMuted=b.isMuted,T.setMediaStream(c),T.start(),b.setTrack(T),this.emit(ParticipantEvent.TrackSubscribed,T,b),b}get hasMetadata(){return!!this.participantInfo}getTrackPublication(s){return this.tracks.get(s)}updateInfo(s){const d=this.hasMetadata;super.updateInfo(s);const c=new Map,h=new Map;s.tracks.forEach(v=>{let y=this.getTrackPublication(v.sid);if(y)y.updateInfo(v);else{const b=Track.kindFromProto(v.type);if(!b)return;y=new RemoteTrackPublication(b,v.sid,v.name),y.updateInfo(v),h.set(v.sid,y),this.addTrackPublication(y)}c.set(v.sid,y)}),d&&h.forEach(v=>{this.emit(ParticipantEvent.TrackPublished,v)}),this.tracks.forEach(v=>{c.has(v.trackSid)||this.unpublishTrack(v.trackSid,!0)})}unpublishTrack(s,d){const c=this.tracks.get(s);if(!c)return;switch(this.tracks.delete(s),c.kind){case Track.Kind.Audio:this.audioTracks.delete(s);break;case Track.Kind.Video:this.videoTracks.delete(s);break}const{track:h}=c;if(h){const{isSubscribed:v}=c;h.stop(),c.setTrack(void 0),v&&this.emit(ParticipantEvent.TrackUnsubscribed,h,c)}d&&this.emit(ParticipantEvent.TrackUnpublished,c)}emit(s){for(var d=arguments.length,c=new Array(d>1?d-1:0),h=1;h<d;h++)c[h-1]=arguments[h];return livekitLogger.trace("participant event",{participant:this.sid,event:s,args:c}),super.emit(s,...c)}}class LocalParticipant extends Participant{constructor(s,d,c,h){super(s,d),this.pendingPublishing=new Set,this.onTrackUnmuted=v=>{this.onTrackMuted(v,v.isUpstreamPaused)},this.onTrackMuted=(v,y)=>{if(y===void 0&&(y=!0),!v.sid){livekitLogger.error("could not update mute status for unpublished track",v);return}this.engine.updateMuteStatus(v.sid,y)},this.onTrackUpstreamPaused=v=>{livekitLogger.debug("upstream paused"),this.onTrackMuted(v,!0)},this.onTrackUpstreamResumed=v=>{livekitLogger.debug("upstream resumed"),this.onTrackMuted(v,v.isMuted)},this.handleSubscribedQualityUpdate=v=>{var y,b;if(!(!((y=this.roomOptions)===null||y===void 0)&&y.dynacast))return;const _=this.videoTracks.get(v.trackSid);if(!_){livekitLogger.warn("received subscribed quality update for unknown track",{method:"handleSubscribedQualityUpdate",sid:v.trackSid});return}(b=_.videoTrack)===null||b===void 0||b.setPublishingLayers(v.subscribedQualities)},this.handleLocalTrackUnpublished=v=>{const y=this.tracks.get(v.trackSid);if(!y){livekitLogger.warn("received unpublished event for unknown track",{method:"handleLocalTrackUnpublished",trackSid:v.trackSid});return}this.unpublishTrack(y.track)},this.onTrackUnpublish=v=>{this.unpublishTrack(v)},this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=c,this.roomOptions=h,this.engine.client.onRemoteMuteChanged=(v,y)=>{const b=this.tracks.get(v);!b||!b.track||(y?b.mute():b.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate,this.engine.client.onLocalTrackUnpublished=this.handleLocalTrackUnpublished}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}getTrack(s){const d=super.getTrack(s);if(d)return d}getTrackByName(s){const d=super.getTrackByName(s);if(d)return d}setCameraEnabled(s){return this.setTrackEnabled(Track.Source.Camera,s)}setMicrophoneEnabled(s){return this.setTrackEnabled(Track.Source.Microphone,s)}setScreenShareEnabled(s){return this.setTrackEnabled(Track.Source.ScreenShare,s)}setPermissions(s){const d=this.permissions,c=super.setPermissions(s);return c&&d&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,d),c}async setTrackEnabled(s,d){livekitLogger.debug("setTrackEnabled",{source:s,enabled:d});let c=this.getTrack(s);if(d)if(c)await c.unmute();else{let h;if(this.pendingPublishing.has(s)){livekitLogger.info("skipping duplicate published source",{source:s});return}this.pendingPublishing.add(s);try{switch(s){case Track.Source.Camera:[h]=await this.createTracks({video:!0});break;case Track.Source.Microphone:[h]=await this.createTracks({audio:!0});break;case Track.Source.ScreenShare:[h]=await this.createScreenTracks({audio:!1});break;default:throw new TrackInvalidError(s)}c=await this.publishTrack(h)}catch(v){throw v instanceof Error&&!(v instanceof TrackInvalidError)&&this.emit(ParticipantEvent.MediaDevicesError,v),v}finally{this.pendingPublishing.delete(s)}}else c&&c.track&&(s===Track.Source.ScreenShare?c=this.unpublishTrack(c.track):await c.mute());return c}async enableCameraAndMicrophone(){if(!(this.pendingPublishing.has(Track.Source.Camera)||this.pendingPublishing.has(Track.Source.Microphone))){this.pendingPublishing.add(Track.Source.Camera),this.pendingPublishing.add(Track.Source.Microphone);try{const s=await this.createTracks({audio:!0,video:!0});await Promise.all(s.map(d=>this.publishTrack(d)))}finally{this.pendingPublishing.delete(Track.Source.Camera),this.pendingPublishing.delete(Track.Source.Microphone)}}}async createTracks(s){var d,c;const h=mergeDefaultOptions(s,(d=this.roomOptions)===null||d===void 0?void 0:d.audioCaptureDefaults,(c=this.roomOptions)===null||c===void 0?void 0:c.videoCaptureDefaults),v=constraintsForOptions(h);let y;try{y=await navigator.mediaDevices.getUserMedia(v)}catch(b){throw b instanceof Error&&(v.audio&&(this.microphoneError=b),v.video&&(this.cameraError=b)),b}return v.audio&&(this.microphoneError=void 0),v.video&&(this.cameraError=void 0),y.getTracks().map(b=>{const _=b.kind==="audio";_?s.audio:s.video;let T;const I=_?v.audio:v.video;typeof I!="boolean"&&(T=I);const N=mediaTrackToLocalTrack(b,T);return N.kind===Track.Kind.Video?N.source=Track.Source.Camera:N.kind===Track.Kind.Audio&&(N.source=Track.Source.Microphone),N.mediaStream=y,N})}async createScreenTracks(s){var d;s===void 0&&(s={}),s.resolution===void 0&&(s.resolution=ScreenSharePresets.h1080fps15.resolution);let c=!0;s.resolution&&(c={width:s.resolution.width,height:s.resolution.height,frameRate:s.resolution.frameRate});const h=await navigator.mediaDevices.getDisplayMedia({audio:(d=s.audio)!==null&&d!==void 0?d:!1,video:c}),v=h.getVideoTracks();if(v.length===0)throw new TrackInvalidError("no video track found");const y=new LocalVideoTrack(v[0]);y.source=Track.Source.ScreenShare;const b=[y];if(h.getAudioTracks().length>0){const _=new LocalAudioTrack(h.getAudioTracks()[0]);_.source=Track.Source.ScreenShareAudio,b.push(_)}return b}async publishTrack(s,d){var c,h,v,y,b,_,T;const I=_objectSpread2(_objectSpread2({},(c=this.roomOptions)===null||c===void 0?void 0:c.publishDefaults),d);if(s instanceof MediaStreamTrack)switch(s.kind){case"audio":s=new LocalAudioTrack(s);break;case"video":s=new LocalVideoTrack(s);break;default:throw new TrackInvalidError("unsupported MediaStreamTrack kind ".concat(s.kind))}let N;if(this.tracks.forEach(O=>{!O.track||O.track===s&&(N=O)}),N)return N;I.source&&(s.source=I.source),I.stopMicTrackOnMute&&s instanceof LocalAudioTrack&&(s.stopOnMute=!0),s.source===Track.Source.ScreenShare&&isFireFox()&&(I.simulcast=!1),s.on(TrackEvent.Muted,this.onTrackMuted),s.on(TrackEvent.Unmuted,this.onTrackUnmuted),s.on(TrackEvent.Ended,this.onTrackUnpublish),s.on(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),s.on(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed);const A=AddTrackRequest.fromPartial({cid:s.mediaStreamTrack.id,name:d==null?void 0:d.name,type:Track.kindToProto(s.kind),muted:s.isMuted,source:Track.sourceToProto(s.source),disableDtx:!(!((h=I==null?void 0:I.dtx)!==null&&h!==void 0)||h)});let V;if(s.kind===Track.Kind.Video){const O=s.mediaStreamTrack.getSettings(),x=(v=O.width)!==null&&v!==void 0?v:(y=s.dimensions)===null||y===void 0?void 0:y.width,j=(b=O.height)!==null&&b!==void 0?b:(_=s.dimensions)===null||_===void 0?void 0:_.height;A.width=x!=null?x:0,A.height=j!=null?j:0,s instanceof LocalVideoTrack&&((I==null?void 0:I.videoCodec)==="vp9"||(I==null?void 0:I.videoCodec)==="av1"?(I.simulcast=!1,I.scalabilityMode=(T=I.scalabilityMode)!==null&&T!==void 0?T:"L3T3"):I.scalabilityMode=void 0),V=computeVideoEncodings(s.source===Track.Source.ScreenShare,x,j,I),A.layers=videoLayersFromEncodings(A.width,A.height,V)}else s.kind===Track.Kind.Audio&&I.audioBitrate&&(V=[{maxBitrate:I.audioBitrate}]);const $=await this.engine.addTrack(A),L=new LocalTrackPublication(s.kind,$,s);if(s.sid=$.sid,!this.engine.publisher)throw new UnexpectedConnectionState("publisher is closed");livekitLogger.debug("publishing ".concat(s.kind," with encodings"),{encodings:V,trackInfo:$});const D={direction:"sendonly"};V&&(D.sendEncodings=V);const H=this.engine.publisher.pc.addTransceiver(s.mediaStreamTrack,D);return I.videoCodec&&this.setPreferredCodec(H,s.kind,I.videoCodec),this.engine.negotiate(),s.sender=H.sender,s instanceof LocalVideoTrack?s.startMonitor(this.engine.client):s instanceof LocalAudioTrack&&s.startMonitor(),this.addTrackPublication(L),this.emit(ParticipantEvent.LocalTrackPublished,L),L}unpublishTrack(s,d){var c,h;const v=this.getPublicationForTrack(s);if(livekitLogger.debug("unpublishing track",{track:s,method:"unpublishTrack"}),!v||!v.track){livekitLogger.warn("track was not unpublished because no publication was found",{track:s,method:"unpublishTrack"});return}s=v.track,s.off(TrackEvent.Muted,this.onTrackMuted),s.off(TrackEvent.Unmuted,this.onTrackUnmuted),s.off(TrackEvent.Ended,this.onTrackUnpublish),s.off(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),s.off(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),d===void 0&&(d=(h=(c=this.roomOptions)===null||c===void 0?void 0:c.stopLocalTrackOnUnpublish)!==null&&h!==void 0?h:!0),d&&s.stop();const{mediaStreamTrack:y}=s;switch(this.engine.publisher&&this.engine.publisher.pc.getSenders().forEach(_=>{var T;if(_.track===y)try{(T=this.engine.publisher)===null||T===void 0||T.pc.removeTrack(_),this.engine.negotiate()}catch(I){livekitLogger.warn("failed to remove track",{error:I,method:"unpublishTrack"})}}),this.tracks.delete(v.trackSid),v.kind){case Track.Kind.Audio:this.audioTracks.delete(v.trackSid);break;case Track.Kind.Video:this.videoTracks.delete(v.trackSid);break}return this.emit(ParticipantEvent.LocalTrackUnpublished,v),v.setTrack(void 0),v}unpublishTracks(s){const d=[];return s.forEach(c=>{const h=this.unpublishTrack(c);h&&d.push(h)}),d}async publishData(s,d,c){const h=[];c!==void 0&&c.forEach(y=>{y instanceof RemoteParticipant?h.push(y.sid):h.push(y)});const v={kind:d,user:{participantSid:this.sid,payload:s,destinationSids:h}};await this.engine.sendDataPacket(v,d)}setTrackSubscriptionPermissions(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.engine.client.sendUpdateSubscriptionPermissions(s,d.map(c=>trackPermissionToProto(c)))}getPublicationForTrack(s){let d;return this.tracks.forEach(c=>{const h=c.track;!h||(s instanceof MediaStreamTrack?(h instanceof LocalAudioTrack||h instanceof LocalVideoTrack)&&h.mediaStreamTrack===s&&(d=c):s===h&&(d=c))}),d}setPreferredCodec(s,d,c){if(!("getCapabilities"in RTCRtpSender))return;const h=RTCRtpSender.getCapabilities(d);if(!h)return;let v;const y=[];h.codecs.forEach(b=>{const _=b.mimeType.toLowerCase(),T=_==="video/".concat(c);if(v!==void 0){y.push(b);return}if(c==="h264"&&b.sdpFmtpLine&&T&&b.sdpFmtpLine.includes("profile-level-id=42e01f")){v=b;return}if(T||_==="audio/opus"){v=b;return}y.push(b)}),v&&"setCodecPreferences"in s&&(y.unshift(v),s.setCodecPreferences(y))}publishedTracksInfo(){const s=[];return this.tracks.forEach(d=>{d.track!==void 0&&s.push({cid:d.track.mediaStreamTrack.id,track:d.trackInfo})}),s}dataChannelsInfo(){const s=[],d=(c,h)=>{(c==null?void 0:c.id)!==void 0&&c.id!==null&&s.push({label:c.label,id:c.id,target:h})};return d(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY),SignalTarget.PUBLISHER),d(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE),SignalTarget.PUBLISHER),d(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY,!0),SignalTarget.SUBSCRIBER),d(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE,!0),SignalTarget.SUBSCRIBER),s}}class Queue{constructor(){this.queue=[],this.running=!1}enqueue(s){livekitLogger.trace("enqueuing request to fire later"),this.queue.push(s)}dequeue(){const s=this.queue.shift();s&&s(),livekitLogger.trace("firing request from queue")}async run(){if(!this.running){for(livekitLogger.trace("start queue"),this.running=!0;this.running&&this.queue.length>0;)this.dequeue();this.running=!1,livekitLogger.trace("queue finished")}}pause(){livekitLogger.trace("pausing queue"),this.running=!1}reset(){livekitLogger.trace("resetting queue"),this.running=!1,this.queue=[]}isRunning(){return this.running}isEmpty(){return this.queue.length===0}}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(a,s,d){const c=a.match(s);return c&&c.length>=d&&parseInt(c[d],10)}function wrapPeerConnectionEvent(a,s,d){if(!a.RTCPeerConnection)return;const c=a.RTCPeerConnection.prototype,h=c.addEventListener;c.addEventListener=function(y,b){if(y!==s)return h.apply(this,arguments);const _=T=>{const I=d(T);I&&(b.handleEvent?b.handleEvent(I):b(I))};return this._eventMap=this._eventMap||{},this._eventMap[s]||(this._eventMap[s]=new Map),this._eventMap[s].set(b,_),h.apply(this,[y,_])};const v=c.removeEventListener;c.removeEventListener=function(y,b){if(y!==s||!this._eventMap||!this._eventMap[s])return v.apply(this,arguments);if(!this._eventMap[s].has(b))return v.apply(this,arguments);const _=this._eventMap[s].get(b);return this._eventMap[s].delete(b),this._eventMap[s].size===0&&delete this._eventMap[s],Object.keys(this._eventMap).length===0&&delete this._eventMap,v.apply(this,[y,_])},Object.defineProperty(c,"on"+s,{get(){return this["_on"+s]},set(y){this["_on"+s]&&(this.removeEventListener(s,this["_on"+s]),delete this["_on"+s]),y&&this.addEventListener(s,this["_on"+s]=y)},enumerable:!0,configurable:!0})}function disableLog(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(logDisabled_=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(deprecationWarnings_=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(a,s){!deprecationWarnings_||console.warn(a+" is deprecated, please use "+s+" instead.")}function detectBrowser(a){const s={browser:null,version:null};if(typeof a=="undefined"||!a.navigator)return s.browser="Not a browser.",s;const{navigator:d}=a;if(d.mozGetUserMedia)s.browser="firefox",s.version=extractVersion(d.userAgent,/Firefox\/(\d+)\./,1);else if(d.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection&&!a.RTCIceGatherer)s.browser="chrome",s.version=extractVersion(d.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&d.userAgent.match(/AppleWebKit\/(\d+)\./))s.browser="safari",s.version=extractVersion(d.userAgent,/AppleWebKit\/(\d+)\./,1),s.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return s.browser="Not a supported browser.",s;return s}function isObject$3(a){return Object.prototype.toString.call(a)==="[object Object]"}function compactObject(a){return isObject$3(a)?Object.keys(a).reduce(function(s,d){const c=isObject$3(a[d]),h=c?compactObject(a[d]):a[d],v=c&&!Object.keys(h).length;return h===void 0||v?s:Object.assign(s,{[d]:h})},{}):a}function walkStats(a,s,d){!s||d.has(s.id)||(d.set(s.id,s),Object.keys(s).forEach(c=>{c.endsWith("Id")?walkStats(a,a.get(s[c]),d):c.endsWith("Ids")&&s[c].forEach(h=>{walkStats(a,a.get(h),d)})}))}function filterStats(a,s,d){const c=d?"outbound-rtp":"inbound-rtp",h=new Map;if(s===null)return h;const v=[];return a.forEach(y=>{y.type==="track"&&y.trackIdentifier===s.id&&v.push(y)}),v.forEach(y=>{a.forEach(b=>{b.type===c&&b.trackId===y.id&&walkStats(a,b,h)})}),h}const logging=log;function shimGetUserMedia$2(a,s){const d=a&&a.navigator;if(!d.mediaDevices)return;const c=function(b){if(typeof b!="object"||b.mandatory||b.optional)return b;const _={};return Object.keys(b).forEach(T=>{if(T==="require"||T==="advanced"||T==="mediaSource")return;const I=typeof b[T]=="object"?b[T]:{ideal:b[T]};I.exact!==void 0&&typeof I.exact=="number"&&(I.min=I.max=I.exact);const N=function(A,V){return A?A+V.charAt(0).toUpperCase()+V.slice(1):V==="deviceId"?"sourceId":V};if(I.ideal!==void 0){_.optional=_.optional||[];let A={};typeof I.ideal=="number"?(A[N("min",T)]=I.ideal,_.optional.push(A),A={},A[N("max",T)]=I.ideal,_.optional.push(A)):(A[N("",T)]=I.ideal,_.optional.push(A))}I.exact!==void 0&&typeof I.exact!="number"?(_.mandatory=_.mandatory||{},_.mandatory[N("",T)]=I.exact):["min","max"].forEach(A=>{I[A]!==void 0&&(_.mandatory=_.mandatory||{},_.mandatory[N(A,T)]=I[A])})}),b.advanced&&(_.optional=(_.optional||[]).concat(b.advanced)),_},h=function(b,_){if(s.version>=61)return _(b);if(b=JSON.parse(JSON.stringify(b)),b&&typeof b.audio=="object"){const T=function(I,N,A){N in I&&!(A in I)&&(I[A]=I[N],delete I[N])};b=JSON.parse(JSON.stringify(b)),T(b.audio,"autoGainControl","googAutoGainControl"),T(b.audio,"noiseSuppression","googNoiseSuppression"),b.audio=c(b.audio)}if(b&&typeof b.video=="object"){let T=b.video.facingMode;T=T&&(typeof T=="object"?T:{ideal:T});const I=s.version<66;if(T&&(T.exact==="user"||T.exact==="environment"||T.ideal==="user"||T.ideal==="environment")&&!(d.mediaDevices.getSupportedConstraints&&d.mediaDevices.getSupportedConstraints().facingMode&&!I)){delete b.video.facingMode;let N;if(T.exact==="environment"||T.ideal==="environment"?N=["back","rear"]:(T.exact==="user"||T.ideal==="user")&&(N=["front"]),N)return d.mediaDevices.enumerateDevices().then(A=>{A=A.filter($=>$.kind==="videoinput");let V=A.find($=>N.some(L=>$.label.toLowerCase().includes(L)));return!V&&A.length&&N.includes("back")&&(V=A[A.length-1]),V&&(b.video.deviceId=T.exact?{exact:V.deviceId}:{ideal:V.deviceId}),b.video=c(b.video),logging("chrome: "+JSON.stringify(b)),_(b)})}b.video=c(b.video)}return logging("chrome: "+JSON.stringify(b)),_(b)},v=function(b){return s.version>=64?b:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[b.name]||b.name,message:b.message,constraint:b.constraint||b.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},y=function(b,_,T){h(b,I=>{d.webkitGetUserMedia(I,_,N=>{T&&T(v(N))})})};if(d.getUserMedia=y.bind(d),d.mediaDevices.getUserMedia){const b=d.mediaDevices.getUserMedia.bind(d.mediaDevices);d.mediaDevices.getUserMedia=function(_){return h(_,T=>b(T).then(I=>{if(T.audio&&!I.getAudioTracks().length||T.video&&!I.getVideoTracks().length)throw I.getTracks().forEach(N=>{N.stop()}),new DOMException("","NotFoundError");return I},I=>Promise.reject(v(I))))}}}function shimGetDisplayMedia$1(a,s){if(!(a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices)&&!!a.navigator.mediaDevices){if(typeof s!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}a.navigator.mediaDevices.getDisplayMedia=function(c){return s(c).then(h=>{const v=c.video&&c.video.width,y=c.video&&c.video.height,b=c.video&&c.video.frameRate;return c.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:h,maxFrameRate:b||3}},v&&(c.video.mandatory.maxWidth=v),y&&(c.video.mandatory.maxHeight=y),a.navigator.mediaDevices.getUserMedia(c)})}}}function shimMediaStream(a){a.MediaStream=a.MediaStream||a.webkitMediaStream}function shimOnTrack$1(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("ontrack"in a.RTCPeerConnection.prototype)){Object.defineProperty(a.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(d){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=d)},enumerable:!0,configurable:!0});const s=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=c=>{c.stream.addEventListener("addtrack",h=>{let v;a.RTCPeerConnection.prototype.getReceivers?v=this.getReceivers().find(b=>b.track&&b.track.id===h.track.id):v={track:h.track};const y=new Event("track");y.track=h.track,y.receiver=v,y.transceiver={receiver:v},y.streams=[c.stream],this.dispatchEvent(y)}),c.stream.getTracks().forEach(h=>{let v;a.RTCPeerConnection.prototype.getReceivers?v=this.getReceivers().find(b=>b.track&&b.track.id===h.id):v={track:h};const y=new Event("track");y.track=h,y.receiver=v,y.transceiver={receiver:v},y.streams=[c.stream],this.dispatchEvent(y)})},this.addEventListener("addstream",this._ontrackpoly)),s.apply(this,arguments)}}else wrapPeerConnectionEvent(a,"track",s=>(s.transceiver||Object.defineProperty(s,"transceiver",{value:{receiver:s.receiver}}),s))}function shimGetSendersWithDtmf(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("getSenders"in a.RTCPeerConnection.prototype)&&"createDTMFSender"in a.RTCPeerConnection.prototype){const s=function(h,v){return{track:v,get dtmf(){return this._dtmf===void 0&&(v.kind==="audio"?this._dtmf=h.createDTMFSender(v):this._dtmf=null),this._dtmf},_pc:h}};if(!a.RTCPeerConnection.prototype.getSenders){a.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const h=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(b,_){let T=h.apply(this,arguments);return T||(T=s(this,b),this._senders.push(T)),T};const v=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(b){v.apply(this,arguments);const _=this._senders.indexOf(b);_!==-1&&this._senders.splice(_,1)}}const d=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(v){this._senders=this._senders||[],d.apply(this,[v]),v.getTracks().forEach(y=>{this._senders.push(s(this,y))})};const c=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(v){this._senders=this._senders||[],c.apply(this,[v]),v.getTracks().forEach(y=>{const b=this._senders.find(_=>_.track===y);b&&this._senders.splice(this._senders.indexOf(b),1)})}}else if(typeof a=="object"&&a.RTCPeerConnection&&"getSenders"in a.RTCPeerConnection.prototype&&"createDTMFSender"in a.RTCPeerConnection.prototype&&a.RTCRtpSender&&!("dtmf"in a.RTCRtpSender.prototype)){const s=a.RTCPeerConnection.prototype.getSenders;a.RTCPeerConnection.prototype.getSenders=function(){const c=s.apply(this,[]);return c.forEach(h=>h._pc=this),c},Object.defineProperty(a.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(a){if(!a.RTCPeerConnection)return;const s=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[c,h,v]=arguments;if(arguments.length>0&&typeof c=="function")return s.apply(this,arguments);if(s.length===0&&(arguments.length===0||typeof c!="function"))return s.apply(this,[]);const y=function(_){const T={};return _.result().forEach(N=>{const A={id:N.id,timestamp:N.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[N.type]||N.type};N.names().forEach(V=>{A[V]=N.stat(V)}),T[A.id]=A}),T},b=function(_){return new Map(Object.keys(_).map(T=>[T,_[T]]))};if(arguments.length>=2){const _=function(T){h(b(y(T)))};return s.apply(this,[_,c])}return new Promise((_,T)=>{s.apply(this,[function(I){_(b(y(I)))},T])}).then(h,v)}}function shimSenderReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender&&a.RTCRtpReceiver))return;if(!("getStats"in a.RTCRtpSender.prototype)){const d=a.RTCPeerConnection.prototype.getSenders;d&&(a.RTCPeerConnection.prototype.getSenders=function(){const v=d.apply(this,[]);return v.forEach(y=>y._pc=this),v});const c=a.RTCPeerConnection.prototype.addTrack;c&&(a.RTCPeerConnection.prototype.addTrack=function(){const v=c.apply(this,arguments);return v._pc=this,v}),a.RTCRtpSender.prototype.getStats=function(){const v=this;return this._pc.getStats().then(y=>filterStats(y,v.track,!0))}}if(!("getStats"in a.RTCRtpReceiver.prototype)){const d=a.RTCPeerConnection.prototype.getReceivers;d&&(a.RTCPeerConnection.prototype.getReceivers=function(){const h=d.apply(this,[]);return h.forEach(v=>v._pc=this),h}),wrapPeerConnectionEvent(a,"track",c=>(c.receiver._pc=c.srcElement,c)),a.RTCRtpReceiver.prototype.getStats=function(){const h=this;return this._pc.getStats().then(v=>filterStats(v,h.track,!1))}}if(!("getStats"in a.RTCRtpSender.prototype&&"getStats"in a.RTCRtpReceiver.prototype))return;const s=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof a.MediaStreamTrack){const c=arguments[0];let h,v,y;return this.getSenders().forEach(b=>{b.track===c&&(h?y=!0:h=b)}),this.getReceivers().forEach(b=>(b.track===c&&(v?y=!0:v=b),b.track===c)),y||h&&v?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):h?h.getStats():v?v.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return s.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(a){a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(y=>this._shimmedLocalStreams[y][0])};const s=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(y,b){if(!b)return s.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const _=s.apply(this,arguments);return this._shimmedLocalStreams[b.id]?this._shimmedLocalStreams[b.id].indexOf(_)===-1&&this._shimmedLocalStreams[b.id].push(_):this._shimmedLocalStreams[b.id]=[b,_],_};const d=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(y){this._shimmedLocalStreams=this._shimmedLocalStreams||{},y.getTracks().forEach(T=>{if(this.getSenders().find(N=>N.track===T))throw new DOMException("Track already exists.","InvalidAccessError")});const b=this.getSenders();d.apply(this,arguments);const _=this.getSenders().filter(T=>b.indexOf(T)===-1);this._shimmedLocalStreams[y.id]=[y].concat(_)};const c=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(y){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[y.id],c.apply(this,arguments)};const h=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(y){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},y&&Object.keys(this._shimmedLocalStreams).forEach(b=>{const _=this._shimmedLocalStreams[b].indexOf(y);_!==-1&&this._shimmedLocalStreams[b].splice(_,1),this._shimmedLocalStreams[b].length===1&&delete this._shimmedLocalStreams[b]}),h.apply(this,arguments)}}function shimAddTrackRemoveTrack(a,s){if(!a.RTCPeerConnection)return;if(a.RTCPeerConnection.prototype.addTrack&&s.version>=65)return shimAddTrackRemoveTrackWithNative(a);const d=a.RTCPeerConnection.prototype.getLocalStreams;a.RTCPeerConnection.prototype.getLocalStreams=function(){const I=d.apply(this);return this._reverseStreams=this._reverseStreams||{},I.map(N=>this._reverseStreams[N.id])};const c=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(I){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},I.getTracks().forEach(N=>{if(this.getSenders().find(V=>V.track===N))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[I.id]){const N=new a.MediaStream(I.getTracks());this._streams[I.id]=N,this._reverseStreams[N.id]=I,I=N}c.apply(this,[I])};const h=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(I){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.apply(this,[this._streams[I.id]||I]),delete this._reverseStreams[this._streams[I.id]?this._streams[I.id].id:I.id],delete this._streams[I.id]},a.RTCPeerConnection.prototype.addTrack=function(I,N){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const A=[].slice.call(arguments,1);if(A.length!==1||!A[0].getTracks().find(L=>L===I))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(L=>L.track===I))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const $=this._streams[N.id];if($)$.addTrack(I),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const L=new a.MediaStream([I]);this._streams[N.id]=L,this._reverseStreams[L.id]=N,this.addStream(L)}return this.getSenders().find(L=>L.track===I)};function v(T,I){let N=I.sdp;return Object.keys(T._reverseStreams||[]).forEach(A=>{const V=T._reverseStreams[A],$=T._streams[V.id];N=N.replace(new RegExp($.id,"g"),V.id)}),new RTCSessionDescription({type:I.type,sdp:N})}function y(T,I){let N=I.sdp;return Object.keys(T._reverseStreams||[]).forEach(A=>{const V=T._reverseStreams[A],$=T._streams[V.id];N=N.replace(new RegExp(V.id,"g"),$.id)}),new RTCSessionDescription({type:I.type,sdp:N})}["createOffer","createAnswer"].forEach(function(T){const I=a.RTCPeerConnection.prototype[T],N={[T](){const A=arguments;return arguments.length&&typeof arguments[0]=="function"?I.apply(this,[$=>{const L=v(this,$);A[0].apply(null,[L])},$=>{A[1]&&A[1].apply(null,$)},arguments[2]]):I.apply(this,arguments).then($=>v(this,$))}};a.RTCPeerConnection.prototype[T]=N[T]});const b=a.RTCPeerConnection.prototype.setLocalDescription;a.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?b.apply(this,arguments):(arguments[0]=y(this,arguments[0]),b.apply(this,arguments))};const _=Object.getOwnPropertyDescriptor(a.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(a.RTCPeerConnection.prototype,"localDescription",{get(){const T=_.get.apply(this);return T.type===""?T:v(this,T)}}),a.RTCPeerConnection.prototype.removeTrack=function(I){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!I._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(I._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let A;Object.keys(this._streams).forEach(V=>{this._streams[V].getTracks().find(L=>I.track===L)&&(A=this._streams[V])}),A&&(A.getTracks().length===1?this.removeStream(this._reverseStreams[A.id]):A.removeTrack(I.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(a,s){!a.RTCPeerConnection&&a.webkitRTCPeerConnection&&(a.RTCPeerConnection=a.webkitRTCPeerConnection),!!a.RTCPeerConnection&&s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(d){const c=a.RTCPeerConnection.prototype[d],h={[d](){return arguments[0]=new(d==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};a.RTCPeerConnection.prototype[d]=h[d]})}function fixNegotiationNeeded(a,s){wrapPeerConnectionEvent(a,"negotiationneeded",d=>{const c=d.target;if(!((s.version<72||c.getConfiguration&&c.getConfiguration().sdpSemantics==="plan-b")&&c.signalingState!=="stable"))return d})}var chromeShim=Object.freeze({__proto__:null,shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf,shimGetStats,shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$1,fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1});function shimGetUserMedia$1(a,s){const d=a&&a.navigator,c=a&&a.MediaStreamTrack;if(d.getUserMedia=function(h,v,y){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),d.mediaDevices.getUserMedia(h).then(v,y)},!(s.version>55&&"autoGainControl"in d.mediaDevices.getSupportedConstraints())){const h=function(y,b,_){b in y&&!(_ in y)&&(y[_]=y[b],delete y[b])},v=d.mediaDevices.getUserMedia.bind(d.mediaDevices);if(d.mediaDevices.getUserMedia=function(y){return typeof y=="object"&&typeof y.audio=="object"&&(y=JSON.parse(JSON.stringify(y)),h(y.audio,"autoGainControl","mozAutoGainControl"),h(y.audio,"noiseSuppression","mozNoiseSuppression")),v(y)},c&&c.prototype.getSettings){const y=c.prototype.getSettings;c.prototype.getSettings=function(){const b=y.apply(this,arguments);return h(b,"mozAutoGainControl","autoGainControl"),h(b,"mozNoiseSuppression","noiseSuppression"),b}}if(c&&c.prototype.applyConstraints){const y=c.prototype.applyConstraints;c.prototype.applyConstraints=function(b){return this.kind==="audio"&&typeof b=="object"&&(b=JSON.parse(JSON.stringify(b)),h(b,"autoGainControl","mozAutoGainControl"),h(b,"noiseSuppression","mozNoiseSuppression")),y.apply(this,[b])}}}}function shimGetDisplayMedia(a,s){a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices||!a.navigator.mediaDevices||(a.navigator.mediaDevices.getDisplayMedia=function(c){if(!(c&&c.video)){const h=new DOMException("getDisplayMedia without video constraints is undefined");return h.name="NotFoundError",h.code=8,Promise.reject(h)}return c.video===!0?c.video={mediaSource:s}:c.video.mediaSource=s,a.navigator.mediaDevices.getUserMedia(c)})}function shimOnTrack(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(a,s){if(typeof a!="object"||!(a.RTCPeerConnection||a.mozRTCPeerConnection))return;!a.RTCPeerConnection&&a.mozRTCPeerConnection&&(a.RTCPeerConnection=a.mozRTCPeerConnection),s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(h){const v=a.RTCPeerConnection.prototype[h],y={[h](){return arguments[0]=new(h==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),v.apply(this,arguments)}};a.RTCPeerConnection.prototype[h]=y[h]});const d={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[v,y,b]=arguments;return c.apply(this,[v||null]).then(_=>{if(s.version<53&&!y)try{_.forEach(T=>{T.type=d[T.type]||T.type})}catch(T){if(T.name!=="TypeError")throw T;_.forEach((I,N)=>{_.set(N,Object.assign({},I,{type:d[I.type]||I.type}))})}return _}).then(y,b)}}function shimSenderGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpSender.prototype)return;const s=a.RTCPeerConnection.prototype.getSenders;s&&(a.RTCPeerConnection.prototype.getSenders=function(){const h=s.apply(this,[]);return h.forEach(v=>v._pc=this),h});const d=a.RTCPeerConnection.prototype.addTrack;d&&(a.RTCPeerConnection.prototype.addTrack=function(){const h=d.apply(this,arguments);return h._pc=this,h}),a.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpReceiver.prototype)return;const s=a.RTCPeerConnection.prototype.getReceivers;s&&(a.RTCPeerConnection.prototype.getReceivers=function(){const c=s.apply(this,[]);return c.forEach(h=>h._pc=this),c}),wrapPeerConnectionEvent(a,"track",d=>(d.receiver._pc=d.srcElement,d)),a.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(a){!a.RTCPeerConnection||"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(d){deprecated("removeStream","removeTrack"),this.getSenders().forEach(c=>{c.track&&d.getTracks().includes(c.track)&&this.removeTrack(c)})})}function shimRTCDataChannel(a){a.DataChannel&&!a.RTCDataChannel&&(a.RTCDataChannel=a.DataChannel)}function shimAddTransceiver(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.addTransceiver;s&&(a.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const c=arguments[1],h=c&&"sendEncodings"in c;h&&c.sendEncodings.forEach(y=>{if("rid"in y&&!/^[a-z0-9]{0,16}$/i.test(y.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in y&&!(parseFloat(y.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in y&&!(parseFloat(y.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const v=s.apply(this,arguments);if(h){const{sender:y}=v,b=y.getParameters();(!("encodings"in b)||b.encodings.length===1&&Object.keys(b.encodings[0]).length===0)&&(b.encodings=c.sendEncodings,y.sendEncodings=c.sendEncodings,this.setParametersPromises.push(y.setParameters(b).then(()=>{delete y.sendEncodings}).catch(()=>{delete y.sendEncodings})))}return v})}function shimGetParameters(a){if(!(typeof a=="object"&&a.RTCRtpSender))return;const s=a.RTCRtpSender.prototype.getParameters;s&&(a.RTCRtpSender.prototype.getParameters=function(){const c=s.apply(this,arguments);return"encodings"in c||(c.encodings=[].concat(this.sendEncodings||[{}])),c})}function shimCreateOffer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}function shimCreateAnswer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.createAnswer;a.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}var firefoxShim=Object.freeze({__proto__:null,shimOnTrack,shimPeerConnection,shimSenderGetStats,shimReceiverGetStats,shimRemoveStream,shimRTCDataChannel,shimAddTransceiver,shimGetParameters,shimCreateOffer,shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia});function shimLocalStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){const s=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(c){this._localStreams||(this._localStreams=[]),this._localStreams.includes(c)||this._localStreams.push(c),c.getAudioTracks().forEach(h=>s.call(this,h,c)),c.getVideoTracks().forEach(h=>s.call(this,h,c))},a.RTCPeerConnection.prototype.addTrack=function(c){for(var h=arguments.length,v=new Array(h>1?h-1:0),y=1;y<h;y++)v[y-1]=arguments[y];return v&&v.forEach(b=>{this._localStreams?this._localStreams.includes(b)||this._localStreams.push(b):this._localStreams=[b]}),s.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(d){this._localStreams||(this._localStreams=[]);const c=this._localStreams.indexOf(d);if(c===-1)return;this._localStreams.splice(c,1);const h=d.getTracks();this.getSenders().forEach(v=>{h.includes(v.track)&&this.removeTrack(v)})})}}function shimRemoteStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(d){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=d),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(h=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(h))return;this._remoteStreams.push(h);const v=new Event("addstream");v.stream=h,this.dispatchEvent(v)})})}});const s=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){const c=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(h){h.streams.forEach(v=>{if(c._remoteStreams||(c._remoteStreams=[]),c._remoteStreams.indexOf(v)>=0)return;c._remoteStreams.push(v);const y=new Event("addstream");y.stream=v,c.dispatchEvent(y)})}),s.apply(c,arguments)}}}function shimCallbacksAPI(a){if(typeof a!="object"||!a.RTCPeerConnection)return;const s=a.RTCPeerConnection.prototype,d=s.createOffer,c=s.createAnswer,h=s.setLocalDescription,v=s.setRemoteDescription,y=s.addIceCandidate;s.createOffer=function(T,I){const N=arguments.length>=2?arguments[2]:arguments[0],A=d.apply(this,[N]);return I?(A.then(T,I),Promise.resolve()):A},s.createAnswer=function(T,I){const N=arguments.length>=2?arguments[2]:arguments[0],A=c.apply(this,[N]);return I?(A.then(T,I),Promise.resolve()):A};let b=function(_,T,I){const N=h.apply(this,[_]);return I?(N.then(T,I),Promise.resolve()):N};s.setLocalDescription=b,b=function(_,T,I){const N=v.apply(this,[_]);return I?(N.then(T,I),Promise.resolve()):N},s.setRemoteDescription=b,b=function(_,T,I){const N=y.apply(this,[_]);return I?(N.then(T,I),Promise.resolve()):N},s.addIceCandidate=b}function shimGetUserMedia(a){const s=a&&a.navigator;if(s.mediaDevices&&s.mediaDevices.getUserMedia){const d=s.mediaDevices,c=d.getUserMedia.bind(d);s.mediaDevices.getUserMedia=h=>c(shimConstraints(h))}!s.getUserMedia&&s.mediaDevices&&s.mediaDevices.getUserMedia&&(s.getUserMedia=function(c,h,v){s.mediaDevices.getUserMedia(c).then(h,v)}.bind(s))}function shimConstraints(a){return a&&a.video!==void 0?Object.assign({},a,{video:compactObject(a.video)}):a}function shimRTCIceServerUrls(a){if(!a.RTCPeerConnection)return;const s=a.RTCPeerConnection;a.RTCPeerConnection=function(c,h){if(c&&c.iceServers){const v=[];for(let y=0;y<c.iceServers.length;y++){let b=c.iceServers[y];!b.hasOwnProperty("urls")&&b.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),b=JSON.parse(JSON.stringify(b)),b.urls=b.url,delete b.url,v.push(b)):v.push(c.iceServers[y])}c.iceServers=v}return new s(c,h)},a.RTCPeerConnection.prototype=s.prototype,"generateCertificate"in s&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get(){return s.generateCertificate}})}function shimTrackEventTransceiver(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(a){const s=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(c){if(c){typeof c.offerToReceiveAudio!="undefined"&&(c.offerToReceiveAudio=!!c.offerToReceiveAudio);const h=this.getTransceivers().find(y=>y.receiver.track.kind==="audio");c.offerToReceiveAudio===!1&&h?h.direction==="sendrecv"?h.setDirection?h.setDirection("sendonly"):h.direction="sendonly":h.direction==="recvonly"&&(h.setDirection?h.setDirection("inactive"):h.direction="inactive"):c.offerToReceiveAudio===!0&&!h&&this.addTransceiver("audio",{direction:"recvonly"}),typeof c.offerToReceiveVideo!="undefined"&&(c.offerToReceiveVideo=!!c.offerToReceiveVideo);const v=this.getTransceivers().find(y=>y.receiver.track.kind==="video");c.offerToReceiveVideo===!1&&v?v.direction==="sendrecv"?v.setDirection?v.setDirection("sendonly"):v.direction="sendonly":v.direction==="recvonly"&&(v.setDirection?v.setDirection("inactive"):v.direction="inactive"):c.offerToReceiveVideo===!0&&!v&&this.addTransceiver("video",{direction:"recvonly"})}return s.apply(this,arguments)}}function shimAudioContext(a){typeof a!="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimLocalStreamsAPI,shimRemoteStreamsAPI,shimCallbacksAPI,shimGetUserMedia,shimConstraints,shimRTCIceServerUrls,shimTrackEventTransceiver,shimCreateOfferLegacy,shimAudioContext}),sdp$1={exports:{}};(function(a){const s={};s.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},s.localCName=s.generateIdentifier(),s.splitLines=function(d){return d.trim().split(`
`).map(c=>c.trim())},s.splitSections=function(d){return d.split(`
m=`).map((h,v)=>(v>0?"m="+h:h).trim()+`\r
`)},s.getDescription=function(d){const c=s.splitSections(d);return c&&c[0]},s.getMediaSections=function(d){const c=s.splitSections(d);return c.shift(),c},s.matchPrefix=function(d,c){return s.splitLines(d).filter(h=>h.indexOf(c)===0)},s.parseCandidate=function(d){let c;d.indexOf("a=candidate:")===0?c=d.substring(12).split(" "):c=d.substring(10).split(" ");const h={foundation:c[0],component:{1:"rtp",2:"rtcp"}[c[1]]||c[1],protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]};for(let v=8;v<c.length;v+=2)switch(c[v]){case"raddr":h.relatedAddress=c[v+1];break;case"rport":h.relatedPort=parseInt(c[v+1],10);break;case"tcptype":h.tcpType=c[v+1];break;case"ufrag":h.ufrag=c[v+1],h.usernameFragment=c[v+1];break;default:h[c[v]]===void 0&&(h[c[v]]=c[v+1]);break}return h},s.writeCandidate=function(d){const c=[];c.push(d.foundation);const h=d.component;h==="rtp"?c.push(1):h==="rtcp"?c.push(2):c.push(h),c.push(d.protocol.toUpperCase()),c.push(d.priority),c.push(d.address||d.ip),c.push(d.port);const v=d.type;return c.push("typ"),c.push(v),v!=="host"&&d.relatedAddress&&d.relatedPort&&(c.push("raddr"),c.push(d.relatedAddress),c.push("rport"),c.push(d.relatedPort)),d.tcpType&&d.protocol.toLowerCase()==="tcp"&&(c.push("tcptype"),c.push(d.tcpType)),(d.usernameFragment||d.ufrag)&&(c.push("ufrag"),c.push(d.usernameFragment||d.ufrag)),"candidate:"+c.join(" ")},s.parseIceOptions=function(d){return d.substr(14).split(" ")},s.parseRtpMap=function(d){let c=d.substr(9).split(" ");const h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=c.length===3?parseInt(c[2],10):1,h.numChannels=h.channels,h},s.writeRtpMap=function(d){let c=d.payloadType;d.preferredPayloadType!==void 0&&(c=d.preferredPayloadType);const h=d.channels||d.numChannels||1;return"a=rtpmap:"+c+" "+d.name+"/"+d.clockRate+(h!==1?"/"+h:"")+`\r
`},s.parseExtmap=function(d){const c=d.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},s.writeExtmap=function(d){return"a=extmap:"+(d.id||d.preferredId)+(d.direction&&d.direction!=="sendrecv"?"/"+d.direction:"")+" "+d.uri+`\r
`},s.parseFmtp=function(d){const c={};let h;const v=d.substr(d.indexOf(" ")+1).split(";");for(let y=0;y<v.length;y++)h=v[y].trim().split("="),c[h[0].trim()]=h[1];return c},s.writeFmtp=function(d){let c="",h=d.payloadType;if(d.preferredPayloadType!==void 0&&(h=d.preferredPayloadType),d.parameters&&Object.keys(d.parameters).length){const v=[];Object.keys(d.parameters).forEach(y=>{d.parameters[y]!==void 0?v.push(y+"="+d.parameters[y]):v.push(y)}),c+="a=fmtp:"+h+" "+v.join(";")+`\r
`}return c},s.parseRtcpFb=function(d){const c=d.substr(d.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},s.writeRtcpFb=function(d){let c="",h=d.payloadType;return d.preferredPayloadType!==void 0&&(h=d.preferredPayloadType),d.rtcpFeedback&&d.rtcpFeedback.length&&d.rtcpFeedback.forEach(v=>{c+="a=rtcp-fb:"+h+" "+v.type+(v.parameter&&v.parameter.length?" "+v.parameter:"")+`\r
`}),c},s.parseSsrcMedia=function(d){const c=d.indexOf(" "),h={ssrc:parseInt(d.substr(7,c-7),10)},v=d.indexOf(":",c);return v>-1?(h.attribute=d.substr(c+1,v-c-1),h.value=d.substr(v+1)):h.attribute=d.substr(c+1),h},s.parseSsrcGroup=function(d){const c=d.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(h=>parseInt(h,10))}},s.getMid=function(d){const c=s.matchPrefix(d,"a=mid:")[0];if(c)return c.substr(6)},s.parseFingerprint=function(d){const c=d.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1].toUpperCase()}},s.getDtlsParameters=function(d,c){const h=s.matchPrefix(d+c,"a=fingerprint:");return{role:"auto",fingerprints:h.map(s.parseFingerprint)}},s.writeDtlsParameters=function(d,c){let h="a=setup:"+c+`\r
`;return d.fingerprints.forEach(v=>{h+="a=fingerprint:"+v.algorithm+" "+v.value+`\r
`}),h},s.parseCryptoLine=function(d){const c=d.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},s.writeCryptoLine=function(d){return"a=crypto:"+d.tag+" "+d.cryptoSuite+" "+(typeof d.keyParams=="object"?s.writeCryptoKeyParams(d.keyParams):d.keyParams)+(d.sessionParams?" "+d.sessionParams.join(" "):"")+`\r
`},s.parseCryptoKeyParams=function(d){if(d.indexOf("inline:")!==0)return null;const c=d.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},s.writeCryptoKeyParams=function(d){return d.keyMethod+":"+d.keySalt+(d.lifeTime?"|"+d.lifeTime:"")+(d.mkiValue&&d.mkiLength?"|"+d.mkiValue+":"+d.mkiLength:"")},s.getCryptoParameters=function(d,c){return s.matchPrefix(d+c,"a=crypto:").map(s.parseCryptoLine)},s.getIceParameters=function(d,c){const h=s.matchPrefix(d+c,"a=ice-ufrag:")[0],v=s.matchPrefix(d+c,"a=ice-pwd:")[0];return h&&v?{usernameFragment:h.substr(12),password:v.substr(10)}:null},s.writeIceParameters=function(d){let c="a=ice-ufrag:"+d.usernameFragment+`\r
a=ice-pwd:`+d.password+`\r
`;return d.iceLite&&(c+=`a=ice-lite\r
`),c},s.parseRtpParameters=function(d){const c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},v=s.splitLines(d)[0].split(" ");for(let y=3;y<v.length;y++){const b=v[y],_=s.matchPrefix(d,"a=rtpmap:"+b+" ")[0];if(_){const T=s.parseRtpMap(_),I=s.matchPrefix(d,"a=fmtp:"+b+" ");switch(T.parameters=I.length?s.parseFmtp(I[0]):{},T.rtcpFeedback=s.matchPrefix(d,"a=rtcp-fb:"+b+" ").map(s.parseRtcpFb),c.codecs.push(T),T.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(T.name.toUpperCase());break}}}return s.matchPrefix(d,"a=extmap:").forEach(y=>{c.headerExtensions.push(s.parseExtmap(y))}),c},s.writeRtpDescription=function(d,c){let h="";h+="m="+d+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(y=>y.preferredPayloadType!==void 0?y.preferredPayloadType:y.payloadType).join(" ")+`\r
`,h+=`c=IN IP4 0.0.0.0\r
`,h+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,c.codecs.forEach(y=>{h+=s.writeRtpMap(y),h+=s.writeFmtp(y),h+=s.writeRtcpFb(y)});let v=0;return c.codecs.forEach(y=>{y.maxptime>v&&(v=y.maxptime)}),v>0&&(h+="a=maxptime:"+v+`\r
`),c.headerExtensions&&c.headerExtensions.forEach(y=>{h+=s.writeExtmap(y)}),h},s.parseRtpEncodingParameters=function(d){const c=[],h=s.parseRtpParameters(d),v=h.fecMechanisms.indexOf("RED")!==-1,y=h.fecMechanisms.indexOf("ULPFEC")!==-1,b=s.matchPrefix(d,"a=ssrc:").map(A=>s.parseSsrcMedia(A)).filter(A=>A.attribute==="cname"),_=b.length>0&&b[0].ssrc;let T;const I=s.matchPrefix(d,"a=ssrc-group:FID").map(A=>A.substr(17).split(" ").map($=>parseInt($,10)));I.length>0&&I[0].length>1&&I[0][0]===_&&(T=I[0][1]),h.codecs.forEach(A=>{if(A.name.toUpperCase()==="RTX"&&A.parameters.apt){let V={ssrc:_,codecPayloadType:parseInt(A.parameters.apt,10)};_&&T&&(V.rtx={ssrc:T}),c.push(V),v&&(V=JSON.parse(JSON.stringify(V)),V.fec={ssrc:_,mechanism:y?"red+ulpfec":"red"},c.push(V))}}),c.length===0&&_&&c.push({ssrc:_});let N=s.matchPrefix(d,"b=");return N.length&&(N[0].indexOf("b=TIAS:")===0?N=parseInt(N[0].substr(7),10):N[0].indexOf("b=AS:")===0?N=parseInt(N[0].substr(5),10)*1e3*.95-50*40*8:N=void 0,c.forEach(A=>{A.maxBitrate=N})),c},s.parseRtcpParameters=function(d){const c={},h=s.matchPrefix(d,"a=ssrc:").map(b=>s.parseSsrcMedia(b)).filter(b=>b.attribute==="cname")[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);const v=s.matchPrefix(d,"a=rtcp-rsize");c.reducedSize=v.length>0,c.compound=v.length===0;const y=s.matchPrefix(d,"a=rtcp-mux");return c.mux=y.length>0,c},s.writeRtcpParameters=function(d){let c="";return d.reducedSize&&(c+=`a=rtcp-rsize\r
`),d.mux&&(c+=`a=rtcp-mux\r
`),d.ssrc!==void 0&&d.cname&&(c+="a=ssrc:"+d.ssrc+" cname:"+d.cname+`\r
`),c},s.parseMsid=function(d){let c;const h=s.matchPrefix(d,"a=msid:");if(h.length===1)return c=h[0].substr(7).split(" "),{stream:c[0],track:c[1]};const v=s.matchPrefix(d,"a=ssrc:").map(y=>s.parseSsrcMedia(y)).filter(y=>y.attribute==="msid");if(v.length>0)return c=v[0].value.split(" "),{stream:c[0],track:c[1]}},s.parseSctpDescription=function(d){const c=s.parseMLine(d),h=s.matchPrefix(d,"a=max-message-size:");let v;h.length>0&&(v=parseInt(h[0].substr(19),10)),isNaN(v)&&(v=65536);const y=s.matchPrefix(d,"a=sctp-port:");if(y.length>0)return{port:parseInt(y[0].substr(12),10),protocol:c.fmt,maxMessageSize:v};const b=s.matchPrefix(d,"a=sctpmap:");if(b.length>0){const _=b[0].substr(10).split(" ");return{port:parseInt(_[0],10),protocol:_[1],maxMessageSize:v}}},s.writeSctpDescription=function(d,c){let h=[];return d.protocol!=="DTLS/SCTP"?h=["m="+d.kind+" 9 "+d.protocol+" "+c.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+c.port+`\r
`]:h=["m="+d.kind+" 9 "+d.protocol+" "+c.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+c.port+" "+c.protocol+` 65535\r
`],c.maxMessageSize!==void 0&&h.push("a=max-message-size:"+c.maxMessageSize+`\r
`),h.join("")},s.generateSessionId=function(){return Math.random().toString().substr(2,21)},s.writeSessionBoilerplate=function(d,c,h){let v;const y=c!==void 0?c:2;return d?v=d:v=s.generateSessionId(),`v=0\r
o=`+(h||"thisisadapterortc")+" "+v+" "+y+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},s.getDirection=function(d,c){const h=s.splitLines(d);for(let v=0;v<h.length;v++)switch(h[v]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[v].substr(2)}return c?s.getDirection(c):"sendrecv"},s.getKind=function(d){return s.splitLines(d)[0].split(" ")[0].substr(2)},s.isRejected=function(d){return d.split(" ",2)[1]==="0"},s.parseMLine=function(d){const h=s.splitLines(d)[0].substr(2).split(" ");return{kind:h[0],port:parseInt(h[1],10),protocol:h[2],fmt:h.slice(3).join(" ")}},s.parseOLine=function(d){const h=s.matchPrefix(d,"o=")[0].substr(2).split(" ");return{username:h[0],sessionId:h[1],sessionVersion:parseInt(h[2],10),netType:h[3],addressType:h[4],address:h[5]}},s.isValidSDP=function(d){if(typeof d!="string"||d.length===0)return!1;const c=s.splitLines(d);for(let h=0;h<c.length;h++)if(c[h].length<2||c[h].charAt(1)!=="=")return!1;return!0},a.exports=s})(sdp$1);var SDPUtils=sdp$1.exports,sdp=_mergeNamespaces$1({__proto__:null,default:SDPUtils},[sdp$1.exports]);function shimRTCIceCandidate(a){if(!a.RTCIceCandidate||a.RTCIceCandidate&&"foundation"in a.RTCIceCandidate.prototype)return;const s=a.RTCIceCandidate;a.RTCIceCandidate=function(c){if(typeof c=="object"&&c.candidate&&c.candidate.indexOf("a=")===0&&(c=JSON.parse(JSON.stringify(c)),c.candidate=c.candidate.substr(2)),c.candidate&&c.candidate.length){const h=new s(c),v=SDPUtils.parseCandidate(c.candidate),y=Object.assign(h,v);return y.toJSON=function(){return{candidate:y.candidate,sdpMid:y.sdpMid,sdpMLineIndex:y.sdpMLineIndex,usernameFragment:y.usernameFragment}},y}return new s(c)},a.RTCIceCandidate.prototype=s.prototype,wrapPeerConnectionEvent(a,"icecandidate",d=>(d.candidate&&Object.defineProperty(d,"candidate",{value:new a.RTCIceCandidate(d.candidate),writable:"false"}),d))}function shimMaxMessageSize(a,s){if(!a.RTCPeerConnection)return;"sctp"in a.RTCPeerConnection.prototype||Object.defineProperty(a.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp}});const d=function(b){if(!b||!b.sdp)return!1;const _=SDPUtils.splitSections(b.sdp);return _.shift(),_.some(T=>{const I=SDPUtils.parseMLine(T);return I&&I.kind==="application"&&I.protocol.indexOf("SCTP")!==-1})},c=function(b){const _=b.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(_===null||_.length<2)return-1;const T=parseInt(_[1],10);return T!==T?-1:T},h=function(b){let _=65536;return s.browser==="firefox"&&(s.version<57?b===-1?_=16384:_=2147483637:s.version<60?_=s.version===57?65535:65536:_=2147483637),_},v=function(b,_){let T=65536;s.browser==="firefox"&&s.version===57&&(T=65535);const I=SDPUtils.matchPrefix(b.sdp,"a=max-message-size:");return I.length>0?T=parseInt(I[0].substr(19),10):s.browser==="firefox"&&_!==-1&&(T=2147483637),T},y=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,s.browser==="chrome"&&s.version>=76){const{sdpSemantics:_}=this.getConfiguration();_==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp},enumerable:!0,configurable:!0})}if(d(arguments[0])){const _=c(arguments[0]),T=h(_),I=v(arguments[0],_);let N;T===0&&I===0?N=Number.POSITIVE_INFINITY:T===0||I===0?N=Math.max(T,I):N=Math.min(T,I);const A={};Object.defineProperty(A,"maxMessageSize",{get(){return N}}),this._sctp=A}return y.apply(this,arguments)}}function shimSendThrowTypeError(a){if(!(a.RTCPeerConnection&&"createDataChannel"in a.RTCPeerConnection.prototype))return;function s(c,h){const v=c.send;c.send=function(){const b=arguments[0],_=b.length||b.size||b.byteLength;if(c.readyState==="open"&&h.sctp&&_>h.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+h.sctp.maxMessageSize+" bytes)");return v.apply(c,arguments)}}const d=a.RTCPeerConnection.prototype.createDataChannel;a.RTCPeerConnection.prototype.createDataChannel=function(){const h=d.apply(this,arguments);return s(h,this),h},wrapPeerConnectionEvent(a,"datachannel",c=>(s(c.channel,c.target),c))}function shimConnectionState(a){if(!a.RTCPeerConnection||"connectionState"in a.RTCPeerConnection.prototype)return;const s=a.RTCPeerConnection.prototype;Object.defineProperty(s,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(s,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(d){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),d&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=d)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(d=>{const c=s[d];s[d]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=h=>{const v=h.target;if(v._lastConnectionState!==v.connectionState){v._lastConnectionState=v.connectionState;const y=new Event("connectionstatechange",h);v.dispatchEvent(y)}return h},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function removeExtmapAllowMixed(a,s){if(!a.RTCPeerConnection||s.browser==="chrome"&&s.version>=71||s.browser==="safari"&&s.version>=605)return;const d=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(h){if(h&&h.sdp&&h.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const v=h.sdp.split(`
`).filter(y=>y.trim()!=="a=extmap-allow-mixed").join(`
`);a.RTCSessionDescription&&h instanceof a.RTCSessionDescription?arguments[0]=new a.RTCSessionDescription({type:h.type,sdp:v}):h.sdp=v}return d.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(a,s){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const d=a.RTCPeerConnection.prototype.addIceCandidate;!d||d.length===0||(a.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(s.browser==="chrome"&&s.version<78||s.browser==="firefox"&&s.version<68||s.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():d.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(a,s){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const d=a.RTCPeerConnection.prototype.setLocalDescription;!d||d.length===0||(a.RTCPeerConnection.prototype.setLocalDescription=function(){let h=arguments[0]||{};if(typeof h!="object"||h.type&&h.sdp)return d.apply(this,arguments);if(h={type:h.type,sdp:h.sdp},!h.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":h.type="offer";break;default:h.type="answer";break}return h.sdp||h.type!=="offer"&&h.type!=="answer"?d.apply(this,[h]):(h.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(y=>d.apply(this,[y]))})}var commonShim=Object.freeze({__proto__:null,shimRTCIceCandidate,shimMaxMessageSize,shimSendThrowTypeError,shimConnectionState,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimParameterlessSetLocalDescription});function adapterFactory(){let{window:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const d=log,c=detectBrowser(a),h={browserDetails:c,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(c.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!s.shimChrome)return d("Chrome shim is not included in this adapter release."),h;if(c.version===null)return d("Chrome shim can not determine version, not shimming."),h;d("adapter.js shimming chrome."),h.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(a,c),shimParameterlessSetLocalDescription(a),shimGetUserMedia$2(a,c),shimMediaStream(a),shimPeerConnection$1(a,c),shimOnTrack$1(a),shimAddTrackRemoveTrack(a,c),shimGetSendersWithDtmf(a),shimGetStats(a),shimSenderReceiverGetStats(a),fixNegotiationNeeded(a,c),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,c),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,c);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!s.shimFirefox)return d("Firefox shim is not included in this adapter release."),h;d("adapter.js shimming firefox."),h.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(a,c),shimParameterlessSetLocalDescription(a),shimGetUserMedia$1(a,c),shimPeerConnection(a,c),shimOnTrack(a),shimRemoveStream(a),shimSenderGetStats(a),shimReceiverGetStats(a),shimRTCDataChannel(a),shimAddTransceiver(a),shimGetParameters(a),shimCreateOffer(a),shimCreateAnswer(a),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,c),shimSendThrowTypeError(a);break;case"safari":if(!safariShim||!s.shimSafari)return d("Safari shim is not included in this adapter release."),h;d("adapter.js shimming safari."),h.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(a,c),shimParameterlessSetLocalDescription(a),shimRTCIceServerUrls(a),shimCreateOfferLegacy(a),shimCallbacksAPI(a),shimLocalStreamsAPI(a),shimRemoteStreamsAPI(a),shimTrackEventTransceiver(a),shimGetUserMedia(a),shimAudioContext(a),shimRTCIceCandidate(a),shimMaxMessageSize(a,c),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,c);break;default:d("Unsupported browser!");break}return h}adapterFactory({window:typeof window=="undefined"?void 0:window});const passThroughQueueSignals=["syncState","trickle","offer","answer","simulate","leave"];function canPassThroughQueue(a){const s=Object.keys(a).find(d=>passThroughQueueSignals.includes(d))!==void 0;return livekitLogger.trace("request allowed to bypass queue:",{canPass:s,req:a}),s}class SignalClient{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.isConnected=!1,this.isReconnecting=!1,this.useJSON=s,this.requestQueue=new Queue}async join(s,d,c){return this.isConnected=!1,await this.connect(s,d,{autoSubscribe:c==null?void 0:c.autoSubscribe,publishOnly:c==null?void 0:c.publishOnly,adaptiveStream:c==null?void 0:c.adaptiveStream})}async reconnect(s,d){this.isReconnecting=!0,await this.connect(s,d,{reconnect:!0})}connect(s,d,c){s.startsWith("http")&&(s=s.replace("http","ws")),s=s.replace(/\/$/,""),s+="/rtc";const h=getClientInfo(),v=createConnectionParams(d,h,c);return new Promise((y,b)=>{livekitLogger.debug("connecting to ".concat(s+v)),this.ws=void 0;const _=new WebSocket(s+v);_.binaryType="arraybuffer",_.onerror=async T=>{if(!this.ws){try{const I=await fetch("http".concat(s.substring(2),"/validate").concat(v));if(I.ok)b(new ConnectionError("Internal error"));else{const N=await I.text();b(new ConnectionError(N))}}catch{b(new ConnectionError("server was not reachable"))}return}this.handleWSError(T)},_.onopen=()=>{this.ws=_,c.reconnect&&(this.isConnected=!0,y())},_.onmessage=async T=>{let I;if(typeof T.data=="string"){const N=JSON.parse(T.data);I=SignalResponse.fromJSON(N)}else if(T.data instanceof ArrayBuffer)I=SignalResponse.decode(new Uint8Array(T.data));else{livekitLogger.error("could not decode websocket message: ".concat(typeof T.data));return}if(!this.isConnected){I.join?(this.isConnected=!0,y(I.join)):b(new ConnectionError("did not receive join response"));return}this.signalLatency&&await sleep(this.signalLatency),this.handleSignalResponse(I)},_.onclose=T=>{!this.isConnected||this.ws!==_||(livekitLogger.debug("websocket connection closed: ".concat(T.reason)),this.isConnected=!1,this.onClose&&this.onClose(T.reason),this.ws===_&&(this.ws=void 0))}})}close(){var s;this.isConnected=!1,this.ws&&(this.ws.onclose=null),(s=this.ws)===null||s===void 0||s.close(),this.ws=void 0}sendOffer(s){livekitLogger.debug("sending offer",s),this.sendRequest({offer:toProtoSessionDescription(s)})}sendAnswer(s){livekitLogger.debug("sending answer"),this.sendRequest({answer:toProtoSessionDescription(s)})}sendIceCandidate(s,d){livekitLogger.trace("sending ice candidate",s),this.sendRequest({trickle:{candidateInit:JSON.stringify(s),target:d}})}sendMuteTrack(s,d){this.sendRequest({mute:{sid:s,muted:d}})}sendAddTrack(s){this.sendRequest({addTrack:AddTrackRequest.fromPartial(s)})}sendUpdateTrackSettings(s){this.sendRequest({trackSetting:s})}sendUpdateSubscription(s){this.sendRequest({subscription:s})}sendSyncState(s){this.sendRequest({syncState:s})}sendUpdateVideoLayers(s,d){this.sendRequest({updateLayers:{trackSid:s,layers:d}})}sendUpdateSubscriptionPermissions(s,d){this.sendRequest({subscriptionPermission:{allParticipants:s,trackPermissions:d}})}sendSimulateScenario(s){this.sendRequest({simulate:s})}sendLeave(){this.sendRequest(SignalRequest.fromPartial({leave:{}}))}async sendRequest(s){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&!canPassThroughQueue(s)&&(this.isReconnecting||!this.requestQueue.isEmpty())){this.requestQueue.enqueue(()=>this.sendRequest(s,!0));return}if(this.signalLatency&&await sleep(this.signalLatency),!this.ws){livekitLogger.error("cannot send signal request before connected");return}try{this.useJSON?this.ws.send(JSON.stringify(SignalRequest.toJSON(s))):this.ws.send(SignalRequest.encode(s).finish())}catch(h){livekitLogger.error("error sending signal message",{error:h})}}handleSignalResponse(s){if(s.answer){const d=fromProtoSessionDescription(s.answer);this.onAnswer&&this.onAnswer(d)}else if(s.offer){const d=fromProtoSessionDescription(s.offer);this.onOffer&&this.onOffer(d)}else if(s.trickle){const d=JSON.parse(s.trickle.candidateInit);this.onTrickle&&this.onTrickle(d,s.trickle.target)}else s.update?this.onParticipantUpdate&&this.onParticipantUpdate(s.update.participants):s.trackPublished?this.onLocalTrackPublished&&this.onLocalTrackPublished(s.trackPublished):s.speakersChanged?this.onSpeakersChanged&&this.onSpeakersChanged(s.speakersChanged.speakers):s.leave?this.onLeave&&this.onLeave(s.leave):s.mute?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(s.mute.sid,s.mute.muted):s.roomUpdate?this.onRoomUpdate&&this.onRoomUpdate(s.roomUpdate.room):s.connectionQuality?this.onConnectionQuality&&this.onConnectionQuality(s.connectionQuality):s.streamStateUpdate?this.onStreamStateUpdate&&this.onStreamStateUpdate(s.streamStateUpdate):s.subscribedQualityUpdate?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(s.subscribedQualityUpdate):s.subscriptionPermissionUpdate?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(s.subscriptionPermissionUpdate):s.refreshToken?this.onTokenRefresh&&this.onTokenRefresh(s.refreshToken):s.trackUnpublished?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(s.trackUnpublished):livekitLogger.debug("unsupported message",s)}setReconnected(){this.isReconnecting=!1,this.requestQueue.run()}handleWSError(s){livekitLogger.error("websocket error",s)}}function fromProtoSessionDescription(a){const s={type:"offer",sdp:a.sdp};switch(a.type){case"answer":case"offer":case"pranswer":case"rollback":s.type=a.type;break}return s}function toProtoSessionDescription(a){return{sdp:a.sdp,type:a.type}}function createConnectionParams(a,s,d){const c=new URLSearchParams;return c.set("access_token",a),d!=null&&d.reconnect&&c.set("reconnect","1"),(d==null?void 0:d.autoSubscribe)!==void 0&&c.set("auto_subscribe",d.autoSubscribe?"1":"0"),c.set("sdk","js"),c.set("version",s.version),c.set("protocol",s.protocol.toString()),s.deviceModel&&c.set("device_model",s.deviceModel),s.os&&c.set("os",s.os),s.osVersion&&c.set("os_version",s.osVersion),s.browser&&c.set("browser",s.browser),s.browserVersion&&c.set("browser_version",s.browserVersion),(d==null?void 0:d.publishOnly)!==void 0&&c.set("publish",d.publishOnly),d!=null&&d.adaptiveStream&&c.set("adaptive_stream","1"),"?".concat(c.toString())}class PCTransport{constructor(s){this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.negotiate=r(()=>{this.createAndSendOffer()},100),this.pc=new RTCPeerConnection(s)}get isICEConnected(){return this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"}async addIceCandidate(s){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(s);this.pendingCandidates.push(s)}async setRemoteDescription(s){await this.pc.setRemoteDescription(s),this.pendingCandidates.forEach(d=>{this.pc.addIceCandidate(d)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate&&(this.renegotiate=!1,this.createAndSendOffer())}async createAndSendOffer(s){if(this.onOffer===void 0)return;if(s!=null&&s.iceRestart&&(livekitLogger.debug("restarting ICE"),this.restartingIce=!0),this.pc.signalingState==="have-local-offer"){const c=this.pc.remoteDescription;if((s==null?void 0:s.iceRestart)&&c)await this.pc.setRemoteDescription(c);else{this.renegotiate=!0;return}}else if(this.pc.signalingState==="closed"){livekitLogger.warn("could not createOffer with closed peer connection");return}livekitLogger.debug("starting to negotiate");const d=await this.pc.createOffer(s);await this.pc.setLocalDescription(d),this.onOffer(d)}close(){this.pc.close()}}const lossyDataChannel="_lossy",reliableDataChannel="_reliable",maxReconnectRetries=10,minReconnectWait=2*1e3,maxReconnectDuration=60*1e3,maxICEConnectTimeout=15*1e3;var PCState;(function(a){a[a.New=0]="New",a[a.Connected=1]="Connected",a[a.Disconnected=2]="Disconnected",a[a.Reconnecting=3]="Reconnecting",a[a.Closed=4]="Closed"})(PCState||(PCState={}));class RTCEngine extends events.exports.EventEmitter{constructor(){super(),this.rtcConfig={},this.subscriberPrimary=!1,this.pcState=PCState.New,this.isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.reconnectStart=0,this.fullReconnectOnNext=!1,this.handleDataChannel=async s=>{let{channel:d}=s;if(!!d){if(d.label===reliableDataChannel)this.reliableDCSub=d;else if(d.label===lossyDataChannel)this.lossyDCSub=d;else return;livekitLogger.debug("on data channel ".concat(d.id,", ").concat(d.label)),d.onmessage=this.handleDataMessage}},this.handleDataMessage=async s=>{let d;if(s.data instanceof ArrayBuffer)d=s.data;else if(s.data instanceof Blob)d=await s.data.arrayBuffer();else{livekitLogger.error("unsupported data type",s.data);return}const c=DataPacket.decode(new Uint8Array(d));c.speaker?this.emit(EngineEvent.ActiveSpeakersUpdate,c.speaker.speakers):c.user&&this.emit(EngineEvent.DataPacketReceived,c.user,c.kind)},this.handleDataError=s=>{const c=s.currentTarget.maxRetransmits===0?"lossy":"reliable";if(s instanceof ErrorEvent){const{error:h}=s.error;livekitLogger.error("DataChannel error on ".concat(c,": ").concat(s.message),h)}else livekitLogger.error("Unknown DataChannel Error on ".concat(c),s)},this.handleDisconnect=s=>{if(this.isClosed)return;livekitLogger.debug("".concat(s," disconnected")),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const d=this.reconnectAttempts*this.reconnectAttempts*300;setTimeout(async()=>{var c;if(!this.isClosed){(isFireFox()||((c=this.clientConfiguration)===null||c===void 0?void 0:c.resumeConnection)===ClientConfigSetting.DISABLED)&&(this.fullReconnectOnNext=!0);try{this.fullReconnectOnNext?await this.restartConnection():await this.resumeConnection(),this.reconnectAttempts=0,this.fullReconnectOnNext=!1}catch(h){this.reconnectAttempts+=1;let v=!0;h instanceof UnexpectedConnectionState?(livekitLogger.debug("received unrecoverable error",{error:h}),v=!1):h instanceof SignalReconnectError||(this.fullReconnectOnNext=!0);const y=Date.now()-this.reconnectStart;(this.reconnectAttempts>=maxReconnectRetries||y>maxReconnectDuration)&&(v=!1),v?this.handleDisconnect("reconnect"):(livekitLogger.info("could not recover connection after ".concat(maxReconnectRetries," attempts, ").concat(y,"ms. giving up")),this.emit(EngineEvent.Disconnected),this.close())}}},d)},this.client=new SignalClient}async join(s,d,c){this.url=s,this.token=d,this.signalOpts=c;const h=await this.client.join(s,d,c);return this.isClosed=!1,this.subscriberPrimary=h.subscriberPrimary,this.publisher||this.configure(h),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=h.clientConfiguration,h}close(){this.isClosed=!0,this.removeAllListeners(),this.publisher&&this.publisher.pc.signalingState!=="closed"&&(this.publisher.pc.getSenders().forEach(s=>{var d,c;try{!((d=this.publisher)===null||d===void 0)&&d.pc.removeTrack&&((c=this.publisher)===null||c===void 0||c.pc.removeTrack(s))}catch(h){livekitLogger.warn("could not removeTrack",{error:h})}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),this.client.close()}addTrack(s){if(this.pendingTrackResolvers[s.cid])throw new TrackInvalidError("a track with the same ID has already been published");return new Promise(d=>{this.pendingTrackResolvers[s.cid]=d,this.client.sendAddTrack(s)})}updateMuteStatus(s,d){this.client.sendMuteTrack(s,d)}get dataSubscriberReadyState(){var s;return(s=this.reliableDCSub)===null||s===void 0?void 0:s.readyState}get connectedServerAddress(){return this.connectedServerAddr}configure(s){if(this.publisher||this.subscriber)return;if(s.iceServers&&!this.rtcConfig.iceServers){const h=[];s.iceServers.forEach(v=>{const y={urls:v.urls};v.username&&(y.username=v.username),v.credential&&(y.credential=v.credential),h.push(y)}),this.rtcConfig.iceServers=h}this.rtcConfig.sdpSemantics="unified-plan",this.rtcConfig.continualGatheringPolicy="gather_continually",this.publisher=new PCTransport(this.rtcConfig),this.subscriber=new PCTransport(this.rtcConfig),this.emit(EngineEvent.TransportsCreated,this.publisher,this.subscriber),this.publisher.pc.onicecandidate=h=>{!h.candidate||(livekitLogger.trace("adding ICE candidate for peer",h.candidate),this.client.sendIceCandidate(h.candidate,SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=h=>{!h.candidate||this.client.sendIceCandidate(h.candidate,SignalTarget.SUBSCRIBER)},this.publisher.onOffer=h=>{this.client.sendOffer(h)};let d=this.publisher.pc,c=this.subscriber.pc;s.subscriberPrimary&&(d=this.subscriber.pc,c=this.publisher.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),this.primaryPC=d,d.onconnectionstatechange=async()=>{if(livekitLogger.trace("connection state changed",{state:d.connectionState}),d.connectionState==="connected"){try{this.connectedServerAddr=await getConnectedAddress(d)}catch(v){livekitLogger.warn("could not get connected server address",{error:v})}const h=this.pcState===PCState.New;this.pcState=PCState.Connected,h&&this.emit(EngineEvent.Connected)}else d.connectionState==="failed"&&this.pcState===PCState.Connected&&(this.pcState=PCState.Disconnected,this.handleDisconnect("primary peerconnection"))},c.onconnectionstatechange=async()=>{c.connectionState==="failed"&&this.handleDisconnect("secondary peerconnection")},isWeb()?this.subscriber.pc.ontrack=h=>{this.emit(EngineEvent.MediaTrackAdded,h.track,h.streams[0],h.receiver)}:this.subscriber.pc.onaddstream=h=>{const v=h.stream.getTracks()[0];this.emit(EngineEvent.MediaTrackAdded,v,h.stream)},this.lossyDC=this.publisher.pc.createDataChannel(lossyDataChannel,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(reliableDataChannel,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.client.onAnswer=async h=>{!this.publisher||(livekitLogger.debug("received server answer",{RTCSdpType:h.type,signalingState:this.publisher.pc.signalingState}),await this.publisher.setRemoteDescription(h))},this.client.onTrickle=(h,v)=>{!this.publisher||!this.subscriber||(livekitLogger.trace("got ICE candidate from peer",{candidate:h,target:v}),v===SignalTarget.PUBLISHER?this.publisher.addIceCandidate(h):this.subscriber.addIceCandidate(h))},this.client.onOffer=async h=>{if(!this.subscriber)return;livekitLogger.debug("received server offer",{RTCSdpType:h.type,signalingState:this.subscriber.pc.signalingState}),await this.subscriber.setRemoteDescription(h);const v=await this.subscriber.pc.createAnswer();await this.subscriber.pc.setLocalDescription(v),this.client.sendAnswer(v)},this.client.onLocalTrackPublished=h=>{livekitLogger.debug("received trackPublishedResponse",h);const v=this.pendingTrackResolvers[h.cid];if(!v){livekitLogger.error("missing track resolver for ".concat(h.cid));return}delete this.pendingTrackResolvers[h.cid],v(h.track)},this.client.onTokenRefresh=h=>{this.token=h},this.client.onClose=()=>{this.handleDisconnect("signal")},this.client.onLeave=h=>{h!=null&&h.canReconnect?(this.fullReconnectOnNext=!0,this.primaryPC=void 0):(this.emit(EngineEvent.Disconnected),this.close())}}async restartConnection(){var s,d;if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");livekitLogger.info("reconnecting, attempt: ".concat(this.reconnectAttempts)),this.reconnectAttempts===0&&this.emit(EngineEvent.Restarting),this.primaryPC=void 0,(s=this.publisher)===null||s===void 0||s.close(),this.publisher=void 0,(d=this.subscriber)===null||d===void 0||d.close(),this.subscriber=void 0;let c;try{c=await this.join(this.url,this.token,this.signalOpts)}catch{throw new SignalReconnectError}await this.waitForPCConnected(),this.client.setReconnected(),this.emit(EngineEvent.Restarted,c)}async resumeConnection(){if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");if(!this.publisher||!this.subscriber)throw new UnexpectedConnectionState("publisher and subscriber connections unset");livekitLogger.info("resuming signal connection, attempt ".concat(this.reconnectAttempts)),this.reconnectAttempts===0&&this.emit(EngineEvent.Resuming);try{await this.client.reconnect(this.url,this.token)}catch{throw new SignalReconnectError}this.emit(EngineEvent.SignalResumed),this.subscriber.restartingIce=!0,this.hasPublished&&await this.publisher.createAndSendOffer({iceRestart:!0}),await this.waitForPCConnected(),this.client.setReconnected(),this.emit(EngineEvent.Resumed)}async waitForPCConnected(){var s;const d=Date.now();let c=d;for(this.pcState=PCState.Reconnecting,livekitLogger.debug("waiting for peer connection to reconnect");c-d<maxICEConnectTimeout&&this.primaryPC!==void 0;){if(c-d>minReconnectWait&&((s=this.primaryPC)===null||s===void 0?void 0:s.connectionState)==="connected"){this.pcState=PCState.Connected;try{this.connectedServerAddr=await getConnectedAddress(this.primaryPC)}catch(h){livekitLogger.warn("could not get connected server address",{error:h})}}if(this.pcState===PCState.Connected)return;await sleep(100),c=Date.now()}throw new ConnectionError("could not establish PC connection")}async sendDataPacket(s,d){const c=DataPacket.encode(s).finish();await this.ensurePublisherConnected(d),d===DataPacket_Kind.LOSSY&&this.lossyDC?this.lossyDC.send(c):d===DataPacket_Kind.RELIABLE&&this.reliableDC&&this.reliableDC.send(c)}async ensurePublisherConnected(s){var d,c;if(!this.subscriberPrimary)return;if(!this.publisher)throw new ConnectionError("publisher connection not set");!this.publisher.isICEConnected&&this.publisher.pc.iceConnectionState!=="checking"&&this.negotiate();const h=this.dataChannelForKind(s);if((h==null?void 0:h.readyState)==="open")return;const v=new Date().getTime()+maxICEConnectTimeout;for(;new Date().getTime()<v;){if(this.publisher.isICEConnected&&((d=this.dataChannelForKind(s))===null||d===void 0?void 0:d.readyState)==="open")return;await sleep(50)}throw new ConnectionError("could not establish publisher connection, state ".concat((c=this.publisher)===null||c===void 0?void 0:c.pc.iceConnectionState))}negotiate(){!this.publisher||(this.hasPublished=!0,this.publisher.negotiate())}dataChannelForKind(s,d){if(d){if(s===DataPacket_Kind.LOSSY)return this.lossyDCSub;if(s===DataPacket_Kind.RELIABLE)return this.reliableDCSub}else{if(s===DataPacket_Kind.LOSSY)return this.lossyDC;if(s===DataPacket_Kind.RELIABLE)return this.reliableDC}}}async function getConnectedAddress(a){var s;let d="";const c=new Map,h=new Map;if((await a.getStats()).forEach(b=>{switch(b.type){case"transport":d=b.selectedCandidatePairId;break;case"candidate-pair":d===""&&b.selected&&(d=b.id),c.set(b.id,b);break;case"remote-candidate":h.set(b.id,"".concat(b.address,":").concat(b.port));break}}),d==="")return;const y=(s=c.get(d))===null||s===void 0?void 0:s.remoteCandidateId;if(y!==void 0)return h.get(y)}class SignalReconnectError extends Error{}const publishDefaults={audioBitrate:AudioPresets.speech.maxBitrate,dtx:!0,simulcast:!0,screenShareEncoding:ScreenSharePresets.h1080fps15.encoding,stopMicTrackOnMute:!1},audioDefaults={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},videoDefaults={resolution:VideoPresets.h720.resolution};var RoomState;(function(a){a.Disconnected="disconnected",a.Connected="connected",a.Reconnecting="reconnecting"})(RoomState||(RoomState={}));class Room extends events.exports.EventEmitter{constructor(s){var d,c,h;switch(super(),d=this,this.state=RoomState.Disconnected,this.activeSpeakers=[],this.sid="",this.name="",this.metadata=void 0,this.audioEnabled=!0,this.connect=async(v,y,b)=>{var _,T;if(this.state!==RoomState.Disconnected){livekitLogger.warn("already connected to room ".concat(this.name));return}this.createEngine(),this.acquireAudioContext(),b!=null&&b.rtcConfig&&(this.engine.rtcConfig=b.rtcConfig),this.connOptions=b;try{const I=await this.engine.join(v,y,{autoSubscribe:b==null?void 0:b.autoSubscribe,publishOnly:b==null?void 0:b.publishOnly,adaptiveStream:typeof((_=this.options)===null||_===void 0?void 0:_.adaptiveStream)=="object"?!0:(T=this.options)===null||T===void 0?void 0:T.adaptiveStream});if(livekitLogger.debug("connected to Livekit Server version: ".concat(I.serverVersion,", region: ").concat(I.serverRegion)),!I.serverVersion)throw new UnsupportedServer("unknown server version");I.serverVersion==="0.15.1"&&this.options.dynacast&&(livekitLogger.debug("disabling dynacast due to server version"),this.options.dynacast=!1),this.state=RoomState.Connected;const N=I.participant;this.localParticipant.sid=N.sid,this.localParticipant.identity=N.identity,this.localParticipant.updateInfo(N),this.localParticipant.on(ParticipantEvent.MetadataChanged,A=>{this.emit(RoomEvent.MetadataChanged,A,this.localParticipant)}).on(ParticipantEvent.ParticipantMetadataChanged,A=>{this.emit(RoomEvent.ParticipantMetadataChanged,A,this.localParticipant)}).on(ParticipantEvent.TrackMuted,A=>{this.emit(RoomEvent.TrackMuted,A,this.localParticipant)}).on(ParticipantEvent.TrackUnmuted,A=>{this.emit(RoomEvent.TrackUnmuted,A,this.localParticipant)}).on(ParticipantEvent.LocalTrackPublished,A=>{this.emit(RoomEvent.LocalTrackPublished,A,this.localParticipant)}).on(ParticipantEvent.LocalTrackUnpublished,A=>{this.emit(RoomEvent.LocalTrackUnpublished,A,this.localParticipant)}).on(ParticipantEvent.ConnectionQualityChanged,A=>{this.emit(RoomEvent.ConnectionQualityChanged,A,this.localParticipant)}).on(ParticipantEvent.MediaDevicesError,A=>{this.emit(RoomEvent.MediaDevicesError,A)}).on(ParticipantEvent.ParticipantPermissionsChanged,A=>{this.emit(RoomEvent.ParticipantPermissionsChanged,A,this.localParticipant)}),I.otherParticipants.forEach(A=>{this.getOrCreateParticipant(A.sid,A)}),this.name=I.room.name,this.sid=I.room.sid,this.metadata=I.room.metadata,this.emit(RoomEvent.StateChanged,this.state)}catch(I){throw this.engine.close(),I}return new Promise((I,N)=>{const A=setTimeout(()=>{this.engine.close(),N(new ConnectionError("could not connect after timeout"))},maxICEConnectTimeout);this.engine.once(EngineEvent.Connected,()=>{var V;clearTimeout(A),isWeb()&&(window.addEventListener("beforeunload",this.onBeforeUnload),(V=navigator.mediaDevices)===null||V===void 0||V.addEventListener("devicechange",this.handleDeviceChange)),I(this)})})},this.disconnect=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;d.engine&&(d.engine.client.sendLeave(),d.engine.close()),d.handleDisconnect(v),d.engine=void 0},this.onBeforeUnload=()=>{this.disconnect()},this.handleRestarting=()=>{this.state=RoomState.Reconnecting,this.emit(RoomEvent.Reconnecting),this.emit(RoomEvent.StateChanged,this.state);for(const v of this.participants.values())this.handleParticipantDisconnected(v.sid,v)},this.handleRestarted=async v=>{livekitLogger.debug("reconnected to server region ".concat(v.serverRegion)),this.state=RoomState.Connected,this.emit(RoomEvent.Reconnected),this.emit(RoomEvent.StateChanged,this.state),v.participant&&(this.localParticipant.sid=v.participant.sid,this.handleParticipantUpdates([v.participant])),this.handleParticipantUpdates(v.otherParticipants);const y=[];this.localParticipant.tracks.forEach(b=>{b.track&&y.push(b)}),await Promise.all(y.map(async b=>{const _=b.track;this.localParticipant.unpublishTrack(_,!1),this.localParticipant.publishTrack(_,b.options)}))},this.handleParticipantUpdates=v=>{v.forEach(y=>{if(y.sid===this.localParticipant.sid||y.identity===this.localParticipant.identity){this.localParticipant.updateInfo(y);return}let b=this.participants.get(y.sid);const _=!b;b=this.getOrCreateParticipant(y.sid,y),y.state===ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(y.sid,b):_?this.emit(RoomEvent.ParticipantConnected,b):b.updateInfo(y)})},this.handleActiveSpeakersUpdate=v=>{const y=[],b={};v.forEach(_=>{if(b[_.sid]=!0,_.sid===this.localParticipant.sid)this.localParticipant.audioLevel=_.level,this.localParticipant.setIsSpeaking(!0),y.push(this.localParticipant);else{const T=this.participants.get(_.sid);T&&(T.audioLevel=_.level,T.setIsSpeaking(!0),y.push(T))}}),b[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(_=>{b[_.sid]||(_.audioLevel=0,_.setIsSpeaking(!1))}),this.activeSpeakers=y,this.emit(RoomEvent.ActiveSpeakersChanged,y)},this.handleSpeakersChanged=v=>{const y=new Map;this.activeSpeakers.forEach(_=>{y.set(_.sid,_)}),v.forEach(_=>{let T=this.participants.get(_.sid);_.sid===this.localParticipant.sid&&(T=this.localParticipant),T&&(T.audioLevel=_.level,T.setIsSpeaking(_.active),_.active?y.set(_.sid,T):y.delete(_.sid))});const b=Array.from(y.values());b.sort((_,T)=>T.audioLevel-_.audioLevel),this.activeSpeakers=b,this.emit(RoomEvent.ActiveSpeakersChanged,b)},this.handleStreamStateUpdate=v=>{v.streamStates.forEach(y=>{const b=this.participants.get(y.participantSid);if(!b)return;const _=b.getTrackPublication(y.trackSid);!_||!_.track||(_.track.streamState=Track.streamStateFromProto(y.state),b.emit(ParticipantEvent.TrackStreamStateChanged,_,_.track.streamState),this.emit(ParticipantEvent.TrackStreamStateChanged,_,_.track.streamState,b))})},this.handleSubscriptionPermissionUpdate=v=>{const y=this.participants.get(v.participantSid);if(!y)return;const b=y.getTrackPublication(v.trackSid);!b||(b._allowed=v.allowed,y.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,b,b.subscriptionStatus),this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,b,b.subscriptionStatus,y))},this.handleDataPacket=(v,y)=>{const b=this.participants.get(v.participantSid);this.emit(RoomEvent.DataReceived,v.payload,b,y),b==null||b.emit(ParticipantEvent.DataReceived,v.payload,y)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=v=>{livekitLogger.warn("could not playback audio",v),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleDeviceChange=async()=>{this.emit(RoomEvent.MediaDevicesChanged)},this.handleRoomUpdate=v=>{this.metadata=v.metadata,this.emit(RoomEvent.RoomMetadataChanged,v.metadata)},this.handleConnectionQualityUpdate=v=>{v.updates.forEach(y=>{if(y.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(y.quality);return}const b=this.participants.get(y.participantSid);b&&b.setConnectionQuality(y.quality)})},this.participants=new Map,this.options=s||{},(h=(c=this.options)===null||c===void 0?void 0:c.publishDefaults)===null||h===void 0?void 0:h.videoCodec){case"av1":case"vp9":this.options.publishDefaults.simulcast=void 0;break}this.options.audioCaptureDefaults=_objectSpread2(_objectSpread2({},audioDefaults),s==null?void 0:s.audioCaptureDefaults),this.options.videoCaptureDefaults=_objectSpread2(_objectSpread2({},videoDefaults),s==null?void 0:s.videoCaptureDefaults),this.options.publishDefaults=_objectSpread2(_objectSpread2({},publishDefaults),s==null?void 0:s.publishDefaults),this.createEngine(),this.localParticipant=new LocalParticipant("","",this.engine,this.options)}createEngine(){this.engine||(this.engine=new RTCEngine,this.engine.client.signalLatency=this.options.expSignalLatency,this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate,this.engine.on(EngineEvent.MediaTrackAdded,(s,d,c)=>{this.onTrackAdded(s,d,c)}).on(EngineEvent.Disconnected,()=>{this.handleDisconnect()}).on(EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived,this.handleDataPacket).on(EngineEvent.Resuming,()=>{this.state=RoomState.Reconnecting,this.emit(RoomEvent.Reconnecting),this.emit(RoomEvent.StateChanged,this.state)}).on(EngineEvent.Resumed,()=>{this.state=RoomState.Connected,this.emit(RoomEvent.Reconnected),this.emit(RoomEvent.StateChanged,this.state),this.updateSubscriptions()}).on(EngineEvent.SignalResumed,()=>{this.state===RoomState.Reconnecting&&this.sendSyncState()}).on(EngineEvent.Restarting,this.handleRestarting).on(EngineEvent.Restarted,this.handleRestarted))}static getLocalDevices(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return DeviceManager.getInstance().getDevices(s,d)}getParticipantByIdentity(s){for(const[,d]of this.participants)if(d.identity===s)return d;if(this.localParticipant.identity===s)return this.localParticipant}simulateScenario(s){let d;switch(s){case"speaker":d=SimulateScenario.fromPartial({speakerUpdate:3});break;case"node-failure":d=SimulateScenario.fromPartial({nodeFailure:!0});break;case"server-leave":d=SimulateScenario.fromPartial({serverLeave:!0});break;case"migration":d=SimulateScenario.fromPartial({migration:!0});break}d&&this.engine.client.sendSimulateScenario(d)}async startAudio(){this.acquireAudioContext();const s=[];this.participants.forEach(d=>{d.audioTracks.forEach(c=>{c.track&&c.track.attachedElements.forEach(h=>{s.push(h)})})});try{await Promise.all(s.map(d=>d.play())),this.handleAudioPlaybackStarted()}catch(d){throw this.handleAudioPlaybackFailed(d),d}}get canPlaybackAudio(){return this.audioEnabled}async switchActiveDevice(s,d){if(s==="audioinput"){const c=Array.from(this.localParticipant.audioTracks.values()).filter(h=>h.source===Track.Source.Microphone);await Promise.all(c.map(h=>{var v;return(v=h.audioTrack)===null||v===void 0?void 0:v.setDeviceId(d)})),this.options.audioCaptureDefaults.deviceId=d}else if(s==="videoinput"){const c=Array.from(this.localParticipant.videoTracks.values()).filter(h=>h.source===Track.Source.Camera);await Promise.all(c.map(h=>{var v;return(v=h.videoTrack)===null||v===void 0?void 0:v.setDeviceId(d)})),this.options.videoCaptureDefaults.deviceId=d}else if(s==="audiooutput"){const c=[];this.participants.forEach(h=>{h.audioTracks.forEach(v=>{v.isSubscribed&&v.track&&v.track.attachedElements.forEach(y=>{c.push(y)})})}),await Promise.all(c.map(async h=>{"setSinkId"in h&&await h.setSinkId(d)}))}}onTrackAdded(s,d,c){const h=unpackStreamId(d.id),v=h[0];let y=h[1];(!y||y==="")&&(y=s.id);const b=this.getOrCreateParticipant(v);let _;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?_=this.options.adaptiveStream:_={}),b.addSubscribedMediaTrack(s,y,d,c,_)}handleDisconnect(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;var d;this.state!==RoomState.Disconnected&&(this.participants.forEach(c=>{c.tracks.forEach(h=>{c.unpublishTrack(h.trackSid)})}),this.localParticipant.tracks.forEach(c=>{var h,v;c.track&&this.localParticipant.unpublishTrack(c.track),s&&((h=c.track)===null||h===void 0||h.detach(),(v=c.track)===null||v===void 0||v.stop())}),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&(this.audioContext.close(),this.audioContext=void 0),isWeb()&&(window.removeEventListener("beforeunload",this.onBeforeUnload),(d=navigator.mediaDevices)===null||d===void 0||d.removeEventListener("devicechange",this.handleDeviceChange)),this.state=RoomState.Disconnected,this.emit(RoomEvent.Disconnected),this.emit(RoomEvent.StateChanged,this.state))}handleParticipantDisconnected(s,d){this.participants.delete(s),d&&(d.tracks.forEach(c=>{d.unpublishTrack(c.trackSid)}),this.emit(RoomEvent.ParticipantDisconnected,d))}acquireAudioContext(){this.audioContext&&this.audioContext.close();const s=getNewAudioContext();s&&(this.audioContext=s)}createParticipant(s,d){let c;return d?c=RemoteParticipant.fromParticipantInfo(this.engine.client,d):c=new RemoteParticipant(this.engine.client,s,""),c}getOrCreateParticipant(s,d){if(this.participants.has(s))return this.participants.get(s);const c=this.createParticipant(s,d);return this.participants.set(s,c),c.on(ParticipantEvent.TrackPublished,h=>{this.emit(RoomEvent.TrackPublished,h,c)}).on(ParticipantEvent.TrackSubscribed,(h,v)=>{h.kind===Track.Kind.Audio&&(h.on(TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),h.on(TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(RoomEvent.TrackSubscribed,h,v,c)}).on(ParticipantEvent.TrackUnpublished,h=>{this.emit(RoomEvent.TrackUnpublished,h,c)}).on(ParticipantEvent.TrackUnsubscribed,(h,v)=>{this.emit(RoomEvent.TrackUnsubscribed,h,v,c)}).on(ParticipantEvent.TrackSubscriptionFailed,h=>{this.emit(RoomEvent.TrackSubscriptionFailed,h,c)}).on(ParticipantEvent.TrackMuted,h=>{this.emit(RoomEvent.TrackMuted,h,c)}).on(ParticipantEvent.TrackUnmuted,h=>{this.emit(RoomEvent.TrackUnmuted,h,c)}).on(ParticipantEvent.MetadataChanged,h=>{this.emit(RoomEvent.MetadataChanged,h,c)}).on(ParticipantEvent.ParticipantMetadataChanged,h=>{this.emit(RoomEvent.ParticipantMetadataChanged,h,c)}).on(ParticipantEvent.ConnectionQualityChanged,h=>{this.emit(RoomEvent.ConnectionQualityChanged,h,c)}).on(ParticipantEvent.ParticipantPermissionsChanged,h=>{this.emit(RoomEvent.ParticipantPermissionsChanged,h,c)}),c}sendSyncState(){var s;if(this.engine.subscriber===void 0||this.engine.subscriber.pc.localDescription===null)return;const d=this.engine.subscriber.pc.localDescription,c=((s=this.connOptions)===null||s===void 0?void 0:s.autoSubscribe)||!1,h=new Array;this.participants.forEach(v=>{v.tracks.forEach(y=>{y.isSubscribed!==c&&h.push(y.trackSid)})}),this.engine.client.sendSyncState({answer:toProtoSessionDescription({sdp:d.sdp,type:d.type}),subscription:{trackSids:h,subscribe:!c,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo(),dataChannels:this.localParticipant.dataChannelsInfo()})}updateSubscriptions(){for(const s of this.participants.values())for(const d of s.videoTracks.values())d.isSubscribed&&d instanceof RemoteTrackPublication&&d.emitTrackUpdate()}emit(s){for(var d=arguments.length,c=new Array(d>1?d-1:0),h=1;h<d;h++)c[h-1]=arguments[h];return livekitLogger.debug("room event",{event:s,args:c}),super.emit(s,...c)}}async function connect(a,s,d){var c,h,v,y;d!=null||(d={}),d.adaptiveStream===void 0&&(d.adaptiveStream=d.autoManageVideo===!0?{}:void 0),setLogLevel((c=d.logLevel)!==null&&c!==void 0?c:LogLevel.warn);const b=(h=d.rtcConfig)!==null&&h!==void 0?h:{};d.iceServers&&(b.iceServers=d.iceServers);const _=new Room(d);await _.connect(a,s,d);const T=(v=d.audio)!==null&&v!==void 0?v:!1,I=(y=d.video)!==null&&y!==void 0?y:!1;return(T||I)&&setTimeout(async()=>{let N;if(T&&I)try{await _.localParticipant.enableCameraAndMicrophone()}catch(A){const V=MediaDeviceFailure.getFailure(A);if(livekitLogger.warn("received error while creating media",{error:V}),A instanceof Error&&livekitLogger.warn(A.message),V===MediaDeviceFailure.NotFound||V===MediaDeviceFailure.DeviceInUse)try{await _.localParticipant.setMicrophoneEnabled(!0)}catch($){N=$}else N=A}else if(T)try{await _.localParticipant.setMicrophoneEnabled(!0)}catch(A){N=A}else if(I)try{await _.localParticipant.setCameraEnabled(!0)}catch(A){N=A}N&&(_.emit(RoomEvent.MediaDevicesError,N),livekitLogger.error("could not create media",N))}),_}var dist={},grants={};Object.defineProperty(grants,"__esModule",{value:!0});var livekit_models={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(a,"__esModule",{value:!0}),a.ParticipantTracks=a.UserPacket=a.SpeakerInfo=a.ActiveSpeakerUpdate=a.DataPacket=a.VideoLayer=a.TrackInfo=a.ParticipantInfo=a.Codec=a.Room=a.dataPacket_KindToJSON=a.dataPacket_KindFromJSON=a.DataPacket_Kind=a.participantInfo_StateToJSON=a.participantInfo_StateFromJSON=a.ParticipantInfo_State=a.connectionQualityToJSON=a.connectionQualityFromJSON=a.ConnectionQuality=a.videoQualityToJSON=a.videoQualityFromJSON=a.VideoQuality=a.trackSourceToJSON=a.trackSourceFromJSON=a.TrackSource=a.trackTypeToJSON=a.trackTypeFromJSON=a.TrackType=a.protobufPackage=void 0;const d=s(umd.exports),c=s(minimal$2);a.protobufPackage="livekit";var h;(function(w){w[w.AUDIO=0]="AUDIO",w[w.VIDEO=1]="VIDEO",w[w.DATA=2]="DATA",w[w.UNRECOGNIZED=-1]="UNRECOGNIZED"})(h=a.TrackType||(a.TrackType={}));function v(w){switch(w){case 0:case"AUDIO":return h.AUDIO;case 1:case"VIDEO":return h.VIDEO;case 2:case"DATA":return h.DATA;case-1:case"UNRECOGNIZED":default:return h.UNRECOGNIZED}}a.trackTypeFromJSON=v;function y(w){switch(w){case h.AUDIO:return"AUDIO";case h.VIDEO:return"VIDEO";case h.DATA:return"DATA";default:return"UNKNOWN"}}a.trackTypeToJSON=y;var b;(function(w){w[w.UNKNOWN=0]="UNKNOWN",w[w.CAMERA=1]="CAMERA",w[w.MICROPHONE=2]="MICROPHONE",w[w.SCREEN_SHARE=3]="SCREEN_SHARE",w[w.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",w[w.UNRECOGNIZED=-1]="UNRECOGNIZED"})(b=a.TrackSource||(a.TrackSource={}));function _(w){switch(w){case 0:case"UNKNOWN":return b.UNKNOWN;case 1:case"CAMERA":return b.CAMERA;case 2:case"MICROPHONE":return b.MICROPHONE;case 3:case"SCREEN_SHARE":return b.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return b.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return b.UNRECOGNIZED}}a.trackSourceFromJSON=_;function T(w){switch(w){case b.UNKNOWN:return"UNKNOWN";case b.CAMERA:return"CAMERA";case b.MICROPHONE:return"MICROPHONE";case b.SCREEN_SHARE:return"SCREEN_SHARE";case b.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";default:return"UNKNOWN"}}a.trackSourceToJSON=T;var I;(function(w){w[w.LOW=0]="LOW",w[w.MEDIUM=1]="MEDIUM",w[w.HIGH=2]="HIGH",w[w.UNRECOGNIZED=-1]="UNRECOGNIZED"})(I=a.VideoQuality||(a.VideoQuality={}));function N(w){switch(w){case 0:case"LOW":return I.LOW;case 1:case"MEDIUM":return I.MEDIUM;case 2:case"HIGH":return I.HIGH;case-1:case"UNRECOGNIZED":default:return I.UNRECOGNIZED}}a.videoQualityFromJSON=N;function A(w){switch(w){case I.LOW:return"LOW";case I.MEDIUM:return"MEDIUM";case I.HIGH:return"HIGH";default:return"UNKNOWN"}}a.videoQualityToJSON=A;var V;(function(w){w[w.POOR=0]="POOR",w[w.GOOD=1]="GOOD",w[w.EXCELLENT=2]="EXCELLENT",w[w.UNRECOGNIZED=-1]="UNRECOGNIZED"})(V=a.ConnectionQuality||(a.ConnectionQuality={}));function $(w){switch(w){case 0:case"POOR":return V.POOR;case 1:case"GOOD":return V.GOOD;case 2:case"EXCELLENT":return V.EXCELLENT;case-1:case"UNRECOGNIZED":default:return V.UNRECOGNIZED}}a.connectionQualityFromJSON=$;function L(w){switch(w){case V.POOR:return"POOR";case V.GOOD:return"GOOD";case V.EXCELLENT:return"EXCELLENT";default:return"UNKNOWN"}}a.connectionQualityToJSON=L;var D;(function(w){w[w.JOINING=0]="JOINING",w[w.JOINED=1]="JOINED",w[w.ACTIVE=2]="ACTIVE",w[w.DISCONNECTED=3]="DISCONNECTED",w[w.UNRECOGNIZED=-1]="UNRECOGNIZED"})(D=a.ParticipantInfo_State||(a.ParticipantInfo_State={}));function H(w){switch(w){case 0:case"JOINING":return D.JOINING;case 1:case"JOINED":return D.JOINED;case 2:case"ACTIVE":return D.ACTIVE;case 3:case"DISCONNECTED":return D.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return D.UNRECOGNIZED}}a.participantInfo_StateFromJSON=H;function O(w){switch(w){case D.JOINING:return"JOINING";case D.JOINED:return"JOINED";case D.ACTIVE:return"ACTIVE";case D.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}a.participantInfo_StateToJSON=O;var x;(function(w){w[w.RELIABLE=0]="RELIABLE",w[w.LOSSY=1]="LOSSY",w[w.UNRECOGNIZED=-1]="UNRECOGNIZED"})(x=a.DataPacket_Kind||(a.DataPacket_Kind={}));function j(w){switch(w){case 0:case"RELIABLE":return x.RELIABLE;case 1:case"LOSSY":return x.LOSSY;case-1:case"UNRECOGNIZED":default:return x.UNRECOGNIZED}}a.dataPacket_KindFromJSON=j;function X(w){switch(w){case x.RELIABLE:return"RELIABLE";case x.LOSSY:return"LOSSY";default:return"UNKNOWN"}}a.dataPacket_KindToJSON=X;const te={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",metadata:"",numParticipants:0,activeRecording:!1};a.Room={encode(w,z=c.default.Writer.create()){w.sid!==""&&z.uint32(10).string(w.sid),w.name!==""&&z.uint32(18).string(w.name),w.emptyTimeout!==0&&z.uint32(24).uint32(w.emptyTimeout),w.maxParticipants!==0&&z.uint32(32).uint32(w.maxParticipants),w.creationTime!==0&&z.uint32(40).int64(w.creationTime),w.turnPassword!==""&&z.uint32(50).string(w.turnPassword);for(const re of w.enabledCodecs)a.Codec.encode(re,z.uint32(58).fork()).ldelim();return w.metadata!==""&&z.uint32(66).string(w.metadata),w.numParticipants!==0&&z.uint32(72).uint32(w.numParticipants),w.activeRecording===!0&&z.uint32(80).bool(w.activeRecording),z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},te);for(le.enabledCodecs=[];re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.sid=re.string();break;case 2:le.name=re.string();break;case 3:le.emptyTimeout=re.uint32();break;case 4:le.maxParticipants=re.uint32();break;case 5:le.creationTime=ye(re.int64());break;case 6:le.turnPassword=re.string();break;case 7:le.enabledCodecs.push(a.Codec.decode(re,re.uint32()));break;case 8:le.metadata=re.string();break;case 9:le.numParticipants=re.uint32();break;case 10:le.activeRecording=re.bool();break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},te);if(z.enabledCodecs=[],w.sid!==void 0&&w.sid!==null?z.sid=String(w.sid):z.sid="",w.name!==void 0&&w.name!==null?z.name=String(w.name):z.name="",w.emptyTimeout!==void 0&&w.emptyTimeout!==null?z.emptyTimeout=Number(w.emptyTimeout):z.emptyTimeout=0,w.maxParticipants!==void 0&&w.maxParticipants!==null?z.maxParticipants=Number(w.maxParticipants):z.maxParticipants=0,w.creationTime!==void 0&&w.creationTime!==null?z.creationTime=Number(w.creationTime):z.creationTime=0,w.turnPassword!==void 0&&w.turnPassword!==null?z.turnPassword=String(w.turnPassword):z.turnPassword="",w.enabledCodecs!==void 0&&w.enabledCodecs!==null)for(const re of w.enabledCodecs)z.enabledCodecs.push(a.Codec.fromJSON(re));return w.metadata!==void 0&&w.metadata!==null?z.metadata=String(w.metadata):z.metadata="",w.numParticipants!==void 0&&w.numParticipants!==null?z.numParticipants=Number(w.numParticipants):z.numParticipants=0,w.activeRecording!==void 0&&w.activeRecording!==null?z.activeRecording=Boolean(w.activeRecording):z.activeRecording=!1,z},toJSON(w){const z={};return w.sid!==void 0&&(z.sid=w.sid),w.name!==void 0&&(z.name=w.name),w.emptyTimeout!==void 0&&(z.emptyTimeout=w.emptyTimeout),w.maxParticipants!==void 0&&(z.maxParticipants=w.maxParticipants),w.creationTime!==void 0&&(z.creationTime=w.creationTime),w.turnPassword!==void 0&&(z.turnPassword=w.turnPassword),w.enabledCodecs?z.enabledCodecs=w.enabledCodecs.map(re=>re?a.Codec.toJSON(re):void 0):z.enabledCodecs=[],w.metadata!==void 0&&(z.metadata=w.metadata),w.numParticipants!==void 0&&(z.numParticipants=w.numParticipants),w.activeRecording!==void 0&&(z.activeRecording=w.activeRecording),z},fromPartial(w){const z=Object.assign({},te);if(z.enabledCodecs=[],w.sid!==void 0&&w.sid!==null?z.sid=w.sid:z.sid="",w.name!==void 0&&w.name!==null?z.name=w.name:z.name="",w.emptyTimeout!==void 0&&w.emptyTimeout!==null?z.emptyTimeout=w.emptyTimeout:z.emptyTimeout=0,w.maxParticipants!==void 0&&w.maxParticipants!==null?z.maxParticipants=w.maxParticipants:z.maxParticipants=0,w.creationTime!==void 0&&w.creationTime!==null?z.creationTime=w.creationTime:z.creationTime=0,w.turnPassword!==void 0&&w.turnPassword!==null?z.turnPassword=w.turnPassword:z.turnPassword="",w.enabledCodecs!==void 0&&w.enabledCodecs!==null)for(const re of w.enabledCodecs)z.enabledCodecs.push(a.Codec.fromPartial(re));return w.metadata!==void 0&&w.metadata!==null?z.metadata=w.metadata:z.metadata="",w.numParticipants!==void 0&&w.numParticipants!==null?z.numParticipants=w.numParticipants:z.numParticipants=0,w.activeRecording!==void 0&&w.activeRecording!==null?z.activeRecording=w.activeRecording:z.activeRecording=!1,z}};const se={mime:"",fmtpLine:""};a.Codec={encode(w,z=c.default.Writer.create()){return w.mime!==""&&z.uint32(10).string(w.mime),w.fmtpLine!==""&&z.uint32(18).string(w.fmtpLine),z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},se);for(;re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.mime=re.string();break;case 2:le.fmtpLine=re.string();break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},se);return w.mime!==void 0&&w.mime!==null?z.mime=String(w.mime):z.mime="",w.fmtpLine!==void 0&&w.fmtpLine!==null?z.fmtpLine=String(w.fmtpLine):z.fmtpLine="",z},toJSON(w){const z={};return w.mime!==void 0&&(z.mime=w.mime),w.fmtpLine!==void 0&&(z.fmtpLine=w.fmtpLine),z},fromPartial(w){const z=Object.assign({},se);return w.mime!==void 0&&w.mime!==null?z.mime=w.mime:z.mime="",w.fmtpLine!==void 0&&w.fmtpLine!==null?z.fmtpLine=w.fmtpLine:z.fmtpLine="",z}};const oe={sid:"",identity:"",state:0,metadata:"",joinedAt:0,hidden:!1,recorder:!1,name:""};a.ParticipantInfo={encode(w,z=c.default.Writer.create()){w.sid!==""&&z.uint32(10).string(w.sid),w.identity!==""&&z.uint32(18).string(w.identity),w.state!==0&&z.uint32(24).int32(w.state);for(const re of w.tracks)a.TrackInfo.encode(re,z.uint32(34).fork()).ldelim();return w.metadata!==""&&z.uint32(42).string(w.metadata),w.joinedAt!==0&&z.uint32(48).int64(w.joinedAt),w.hidden===!0&&z.uint32(56).bool(w.hidden),w.recorder===!0&&z.uint32(64).bool(w.recorder),w.name!==""&&z.uint32(74).string(w.name),z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},oe);for(le.tracks=[];re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.sid=re.string();break;case 2:le.identity=re.string();break;case 3:le.state=re.int32();break;case 4:le.tracks.push(a.TrackInfo.decode(re,re.uint32()));break;case 5:le.metadata=re.string();break;case 6:le.joinedAt=ye(re.int64());break;case 7:le.hidden=re.bool();break;case 8:le.recorder=re.bool();break;case 9:le.name=re.string();break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},oe);if(z.tracks=[],w.sid!==void 0&&w.sid!==null?z.sid=String(w.sid):z.sid="",w.identity!==void 0&&w.identity!==null?z.identity=String(w.identity):z.identity="",w.state!==void 0&&w.state!==null?z.state=H(w.state):z.state=0,w.tracks!==void 0&&w.tracks!==null)for(const re of w.tracks)z.tracks.push(a.TrackInfo.fromJSON(re));return w.metadata!==void 0&&w.metadata!==null?z.metadata=String(w.metadata):z.metadata="",w.joinedAt!==void 0&&w.joinedAt!==null?z.joinedAt=Number(w.joinedAt):z.joinedAt=0,w.hidden!==void 0&&w.hidden!==null?z.hidden=Boolean(w.hidden):z.hidden=!1,w.recorder!==void 0&&w.recorder!==null?z.recorder=Boolean(w.recorder):z.recorder=!1,w.name!==void 0&&w.name!==null?z.name=String(w.name):z.name="",z},toJSON(w){const z={};return w.sid!==void 0&&(z.sid=w.sid),w.identity!==void 0&&(z.identity=w.identity),w.state!==void 0&&(z.state=O(w.state)),w.tracks?z.tracks=w.tracks.map(re=>re?a.TrackInfo.toJSON(re):void 0):z.tracks=[],w.metadata!==void 0&&(z.metadata=w.metadata),w.joinedAt!==void 0&&(z.joinedAt=w.joinedAt),w.hidden!==void 0&&(z.hidden=w.hidden),w.recorder!==void 0&&(z.recorder=w.recorder),w.name!==void 0&&(z.name=w.name),z},fromPartial(w){const z=Object.assign({},oe);if(z.tracks=[],w.sid!==void 0&&w.sid!==null?z.sid=w.sid:z.sid="",w.identity!==void 0&&w.identity!==null?z.identity=w.identity:z.identity="",w.state!==void 0&&w.state!==null?z.state=w.state:z.state=0,w.tracks!==void 0&&w.tracks!==null)for(const re of w.tracks)z.tracks.push(a.TrackInfo.fromPartial(re));return w.metadata!==void 0&&w.metadata!==null?z.metadata=w.metadata:z.metadata="",w.joinedAt!==void 0&&w.joinedAt!==null?z.joinedAt=w.joinedAt:z.joinedAt=0,w.hidden!==void 0&&w.hidden!==null?z.hidden=w.hidden:z.hidden=!1,w.recorder!==void 0&&w.recorder!==null?z.recorder=w.recorder:z.recorder=!1,w.name!==void 0&&w.name!==null?z.name=w.name:z.name="",z}};const F={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,mimeType:""};a.TrackInfo={encode(w,z=c.default.Writer.create()){w.sid!==""&&z.uint32(10).string(w.sid),w.type!==0&&z.uint32(16).int32(w.type),w.name!==""&&z.uint32(26).string(w.name),w.muted===!0&&z.uint32(32).bool(w.muted),w.width!==0&&z.uint32(40).uint32(w.width),w.height!==0&&z.uint32(48).uint32(w.height),w.simulcast===!0&&z.uint32(56).bool(w.simulcast),w.disableDtx===!0&&z.uint32(64).bool(w.disableDtx),w.source!==0&&z.uint32(72).int32(w.source);for(const re of w.layers)a.VideoLayer.encode(re,z.uint32(82).fork()).ldelim();return w.mimeType!==""&&z.uint32(90).string(w.mimeType),z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},F);for(le.layers=[];re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.sid=re.string();break;case 2:le.type=re.int32();break;case 3:le.name=re.string();break;case 4:le.muted=re.bool();break;case 5:le.width=re.uint32();break;case 6:le.height=re.uint32();break;case 7:le.simulcast=re.bool();break;case 8:le.disableDtx=re.bool();break;case 9:le.source=re.int32();break;case 10:le.layers.push(a.VideoLayer.decode(re,re.uint32()));break;case 11:le.mimeType=re.string();break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},F);if(z.layers=[],w.sid!==void 0&&w.sid!==null?z.sid=String(w.sid):z.sid="",w.type!==void 0&&w.type!==null?z.type=v(w.type):z.type=0,w.name!==void 0&&w.name!==null?z.name=String(w.name):z.name="",w.muted!==void 0&&w.muted!==null?z.muted=Boolean(w.muted):z.muted=!1,w.width!==void 0&&w.width!==null?z.width=Number(w.width):z.width=0,w.height!==void 0&&w.height!==null?z.height=Number(w.height):z.height=0,w.simulcast!==void 0&&w.simulcast!==null?z.simulcast=Boolean(w.simulcast):z.simulcast=!1,w.disableDtx!==void 0&&w.disableDtx!==null?z.disableDtx=Boolean(w.disableDtx):z.disableDtx=!1,w.source!==void 0&&w.source!==null?z.source=_(w.source):z.source=0,w.layers!==void 0&&w.layers!==null)for(const re of w.layers)z.layers.push(a.VideoLayer.fromJSON(re));return w.mimeType!==void 0&&w.mimeType!==null?z.mimeType=String(w.mimeType):z.mimeType="",z},toJSON(w){const z={};return w.sid!==void 0&&(z.sid=w.sid),w.type!==void 0&&(z.type=y(w.type)),w.name!==void 0&&(z.name=w.name),w.muted!==void 0&&(z.muted=w.muted),w.width!==void 0&&(z.width=w.width),w.height!==void 0&&(z.height=w.height),w.simulcast!==void 0&&(z.simulcast=w.simulcast),w.disableDtx!==void 0&&(z.disableDtx=w.disableDtx),w.source!==void 0&&(z.source=T(w.source)),w.layers?z.layers=w.layers.map(re=>re?a.VideoLayer.toJSON(re):void 0):z.layers=[],w.mimeType!==void 0&&(z.mimeType=w.mimeType),z},fromPartial(w){const z=Object.assign({},F);if(z.layers=[],w.sid!==void 0&&w.sid!==null?z.sid=w.sid:z.sid="",w.type!==void 0&&w.type!==null?z.type=w.type:z.type=0,w.name!==void 0&&w.name!==null?z.name=w.name:z.name="",w.muted!==void 0&&w.muted!==null?z.muted=w.muted:z.muted=!1,w.width!==void 0&&w.width!==null?z.width=w.width:z.width=0,w.height!==void 0&&w.height!==null?z.height=w.height:z.height=0,w.simulcast!==void 0&&w.simulcast!==null?z.simulcast=w.simulcast:z.simulcast=!1,w.disableDtx!==void 0&&w.disableDtx!==null?z.disableDtx=w.disableDtx:z.disableDtx=!1,w.source!==void 0&&w.source!==null?z.source=w.source:z.source=0,w.layers!==void 0&&w.layers!==null)for(const re of w.layers)z.layers.push(a.VideoLayer.fromPartial(re));return w.mimeType!==void 0&&w.mimeType!==null?z.mimeType=w.mimeType:z.mimeType="",z}};const Z={quality:0,width:0,height:0,bitrate:0};a.VideoLayer={encode(w,z=c.default.Writer.create()){return w.quality!==0&&z.uint32(8).int32(w.quality),w.width!==0&&z.uint32(16).uint32(w.width),w.height!==0&&z.uint32(24).uint32(w.height),w.bitrate!==0&&z.uint32(32).uint32(w.bitrate),z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},Z);for(;re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.quality=re.int32();break;case 2:le.width=re.uint32();break;case 3:le.height=re.uint32();break;case 4:le.bitrate=re.uint32();break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},Z);return w.quality!==void 0&&w.quality!==null?z.quality=N(w.quality):z.quality=0,w.width!==void 0&&w.width!==null?z.width=Number(w.width):z.width=0,w.height!==void 0&&w.height!==null?z.height=Number(w.height):z.height=0,w.bitrate!==void 0&&w.bitrate!==null?z.bitrate=Number(w.bitrate):z.bitrate=0,z},toJSON(w){const z={};return w.quality!==void 0&&(z.quality=A(w.quality)),w.width!==void 0&&(z.width=w.width),w.height!==void 0&&(z.height=w.height),w.bitrate!==void 0&&(z.bitrate=w.bitrate),z},fromPartial(w){const z=Object.assign({},Z);return w.quality!==void 0&&w.quality!==null?z.quality=w.quality:z.quality=0,w.width!==void 0&&w.width!==null?z.width=w.width:z.width=0,w.height!==void 0&&w.height!==null?z.height=w.height:z.height=0,w.bitrate!==void 0&&w.bitrate!==null?z.bitrate=w.bitrate:z.bitrate=0,z}};const ne={kind:0};a.DataPacket={encode(w,z=c.default.Writer.create()){return w.kind!==0&&z.uint32(8).int32(w.kind),w.user!==void 0&&a.UserPacket.encode(w.user,z.uint32(18).fork()).ldelim(),w.speaker!==void 0&&a.ActiveSpeakerUpdate.encode(w.speaker,z.uint32(26).fork()).ldelim(),z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},ne);for(;re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.kind=re.int32();break;case 2:le.user=a.UserPacket.decode(re,re.uint32());break;case 3:le.speaker=a.ActiveSpeakerUpdate.decode(re,re.uint32());break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},ne);return w.kind!==void 0&&w.kind!==null?z.kind=j(w.kind):z.kind=0,w.user!==void 0&&w.user!==null?z.user=a.UserPacket.fromJSON(w.user):z.user=void 0,w.speaker!==void 0&&w.speaker!==null?z.speaker=a.ActiveSpeakerUpdate.fromJSON(w.speaker):z.speaker=void 0,z},toJSON(w){const z={};return w.kind!==void 0&&(z.kind=X(w.kind)),w.user!==void 0&&(z.user=w.user?a.UserPacket.toJSON(w.user):void 0),w.speaker!==void 0&&(z.speaker=w.speaker?a.ActiveSpeakerUpdate.toJSON(w.speaker):void 0),z},fromPartial(w){const z=Object.assign({},ne);return w.kind!==void 0&&w.kind!==null?z.kind=w.kind:z.kind=0,w.user!==void 0&&w.user!==null?z.user=a.UserPacket.fromPartial(w.user):z.user=void 0,w.speaker!==void 0&&w.speaker!==null?z.speaker=a.ActiveSpeakerUpdate.fromPartial(w.speaker):z.speaker=void 0,z}};const M={};a.ActiveSpeakerUpdate={encode(w,z=c.default.Writer.create()){for(const re of w.speakers)a.SpeakerInfo.encode(re,z.uint32(10).fork()).ldelim();return z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},M);for(le.speakers=[];re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.speakers.push(a.SpeakerInfo.decode(re,re.uint32()));break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},M);if(z.speakers=[],w.speakers!==void 0&&w.speakers!==null)for(const re of w.speakers)z.speakers.push(a.SpeakerInfo.fromJSON(re));return z},toJSON(w){const z={};return w.speakers?z.speakers=w.speakers.map(re=>re?a.SpeakerInfo.toJSON(re):void 0):z.speakers=[],z},fromPartial(w){const z=Object.assign({},M);if(z.speakers=[],w.speakers!==void 0&&w.speakers!==null)for(const re of w.speakers)z.speakers.push(a.SpeakerInfo.fromPartial(re));return z}};const G={sid:"",level:0,active:!1};a.SpeakerInfo={encode(w,z=c.default.Writer.create()){return w.sid!==""&&z.uint32(10).string(w.sid),w.level!==0&&z.uint32(21).float(w.level),w.active===!0&&z.uint32(24).bool(w.active),z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},G);for(;re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.sid=re.string();break;case 2:le.level=re.float();break;case 3:le.active=re.bool();break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},G);return w.sid!==void 0&&w.sid!==null?z.sid=String(w.sid):z.sid="",w.level!==void 0&&w.level!==null?z.level=Number(w.level):z.level=0,w.active!==void 0&&w.active!==null?z.active=Boolean(w.active):z.active=!1,z},toJSON(w){const z={};return w.sid!==void 0&&(z.sid=w.sid),w.level!==void 0&&(z.level=w.level),w.active!==void 0&&(z.active=w.active),z},fromPartial(w){const z=Object.assign({},G);return w.sid!==void 0&&w.sid!==null?z.sid=w.sid:z.sid="",w.level!==void 0&&w.level!==null?z.level=w.level:z.level=0,w.active!==void 0&&w.active!==null?z.active=w.active:z.active=!1,z}};const J={participantSid:"",destinationSids:""};a.UserPacket={encode(w,z=c.default.Writer.create()){w.participantSid!==""&&z.uint32(10).string(w.participantSid),w.payload.length!==0&&z.uint32(18).bytes(w.payload);for(const re of w.destinationSids)z.uint32(26).string(re);return z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},J);for(le.destinationSids=[],le.payload=new Uint8Array;re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.participantSid=re.string();break;case 2:le.payload=re.bytes();break;case 3:le.destinationSids.push(re.string());break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},J);if(z.destinationSids=[],z.payload=new Uint8Array,w.participantSid!==void 0&&w.participantSid!==null?z.participantSid=String(w.participantSid):z.participantSid="",w.payload!==void 0&&w.payload!==null&&(z.payload=ae(w.payload)),w.destinationSids!==void 0&&w.destinationSids!==null)for(const re of w.destinationSids)z.destinationSids.push(String(re));return z},toJSON(w){const z={};return w.participantSid!==void 0&&(z.participantSid=w.participantSid),w.payload!==void 0&&(z.payload=Se(w.payload!==void 0?w.payload:new Uint8Array)),w.destinationSids?z.destinationSids=w.destinationSids.map(re=>re):z.destinationSids=[],z},fromPartial(w){const z=Object.assign({},J);if(z.destinationSids=[],w.participantSid!==void 0&&w.participantSid!==null?z.participantSid=w.participantSid:z.participantSid="",w.payload!==void 0&&w.payload!==null?z.payload=w.payload:z.payload=new Uint8Array,w.destinationSids!==void 0&&w.destinationSids!==null)for(const re of w.destinationSids)z.destinationSids.push(re);return z}};const ie={participantSid:"",trackSids:""};a.ParticipantTracks={encode(w,z=c.default.Writer.create()){w.participantSid!==""&&z.uint32(10).string(w.participantSid);for(const re of w.trackSids)z.uint32(18).string(re);return z},decode(w,z){const re=w instanceof c.default.Reader?w:new c.default.Reader(w);let me=z===void 0?re.len:re.pos+z;const le=Object.assign({},ie);for(le.trackSids=[];re.pos<me;){const ue=re.uint32();switch(ue>>>3){case 1:le.participantSid=re.string();break;case 2:le.trackSids.push(re.string());break;default:re.skipType(ue&7);break}}return le},fromJSON(w){const z=Object.assign({},ie);if(z.trackSids=[],w.participantSid!==void 0&&w.participantSid!==null?z.participantSid=String(w.participantSid):z.participantSid="",w.trackSids!==void 0&&w.trackSids!==null)for(const re of w.trackSids)z.trackSids.push(String(re));return z},toJSON(w){const z={};return w.participantSid!==void 0&&(z.participantSid=w.participantSid),w.trackSids?z.trackSids=w.trackSids.map(re=>re):z.trackSids=[],z},fromPartial(w){const z=Object.assign({},ie);if(z.trackSids=[],w.participantSid!==void 0&&w.participantSid!==null?z.participantSid=w.participantSid:z.participantSid="",w.trackSids!==void 0&&w.trackSids!==null)for(const re of w.trackSids)z.trackSids.push(re);return z}};var K=(()=>{if(typeof K!="undefined")return K;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();const Y=K.atob||(w=>K.Buffer.from(w,"base64").toString("binary"));function ae(w){const z=Y(w),re=new Uint8Array(z.length);for(let me=0;me<z.length;++me)re[me]=z.charCodeAt(me);return re}const pe=K.btoa||(w=>K.Buffer.from(w,"binary").toString("base64"));function Se(w){const z=[];for(const re of w)z.push(String.fromCharCode(re));return pe(z.join(""))}function ye(w){if(w.gt(Number.MAX_SAFE_INTEGER))throw new K.Error("Value is larger than Number.MAX_SAFE_INTEGER");return w.toNumber()}c.default.util.Long!==d.default&&(c.default.util.Long=d.default,c.default.configure())})(livekit_models);var RoomServiceClient$1={},livekit_room={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(a,"__esModule",{value:!0}),a.UpdateRoomMetadataRequest=a.SendDataResponse=a.SendDataRequest=a.UpdateSubscriptionsResponse=a.UpdateSubscriptionsRequest=a.UpdateParticipantRequest=a.ParticipantPermission=a.MuteRoomTrackResponse=a.MuteRoomTrackRequest=a.RemoveParticipantResponse=a.RoomParticipantIdentity=a.ListParticipantsResponse=a.ListParticipantsRequest=a.DeleteRoomResponse=a.DeleteRoomRequest=a.ListRoomsResponse=a.ListRoomsRequest=a.CreateRoomRequest=a.protobufPackage=void 0;const d=s(umd.exports),c=s(minimal$2),h=livekit_models;a.protobufPackage="livekit";const v={name:"",emptyTimeout:0,maxParticipants:0,nodeId:"",metadata:""};a.CreateRoomRequest={encode(M,G=c.default.Writer.create()){return M.name!==""&&G.uint32(10).string(M.name),M.emptyTimeout!==0&&G.uint32(16).uint32(M.emptyTimeout),M.maxParticipants!==0&&G.uint32(24).uint32(M.maxParticipants),M.nodeId!==""&&G.uint32(34).string(M.nodeId),M.metadata!==""&&G.uint32(42).string(M.metadata),G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},v);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.name=J.string();break;case 2:K.emptyTimeout=J.uint32();break;case 3:K.maxParticipants=J.uint32();break;case 4:K.nodeId=J.string();break;case 5:K.metadata=J.string();break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},v);return M.name!==void 0&&M.name!==null?G.name=String(M.name):G.name="",M.emptyTimeout!==void 0&&M.emptyTimeout!==null?G.emptyTimeout=Number(M.emptyTimeout):G.emptyTimeout=0,M.maxParticipants!==void 0&&M.maxParticipants!==null?G.maxParticipants=Number(M.maxParticipants):G.maxParticipants=0,M.nodeId!==void 0&&M.nodeId!==null?G.nodeId=String(M.nodeId):G.nodeId="",M.metadata!==void 0&&M.metadata!==null?G.metadata=String(M.metadata):G.metadata="",G},toJSON(M){const G={};return M.name!==void 0&&(G.name=M.name),M.emptyTimeout!==void 0&&(G.emptyTimeout=M.emptyTimeout),M.maxParticipants!==void 0&&(G.maxParticipants=M.maxParticipants),M.nodeId!==void 0&&(G.nodeId=M.nodeId),M.metadata!==void 0&&(G.metadata=M.metadata),G},fromPartial(M){const G=Object.assign({},v);return M.name!==void 0&&M.name!==null?G.name=M.name:G.name="",M.emptyTimeout!==void 0&&M.emptyTimeout!==null?G.emptyTimeout=M.emptyTimeout:G.emptyTimeout=0,M.maxParticipants!==void 0&&M.maxParticipants!==null?G.maxParticipants=M.maxParticipants:G.maxParticipants=0,M.nodeId!==void 0&&M.nodeId!==null?G.nodeId=M.nodeId:G.nodeId="",M.metadata!==void 0&&M.metadata!==null?G.metadata=M.metadata:G.metadata="",G}};const y={names:""};a.ListRoomsRequest={encode(M,G=c.default.Writer.create()){for(const J of M.names)G.uint32(10).string(J);return G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},y);for(K.names=[];J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.names.push(J.string());break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},y);if(G.names=[],M.names!==void 0&&M.names!==null)for(const J of M.names)G.names.push(String(J));return G},toJSON(M){const G={};return M.names?G.names=M.names.map(J=>J):G.names=[],G},fromPartial(M){const G=Object.assign({},y);if(G.names=[],M.names!==void 0&&M.names!==null)for(const J of M.names)G.names.push(J);return G}};const b={};a.ListRoomsResponse={encode(M,G=c.default.Writer.create()){for(const J of M.rooms)h.Room.encode(J,G.uint32(10).fork()).ldelim();return G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},b);for(K.rooms=[];J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.rooms.push(h.Room.decode(J,J.uint32()));break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},b);if(G.rooms=[],M.rooms!==void 0&&M.rooms!==null)for(const J of M.rooms)G.rooms.push(h.Room.fromJSON(J));return G},toJSON(M){const G={};return M.rooms?G.rooms=M.rooms.map(J=>J?h.Room.toJSON(J):void 0):G.rooms=[],G},fromPartial(M){const G=Object.assign({},b);if(G.rooms=[],M.rooms!==void 0&&M.rooms!==null)for(const J of M.rooms)G.rooms.push(h.Room.fromPartial(J));return G}};const _={room:""};a.DeleteRoomRequest={encode(M,G=c.default.Writer.create()){return M.room!==""&&G.uint32(10).string(M.room),G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},_);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.room=J.string();break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},_);return M.room!==void 0&&M.room!==null?G.room=String(M.room):G.room="",G},toJSON(M){const G={};return M.room!==void 0&&(G.room=M.room),G},fromPartial(M){const G=Object.assign({},_);return M.room!==void 0&&M.room!==null?G.room=M.room:G.room="",G}};const T={};a.DeleteRoomResponse={encode(M,G=c.default.Writer.create()){return G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},T);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){default:J.skipType(Y&7);break}}return K},fromJSON(M){return Object.assign({},T)},toJSON(M){return{}},fromPartial(M){return Object.assign({},T)}};const I={room:""};a.ListParticipantsRequest={encode(M,G=c.default.Writer.create()){return M.room!==""&&G.uint32(10).string(M.room),G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},I);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.room=J.string();break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},I);return M.room!==void 0&&M.room!==null?G.room=String(M.room):G.room="",G},toJSON(M){const G={};return M.room!==void 0&&(G.room=M.room),G},fromPartial(M){const G=Object.assign({},I);return M.room!==void 0&&M.room!==null?G.room=M.room:G.room="",G}};const N={};a.ListParticipantsResponse={encode(M,G=c.default.Writer.create()){for(const J of M.participants)h.ParticipantInfo.encode(J,G.uint32(10).fork()).ldelim();return G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},N);for(K.participants=[];J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.participants.push(h.ParticipantInfo.decode(J,J.uint32()));break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},N);if(G.participants=[],M.participants!==void 0&&M.participants!==null)for(const J of M.participants)G.participants.push(h.ParticipantInfo.fromJSON(J));return G},toJSON(M){const G={};return M.participants?G.participants=M.participants.map(J=>J?h.ParticipantInfo.toJSON(J):void 0):G.participants=[],G},fromPartial(M){const G=Object.assign({},N);if(G.participants=[],M.participants!==void 0&&M.participants!==null)for(const J of M.participants)G.participants.push(h.ParticipantInfo.fromPartial(J));return G}};const A={room:"",identity:""};a.RoomParticipantIdentity={encode(M,G=c.default.Writer.create()){return M.room!==""&&G.uint32(10).string(M.room),M.identity!==""&&G.uint32(18).string(M.identity),G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},A);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.room=J.string();break;case 2:K.identity=J.string();break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},A);return M.room!==void 0&&M.room!==null?G.room=String(M.room):G.room="",M.identity!==void 0&&M.identity!==null?G.identity=String(M.identity):G.identity="",G},toJSON(M){const G={};return M.room!==void 0&&(G.room=M.room),M.identity!==void 0&&(G.identity=M.identity),G},fromPartial(M){const G=Object.assign({},A);return M.room!==void 0&&M.room!==null?G.room=M.room:G.room="",M.identity!==void 0&&M.identity!==null?G.identity=M.identity:G.identity="",G}};const V={};a.RemoveParticipantResponse={encode(M,G=c.default.Writer.create()){return G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},V);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){default:J.skipType(Y&7);break}}return K},fromJSON(M){return Object.assign({},V)},toJSON(M){return{}},fromPartial(M){return Object.assign({},V)}};const $={room:"",identity:"",trackSid:"",muted:!1};a.MuteRoomTrackRequest={encode(M,G=c.default.Writer.create()){return M.room!==""&&G.uint32(10).string(M.room),M.identity!==""&&G.uint32(18).string(M.identity),M.trackSid!==""&&G.uint32(26).string(M.trackSid),M.muted===!0&&G.uint32(32).bool(M.muted),G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},$);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.room=J.string();break;case 2:K.identity=J.string();break;case 3:K.trackSid=J.string();break;case 4:K.muted=J.bool();break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},$);return M.room!==void 0&&M.room!==null?G.room=String(M.room):G.room="",M.identity!==void 0&&M.identity!==null?G.identity=String(M.identity):G.identity="",M.trackSid!==void 0&&M.trackSid!==null?G.trackSid=String(M.trackSid):G.trackSid="",M.muted!==void 0&&M.muted!==null?G.muted=Boolean(M.muted):G.muted=!1,G},toJSON(M){const G={};return M.room!==void 0&&(G.room=M.room),M.identity!==void 0&&(G.identity=M.identity),M.trackSid!==void 0&&(G.trackSid=M.trackSid),M.muted!==void 0&&(G.muted=M.muted),G},fromPartial(M){const G=Object.assign({},$);return M.room!==void 0&&M.room!==null?G.room=M.room:G.room="",M.identity!==void 0&&M.identity!==null?G.identity=M.identity:G.identity="",M.trackSid!==void 0&&M.trackSid!==null?G.trackSid=M.trackSid:G.trackSid="",M.muted!==void 0&&M.muted!==null?G.muted=M.muted:G.muted=!1,G}};const L={};a.MuteRoomTrackResponse={encode(M,G=c.default.Writer.create()){return M.track!==void 0&&h.TrackInfo.encode(M.track,G.uint32(10).fork()).ldelim(),G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},L);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.track=h.TrackInfo.decode(J,J.uint32());break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},L);return M.track!==void 0&&M.track!==null?G.track=h.TrackInfo.fromJSON(M.track):G.track=void 0,G},toJSON(M){const G={};return M.track!==void 0&&(G.track=M.track?h.TrackInfo.toJSON(M.track):void 0),G},fromPartial(M){const G=Object.assign({},L);return M.track!==void 0&&M.track!==null?G.track=h.TrackInfo.fromPartial(M.track):G.track=void 0,G}};const D={canSubscribe:!1,canPublish:!1,canPublishData:!1};a.ParticipantPermission={encode(M,G=c.default.Writer.create()){return M.canSubscribe===!0&&G.uint32(8).bool(M.canSubscribe),M.canPublish===!0&&G.uint32(16).bool(M.canPublish),M.canPublishData===!0&&G.uint32(24).bool(M.canPublishData),G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},D);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.canSubscribe=J.bool();break;case 2:K.canPublish=J.bool();break;case 3:K.canPublishData=J.bool();break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},D);return M.canSubscribe!==void 0&&M.canSubscribe!==null?G.canSubscribe=Boolean(M.canSubscribe):G.canSubscribe=!1,M.canPublish!==void 0&&M.canPublish!==null?G.canPublish=Boolean(M.canPublish):G.canPublish=!1,M.canPublishData!==void 0&&M.canPublishData!==null?G.canPublishData=Boolean(M.canPublishData):G.canPublishData=!1,G},toJSON(M){const G={};return M.canSubscribe!==void 0&&(G.canSubscribe=M.canSubscribe),M.canPublish!==void 0&&(G.canPublish=M.canPublish),M.canPublishData!==void 0&&(G.canPublishData=M.canPublishData),G},fromPartial(M){const G=Object.assign({},D);return M.canSubscribe!==void 0&&M.canSubscribe!==null?G.canSubscribe=M.canSubscribe:G.canSubscribe=!1,M.canPublish!==void 0&&M.canPublish!==null?G.canPublish=M.canPublish:G.canPublish=!1,M.canPublishData!==void 0&&M.canPublishData!==null?G.canPublishData=M.canPublishData:G.canPublishData=!1,G}};const H={room:"",identity:"",metadata:""};a.UpdateParticipantRequest={encode(M,G=c.default.Writer.create()){return M.room!==""&&G.uint32(10).string(M.room),M.identity!==""&&G.uint32(18).string(M.identity),M.metadata!==""&&G.uint32(26).string(M.metadata),M.permission!==void 0&&a.ParticipantPermission.encode(M.permission,G.uint32(34).fork()).ldelim(),G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},H);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.room=J.string();break;case 2:K.identity=J.string();break;case 3:K.metadata=J.string();break;case 4:K.permission=a.ParticipantPermission.decode(J,J.uint32());break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},H);return M.room!==void 0&&M.room!==null?G.room=String(M.room):G.room="",M.identity!==void 0&&M.identity!==null?G.identity=String(M.identity):G.identity="",M.metadata!==void 0&&M.metadata!==null?G.metadata=String(M.metadata):G.metadata="",M.permission!==void 0&&M.permission!==null?G.permission=a.ParticipantPermission.fromJSON(M.permission):G.permission=void 0,G},toJSON(M){const G={};return M.room!==void 0&&(G.room=M.room),M.identity!==void 0&&(G.identity=M.identity),M.metadata!==void 0&&(G.metadata=M.metadata),M.permission!==void 0&&(G.permission=M.permission?a.ParticipantPermission.toJSON(M.permission):void 0),G},fromPartial(M){const G=Object.assign({},H);return M.room!==void 0&&M.room!==null?G.room=M.room:G.room="",M.identity!==void 0&&M.identity!==null?G.identity=M.identity:G.identity="",M.metadata!==void 0&&M.metadata!==null?G.metadata=M.metadata:G.metadata="",M.permission!==void 0&&M.permission!==null?G.permission=a.ParticipantPermission.fromPartial(M.permission):G.permission=void 0,G}};const O={room:"",identity:"",trackSids:"",subscribe:!1};a.UpdateSubscriptionsRequest={encode(M,G=c.default.Writer.create()){M.room!==""&&G.uint32(10).string(M.room),M.identity!==""&&G.uint32(18).string(M.identity);for(const J of M.trackSids)G.uint32(26).string(J);M.subscribe===!0&&G.uint32(32).bool(M.subscribe);for(const J of M.participantTracks)h.ParticipantTracks.encode(J,G.uint32(42).fork()).ldelim();return G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},O);for(K.trackSids=[],K.participantTracks=[];J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.room=J.string();break;case 2:K.identity=J.string();break;case 3:K.trackSids.push(J.string());break;case 4:K.subscribe=J.bool();break;case 5:K.participantTracks.push(h.ParticipantTracks.decode(J,J.uint32()));break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},O);if(G.trackSids=[],G.participantTracks=[],M.room!==void 0&&M.room!==null?G.room=String(M.room):G.room="",M.identity!==void 0&&M.identity!==null?G.identity=String(M.identity):G.identity="",M.trackSids!==void 0&&M.trackSids!==null)for(const J of M.trackSids)G.trackSids.push(String(J));if(M.subscribe!==void 0&&M.subscribe!==null?G.subscribe=Boolean(M.subscribe):G.subscribe=!1,M.participantTracks!==void 0&&M.participantTracks!==null)for(const J of M.participantTracks)G.participantTracks.push(h.ParticipantTracks.fromJSON(J));return G},toJSON(M){const G={};return M.room!==void 0&&(G.room=M.room),M.identity!==void 0&&(G.identity=M.identity),M.trackSids?G.trackSids=M.trackSids.map(J=>J):G.trackSids=[],M.subscribe!==void 0&&(G.subscribe=M.subscribe),M.participantTracks?G.participantTracks=M.participantTracks.map(J=>J?h.ParticipantTracks.toJSON(J):void 0):G.participantTracks=[],G},fromPartial(M){const G=Object.assign({},O);if(G.trackSids=[],G.participantTracks=[],M.room!==void 0&&M.room!==null?G.room=M.room:G.room="",M.identity!==void 0&&M.identity!==null?G.identity=M.identity:G.identity="",M.trackSids!==void 0&&M.trackSids!==null)for(const J of M.trackSids)G.trackSids.push(J);if(M.subscribe!==void 0&&M.subscribe!==null?G.subscribe=M.subscribe:G.subscribe=!1,M.participantTracks!==void 0&&M.participantTracks!==null)for(const J of M.participantTracks)G.participantTracks.push(h.ParticipantTracks.fromPartial(J));return G}};const x={};a.UpdateSubscriptionsResponse={encode(M,G=c.default.Writer.create()){return G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},x);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){default:J.skipType(Y&7);break}}return K},fromJSON(M){return Object.assign({},x)},toJSON(M){return{}},fromPartial(M){return Object.assign({},x)}};const j={room:"",kind:0,destinationSids:""};a.SendDataRequest={encode(M,G=c.default.Writer.create()){M.room!==""&&G.uint32(10).string(M.room),M.data.length!==0&&G.uint32(18).bytes(M.data),M.kind!==0&&G.uint32(24).int32(M.kind);for(const J of M.destinationSids)G.uint32(34).string(J);return G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},j);for(K.destinationSids=[],K.data=new Uint8Array;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.room=J.string();break;case 2:K.data=J.bytes();break;case 3:K.kind=J.int32();break;case 4:K.destinationSids.push(J.string());break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},j);if(G.destinationSids=[],G.data=new Uint8Array,M.room!==void 0&&M.room!==null?G.room=String(M.room):G.room="",M.data!==void 0&&M.data!==null&&(G.data=F(M.data)),M.kind!==void 0&&M.kind!==null?G.kind=h.dataPacket_KindFromJSON(M.kind):G.kind=0,M.destinationSids!==void 0&&M.destinationSids!==null)for(const J of M.destinationSids)G.destinationSids.push(String(J));return G},toJSON(M){const G={};return M.room!==void 0&&(G.room=M.room),M.data!==void 0&&(G.data=ne(M.data!==void 0?M.data:new Uint8Array)),M.kind!==void 0&&(G.kind=h.dataPacket_KindToJSON(M.kind)),M.destinationSids?G.destinationSids=M.destinationSids.map(J=>J):G.destinationSids=[],G},fromPartial(M){const G=Object.assign({},j);if(G.destinationSids=[],M.room!==void 0&&M.room!==null?G.room=M.room:G.room="",M.data!==void 0&&M.data!==null?G.data=M.data:G.data=new Uint8Array,M.kind!==void 0&&M.kind!==null?G.kind=M.kind:G.kind=0,M.destinationSids!==void 0&&M.destinationSids!==null)for(const J of M.destinationSids)G.destinationSids.push(J);return G}};const X={};a.SendDataResponse={encode(M,G=c.default.Writer.create()){return G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},X);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){default:J.skipType(Y&7);break}}return K},fromJSON(M){return Object.assign({},X)},toJSON(M){return{}},fromPartial(M){return Object.assign({},X)}};const te={room:"",metadata:""};a.UpdateRoomMetadataRequest={encode(M,G=c.default.Writer.create()){return M.room!==""&&G.uint32(10).string(M.room),M.metadata!==""&&G.uint32(18).string(M.metadata),G},decode(M,G){const J=M instanceof c.default.Reader?M:new c.default.Reader(M);let ie=G===void 0?J.len:J.pos+G;const K=Object.assign({},te);for(;J.pos<ie;){const Y=J.uint32();switch(Y>>>3){case 1:K.room=J.string();break;case 2:K.metadata=J.string();break;default:J.skipType(Y&7);break}}return K},fromJSON(M){const G=Object.assign({},te);return M.room!==void 0&&M.room!==null?G.room=String(M.room):G.room="",M.metadata!==void 0&&M.metadata!==null?G.metadata=String(M.metadata):G.metadata="",G},toJSON(M){const G={};return M.room!==void 0&&(G.room=M.room),M.metadata!==void 0&&(G.metadata=M.metadata),G},fromPartial(M){const G=Object.assign({},te);return M.room!==void 0&&M.room!==null?G.room=M.room:G.room="",M.metadata!==void 0&&M.metadata!==null?G.metadata=M.metadata:G.metadata="",G}};var se=(()=>{if(typeof se!="undefined")return se;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();const oe=se.atob||(M=>se.Buffer.from(M,"base64").toString("binary"));function F(M){const G=oe(M),J=new Uint8Array(G.length);for(let ie=0;ie<G.length;++ie)J[ie]=G.charCodeAt(ie);return J}const Z=se.btoa||(M=>se.Buffer.from(M,"binary").toString("base64"));function ne(M){const G=[];for(const J of M)G.push(String.fromCharCode(J));return Z(G.join(""))}c.default.util.Long!==d.default&&(c.default.util.Long=d.default,c.default.configure())})(livekit_room);var TwirpRPC={},axios$2={exports:{}},bind$2=function a(s,d){return function(){for(var h=new Array(arguments.length),v=0;v<h.length;v++)h[v]=arguments[v];return s.apply(d,h)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray$1(a){return toString.call(a)==="[object Array]"}function isUndefined(a){return typeof a=="undefined"}function isBuffer(a){return a!==null&&!isUndefined(a)&&a.constructor!==null&&!isUndefined(a.constructor)&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function isArrayBuffer(a){return toString.call(a)==="[object ArrayBuffer]"}function isFormData(a){return typeof FormData!="undefined"&&a instanceof FormData}function isArrayBufferView(a){var s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(a):s=a&&a.buffer&&a.buffer instanceof ArrayBuffer,s}function isString(a){return typeof a=="string"}function isNumber(a){return typeof a=="number"}function isObject$2(a){return a!==null&&typeof a=="object"}function isPlainObject(a){if(toString.call(a)!=="[object Object]")return!1;var s=Object.getPrototypeOf(a);return s===null||s===Object.prototype}function isDate(a){return toString.call(a)==="[object Date]"}function isFile(a){return toString.call(a)==="[object File]"}function isBlob(a){return toString.call(a)==="[object Blob]"}function isFunction(a){return toString.call(a)==="[object Function]"}function isStream(a){return isObject$2(a)&&isFunction(a.pipe)}function isURLSearchParams(a){return typeof URLSearchParams!="undefined"&&a instanceof URLSearchParams}function trim$1(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(a,s){if(!(a===null||typeof a=="undefined"))if(typeof a!="object"&&(a=[a]),isArray$1(a))for(var d=0,c=a.length;d<c;d++)s.call(null,a[d],d,a);else for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&s.call(null,a[h],h,a)}function merge(){var a={};function s(h,v){isPlainObject(a[v])&&isPlainObject(h)?a[v]=merge(a[v],h):isPlainObject(h)?a[v]=merge({},h):isArray$1(h)?a[v]=h.slice():a[v]=h}for(var d=0,c=arguments.length;d<c;d++)forEach(arguments[d],s);return a}function extend(a,s,d){return forEach(s,function(h,v){d&&typeof h=="function"?a[v]=bind$1(h,d):a[v]=h}),a}function stripBOM(a){return a.charCodeAt(0)===65279&&(a=a.slice(1)),a}var utils$d={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject:isObject$2,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim:trim$1,stripBOM},utils$c=utils$d;function encode(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function a(s,d,c){if(!d)return s;var h;if(c)h=c(d);else if(utils$c.isURLSearchParams(d))h=d.toString();else{var v=[];utils$c.forEach(d,function(_,T){_===null||typeof _=="undefined"||(utils$c.isArray(_)?T=T+"[]":_=[_],utils$c.forEach(_,function(N){utils$c.isDate(N)?N=N.toISOString():utils$c.isObject(N)&&(N=JSON.stringify(N)),v.push(encode(T)+"="+encode(N))}))}),h=v.join("&")}if(h){var y=s.indexOf("#");y!==-1&&(s=s.slice(0,y)),s+=(s.indexOf("?")===-1?"?":"&")+h}return s},utils$b=utils$d;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function a(s,d,c){return this.handlers.push({fulfilled:s,rejected:d,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1},InterceptorManager$1.prototype.eject=function a(s){this.handlers[s]&&(this.handlers[s]=null)},InterceptorManager$1.prototype.forEach=function a(s){utils$b.forEach(this.handlers,function(c){c!==null&&s(c)})};var InterceptorManager_1=InterceptorManager$1,utils$a=utils$d,normalizeHeaderName$1=function a(s,d){utils$a.forEach(s,function(h,v){v!==d&&v.toUpperCase()===d.toUpperCase()&&(s[d]=h,delete s[v])})},enhanceError$2=function a(s,d,c,h,v){return s.config=d,c&&(s.code=c),s.request=h,s.response=v,s.isAxiosError=!0,s.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},s},enhanceError$1=enhanceError$2,createError$2=function a(s,d,c,h,v){var y=new Error(s);return enhanceError$1(y,d,c,h,v)},createError$1=createError$2,settle$1=function a(s,d,c){var h=c.config.validateStatus;!c.status||!h||h(c.status)?s(c):d(createError$1("Request failed with status code "+c.status,c.config,null,c.request,c))},utils$9=utils$d,cookies$1=utils$9.isStandardBrowserEnv()?function a(){return{write:function(d,c,h,v,y,b){var _=[];_.push(d+"="+encodeURIComponent(c)),utils$9.isNumber(h)&&_.push("expires="+new Date(h).toGMTString()),utils$9.isString(v)&&_.push("path="+v),utils$9.isString(y)&&_.push("domain="+y),b===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(d){var c=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}}():function a(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function a(s){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(s)},combineURLs$1=function a(s,d){return d?s.replace(/\/+$/,"")+"/"+d.replace(/^\/+/,""):s},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function a(s,d){return s&&!isAbsoluteURL(d)?combineURLs(s,d):d},utils$8=utils$d,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function a(s){var d={},c,h,v;return s&&utils$8.forEach(s.split(`
`),function(b){if(v=b.indexOf(":"),c=utils$8.trim(b.substr(0,v)).toLowerCase(),h=utils$8.trim(b.substr(v+1)),c){if(d[c]&&ignoreDuplicateOf.indexOf(c)>=0)return;c==="set-cookie"?d[c]=(d[c]?d[c]:[]).concat([h]):d[c]=d[c]?d[c]+", "+h:h}}),d},utils$7=utils$d,isURLSameOrigin$1=utils$7.isStandardBrowserEnv()?function a(){var s=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a"),c;function h(v){var y=v;return s&&(d.setAttribute("href",y),y=d.href),d.setAttribute("href",y),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return c=h(window.location.href),function(y){var b=utils$7.isString(y)?h(y):y;return b.protocol===c.protocol&&b.host===c.host}}():function a(){return function(){return!0}}(),utils$6=utils$d,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,xhr=function a(s){return new Promise(function(c,h){var v=s.data,y=s.headers,b=s.responseType;utils$6.isFormData(v)&&delete y["Content-Type"];var _=new XMLHttpRequest;if(s.auth){var T=s.auth.username||"",I=s.auth.password?unescape(encodeURIComponent(s.auth.password)):"";y.Authorization="Basic "+btoa(T+":"+I)}var N=buildFullPath(s.baseURL,s.url);_.open(s.method.toUpperCase(),buildURL$1(N,s.params,s.paramsSerializer),!0),_.timeout=s.timeout;function A(){if(!!_){var $="getAllResponseHeaders"in _?parseHeaders(_.getAllResponseHeaders()):null,L=!b||b==="text"||b==="json"?_.responseText:_.response,D={data:L,status:_.status,statusText:_.statusText,headers:$,config:s,request:_};settle(c,h,D),_=null}}if("onloadend"in _?_.onloadend=A:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(A)},_.onabort=function(){!_||(h(createError("Request aborted",s,"ECONNABORTED",_)),_=null)},_.onerror=function(){h(createError("Network Error",s,null,_)),_=null},_.ontimeout=function(){var L="timeout of "+s.timeout+"ms exceeded";s.timeoutErrorMessage&&(L=s.timeoutErrorMessage),h(createError(L,s,s.transitional&&s.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},utils$6.isStandardBrowserEnv()){var V=(s.withCredentials||isURLSameOrigin(N))&&s.xsrfCookieName?cookies.read(s.xsrfCookieName):void 0;V&&(y[s.xsrfHeaderName]=V)}"setRequestHeader"in _&&utils$6.forEach(y,function(L,D){typeof v=="undefined"&&D.toLowerCase()==="content-type"?delete y[D]:_.setRequestHeader(D,L)}),utils$6.isUndefined(s.withCredentials)||(_.withCredentials=!!s.withCredentials),b&&b!=="json"&&(_.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&_.addEventListener("progress",s.onDownloadProgress),typeof s.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(L){!_||(_.abort(),h(L),_=null)}),v||(v=null),_.send(v)})},utils$5=utils$d,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(a,s){!utils$5.isUndefined(a)&&utils$5.isUndefined(a["Content-Type"])&&(a["Content-Type"]=s)}function getDefaultAdapter(){var a;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(a=xhr),a}function stringifySafely(a,s,d){if(utils$5.isString(a))try{return(s||JSON.parse)(a),utils$5.trim(a)}catch(c){if(c.name!=="SyntaxError")throw c}return(d||JSON.stringify)(a)}var defaults$3={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function a(s,d){return normalizeHeaderName(d,"Accept"),normalizeHeaderName(d,"Content-Type"),utils$5.isFormData(s)||utils$5.isArrayBuffer(s)||utils$5.isBuffer(s)||utils$5.isStream(s)||utils$5.isFile(s)||utils$5.isBlob(s)?s:utils$5.isArrayBufferView(s)?s.buffer:utils$5.isURLSearchParams(s)?(setContentTypeIfUnset(d,"application/x-www-form-urlencoded;charset=utf-8"),s.toString()):utils$5.isObject(s)||d&&d["Content-Type"]==="application/json"?(setContentTypeIfUnset(d,"application/json"),stringifySafely(s)):s}],transformResponse:[function a(s){var d=this.transitional,c=d&&d.silentJSONParsing,h=d&&d.forcedJSONParsing,v=!c&&this.responseType==="json";if(v||h&&utils$5.isString(s)&&s.length)try{return JSON.parse(s)}catch(y){if(v)throw y.name==="SyntaxError"?enhanceError(y,this,"E_JSON_PARSE"):y}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function a(s){return s>=200&&s<300}};defaults$3.headers={common:{Accept:"application/json, text/plain, */*"}},utils$5.forEach(["delete","get","head"],function a(s){defaults$3.headers[s]={}}),utils$5.forEach(["post","put","patch"],function a(s){defaults$3.headers[s]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$d,defaults$2=defaults_1,transformData$1=function a(s,d,c){var h=this||defaults$2;return utils$4.forEach(c,function(y){s=y.call(h,s,d)}),s},isCancel$1=function a(s){return!!(s&&s.__CANCEL__)},utils$3=utils$d,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1;function throwIfCancellationRequested(a){a.cancelToken&&a.cancelToken.throwIfRequested()}var dispatchRequest$1=function a(s){throwIfCancellationRequested(s),s.headers=s.headers||{},s.data=transformData.call(s,s.data,s.headers,s.transformRequest),s.headers=utils$3.merge(s.headers.common||{},s.headers[s.method]||{},s.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(h){delete s.headers[h]});var d=s.adapter||defaults$1.adapter;return d(s).then(function(h){return throwIfCancellationRequested(s),h.data=transformData.call(s,h.data,h.headers,s.transformResponse),h},function(h){return isCancel(h)||(throwIfCancellationRequested(s),h&&h.response&&(h.response.data=transformData.call(s,h.response.data,h.response.headers,s.transformResponse))),Promise.reject(h)})},utils$2=utils$d,mergeConfig$2=function a(s,d){d=d||{};var c={},h=["url","method","data"],v=["headers","auth","proxy","params"],y=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],b=["validateStatus"];function _(A,V){return utils$2.isPlainObject(A)&&utils$2.isPlainObject(V)?utils$2.merge(A,V):utils$2.isPlainObject(V)?utils$2.merge({},V):utils$2.isArray(V)?V.slice():V}function T(A){utils$2.isUndefined(d[A])?utils$2.isUndefined(s[A])||(c[A]=_(void 0,s[A])):c[A]=_(s[A],d[A])}utils$2.forEach(h,function(V){utils$2.isUndefined(d[V])||(c[V]=_(void 0,d[V]))}),utils$2.forEach(v,T),utils$2.forEach(y,function(V){utils$2.isUndefined(d[V])?utils$2.isUndefined(s[V])||(c[V]=_(void 0,s[V])):c[V]=_(void 0,d[V])}),utils$2.forEach(b,function(V){V in d?c[V]=_(s[V],d[V]):V in s&&(c[V]=_(void 0,s[V]))});var I=h.concat(v).concat(y).concat(b),N=Object.keys(s).concat(Object.keys(d)).filter(function(V){return I.indexOf(V)===-1});return utils$2.forEach(N,T),c};const name="axios",version="0.21.4",description="Promise based HTTP client for the browser and node.js",main="index.js",scripts={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository={type:"git",url:"https://github.com/axios/axios.git"},keywords=["xhr","http","ajax","promise","node"],author="Matt Zabriskie",license="MIT",bugs={url:"https://github.com/axios/axios/issues"},homepage="https://axios-http.com",devDependencies={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg="dist/axios.min.js",typings="./index.d.ts",dependencies={"follow-redirects":"^1.14.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}];var require$$0={name,version,description,main,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,browser,jsdelivr,unpkg,typings,dependencies,bundlesize},pkg=require$$0,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(a,s){validators$1[a]=function(c){return typeof c===a||"a"+(s<1?"n ":" ")+a}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(a,s){for(var d=s?s.split("."):currentVerArr,c=a.split("."),h=0;h<3;h++){if(d[h]>c[h])return!0;if(d[h]<c[h])return!1}return!1}validators$1.transitional=function a(s,d,c){var h=d&&isOlderVersion(d);function v(y,b){return"[Axios v"+pkg.version+"] Transitional option '"+y+"'"+b+(c?". "+c:"")}return function(y,b,_){if(s===!1)throw new Error(v(b," has been removed in "+d));return h&&!deprecatedWarnings[b]&&(deprecatedWarnings[b]=!0,console.warn(v(b," has been deprecated since v"+d+" and will be removed in the near future"))),s?s(y,b,_):!0}};function assertOptions(a,s,d){if(typeof a!="object")throw new TypeError("options must be an object");for(var c=Object.keys(a),h=c.length;h-- >0;){var v=c[h],y=s[v];if(y){var b=a[v],_=b===void 0||y(b,v,a);if(_!==!0)throw new TypeError("option "+v+" must be "+_);continue}if(d!==!0)throw Error("Unknown option "+v)}}var validator$1={isOlderVersion,assertOptions,validators:validators$1},utils$1=utils$d,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(a){this.defaults=a,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function a(s){typeof s=="string"?(s=arguments[1]||{},s.url=arguments[0]):s=s||{},s=mergeConfig$1(this.defaults,s),s.method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var d=s.transitional;d!==void 0&&validator.assertOptions(d,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var c=[],h=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(s)===!1||(h=h&&A.synchronous,c.unshift(A.fulfilled,A.rejected))});var v=[];this.interceptors.response.forEach(function(A){v.push(A.fulfilled,A.rejected)});var y;if(!h){var b=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(b,c),b=b.concat(v),y=Promise.resolve(s);b.length;)y=y.then(b.shift(),b.shift());return y}for(var _=s;c.length;){var T=c.shift(),I=c.shift();try{_=T(_)}catch(N){I(N);break}}try{y=dispatchRequest(_)}catch(N){return Promise.reject(N)}for(;v.length;)y=y.then(v.shift(),v.shift());return y},Axios$1.prototype.getUri=function a(s){return s=mergeConfig$1(this.defaults,s),buildURL(s.url,s.params,s.paramsSerializer).replace(/^\?/,"")},utils$1.forEach(["delete","get","head","options"],function a(s){Axios$1.prototype[s]=function(d,c){return this.request(mergeConfig$1(c||{},{method:s,url:d,data:(c||{}).data}))}}),utils$1.forEach(["post","put","patch"],function a(s){Axios$1.prototype[s]=function(d,c,h){return this.request(mergeConfig$1(h||{},{method:s,url:d,data:c}))}});var Axios_1=Axios$1;function Cancel$1(a){this.message=a}Cancel$1.prototype.toString=function a(){return"Cancel"+(this.message?": "+this.message:"")},Cancel$1.prototype.__CANCEL__=!0;var Cancel_1=Cancel$1,Cancel=Cancel_1;function CancelToken(a){if(typeof a!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(h){s=h});var d=this;a(function(h){d.reason||(d.reason=new Cancel(h),s(d.reason))})}CancelToken.prototype.throwIfRequested=function a(){if(this.reason)throw this.reason},CancelToken.source=function a(){var s,d=new CancelToken(function(h){s=h});return{token:d,cancel:s}};var CancelToken_1=CancelToken,spread=function a(s){return function(c){return s.apply(null,c)}},isAxiosError=function a(s){return typeof s=="object"&&s.isAxiosError===!0},utils=utils$d,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(a){var s=new Axios(a),d=bind(Axios.prototype.request,s);return utils.extend(d,Axios.prototype,s),utils.extend(d,s),d}var axios$1=createInstance(defaults);axios$1.Axios=Axios,axios$1.create=function a(s){return createInstance(mergeConfig(axios$1.defaults,s))},axios$1.Cancel=Cancel_1,axios$1.CancelToken=CancelToken_1,axios$1.isCancel=isCancel$1,axios$1.all=function a(s){return Promise.all(s)},axios$1.spread=spread,axios$1.isAxiosError=isAxiosError,axios$2.exports=axios$1,axios$2.exports.default=axios$1;var axios=axios$2.exports,mapObj$1={exports:{}};const isObject$1=a=>typeof a=="object"&&a!==null,mapObjectSkip=Symbol("skip"),isObjectCustom=a=>isObject$1(a)&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),mapObject=(a,s,d,c=new WeakMap)=>{if(d={deep:!1,target:{},...d},c.has(a))return c.get(a);c.set(a,d.target);const{target:h}=d;delete d.target;const v=y=>y.map(b=>isObjectCustom(b)?mapObject(b,s,d,c):b);if(Array.isArray(a))return v(a);for(const[y,b]of Object.entries(a)){const _=s(y,b,a);if(_===mapObjectSkip)continue;let[T,I,{shouldRecurse:N=!0}={}]=_;T!=="__proto__"&&(d.deep&&N&&isObjectCustom(I)&&(I=Array.isArray(I)?v(I):mapObject(I,s,d,c)),h[T]=I)}return h};mapObj$1.exports=(a,s,d)=>{if(!isObject$1(a))throw new TypeError(`Expected an object, got \`${a}\` (${typeof a})`);return mapObject(a,s,d)},mapObj$1.exports.mapObjectSkip=mapObjectSkip;var camelcase={exports:{}};const UPPERCASE=/[\p{Lu}]/u,LOWERCASE=/[\p{Ll}]/u,LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu,IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(a,s,d)=>{let c=!1,h=!1,v=!1;for(let y=0;y<a.length;y++){const b=a[y];c&&UPPERCASE.test(b)?(a=a.slice(0,y)+"-"+a.slice(y),c=!1,v=h,h=!0,y++):h&&v&&LOWERCASE.test(b)?(a=a.slice(0,y-1)+"-"+a.slice(y-1),v=h,h=!1,c=!0):(c=s(b)===b&&d(b)!==b,v=h,h=d(b)===b&&s(b)!==b)}return a},preserveConsecutiveUppercase=(a,s)=>(LEADING_CAPITAL.lastIndex=0,a.replace(LEADING_CAPITAL,d=>s(d))),postProcess=(a,s)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,a.replace(SEPARATORS_AND_IDENTIFIER,(d,c)=>s(c)).replace(NUMBERS_AND_IDENTIFIER,d=>s(d))),camelCase$1=(a,s)=>{if(!(typeof a=="string"||Array.isArray(a)))throw new TypeError("Expected the input to be `string | string[]`");if(s={pascalCase:!1,preserveConsecutiveUppercase:!1,...s},Array.isArray(a)?a=a.map(v=>v.trim()).filter(v=>v.length).join("-"):a=a.trim(),a.length===0)return"";const d=s.locale===!1?v=>v.toLowerCase():v=>v.toLocaleLowerCase(s.locale),c=s.locale===!1?v=>v.toUpperCase():v=>v.toLocaleUpperCase(s.locale);return a.length===1?s.pascalCase?c(a):d(a):(a!==d(a)&&(a=preserveCamelCase(a,d,c)),a=a.replace(LEADING_SEPARATORS,""),s.preserveConsecutiveUppercase?a=preserveConsecutiveUppercase(a,d):a=d(a),s.pascalCase&&(a=c(a.charAt(0))+a.slice(1)),postProcess(a,c))};camelcase.exports=camelCase$1,camelcase.exports.default=camelCase$1;class QuickLRU{constructor(s={}){if(!(s.maxSize&&s.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=s.maxSize,this.onEviction=s.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(s,d){if(this.cache.set(s,d),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(const[c,h]of this.oldCache.entries())this.onEviction(c,h);this.oldCache=this.cache,this.cache=new Map}}get(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s)){const d=this.oldCache.get(s);return this.oldCache.delete(s),this._set(s,d),d}}set(s,d){return this.cache.has(s)?this.cache.set(s,d):this._set(s,d),this}has(s){return this.cache.has(s)||this.oldCache.has(s)}peek(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s))return this.oldCache.get(s)}delete(s){const d=this.cache.delete(s);return d&&this._size--,this.oldCache.delete(s)||d}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[s]of this)yield s}*values(){for(const[,s]of this)yield s}*[Symbol.iterator](){for(const s of this.cache)yield s;for(const s of this.oldCache){const[d]=s;this.cache.has(d)||(yield s)}}get size(){let s=0;for(const d of this.oldCache.keys())this.cache.has(d)||s++;return Math.min(this._size+s,this.maxSize)}}var quickLru=QuickLRU;const mapObj=mapObj$1.exports,camelCase=camelcase.exports,QuickLru=quickLru,has=(a,s)=>a.some(d=>typeof d=="string"?d===s:(d.lastIndex=0,d.test(s))),cache$1=new QuickLru({maxSize:1e5}),isObject=a=>typeof a=="object"&&a!==null&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),camelCaseConvert=(a,s)=>{if(!isObject(a))return a;s={deep:!1,pascalCase:!1,...s};const{exclude:d,pascalCase:c,stopPaths:h,deep:v}=s,y=new Set(h),b=_=>(T,I)=>{if(v&&isObject(I)){const N=_===void 0?T:`${_}.${T}`;y.has(N)||(I=mapObj(I,b(N)))}if(!(d&&has(d,T))){const N=c?`${T}_`:T;if(cache$1.has(N))T=cache$1.get(N);else{const A=camelCase(T,{pascalCase:c,locale:!1});T.length<100&&cache$1.set(N,A),T=A}}return[T,I]};return mapObj(a,b(void 0))};var camelcaseKeys=(a,s)=>Array.isArray(a)?Object.keys(a).map(d=>camelCaseConvert(a[d],s)):camelCaseConvert(a,s),__importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(TwirpRPC,"__esModule",{value:!0}),TwirpRPC.TwirpRpc=TwirpRPC.livekitPackage=void 0;const axios_1=__importDefault(axios),camelcase_keys_1=__importDefault(camelcaseKeys),defaultPrefix="/twirp";TwirpRPC.livekitPackage="livekit";class TwirpRpc{constructor(s,d,c,h){this.host=s,this.pkg=d,this.prefix=c||defaultPrefix;let v={baseURL:s};h!=null&&(v.headers={Host:h}),this.instance=axios_1.default.create(v)}request(s,d,c,h){return new Promise((v,y)=>{const b=`${this.prefix}/${this.pkg}.${s}/${d}`;this.instance.post(b,c,{headers:h}).then(_=>{v(camelcase_keys_1.default(_.data,{deep:!0}))}).catch(y)})}}TwirpRPC.TwirpRpc=TwirpRpc;var __awaiter=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(a,s,d,c){function h(v){return v instanceof d?v:new d(function(y){y(v)})}return new(d||(d=Promise))(function(v,y){function b(I){try{T(c.next(I))}catch(N){y(N)}}function _(I){try{T(c.throw(I))}catch(N){y(N)}}function T(I){I.done?v(I.value):h(I.value).then(b,_)}T((c=c.apply(a,s||[])).next())})};Object.defineProperty(RoomServiceClient$1,"__esModule",{value:!0}),RoomServiceClient$1.RoomServiceClient=void 0;const livekit_models_1=livekit_models,livekit_room_1=livekit_room,TwirpRPC_1=TwirpRPC,svc="RoomService";class RoomServiceClient{constructor(s,d,c,h,v){this.rpc=new TwirpRPC_1.TwirpRpc(s,TwirpRPC_1.livekitPackage,void 0,v),this.apiKey=d,this.secret=c,this.jwt=h}createRoom(s){return __awaiter(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"CreateRoom",livekit_room_1.CreateRoomRequest.toJSON(livekit_room_1.CreateRoomRequest.fromPartial(s)),this.authHeader({roomCreate:!0}));return livekit_models_1.Room.fromJSON(d)})}listRooms(s){return __awaiter(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"ListRooms",livekit_room_1.ListRoomsRequest.toJSON({names:s!=null?s:[]}),this.authHeader({roomList:!0}));return livekit_room_1.ListRoomsResponse.fromJSON(d).rooms})}deleteRoom(s){return __awaiter(this,void 0,void 0,function*(){yield this.rpc.request(svc,"DeleteRoom",livekit_room_1.DeleteRoomRequest.toJSON({room:s}),this.authHeader({roomCreate:!0}))})}updateRoomMetadata(s,d){return __awaiter(this,void 0,void 0,function*(){const c=yield this.rpc.request(svc,"UpdateRoomMetadata",livekit_room_1.UpdateRoomMetadataRequest.toJSON({room:s,metadata:d}),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1.Room.fromJSON(c)})}listParticipants(s){return __awaiter(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"ListParticipants",livekit_room_1.ListParticipantsRequest.toJSON({room:s}),this.authHeader({roomAdmin:!0,room:s}));return livekit_room_1.ListParticipantsResponse.fromJSON(d).participants})}getParticipant(s,d){return __awaiter(this,void 0,void 0,function*(){const c=yield this.rpc.request(svc,"GetParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:s,identity:d}),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1.ParticipantInfo.fromJSON(c)})}removeParticipant(s,d){return __awaiter(this,void 0,void 0,function*(){yield this.rpc.request(svc,"RemoveParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:s,identity:d}),this.authHeader({roomAdmin:!0,room:s}))})}mutePublishedTrack(s,d,c,h){return __awaiter(this,void 0,void 0,function*(){const v=livekit_room_1.MuteRoomTrackRequest.toJSON({room:s,identity:d,trackSid:c,muted:h}),y=yield this.rpc.request(svc,"MutePublishedTrack",v,this.authHeader({roomAdmin:!0,room:s}));return livekit_room_1.MuteRoomTrackResponse.fromJSON(y).track})}updateParticipant(s,d,c,h){return __awaiter(this,void 0,void 0,function*(){const v={room:s,identity:d,metadata:c||"",permission:h},y=yield this.rpc.request(svc,"UpdateParticipant",livekit_room_1.UpdateParticipantRequest.toJSON(v),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1.ParticipantInfo.fromJSON(y)})}updateSubscriptions(s,d,c,h){return __awaiter(this,void 0,void 0,function*(){const v=livekit_room_1.UpdateSubscriptionsRequest.toJSON({room:s,identity:d,trackSids:c,subscribe:h,participantTracks:[]});yield this.rpc.request(svc,"UpdateSubscriptions",v,this.authHeader({roomAdmin:!0,room:s}))})}sendData(s,d,c,h=[]){return __awaiter(this,void 0,void 0,function*(){const v=livekit_room_1.SendDataRequest.toJSON({room:s,data:d,kind:c,destinationSids:h});yield this.rpc.request(svc,"SendData",v,this.authHeader({roomAdmin:!0,room:s}))})}authHeader(s){if(this.jwt!=null)return{Authorization:`Bearer ${this.jwt}`}}}RoomServiceClient$1.RoomServiceClient=RoomServiceClient,function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(h,v,y,b){b===void 0&&(b=y),Object.defineProperty(h,b,{enumerable:!0,get:function(){return v[y]}})}:function(h,v,y,b){b===void 0&&(b=y),h[b]=v[y]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(h,v){for(var y in h)y!=="default"&&!Object.prototype.hasOwnProperty.call(v,y)&&s(v,h,y)};Object.defineProperty(a,"__esModule",{value:!0}),a.TrackType=a.TrackInfo=a.Room=a.ParticipantInfo_State=a.ParticipantInfo=a.DataPacket_Kind=void 0,d(grants,a);var c=livekit_models;Object.defineProperty(a,"DataPacket_Kind",{enumerable:!0,get:function(){return c.DataPacket_Kind}}),Object.defineProperty(a,"ParticipantInfo",{enumerable:!0,get:function(){return c.ParticipantInfo}}),Object.defineProperty(a,"ParticipantInfo_State",{enumerable:!0,get:function(){return c.ParticipantInfo_State}}),Object.defineProperty(a,"Room",{enumerable:!0,get:function(){return c.Room}}),Object.defineProperty(a,"TrackInfo",{enumerable:!0,get:function(){return c.TrackInfo}}),Object.defineProperty(a,"TrackType",{enumerable:!0,get:function(){return c.TrackType}}),d(RoomServiceClient$1,a)}(dist);const Rendering=lib$2.LiveApiModel.Rendering,VideoRendering=lib$2.LiveApiModel.VideoRendering,AudioRendering=lib$2.LiveApiModel.AudioRendering,RenderingQuality=lib$2.LiveApiModel.RenderingQuality,Encoding=lib$2.LiveApiModel.Encoding,VideoEncoding=lib$2.LiveApiModel.VideoEncoding,AudioEncoding=lib$2.LiveApiModel.AudioEncoding,ProjectBroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,Role=lib$2.LiveApiModel.Role,DestinationAddress=lib$2.LiveApiModel.DestinationAddress,VideoCodec=lib$2.LiveApiModel.VideoCodec,AudioCodec=lib$2.LiveApiModel.AudioCodec,VideoCodecRateControl=lib$2.LiveApiModel.VideoCodecRateControl,VideoCodecProfile=lib$2.LiveApiModel.VideoCodecProfile;var types$1=Object.freeze(Object.defineProperty({__proto__:null,Rendering,VideoRendering,AudioRendering,RenderingQuality,Encoding,Role,DestinationAddress,VideoEncoding,AudioEncoding,VideoCodec,AudioCodec,VideoCodecRateControl,VideoCodecProfile,ProjectBroadcastPhase},Symbol.toStringTag,{value:"Module"})),Permission=(a=>(a[a.ReadProject=0]="ReadProject",a[a.UpdateProject=1]="UpdateProject",a[a.JoinRoom=2]="JoinRoom",a[a.InviteGuests=3]="InviteGuests",a[a.ManageGuests=4]="ManageGuests",a[a.ManageBroadcast=5]="ManageBroadcast",a[a.ManageSelf=6]="ManageSelf",a))(Permission||{});const permissions={[Role.ROLE_HOST]:[0,1,2,3,4,5],[Role.ROLE_COHOST]:[0,1,2,3,4,5],[Role.ROLE_CONTRIBUTOR]:[0,1,2,3],[Role.ROLE_GUEST]:[0,2,6],[Role.ROLE_VIEWER]:[0,2],[Role.ROLE_IMPERSONATE]:[0,1,3,4,5]},hasPermission=(a,s)=>{var d;return a?Boolean((d=permissions[a])==null?void 0:d.find(c=>c===s)):!1};var DataType=(a=>(a.ChatMessage="ChatMessage",a.ParticipantMetadataUpdate="ParticipantMetadataUpdate",a))(DataType||{}),SpecialEvent=(a=>(a.Chat="Chat",a))(SpecialEvent||{});const decoder$1=new TextDecoder,encoder$1=new TextEncoder;class RoomsManager{constructor(){this.rooms=new Map,this.addRoom=this.addRoom.bind(this),this.ensureRoom=this.ensureRoom.bind(this),this.removeRoom=this.removeRoom.bind(this)}addRoom(s,d,c){const h=new RoomContext(s,d,c,this);return this.rooms.set(d,h),h}ensureRoom(s,d,c){return this.rooms.get(d)?(this.rooms.get(d).token=c,this.rooms.get(d)):this.addRoom(s,d,c)}async removeRoom(s){const d=this.rooms.get(s);if(!Room)throw new Error("room not found!");if(d.isConnecting)throw new Error("Cannot remove room: Room is in connecting state");d.livekitRoom&&await d.livekitRoom.disconnect(!0),this.rooms.delete(s)}}class RoomContext{constructor(s,d,c,h){this._baseUrl=s,this._connectListeners=[],this._roomEventListenerRegistry={},this._jwt=c,Object.values(RoomEvent).forEach(v=>{this._roomEventListenerRegistry[v]=new Set}),this._localParticipantEventListenerRegistry={},Object.values(ParticipantEvent).forEach(v=>{this._localParticipantEventListenerRegistry[v]=new Set}),this._specialEventListenerRegistry={},this._manager=h,this._chatHistory=[],this.roomName=d,this.audioTracks=[],this.participants=[],this.guestParticipantMetadata=[],this.isConnecting=!1,this.subscribeToRoomEvent(RoomEvent.DataReceived,(v,y,b)=>{var I;const _=decoder$1.decode(v);switch(JSON.parse(_).type){case"ChatMessage":return this._appendChat(v,y,b);case"ParticipantMetadataUpdate":{const N=decoder$1.decode(v),A=JSON.parse(N);hasPermission((I=A==null?void 0:A.metadata)==null?void 0:I.participantRole,Permission.ManageSelf)&&this._updateGuestParticipantsStore(A);return}default:return}}),this.connect=this.connect.bind(this),this.subscribeToRoomEvent=this.subscribeToRoomEvent.bind(this),this.subscribeToConnect=this.subscribeToConnect.bind(this),this.subscribeToLocalParticipantEvent=this.subscribeToLocalParticipantEvent.bind(this),this.subscribeToSpecialEvent=this.subscribeToSpecialEvent.bind(this),this.unsubscribeFromRoomEvent=this.unsubscribeFromRoomEvent.bind(this),this.unsubscribeFromSpecialEvent=this.unsubscribeFromSpecialEvent.bind(this),this.unsubscribeFromConnect=this.unsubscribeFromConnect.bind(this),this.unsubscribeFromLocalParticipantEvent=this.unsubscribeFromLocalParticipantEvent.bind(this),this.sendChatMessage=this.sendChatMessage.bind(this),this.kickParticipant=this.kickParticipant.bind(this),this.updateParticipant=this.updateParticipant.bind(this),this.muteTrackAsAdmin=this.muteTrackAsAdmin.bind(this),this._updateParticipants=this._updateParticipants.bind(this),this.subscribeToRoomEvent(RoomEvent.ParticipantConnected,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.ParticipantDisconnected,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.TrackSubscribed,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.TrackUnsubscribed,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.LocalTrackPublished,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.LocalTrackUnpublished,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.Disconnected,()=>{this.livekitRoom.removeAllListeners(),this.livekitRoom=null,this._updateParticipants()}),this.subscribeToRoomEvent(RoomEvent.ParticipantMetadataChanged,(v,y)=>{if(v!==(y==null?void 0:y.metadata)){const b=JSON.parse(y==null?void 0:y.metadata);if(hasPermission(b==null?void 0:b.participantRole,Permission.ManageSelf)){if(b.hasOwnProperty("isMirrored")){const _={participantId:y==null?void 0:y.identity,metadata:b,type:"ParticipantMetadataUpdate"};this._updateGuestParticipantsStore(_)}return}}})}bindApiClient(s){this._apiClient=s}get isAdmin(){return o(this._jwt).video.roomAdmin}set isAdmin(s){log$1.warn("isAdmin cannot be set")}get token(){return this._jwt}set token(s){this._jwt=s}get url(){return this._baseUrl}set url(s){}get chatHistory(){return this._chatHistory}set chatHistory(s){this._chatHistory=s}_updateGuestParticipantsStore(s){if(!this.guestParticipantMetadata.length)this.guestParticipantMetadata.push(s);else{const d=this.guestParticipantMetadata.findIndex(c=>c.participantId===(s==null?void 0:s.participantId));d>-1?this.guestParticipantMetadata[d]=s:this.guestParticipantMetadata.push(s)}}_updateParticipants(){if(!this.livekitRoom||this.livekitRoom.state===RoomState.Disconnected){this.participants=[];return}else{const s=Array.from(this.livekitRoom.participants.values()),d=[this.livekitRoom.localParticipant];d.push(...s),this.guestParticipantMetadata=this.guestParticipantMetadata.filter(c=>d.find(h=>(h==null?void 0:h.identity)===(c==null?void 0:c.participantId))),this.participants=d}}async kickParticipant(s){if(this._admin)this._admin.removeParticipant(this.roomName,s);else throw new Error("no admin permissions")}updateParticipant(s,d){if(this._admin){const c=JSON.stringify(d);this._admin.updateParticipant(this.roomName,s,c)}else throw new Error("no admin permissions")}muteTrackAsAdmin(s,d=!0){if(this._admin){const c=this.participants.find(h=>[...h.audioTracks.values(),...h.videoTracks.values()].find(v=>v.trackSid===s));if(!c){log$1.warn("Could not find participant for track:",{trackSid:s});return}this._admin.mutePublishedTrack(this.roomName,c==null?void 0:c.identity,s,d)}else throw new Error("no admin permissions")}_appendChat(s,d,c){const h=decoder$1.decode(s),v=JSON.parse(h),y=d.identity,b=d.name,_={...v,displayName:b,sender:y};this.chatHistory=[...this.chatHistory,_],this._triggerSpecialEvents("Chat",_)}subscribeToConnect(s){return this._connectListeners.push(s),()=>this.unsubscribeFromConnect(s)}unsubscribeFromConnect(s){this._connectListeners=this._connectListeners.filter(d=>d!==s)}subscribeToSpecialEvent(s,d){return this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].add(d),()=>{this.unsubscribeFromSpecialEvent(s,d)}}unsubscribeFromSpecialEvent(s,d){this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].delete(d)}_triggerSpecialEvents(s,...d){this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].forEach(c=>{c(...d)})}async connect(s={}){var d,c;try{return this.livekitRoom&&this.livekitRoom.state==="connected"?this.livekitRoom:this.isConnecting?null:(this.isConnecting=!0,this.livekitRoom=await connect(`wss://${this._baseUrl}`,this._jwt,{logLevel:CoreContext.logLevel,...s}),this.isConnecting=!1,Object.values(RoomEvent).forEach(h=>{this.livekitRoom.on(h,(...v)=>{this._roomEventListenerRegistry[h].forEach(y=>{y(...v)})})}),Object.values(ParticipantEvent).forEach(h=>{this.livekitRoom.localParticipant.on(h,(...v)=>{this._localParticipantEventListenerRegistry[h].forEach(y=>{y(...v)})})}),this._updateParticipants(),this._connectListeners.forEach(h=>h(this.livekitRoom)),lib$2.LiveKitUtils.isRoomAdmin(this._jwt)?(log$1.info("Room: Granting admin permissions"),log$1.debug("Livekit server: ",(d=this._apiClient)==null?void 0:d.getLiveKitServer(!0)),this._admin=new dist.RoomServiceClient((c=this._apiClient)==null?void 0:c.getLiveKitServer(!0),void 0,void 0,this._jwt)):log$1.debug("Room: Not an admin"),this.livekitRoom)}catch(h){this.isConnecting=!1,log$1.error(h)}}subscribeToLocalParticipantEvent(s,d){return this._localParticipantEventListenerRegistry[s]||(this._localParticipantEventListenerRegistry[s]=new Set),this._localParticipantEventListenerRegistry[s].add(d),()=>{this.unsubscribeFromLocalParticipantEvent(s,d)}}unsubscribeFromLocalParticipantEvent(s,d){this._localParticipantEventListenerRegistry[s]||(this._localParticipantEventListenerRegistry[s]=new Set),this._localParticipantEventListenerRegistry[s].delete(d)}subscribeToRoomEvent(s,d){return this._roomEventListenerRegistry[s]||(this._roomEventListenerRegistry[s]=new Set),this._roomEventListenerRegistry[s].add(d),()=>{this.unsubscribeFromRoomEvent(s,d)}}unsubscribeFromRoomEvent(s,d){this._roomEventListenerRegistry[s]||(this._roomEventListenerRegistry[s]=new Set),this._roomEventListenerRegistry[s].delete(d)}sendChatMessage(s){const{message:d,recipients:c,metadata:h}=s;if(!this.livekitRoom||this.livekitRoom.state!=="connected")return;const v={type:"ChatMessage",recipients:c,metadata:h,content:d,timestamp:Date.now()},y=JSON.stringify(v),b=encoder$1.encode(y);if({...v,sender:this.livekitRoom.localParticipant.identity,displayName:this.livekitRoom.localParticipant.identity},Boolean(c)){const _=c.map(this.livekitRoom.getParticipantByIdentity);return this.livekitRoom.localParticipant.publishData(b,DataPacket_Kind.RELIABLE,_).then(()=>{this._appendChat(b,this.livekitRoom.localParticipant,DataPacket_Kind.RELIABLE)})}else return this.livekitRoom.localParticipant.publishData(b,DataPacket_Kind.RELIABLE).then(()=>{this._appendChat(b,this.livekitRoom.localParticipant,DataPacket_Kind.RELIABLE)})}}const webrtcManager=new RoomsManager;var index$2=Object.freeze(Object.defineProperty({__proto__:null,webrtcManager},Symbol.toStringTag,{value:"Module"}));const encoder=new TextEncoder,decoder=new TextDecoder,simpleRooms=new Map,getRoom=a=>{if(!a)return null;if(simpleRooms.get(a))return simpleRooms.get(a);const s=webrtcManager.rooms.get(a);if(!s)return null;const d=s.livekitRoom,c=d.localParticipant;window.__StudioRoom=d,c||log$1.warn("No local participant!");const h={useTracks:new Set,useTrack:new Map,useParticipants:new Set,useParticipant:new Map,useChatHistory:new Set};let v={tracks:[],participants:[],result:{participants:[],tracks:[]},chat:s.chatHistory};const y=()=>{const L=s.participants,D=s.guestParticipantMetadata,H=L.flatMap(x=>x.getTracks().map(j=>({...j,participant:x}))),O={participants:L.map(x=>{const j=D.find(te=>te.participantId===x.identity);if(j){let te=JSON.parse(x.metadata);te={...te,...j.metadata},x.metadata=JSON.stringify(te)}const X=JSON.parse(x.metadata);return{id:x.identity,isSelf:x===c,connectionQuality:x.connectionQuality,displayName:X.displayName||x.name,joinedAt:x.joinedAt,role:X.participantRole,meta:X,trackIds:H.filter(te=>te.participant.sid===x.sid).map(te=>te.trackSid)}}),tracks:H.map(x=>{var X,te,se,oe;const j=JSON.parse((X=x==null?void 0:x.participant)==null?void 0:X.metadata);return{mediaStreamTrack:(te=x.track)==null?void 0:te.mediaStreamTrack,id:x.trackSid,participantId:(se=x.participant)==null?void 0:se.identity,isMuted:(oe=x.track)==null?void 0:oe.isMuted,type:x.source,isExternal:Boolean(j==null?void 0:j[x.trackSid])}})};v={tracks:H,participants:L,result:O,chat:s.chatHistory},h.useTracks.forEach(x=>x(O.tracks)),h.useTrack.forEach((x,j)=>{j(T(x))}),h.useParticipants.forEach(x=>x(O.participants)),h.useParticipant.forEach((x,j)=>{j(I(x))}),h.useChatHistory.forEach(x=>{x(v.chat)})},b=[RoomEvent.ParticipantConnected,RoomEvent.ParticipantDisconnected,RoomEvent.ParticipantMetadataChanged,RoomEvent.Disconnected,RoomEvent.TrackSubscribed,RoomEvent.TrackUnsubscribed,RoomEvent.LocalTrackPublished,RoomEvent.LocalTrackUnpublished,RoomEvent.ConnectionQualityChanged,RoomEvent.TrackMuted,RoomEvent.TrackUnmuted,RoomEvent.TrackStreamStateChanged];s.subscribeToRoomEvent(RoomEvent.DataReceived,(L,D,H)=>{const O=decoder.decode(L);JSON.parse(O).type===DataType.ParticipantMetadataUpdate&&y()}),b.map(L=>s.subscribeToRoomEvent(L,()=>y())).push(s.subscribeToSpecialEvent(SpecialEvent.Chat,y));const T=L=>v.result.tracks.find(D=>D.id===L),I=L=>v.result.participants.find(D=>D.id===L),N=(L,D)=>{const H=c.getTracks().find(O=>O.trackSid===L);H&&(D?H.mute():H.unmute())};let A,V;const $={id:s.roomName,participantId:c.identity,setTrackEnabled:N,setCameraEnabled:(L=!0)=>c.setCameraEnabled(L),setMicrophoneEnabled:(L=!0)=>c.setMicrophoneEnabled(L),setCamera:async(L={})=>{var H;if(A){log$1.warn("Cannot set camera until previous has resolved");return}A=!0;let D;try{const x=c.getTracks().filter(X=>(X==null?void 0:X.source)===Track.Source.Camera).find(X=>!T(X==null?void 0:X.trackSid).isExternal),j=await c.createTracks({video:{deviceId:L.deviceId,resolution:L.resolution||{width:1280,height:720,frameRate:30,aspectRatio:16/9}}});x!=null&&x.isMuted&&j.forEach(X=>{X.mute()}),D=await Promise.all(j.map(X=>c.publishTrack(X))),x&&c.unpublishTrack(x.track)}catch(O){throw O}finally{return A=!1,T((H=D[0])==null?void 0:H.trackSid)}},setMicrophone:async L=>{var H;if(V){log$1.warn("Cannot set microphone until previous has resolved");return}V=!0;let D;try{const x=c.getTracks().filter(X=>X.source===Track.Source.Microphone).find(X=>!T(X==null?void 0:X.trackSid).isExternal),j=await c.createTracks({audio:L||!0});x!=null&&x.isMuted&&j.forEach(X=>{X.mute()}),D=await Promise.all(j.map(X=>c.publishTrack(X))),x&&c.unpublishTrack(x.track)}catch(O){throw O}finally{return V=!1,T((H=D[0])==null?void 0:H.trackSid)}},addMicrophone:async L=>{var j;if(V){log$1.warn("Cannot set microphone until previous has resolved");return}V=!0;const D=await c.createTracks({audio:L||!0}),O=c.getTracks().filter(X=>X.source===Track.Source.Microphone).find(X=>{var se,oe;const te=T(X==null?void 0:X.trackSid);((oe=(se=te==null?void 0:te.mediaStreamTrack)==null?void 0:se.getSettings())==null?void 0:oe.deviceId)===L.deviceId&&(te==null||te.isExternal)});O!=null&&O.isMuted&&D.forEach(X=>{X.mute()});const x=await Promise.all(D.map(X=>c.publishTrack(X)));return O&&c.unpublishTrack(O.track),V=!1,T((j=x[0])==null?void 0:j.trackSid)},addCamera:async(L={})=>{var x;const D=await c.createTracks({video:{deviceId:L.deviceId,resolution:L.resolution||{width:1280,height:720,frameRate:30,aspectRatio:1.7777777777777777}}}),H=c.getTracks().find(j=>{var X,te,se;return(j==null?void 0:j.source)===Track.Source.Camera&&((se=(te=(X=j==null?void 0:j.track)==null?void 0:X.mediaStreamTrack)==null?void 0:te.getSettings())==null?void 0:se.deviceId)===L.deviceId});H!=null&&H.isMuted&&D.forEach(j=>{j.mute()});const O=await Promise.all(D.map(j=>c.publishTrack(j)));return H&&c.unpublishTrack(H.track),V=!1,T((x=O[0])==null?void 0:x.trackSid)},addScreen:async(L={audio:!1})=>{const D=await c.createScreenTracks(L),H=await Promise.all(D.map(j=>c.publishTrack(j))),O=H.find(j=>j.kind==="video"),x=H.find(j=>j.kind==="audio");return{screen:T(O==null?void 0:O.trackSid),audio:T(x==null?void 0:x.trackSid)}},removeTrack:async L=>{const D=v.tracks.find(H=>H.trackSid===L);c.unpublishTrack(D.track)},setLocalParticipantMetadata:async(L,D)=>{const H=JSON.stringify(D),O=encoder.encode(JSON.stringify({metadata:D,type:DataType.ParticipantMetadataUpdate,participantId:L}));return c.setMetadata(H),await c.publishData(O,DataPacket_Kind.RELIABLE)},setParticipantMetadata:(L,D)=>s.updateParticipant(L,D),kickParticipant:s.kickParticipant,muteTrackAsAdmin:s.muteTrackAsAdmin,sendChatMessage:s.sendChatMessage,getTracks:()=>v.result.tracks,useTracks:L=>(h.useTracks.add(L),L(v.result.tracks),()=>{h.useTracks.delete(L)}),getTrack:T,useTrack:(L,D)=>(h.useTrack.set(D,L),D(T(L)),()=>{h.useTrack.delete(D)}),getParticipant:I,getParticipants:()=>v.result.participants,useParticipants:L=>(h.useParticipants.add(L),L(v.result.participants),()=>{h.useParticipants.delete(L)}),useParticipant:(L,D)=>(h.useParticipant.set(D,L),D(I(L)),()=>{h.useTrack.delete(D)}),useChatHistory:L=>(h.useChatHistory.add(L),L(v.chat),()=>{h.useChatHistory.delete(L)}),useActiveSpeakers:L=>{const D=H=>{L(H.map(O=>O.identity))};return s.livekitRoom.on(RoomEvent.ActiveSpeakersChanged,D),D(s.livekitRoom.activeSpeakers),()=>{var H;(H=s.livekitRoom)==null||H.off(RoomEvent.ActiveSpeakersChanged,D)}},sendData:(L,D)=>{const H=encoder.encode(JSON.stringify(L)),O=D==null?void 0:D.map(x=>s.livekitRoom.getParticipantByIdentity(x).sid);return c.publishData(H,DataPacket_Kind.RELIABLE,O)},onData:L=>{const D=(H,O)=>{const x=JSON.parse(decoder.decode(H));L(x,O==null?void 0:O.identity)};return s.livekitRoom.on(RoomEvent.DataReceived,D),()=>{var H;(H=s.livekitRoom)==null||H.off(RoomEvent.DataReceived,D)}},connect:()=>s.connect(),disconnect:()=>s.livekitRoom.disconnect(),onDisconnected:L=>(s.livekitRoom.on(RoomEvent.Disconnected,L),()=>{var D;(D=s.livekitRoom)==null||D.off(RoomEvent.DataReceived,L)}),setAudioOutput:L=>s.livekitRoom.switchActiveDevice("audiooutput",L)};return y(),simpleRooms.set(a,$),$},{state:state$2}=CoreContext,getAccessTokenData=()=>{var a;return((a=CoreContext.clients.accessTokenClaims)==null?void 0:a.user)||{}},getBaseUser=()=>state$2.user?{id:state$2.user.id,props:state$2.user.props,name:state$2.user.name,projects:state$2.projects.map(toBaseProject),sources:state$2.sources.map(toBaseSource)}:null,toBaseProject=a=>{const{compositor:s,videoApi:d,props:c={},role:h}=a,{destinations:v,encoding:y,rendering:b,sources:_}=d.project,T={get:s.get,getRoot:s.getRoot,getParent:s.getParent};Object.defineProperty(T,"nodes",{get(){return s.nodes.filter(A=>!A._deleted)}});const I=a.videoApi.phase,N=a.videoApi.broadcastId||null;return{broadcastPhase:I,role:h,broadcastId:N,isLive:[ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING,ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPING].includes(I),scene:T,joinRoom:async(A={})=>CoreContext.Command.joinRoom({projectId:a.id,...A}),subscribe:A=>CoreContext.subscribe((V,$)=>{$.projectId&&($==null?void 0:$.projectId)===a.id&&A(V,$)}),destinations:v.map(toBaseDestination),sources:_.map(toBaseSource),encoding:y,rendering:b,id:a.id,hostDisplayName:a.props.hostDisplayName,props:c}},toBaseDestination=a=>{var s;return{id:a.destinationId,enabled:a.enabled,address:a.address,props:((s=a.metadata)==null?void 0:s.props)||(a==null?void 0:a.metadata)||{}}},toBaseSource=a=>{var s;return{id:a.sourceId,address:a.address,props:((s=a.metadata)==null?void 0:s.props)||{}}},hydrateProject=async(a,s,d)=>{const c=a.metadata||{};d&&await CoreContext.clients.LiveApi().project.updateProject({collectionId:a.collectionId,projectId:a.projectId,rendering:{video:{width:d.x,height:d.y,framerate:30}},updateMask:["rendering"]});const h=await layoutToProject(c.layoutId,d);return{id:a.projectId,compositor:h,role:s,videoApi:{project:a,phase:ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_UNSPECIFIED},layoutApi:{layoutId:c.layoutId},props:(c==null?void 0:c.props)||c}},sceneNodeToLayer=a=>{const{id:s,props:d={},children:c=[]}=a;return{...s?{id:s}:{},type:d.type,data:{...d},children:c.map(h=>h.id)}},nodeToLayer=a=>({id:a.id,type:a.props.type,data:{...a.props},children:a.childIds.map(s=>s)}),layerToNode=a=>({id:String(a.id),props:{type:a.type,...a.data},childIds:a.children.map(s=>String(s))}),layoutToProject=async(a,s)=>{const{layers:d}=await CoreContext.clients.LayoutApi().layer.listLayers({layoutId:a});if(s&&d){const{x:y,y:b}=s,_=d==null?void 0:d.reduce((T,I)=>T?T.data.isRoot?T:I.data.isRoot||!d.some(N=>N.children.includes(I.id))?I:T:I,null);if(_){const T=await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:_.layoutId,layerId:_.id,layer:{x:y,y:b,data:{..._.data,size:{x:y,y:b}}}}),I=d.findIndex(N=>N.id===T.id);d[I]=T}}const c=d.map(layerToNode),h=c.reduce((y,b)=>y?y.props.isRoot?y:b.props.isRoot||!c.some(_=>_.childIds.includes(b.id))?b:y:b,null),v=h?toSceneTree(c,h.id):null;return CoreContext.compositor.loadProject(v,a)},getUser=()=>{const a=state$2.user;if(!a)throw new Error("User not loaded");return a},getProject=a=>state$2.projects.find(s=>s.id===a),getProjectByLayoutId=a=>state$2.projects.find(s=>s.compositor.id===a),getProjectRoom=a=>{var s;return getRoom((s=getProject(a))==null?void 0:s.roomId)},{connectionId}=CoreContext,latestUpdateVersion={},getNextNodeVersion=a=>(latestUpdateVersion[a]||(latestUpdateVersion[a]=0),++latestUpdateVersion[a]),request=(a,s)=>{const d=s.map(c=>{const[h,v]=c;return{[h]:v}});return log$1.debug("Batch request",d),CoreContext.clients.LayoutApi().layer.batch({layoutId:a,layers:d,requestMetadata:{connectionId,layoutId:a,updateVersions:s.filter(([c])=>c==="update").map(([c,h])=>({[h.id]:getNextNodeVersion(h.id)})).reduce((c,h)=>({...h,...c}),{})}})},compositorAdapter=(a,s)=>({async insert(d={},c,h){const v=nodeToLayer({id:null,props:d,childIds:[]});c?v.type="child":v.type="root",log$1.debug("Insert layer",v);const y=await CoreContext.clients.LayoutApi().layer.createLayer({layoutId:a,layer:{...v,requestMetadata:{connectionId,layoutId:a}}});if(y.code)throw new Error(y.message);const b=await s.get(c);if(c&&!b)throw Error("Parent not found with ID");if(b){const _=nodeToLayer(b),T=insertAt$1(h,y.id,_.children),I={layoutId:a,layerId:_.id,layer:{children:T,requestMetadata:{connectionId,layoutId:a,updateVersion:{[v.id]:getNextNodeVersion(v.id)}}}};await CoreContext.clients.LayoutApi().layer.updateLayer(I)}return String(y.id)},async update(d,c={}){const h=s.get(d),v=nodeToLayer({...h,props:{...h.props,...c}}),y={layoutId:a,layerId:v.id,layer:{...v,requestMetadata:{connectionId,layoutId:a,updateVersions:{[v.id]:getNextNodeVersion(v.id)}}}};log$1.debug("Update layer",y),await CoreContext.clients.LayoutApi().layer.updateLayer(y)},async remove(d){const c=await s.getParent(d);if(c){const h=nodeToLayer(c),v=h.children.filter(b=>b!==d),y={layoutId:a,layerId:h.id,layer:{children:v,requestMetadata:{connectionId,layoutId:a,updateVersions:{[h.id]:getNextNodeVersion(h.id)}}}};await CoreContext.clients.LayoutApi().layer.updateLayer(y)}await CoreContext.clients.LayoutApi().layer.deleteLayer({layoutId:a,layerId:d,payload:{requestMetadata:{connectionId,layoutId:a}}})},async reorder(d,c){const h=s.get(d),v=nodeToLayer({...h,childIds:c});log$1.debug("Reorder layer children",v),await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:v.id,layer:{children:v.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[v.id]:getNextNodeVersion(v.id)}}}})},async move(d,c,h){const v=s.get(d),y=s.get(s.getParent(d).id),b=nodeToLayer({...y,childIds:pull$2(y.childIds,v.id)}),_=s.get(c),T=nodeToLayer({..._,childIds:insertAt$1(h,v.id,_.childIds)});log$1.debug("Move layers"),await Promise.all([CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:b.id,layer:{children:b.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[b.id]:getNextNodeVersion(b.id)}}}}),CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:T.id,layer:{children:T.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[T.id]:getNextNodeVersion(T.id)}}}})])},async batch(d){const c=d.map(([v,y])=>[v,sceneNodeToLayer(y)]),h=await request(a,c);return log$1.debug("Batch response",h),h}});var config$1=a=>({defaults:{previewTokenDuration:1e3*60*60,guestTokenDuration:1e3*60*60*12,transforms:{RoomParticipant:"LS-Room-Participant",Image:"LS-Image",Banner:"LS-Banner",Text:"LS-Text"}}});const deviceWatchers=new Set,updateMediaStreamTracks=(a,s)=>{const d={audio:a.getAudioTracks()[0],video:a.getVideoTracks()[0]};d.audio!==s.audio&&(d.audio&&a.removeTrack(d.audio),s.audio&&a.addTrack(s.audio)),d.video!==s.video&&(d.video&&a.removeTrack(d.video),s.video&&a.addTrack(s.video))},getDevicePermissions=async()=>{const a={audio:!0,video:!0};return Promise.all([navigator.mediaDevices.getUserMedia({video:!0}).then(s=>{s.getTracks().forEach(d=>d.stop())}).catch(s=>{s.name==="NotAllowedError"&&(a.video=!1)}),navigator.mediaDevices.getUserMedia({audio:!0}).then(s=>{s.getTracks().forEach(d=>d.stop())}).catch(s=>{s.name==="NotAllowedError"&&(a.audio=!1)})]).then(()=>a)},ensureDevicePermissions=async()=>getDevicePermissions(),watchDevices=a=>(deviceWatchers.size===0&&navigator.mediaDevices.addEventListener("devicechange",reportDevices),deviceWatchers.add(a),reportDevices().catch(()=>{}),()=>{deviceWatchers.delete(a),deviceWatchers.size===0&&navigator.mediaDevices.removeEventListener("devicechange",reportDevices)}),getUserMedia=async(...a)=>{const s=await navigator.mediaDevices.getUserMedia(...a);return reportDevices(),s},deviceWithDefaultLabel=(a,s)=>({deviceId:a.deviceId,groupId:a.groupId,kind:a.kind,label:a.label||s}),reportDevices=async()=>{const a=await navigator.mediaDevices.enumerateDevices(),s=a.filter(h=>h.kind==="videoinput").map((h,v)=>deviceWithDefaultLabel(h,"Camera "+(v+1))),d=a.filter(h=>h.kind==="audioinput").map((h,v)=>deviceWithDefaultLabel(h,"Microphone "+(v+1))),c=a.filter(h=>h.kind==="audiooutput").map((h,v)=>deviceWithDefaultLabel(h,"Speaker "+(v+1)));deviceWatchers.forEach(h=>h({webcams:s,microphones:d,speakers:c}))};var webrtc=Object.freeze(Object.defineProperty({__proto__:null,updateMediaStreamTracks,getDevicePermissions,ensureDevicePermissions,watchDevices,getUserMedia},Symbol.toStringTag,{value:"Module"})),jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=React__default.default,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function q(a,s,d){var c,h={},v=null,y=null;d!==void 0&&(v=""+d),s.key!==void 0&&(v=""+s.key),s.ref!==void 0&&(y=s.ref);for(c in s)m.call(s,c)&&!p.hasOwnProperty(c)&&(h[c]=s[c]);if(a&&a.defaultProps)for(c in s=a.defaultProps,s)h[c]===void 0&&(h[c]=s[c]);return{$$typeof:k,type:a,key:v,ref:y,props:h,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l,reactJsxRuntime_production_min.jsx=q,reactJsxRuntime_production_min.jsxs=q,jsxRuntime.exports=reactJsxRuntime_production_min;const jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs,Fragment=jsxRuntime.exports.Fragment,RoomParticipant$1={name:"LS-Room-Participant",sourceType:"RoomParticipant",props:{isMuted:{type:Boolean,required:!1,default:!1},volume:{type:Number,required:!1,default:1}},useSource(a,s){return a.find(d=>isMatch(d.props,s.sourceProps))},create({onUpdate:a,onNewSource:s,onRemove:d},c){const h=document.createElement("div");let v;const y=getProject(CoreContext.state.activeProjectId),b=getProjectRoom(CoreContext.state.activeProjectId);Object.assign(h.style,{position:"relative"});let _,T=c,I=new MediaStream([]);const N=($,L)=>{const D=$/L.width;return D>=.5?3:D>.25?2:D>.15?1:0},A=({props:$,source:L})=>{var oe,F,Z,ne;const D=React.useRef(),{volume:H=1,isHidden:O=!1}=$||{},[x,j]=React.useState(0),te=(L==null?void 0:L.id)===(b==null?void 0:b.participantId)||((oe=L==null?void 0:L.props)==null?void 0:oe.participantId)===(b==null?void 0:b.participantId)||($==null?void 0:$.isMuted),se=!($!=null&&$.isHidden)&&((F=L==null?void 0:L.props)==null?void 0:F.videoEnabled);return React.useEffect(()=>{var M,G;!D.current||(D.current.play().catch(J=>{document.addEventListener("click",()=>{var ie;return(ie=D.current)==null?void 0:ie.play()},{once:!0})}),(L==null?void 0:L.value)instanceof MediaStreamTrack?I&&updateMediaStreamTracks(I,{video:L==null?void 0:L.value,audio:(G=(M=L==null?void 0:L.props)==null?void 0:M.microphone)==null?void 0:G.mediaStreamTrack}):I=L==null?void 0:L.value,I&&I!==D.current.srcObject?D.current.srcObject=I:L!=null&&L.value||(D.current.srcObject=null))},[D.current,L==null?void 0:L.value,(Z=L==null?void 0:L.props)==null?void 0:Z.microphone]),React.useEffect(()=>{!$&&D.current&&(I=null,D.current.srcObject=null,D.current=null)},[$]),React.useLayoutEffect(()=>{if(!D.current)return;const M=()=>{const J=D.current;J&&j(N(J.clientWidth,{width:y.compositor.getRoot().props.size.x,height:y.compositor.getRoot().props.size.y}))},G=new ResizeObserver(J=>{M()});return M(),G==null||G.observe(D.current),()=>{D.current&&(G==null||G.unobserve(D.current),D.current.srcObject=null)}},[D.current,y]),React.useEffect(()=>{!D.current||(D.current.volume=H)},[D.current,H]),jsxs("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"},children:[jsx("div",{style:{background:"#222",position:"absolute",height:"100%",width:"100%",fontSize:"43px",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",opacity:se?"0":"1"},children:(L==null?void 0:L.props.displayName)&&jsx("div",{style:{borderRadius:"50%",background:"#555",width:"70px",height:"70px",textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1em"},children:(L==null?void 0:L.props.displayName.slice(0,1))||""})}),jsx("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%",...Boolean((ne=L==null?void 0:L.props)==null?void 0:ne.mirrored)&&{transform:"scaleX(-1)"}},children:jsx("video",{ref:D,autoPlay:!0,muted:te,disablePictureInPicture:!0,playsInline:!0,style:{left:"50%",top:"50%",position:"relative",transform:"translate3d(-50%, -50%, 0)",height:"100%",opacity:se?"1":"0",objectFit:(L==null?void 0:L.props.type)==="screen"?"contain":"cover",background:"rgba(0,0,0,0.6)"}})}),(L==null?void 0:L.props.displayName)&&jsx("div",{className:"NameBannerContainer",style:{width:"100%",height:"100%",position:"absolute"},children:jsx("div",{className:"NameBanner","data-size":x,style:{padding:"12px 30px",width:"fit-content",height:"fit-content",top:"100%",transform:"translateY(-100%)",left:0},children:jsx("div",{className:"NameBanner-body",children:L.props.displayName})})})]})},V=()=>{v!=null||(v=ReactDOM__default.default.createRoot(h)),v.render(jsx(A,{source:_,props:T}))};return a($=>{T=$,V()}),s($=>{_=$,V()}),d($=>{T=$,V()}),{root:h}}},Square={name:"LS-Square",props:{color:{default:"green"}},create({onUpdate:a}){const s=document.createElement("div");return a(({color:d})=>{Object.assign(s.style,{width:"100%",height:"100%",background:d||"red"})}),{root:s}}},Image$2={name:"LS-Image",props:{src:{},fit:{}},create({onUpdate:a}){const s=document.createElement("img");return a(({src:d,fit:c})=>{s.setAttribute("src",d),Object.assign(s.style,{width:"100%",height:"100%",objectFit:c})}),{root:s}}};function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}return a},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(a,s){if(a==null)return{};var d={},c=Object.keys(a),h,v;for(v=0;v<c.length;v++)h=c[v],!(s.indexOf(h)>=0)&&(d[h]=a[h]);return d}function _setPrototypeOf(a,s){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,h){return c.__proto__=h,c},_setPrototypeOf(a,s)}function _inheritsLoose(a,s){a.prototype=Object.create(s.prototype),a.prototype.constructor=a,_setPrototypeOf(a,s)}function hasClass(a,s){return a.classList?!!s&&a.classList.contains(s):(" "+(a.className.baseVal||a.className)+" ").indexOf(" "+s+" ")!==-1}function addClass(a,s){a.classList?a.classList.add(s):hasClass(a,s)||(typeof a.className=="string"?a.className=a.className+" "+s:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+s))}function replaceClassName(a,s){return a.replace(new RegExp("(^|\\s)"+s+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$1(a,s){a.classList?a.classList.remove(s):typeof a.className=="string"?a.className=replaceClassName(a.className,s):a.setAttribute("class",replaceClassName(a.className&&a.className.baseVal||"",s))}var config={disabled:!1},TransitionGroupContext=React__default.default.createContext(null),UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(a){_inheritsLoose(s,a);function s(c,h){var v;v=a.call(this,c,h)||this;var y=h,b=y&&!y.isMounting?c.enter:c.appear,_;return v.appearStatus=null,c.in?b?(_=EXITED,v.appearStatus=ENTERING):_=ENTERED:c.unmountOnExit||c.mountOnEnter?_=UNMOUNTED:_=EXITED,v.state={status:_},v.nextCallback=null,v}s.getDerivedStateFromProps=function(h,v){var y=h.in;return y&&v.status===UNMOUNTED?{status:EXITED}:null};var d=s.prototype;return d.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},d.componentDidUpdate=function(h){var v=null;if(h!==this.props){var y=this.state.status;this.props.in?y!==ENTERING&&y!==ENTERED&&(v=ENTERING):(y===ENTERING||y===ENTERED)&&(v=EXITING)}this.updateStatus(!1,v)},d.componentWillUnmount=function(){this.cancelNextCallback()},d.getTimeouts=function(){var h=this.props.timeout,v,y,b;return v=y=b=h,h!=null&&typeof h!="number"&&(v=h.exit,y=h.enter,b=h.appear!==void 0?h.appear:y),{exit:v,enter:y,appear:b}},d.updateStatus=function(h,v){h===void 0&&(h=!1),v!==null?(this.cancelNextCallback(),v===ENTERING?this.performEnter(h):this.performExit()):this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},d.performEnter=function(h){var v=this,y=this.props.enter,b=this.context?this.context.isMounting:h,_=this.props.nodeRef?[b]:[ReactDOM__default$1.default.findDOMNode(this),b],T=_[0],I=_[1],N=this.getTimeouts(),A=b?N.appear:N.enter;if(!h&&!y||config.disabled){this.safeSetState({status:ENTERED},function(){v.props.onEntered(T)});return}this.props.onEnter(T,I),this.safeSetState({status:ENTERING},function(){v.props.onEntering(T,I),v.onTransitionEnd(A,function(){v.safeSetState({status:ENTERED},function(){v.props.onEntered(T,I)})})})},d.performExit=function(){var h=this,v=this.props.exit,y=this.getTimeouts(),b=this.props.nodeRef?void 0:ReactDOM__default$1.default.findDOMNode(this);if(!v||config.disabled){this.safeSetState({status:EXITED},function(){h.props.onExited(b)});return}this.props.onExit(b),this.safeSetState({status:EXITING},function(){h.props.onExiting(b),h.onTransitionEnd(y.exit,function(){h.safeSetState({status:EXITED},function(){h.props.onExited(b)})})})},d.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},d.safeSetState=function(h,v){v=this.setNextCallback(v),this.setState(h,v)},d.setNextCallback=function(h){var v=this,y=!0;return this.nextCallback=function(b){y&&(y=!1,v.nextCallback=null,h(b))},this.nextCallback.cancel=function(){y=!1},this.nextCallback},d.onTransitionEnd=function(h,v){this.setNextCallback(v);var y=this.props.nodeRef?this.props.nodeRef.current:ReactDOM__default$1.default.findDOMNode(this),b=h==null&&!this.props.addEndListener;if(!y||b){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var _=this.props.nodeRef?[this.nextCallback]:[y,this.nextCallback],T=_[0],I=_[1];this.props.addEndListener(T,I)}h!=null&&setTimeout(this.nextCallback,h)},d.render=function(){var h=this.state.status;if(h===UNMOUNTED)return null;var v=this.props,y=v.children;v.in,v.mountOnEnter,v.unmountOnExit,v.appear,v.enter,v.exit,v.timeout,v.addEndListener,v.onEnter,v.onEntering,v.onEntered,v.onExit,v.onExiting,v.onExited,v.nodeRef;var b=_objectWithoutPropertiesLoose(v,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React__default.default.createElement(TransitionGroupContext.Provider,{value:null},typeof y=="function"?y(h,b):React__default.default.cloneElement(React__default.default.Children.only(y),b))},s}(React__default.default.Component);Transition.contextType=TransitionGroupContext,Transition.propTypes={};function noop(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop},Transition.UNMOUNTED=UNMOUNTED,Transition.EXITED=EXITED,Transition.ENTERING=ENTERING,Transition.ENTERED=ENTERED,Transition.EXITING=EXITING;var Transition$1=Transition,_addClass=function a(s,d){return s&&d&&d.split(" ").forEach(function(c){return addClass(s,c)})},removeClass=function a(s,d){return s&&d&&d.split(" ").forEach(function(c){return removeClass$1(s,c)})},CSSTransition=function(a){_inheritsLoose(s,a);function s(){for(var c,h=arguments.length,v=new Array(h),y=0;y<h;y++)v[y]=arguments[y];return c=a.call.apply(a,[this].concat(v))||this,c.appliedClasses={appear:{},enter:{},exit:{}},c.onEnter=function(b,_){var T=c.resolveArguments(b,_),I=T[0],N=T[1];c.removeClasses(I,"exit"),c.addClass(I,N?"appear":"enter","base"),c.props.onEnter&&c.props.onEnter(b,_)},c.onEntering=function(b,_){var T=c.resolveArguments(b,_),I=T[0],N=T[1],A=N?"appear":"enter";c.addClass(I,A,"active"),c.props.onEntering&&c.props.onEntering(b,_)},c.onEntered=function(b,_){var T=c.resolveArguments(b,_),I=T[0],N=T[1],A=N?"appear":"enter";c.removeClasses(I,A),c.addClass(I,A,"done"),c.props.onEntered&&c.props.onEntered(b,_)},c.onExit=function(b){var _=c.resolveArguments(b),T=_[0];c.removeClasses(T,"appear"),c.removeClasses(T,"enter"),c.addClass(T,"exit","base"),c.props.onExit&&c.props.onExit(b)},c.onExiting=function(b){var _=c.resolveArguments(b),T=_[0];c.addClass(T,"exit","active"),c.props.onExiting&&c.props.onExiting(b)},c.onExited=function(b){var _=c.resolveArguments(b),T=_[0];c.removeClasses(T,"exit"),c.addClass(T,"exit","done"),c.props.onExited&&c.props.onExited(b)},c.resolveArguments=function(b,_){return c.props.nodeRef?[c.props.nodeRef.current,b]:[b,_]},c.getClassNames=function(b){var _=c.props.classNames,T=typeof _=="string",I=T&&_?_+"-":"",N=T?""+I+b:_[b],A=T?N+"-active":_[b+"Active"],V=T?N+"-done":_[b+"Done"];return{baseClassName:N,activeClassName:A,doneClassName:V}},c}var d=s.prototype;return d.addClass=function(h,v,y){var b=this.getClassNames(v)[y+"ClassName"],_=this.getClassNames("enter"),T=_.doneClassName;v==="appear"&&y==="done"&&T&&(b+=" "+T),y==="active"&&h&&h.scrollTop,b&&(this.appliedClasses[v][y]=b,_addClass(h,b))},d.removeClasses=function(h,v){var y=this.appliedClasses[v],b=y.base,_=y.active,T=y.done;this.appliedClasses[v]={},b&&removeClass(h,b),_&&removeClass(h,_),T&&removeClass(h,T)},d.render=function(){var h=this.props;h.classNames;var v=_objectWithoutPropertiesLoose(h,["classNames"]);return React__default.default.createElement(Transition$1,_extends({},v,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s}(React__default.default.Component);CSSTransition.defaultProps={classNames:""},CSSTransition.propTypes={};var CSSTransition$1=CSSTransition,_leaveRenders,_enterRenders;function areChildrenDifferent(a,s){return!(a===s||React__default.default.isValidElement(a)&&React__default.default.isValidElement(s)&&a.key!=null&&a.key===s.key)}var modes={out:"out-in",in:"in-out"},callHook=function a(s,d,c){return function(){var h;s.props[d]&&(h=s.props)[d].apply(h,arguments),c()}},leaveRenders=(_leaveRenders={},_leaveRenders[modes.out]=function(a){var s=a.current,d=a.changeState;return React__default.default.cloneElement(s,{in:!1,onExited:callHook(s,"onExited",function(){d(ENTERING,null)})})},_leaveRenders[modes.in]=function(a){var s=a.current,d=a.changeState,c=a.children;return[s,React__default.default.cloneElement(c,{in:!0,onEntered:callHook(c,"onEntered",function(){d(ENTERING)})})]},_leaveRenders),enterRenders=(_enterRenders={},_enterRenders[modes.out]=function(a){var s=a.children,d=a.changeState;return React__default.default.cloneElement(s,{in:!0,onEntered:callHook(s,"onEntered",function(){d(ENTERED,React__default.default.cloneElement(s,{in:!0}))})})},_enterRenders[modes.in]=function(a){var s=a.current,d=a.children,c=a.changeState;return[React__default.default.cloneElement(s,{in:!1,onExited:callHook(s,"onExited",function(){c(ENTERED,React__default.default.cloneElement(d,{in:!0}))})}),React__default.default.cloneElement(d,{in:!0})]},_enterRenders),SwitchTransition=function(a){_inheritsLoose(s,a);function s(){for(var c,h=arguments.length,v=new Array(h),y=0;y<h;y++)v[y]=arguments[y];return c=a.call.apply(a,[this].concat(v))||this,c.state={status:ENTERED,current:null},c.appeared=!1,c.changeState=function(b,_){_===void 0&&(_=c.state.current),c.setState({status:b,current:_})},c}var d=s.prototype;return d.componentDidMount=function(){this.appeared=!0},s.getDerivedStateFromProps=function(h,v){return h.children==null?{current:null}:v.status===ENTERING&&h.mode===modes.in?{status:ENTERING}:v.current&&areChildrenDifferent(v.current,h.children)?{status:EXITING}:{current:React__default.default.cloneElement(h.children,{in:!0})}},d.render=function(){var h=this.props,v=h.children,y=h.mode,b=this.state,_=b.status,T=b.current,I={children:v,current:T,changeState:this.changeState,status:_},N;switch(_){case ENTERING:N=enterRenders[y](I);break;case EXITING:N=leaveRenders[y](I);break;case ENTERED:N=T}return React__default.default.createElement(TransitionGroupContext.Provider,{value:{isMounting:!this.appeared}},N)},s}(React__default.default.Component);SwitchTransition.propTypes={},SwitchTransition.defaultProps={mode:modes.out};var SwitchTransition$1=SwitchTransition;const Animations={"fade-in":".fade-in{-webkit-animation:fade-in;animation:fade-in}@-webkit-keyframes fade-in{0%{opacity:0}100%{opacity:1}}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}","fade-out":".fade-out{-webkit-animation:fade-out;animation:fade-out}@-webkit-keyframes fade-out{0%{opacity:1}100%{opacity:0}}@keyframes fade-out{0%{opacity:1}100%{opacity:0}}","slide-in-blurred-top":".slide-in-blurred-top{-webkit-animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both;animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both}@-webkit-keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}@keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}","slide-in-left":".slide-in-left{-webkit-animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both}@-webkit-keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}@keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}","slide-out-left":".slide-out-left{-webkit-animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both;animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both}@-webkit-keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}@keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}"},APIKitAnimation=a=>{const{enter:s,exit:d,children:c,tag:h="div",direction:v="normal",duration:y=500,id:b,type:_}=a,T=b?`${_}-${b}`:`${_}-api-kit-animation`;return jsxs("div",{style:{height:"100%",width:"100%"},children:[jsx("style",{dangerouslySetInnerHTML:{__html:renderStyle(_,s,d,y,v)}}),jsx(SwitchTransition$1,{mode:"out-in",children:jsx(CSSTransition$1,{addEndListener:(I,N)=>{I.addEventListener("transitionend",N,!1)},classNames:{enter:`${_}-default-enter`,enterActive:s,exit:`${_}-default-leave`,exitActive:d},timeout:y,children:jsx("div",{style:{height:"100%",width:"100%"},children:c})},T)})]})},renderStyle=(a,s,d,c,h)=>`
        body {
          margin: 0;
          padding: 0;
        }
        
        ${Animations[s]}
        
        ${Animations[d]}

        .${a}-transition {
          transition: opacity ${c}ms ease-out};
        }

        .${a}-default-enter {
          opacity: 0;
        }

        .${a}-default-enter.${s} {
          animation-direction: ${h};
          animation-duration: ${c/1e3}s;
          animation-fill-mode: both;
          animation-timing-function: ease-out;
        }

        .${a}-default-leave {
          opacity: 1;
        }

        .${a}-default-leave.${d} {
          animation-direction: ${h};
          animation-duration: ${c/1e3}s;
          animation-timing-function: ease-out;
          animation-fill-mode: both;
        }
        `;var APIKitAnimationTypes=(a=>(a.FADE_IN="fade-in",a.FADE_OUT="fade-out",a.SLIDE_IN_BLURRED_TOP="slide-in-blurred-top",a.SLIDE_IN_LEFT="slide-in-left",a.SLIDE_OUT_LEFT="slide-out-left",a))(APIKitAnimationTypes||{});const SourceTriggerMap=[{sourceType:"Overlay",trigger:"OverlayMetadataUpdate"},{sourceType:"Background",trigger:"BackgroundMetadataUpdate"}],Video2={name:"LS-Video-2",sourceType:"Video2",props:{id:{type:String,required:!0}},useSource(a,s){return a.find(d=>d.props.type===s.id)},create({onUpdate:a,onNewSource:s,onRemove:d},c){d(()=>{clearInterval(T)});const h=document.createElement("div");let v;const y=getProjectRoom(CoreContext.state.activeProjectId),b=getProject(CoreContext.state.activeProjectId).role;let _,T;const I=({source:A})=>{var F;const V=SourceTriggerMap.find(Z=>Z.sourceType===c.proxySource),{src:$,type:L,meta:D,loop:H}=(A==null?void 0:A.value)||{},{id:O}=A||{},[x,j]=React__default.default.useState(null),X=React__default.default.useRef(null);console.log("Updated current time",(F=X==null?void 0:X.current)==null?void 0:F.currentTime);const te=React__default.default.useCallback(Z=>{X.current=Z,j(Z?Z.id:null)},[]),se=React__default.default.useCallback(()=>{X!=null&&X.current&&X.current.play().catch(()=>{var Z;X.current.muted=!0,(Z=X.current)==null||Z.play()})},[$]),oe=React__default.default.useCallback(()=>{T&&clearInterval(T),trigger$1("VideoEnded",{id:O,category:L})},[$]);return React__default.default.useEffect(()=>{D&&(X==null?void 0:X.current)&&x&&hasPermission(b,Permission.ManageSelf)&&(X.current.currentTime=Number(D==null?void 0:D.time))},[D==null?void 0:D.time,x]),React__default.default.useEffect(()=>()=>{T&&clearInterval(T)},[O]),React__default.default.useEffect(()=>{var Z;if(!x)T&&clearInterval(T);else if(X.current)return X.current.src=$,H&&(X.current.loop=Boolean(H)),X.current.play().catch(()=>{X.current.muted=!0,X.current.play()}),T=setInterval(()=>{if(X.current.duration){const ne=X.current.duration-X.current.currentTime;trigger$1("VideoTimeUpdate",{category:L,id:O,time:Math.floor(ne)})}},1e3),hasPermission(b,Permission.ManageGuests)&&triggerInternal$1(V.trigger,{projectId:CoreContext.state.activeProjectId,role:b,sourceId:O,doTrigger:!0,metadata:{time:Math.floor((Z=X==null?void 0:X.current)==null?void 0:Z.currentTime)||0,owner:y==null?void 0:y.participantId}}),y==null?void 0:y.onData((ne,M)=>{var G,J;(G=X==null?void 0:X.current)!=null&&G.currentTime&&ne.type==="UserJoined"&&hasPermission(b,Permission.ManageGuests)&&triggerInternal$1(V.trigger,{projectId:CoreContext.state.activeProjectId,role:b,sourceId:x,doTrigger:!0,metadata:{time:Math.floor((J=X==null?void 0:X.current)==null?void 0:J.currentTime)||0,owner:y==null?void 0:y.participantId,guest:M}})})},[x]),jsx(APIKitAnimation,{id:O,type:"video",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400,children:$&&jsx("video",{id:O,ref:te,style:c.style,...c.props,onLoadedData:se,onEnded:oe})})},N=()=>{v!=null||(v=ReactDOM__default.default.createRoot(h)),v.render(jsx(I,{source:_}))};return a(()=>{N()}),s(A=>{_=A,N()}),{root:h}}},Image2={name:"LS-Image-2",sourceType:"Image2",props:{id:{type:String,required:!0}},useSource(a,s){return a.find(d=>d.props.type===s.id)},create({onUpdate:a,onNewSource:s},d){const c=document.createElement("div");let h,v;const y=({source:_})=>{const{src:T,meta:I}=(_==null?void 0:_.value)||{},{id:N}=_||{};return jsx(APIKitAnimation,{id:N,type:"image",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400,children:T&&jsx("img",{style:{...d==null?void 0:d.style,...I==null?void 0:I.style},className:"image-transition",src:T})})},b=()=>{h!=null||(h=ReactDOM__default.default.createRoot(c)),h.render(jsx(y,{source:v}))};return a(()=>{b()}),s(_=>{v=_,b()}),{root:c}}},Element={name:"Element",sourceType:"Element",create({onUpdate:a},{tagName:s}){const d=document.createElement(s);return a(({tagName:c,attributes:h={},fields:v={}})=>{c==="img"?(d==null?void 0:d.src)!==h.src&&Object.keys(h).forEach(y=>{d.setAttribute(y,h[y])}):Object.keys(h).forEach(y=>{d.setAttribute(y,h[y])}),Object.keys(v).forEach(y=>{Object.assign(d[y],v[y])})}),{root:d}}},Video={name:"LS-Video",sourceType:"LS-Video",create({onUpdate:a,onEvent:s,onRemove:d}){d(()=>{clearInterval(h)});const c=document.createElement("video");let h;return a(({attributes:v={},fields:y={},sourceProps:b={},id:_})=>{(c.src!==v.src||c.id!==v.id&&v.id)&&(h&&clearInterval(h),Object.keys(v).forEach(T=>{c.setAttribute(T,v[T])}),c.onloadedmetadata=()=>{v.muted?(c.muted=!0,c.play()):c.muted=!1},h=setInterval(()=>{if(c.duration){const T=c.duration-c.currentTime;trigger$1("VideoTimeUpdate",{category:_,id:b==null?void 0:b.id,time:Math.floor(T)})}},1e3),c.loop=Boolean(v.loop),c.onended=()=>{h&&clearInterval(h),trigger$1("VideoEnded",{id:b==null?void 0:b.id,category:_})},Object.keys(y).forEach(T=>{Object.assign(c[T],y[T])}))}),{root:c}}},Banner$1={name:"LS-Banner",sourceType:"Banner",props:{bannerId:{type:String,required:!0}},useSource(a,s){return a.find(d=>d.id===s.bannerId)},create({onUpdate:a,onNewSource:s},d){const c=document.createElement("div");let h,v,y,b;const _=({currentSource:I,latestSource:N})=>{const[A,V]=React.useState(!1),{headerText:$,bodyText:L}=(N==null?void 0:N.value)||{};return React.useEffect(()=>{window.setTimeout(()=>{V(Boolean(I))}),I||V(!1)},[I]),jsx("div",{className:"BannerContainer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end",transition:"200ms ease all",...A?{zIndex:2,opacity:1,transform:"translateX(0)"}:{zIndex:1,opacity:0,transform:"translateX(-200px)"}},children:jsxs("div",{className:"Banner",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"},children:[$&&jsx("div",{className:"Banner-header",style:{marginBottom:6},children:$}),L&&jsx("div",{className:"Banner-body",children:L})]})})},T=()=>{h!=null||(h=ReactDOM__default.default.createRoot(c)),h.render(jsxs(Fragment,{children:[b&&b.id!==y.id&&jsx(_,{currentSource:null,latestSource:b},b==null?void 0:b.id),jsx(_,{currentSource:v,latestSource:y},y==null?void 0:y.id)]}))};return a(()=>{T()}),s(I=>{b=v,v=I,v&&(y=v),T()}),{root:c}}},Logo$1={name:"LS-Logo",sourceType:"Logo",props:{id:{type:String,required:!0}},useSource(a,s){return a.find(d=>d.props.type===s.id)},create({onUpdate:a,onNewSource:s},d){const c=document.createElement("div");let h,v;const y=({source:_})=>{const{src:T,meta:I,logoPosition:N}=(_==null?void 0:_.value)||{},{id:A}=_||{};return jsx(APIKitAnimation,{type:"logo",id:A,enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400,children:T&&jsx("div",{className:"logo wrapper",children:jsx("img",{style:{...d==null?void 0:d.style,...I==null?void 0:I.style},src:T})})})},b=()=>{h!=null||(h=ReactDOM__default.default.createRoot(c)),h.render(jsx(y,{source:v}))};return a(()=>{b()}),s(_=>{v=_,b()}),{root:c}}},Iframe=({url:a,allowFullScreen:s,position:d,display:c,height:h,width:v,overflow:y,styles:b,onLoad:_,id:T,frameBorder:I,className:N,name:A,target:V,iframeRef:$,children:L,src:D})=>{const H=Object.assign({src:D||a,target:V||null,style:{position:d||null,display:c||"block",overflow:y||null,...b},name:A||null,className:N||null,id:T||null,onLoad:_||null,height:h||"100%",width:v||"100%",allow:"autoplay"});let O=Object.create(null);for(let x of Object.keys(H))H[x]!=null&&(O[x]=H[x]);for(let x of Object.keys(O.style))O.style[x]==null&&delete O.style[x];if(s)if("allow"in O){const x=O.allow.replace("fullscreen","");O.allow=`fullscreen ${x.trim()}`.trim()}else O.allow="fullscreen";return I>=0&&(O.style.hasOwnProperty("border")||(O.style.border=I)),jsx(APIKitAnimation,{id:T,type:"image",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400,children:L?jsx("iframe",{ref:$,...O,children:L}):jsx("iframe",{ref:$,...O})})},Image$1=({source:a,initialProps:s})=>{const{src:d,meta:c}=(a==null?void 0:a.value)||{},{id:h}=a||{};return jsx(APIKitAnimation,{id:h,type:"image",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400,children:d&&jsx("img",{style:{...s==null?void 0:s.style,...c==null?void 0:c.style},className:"image-transition",src:d})})},Overlay={name:"LS-Overlay",sourceType:"Overlay",props:{id:{type:String,required:!0}},useSource(a,s){return a.find(d=>d.props.type===s.id)},create({onUpdate:a,onNewSource:s},d){const c=document.createElement("div");let h,v;const y=({source:_})=>{const{src:T,meta:I,height:N,width:A}=(_==null?void 0:_.value)||{},V=React__default.default.useRef(null);React.useEffect(()=>{V.current&&(V.current.style.removeProperty("transformOrigin"),V.current.style.removeProperty("transform"),V.current.style.opacity="0")},[T]);const $=()=>{if(V.current){const D=getProject(CoreContext.state.activeProjectId).compositor.getRoot(),{x:H,y:O}=D.props.size;let x=V.current.clientWidth,j=V.current.clientHeight,X;x&&j?X=Math.min(H/x,O/j):X=1,V.current.style.willChange="transform",V.current.style.transformOrigin="0 0",V.current.style.transform=`scale(${X}) translateZ(0)`,V.current.style.opacity="1"}};return jsxs(React__default.default.Fragment,{children:[(I==null?void 0:I.type)==="html-overlay"&&jsx(Iframe,{url:T,frameBorder:0,iframeRef:V,height:N,width:A,onLoad:$,styles:{...I==null?void 0:I.style,opacity:0}}),(I==null?void 0:I.type)==="image-overlay"&&jsx(Image$1,{source:_,initialProps:d})]})},b=()=>{h!=null||(h=ReactDOM__default.default.createRoot(c)),h.render(jsx(y,{source:v}))};return a(()=>{b()}),s(_=>{v=_,b()}),{root:c}}};var functionExpression=/[\s]*([a-z-]+)[\s]*\([\s]*([^\)]+)[\s]*\)[\s]*/i,floatExpression=/^(\-?\d+\.?\d{0,5})/,toFloat=parseFloat;function ensurePercent(a){return typeof a=="number"?a:toFloat(a)*.01}function formatPercent(a){return formatFloat(a*100)+"%"}function formatFloat(a){return floatExpression.exec(a.toString())[1]}function parseCSSFunction(a){var s=functionExpression.exec(a);if(!(!s||!s.length))return[s[1]].concat(s[2].split(","))}function cssFunction(a,s){var d=Array.prototype.join.call(s,", ");return a+"("+d+")"}var math=Math,round=math.round;function roundFloat(a,s){return round(a*s)/s}var _a,RGB="rgb",HSL="hsl",converters=(_a={},_a[RGB+HSL]=RGBtoHSL,_a[HSL+RGB]=HSLtoRGB,_a),maxChannelValues={r:255,g:255,b:255,h:360,s:1,l:1,a:1};function color(a){return parseHexCode(a)||parseColorFunction(a)||rgb(255,0,0)}function rgb(a,s,d,c){return new ColorHelper(RGB,a,s,d,c===void 0?1:ensurePercent(c),c!==void 0)}function convertHelper(a,s,d){var c=s.f,h=s.r,v=s.g,y=s.b,b=s.a,_=d===void 0?s.o:d;return c!==a?converters[c+a](h,v,y,b,_):d===void 0?s:new ColorHelper(c,h,v,y,b,_)}var ColorHelper=function(){function a(s,d,c,h,v,y){var b=this;b.f=s,b.o=y;var _=s===HSL;b.r=clampColor(_?"h":"r",d),b.g=clampColor(_?"s":"g",c),b.b=clampColor(_?"l":"b",h),b.a=clampColor("a",v)}return a.prototype.toString=function(){var s=this,d=s.o,c=s.f,h=s.r,v=s.g,y=s.b,b=s.a,_,T;if(c===RGB)_=d?"rgba":RGB,T=[round(h),round(v),round(y)];else if(c===HSL)_=d?"hsla":HSL,T=[round(h),formatPercent(roundFloat(v,100)),formatPercent(roundFloat(y,100))];else throw new Error("Invalid color format");return d&&T.push(formatFloat(roundFloat(b,1e5))),cssFunction(_,T)},a.prototype.toHexString=function(){var s=convertHelper(RGB,this);return"#"+(toHex(s.r)+toHex(s.g)+toHex(s.b)).toUpperCase()},a.prototype.toHSL=function(){return convertHelper(HSL,this,!1)},a.prototype.toHSLA=function(){return convertHelper(HSL,this,!0)},a.prototype.toRGB=function(){return convertHelper(RGB,this,!1)},a.prototype.toRGBA=function(){return convertHelper(RGB,this,!0)},a.prototype.red=function(){var s=this;return(s.f===RGB?s:s.toRGB()).r},a.prototype.green=function(){var s=this;return(s.f===RGB?s:s.toRGB()).g},a.prototype.blue=function(){var s=this;return(s.f===RGB?s:s.toRGB()).b},a.prototype.hue=function(){var s=this;return(s.f===HSL?s:s.toHSL()).r},a.prototype.saturation=function(){var s=this;return(s.f===HSL?s:s.toHSL()).g},a.prototype.lightness=function(){var s=this;return(s.f===HSL?s:s.toHSL()).b},a.prototype.alpha=function(){return this.a},a.prototype.opacity=function(){return this.a},a.prototype.invert=function(){var s=this,d=convertHelper(RGB,s);return convertHelper(s.f,new a(RGB,255-d.r,255-d.g,255-d.b,s.a,s.o))},a.prototype.lighten=function(s,d){var c=this,h=convertHelper(HSL,c),v=maxChannelValues.l,y=h.b+(d?v-h.b:v)*ensurePercent(s);return convertHelper(c.f,new a(HSL,h.r,h.g,y,c.a,c.o))},a.prototype.darken=function(s,d){var c=this,h=convertHelper(HSL,c),v=h.b-(d?h.b:maxChannelValues.l)*ensurePercent(s);return convertHelper(c.f,new a(HSL,h.r,h.g,v,c.a,c.o))},a.prototype.saturate=function(s,d){var c=this,h=convertHelper(HSL,c),v=maxChannelValues.s,y=h.g+(d?v-h.g:v)*ensurePercent(s);return convertHelper(c.f,new a(HSL,h.r,y,h.b,c.a,c.o))},a.prototype.desaturate=function(s,d){var c=this,h=convertHelper(HSL,c),v=maxChannelValues.s,y=h.g-(d?h.g:v)*ensurePercent(s);return convertHelper(c.f,new a(HSL,h.r,y,h.b,c.a,c.o))},a.prototype.grayscale=function(){return this.desaturate(1)},a.prototype.fade=function(s){var d=this,c=clampColor("a",ensurePercent(s));return convertHelper(d.f,new a(d.f,d.r,d.g,d.b,c,!0))},a.prototype.fadeOut=function(s,d){var c=this,h=1,v=clampColor("a",c.a-(d?c.a:h)*ensurePercent(s));return convertHelper(c.f,new a(c.f,c.r,c.g,c.b,v,!0))},a.prototype.fadeIn=function(s,d){var c=this,h=1,v=clampColor("a",c.a+(d?c.a:h)*ensurePercent(s));return convertHelper(c.f,new a(c.f,c.r,c.g,c.b,v,!0))},a.prototype.mix=function(s,d){var c=this,h=ensureColor(s),v=convertHelper(RGB,c),y=convertHelper(RGB,h),b=d===void 0?.5:d,_=2*b-1,T=Math.abs(v.a-y.a),I=((_*T===-1?_:(_+T)/(1+_*T))+1)/2,N=1-I,A=new a(RGB,round(v.r*I+y.r*N),round(v.g*I+y.g*N),round(v.b*I+y.b*N),v.a*b+y.a*(1-b),c.o||h.o);return convertHelper(this.f,A)},a.prototype.tint=function(s){return rgb(255,255,255).mix(this,s)},a.prototype.shade=function(s){return rgb(0,0,0).mix(this,s)},a.prototype.spin=function(s){var d=this,c=convertHelper(HSL,d);return convertHelper(d.f,new a(HSL,modDegrees(c.r+s),c.g,c.b,d.a,d.o))},a}();function toHex(a){var s=round(a);return(s<16?"0":"")+s.toString(16)}function modDegrees(a){return((a<0?360:0)+a%360)%360}function RGBtoHSL(a,s,d,c,h){var v=a/255,y=s/255,b=d/255,_=Math.min(v,y,b),T=Math.max(v,y,b),I=(_+T)/2,N=T-_,A;T===_?A=0:v===T?A=(y-b)/N:y===T?A=2+(b-v)/N:b===T?A=4+(v-y)/N:A=0,A=Math.min(A*60,360),A<0&&(A+=360);var V;return T===_?V=0:I<=.5?V=N/(T+_):V=N/(2-T-_),new ColorHelper(HSL,A,V,I,c,h)}function HSLtoRGB(a,s,d,c,h){var v=a/360,y=s,b=d;if(y===0){var _=b*255;return new ColorHelper(RGB,_,_,_,c,h)}for(var T=b<.5?b*(1+y):b+y-b*y,I=2*b-T,N=0,A=0,V=0,$=0;$<3;$++){var L=v+.3333333333333333*-($-1);L<0&&L++,L>1&&L--;var _=void 0;6*L<1?_=I+(T-I)*6*L:2*L<1?_=T:3*L<2?_=I+(T-I)*(2/3-L)*6:_=I,_*=255,$===0?N=_:$===1?A=_:V=_}return new ColorHelper(RGB,N,A,V,c,h)}function clampColor(a,s){var d=0,c=maxChannelValues[a];return s<d?d:s>c?c:s}function ensureColor(a){return a instanceof ColorHelper?a:color(a)}function parseHexCode(a){var s=a.match(/#(([a-f0-9]{6})|([a-f0-9]{3}))$/i);if(!!s){var d=s[1],c=parseInt(d.length===3?d[0]+d[0]+d[1]+d[1]+d[2]+d[2]:d,16),h=c>>16&255,v=c>>8&255,y=c&255;return new ColorHelper(RGB,h,v,y,1,!1)}}function parseColorFunction(a){var s=parseCSSFunction(a);if(!(!s||!(s.length===4||s.length===5))){var d=s[0],c=d==="rgba",h=d==="hsla",v=d===RGB,y=d===HSL,b=h||c,_;if(v||c)_=RGB;else if(y||h)_=HSL;else throw new Error("unsupported color string");var T=toFloat(s[1]),I=v||c?toFloat(s[2]):ensurePercent(s[2]),N=v||c?toFloat(s[3]):ensurePercent(s[3]),A=b?toFloat(s[4]):1;return new ColorHelper(_,T,I,N,A,b)}}const of=color,transparent=color("rgba(0,0,0,0)"),white=color("#ffffff"),black=color("#000000"),weights={primary:{50:"#EAFAF5",100:"#D5F6EB",200:"#ABEDD7",300:"#82E3C3",400:"#58DAAF",500:"#26AD80",600:"#25A77C",700:"#1C7D5D",800:"#12543E"},secondary:{50:"#FBEAEA",100:"#F7D4D4",200:"#EFA9A9",300:"#E77E7E",400:"#FF6F64",500:"#E9554A",600:"#CB362B",700:"#811818",800:"#561010"},neutral:{0:"#ffffff",10:"#f5f5f5",200:"#d9d9d9",300:"#bababa",350:"#999999",400:"#9e9e9e",500:"#808080",600:"#666666",700:"#4d4d4d",800:"#303030",900:"#141414",1e3:"#000000"},warning:{400:"#FFC28A",500:"#FFAE64",600:"#F29540"}},types=Object.keys(weights),weight=a=>s=>{const d=weights[a];if(d[s])return d[s];const c=Object.keys(weights.primary).map(Number),h=c.find(v=>s<=v);return h?d[h]:d[c.slice(c.length-1)[0]]},primary=weight("primary"),neutral=weight("neutral"),secondary=weight("secondary"),warning=weight("warning"),lightstream=color("#26ad80"),twitch=color("#9156ff"),linkedin=color("#2867b2"),youtube=color("#ff0000"),facebook=color("#1877f2"),twitter=color("#1da1f2");var Color=Object.freeze(Object.defineProperty({__proto__:null,color,of,transparent,white,black,types,primary,neutral,secondary,warning,lightstream,twitch,linkedin,youtube,facebook,twitter},Symbol.toStringTag,{value:"Module"}));const YouTube=jsx("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24",children:jsx("path",{d:"M19.6465 8.53711C19.4707 7.83398 18.9141 7.27734 18.2402 7.10156C16.9805 6.75 12 6.75 12 6.75C12 6.75 6.99023 6.75 5.73047 7.10156C5.05664 7.27734 4.5 7.83398 4.32422 8.53711C3.97266 9.76758 3.97266 12.4043 3.97266 12.4043C3.97266 12.4043 3.97266 15.0117 4.32422 16.2715C4.5 16.9746 5.05664 17.502 5.73047 17.6777C6.99023 18 12 18 12 18C12 18 16.9805 18 18.2402 17.6777C18.9141 17.502 19.4707 16.9746 19.6465 16.2715C19.998 15.0117 19.998 12.4043 19.998 12.4043C19.998 12.4043 19.998 9.76758 19.6465 8.53711ZM10.3594 14.7773V10.0312L14.5195 12.4043L10.3594 14.7773Z"})}),YouTubeDuo=jsxs("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24",children:[jsx("rect",{x:"8",y:"9",width:"9",height:"7",fill:neutral(0)}),jsx("path",{d:"M19.6465 8.53711C19.4707 7.83398 18.9141 7.27734 18.2402 7.10156C16.9805 6.75 12 6.75 12 6.75C12 6.75 6.99023 6.75 5.73047 7.10156C5.05664 7.27734 4.5 7.83398 4.32422 8.53711C3.97266 9.76758 3.97266 12.4043 3.97266 12.4043C3.97266 12.4043 3.97266 15.0117 4.32422 16.2715C4.5 16.9746 5.05664 17.502 5.73047 17.6777C6.99023 18 12 18 12 18C12 18 16.9805 18 18.2402 17.6777C18.9141 17.502 19.4707 16.9746 19.6465 16.2715C19.998 15.0117 19.998 12.4043 19.998 12.4043C19.998 12.4043 19.998 9.76758 19.6465 8.53711ZM10.3594 14.7773V10.0312L14.5195 12.4043L10.3594 14.7773Z"})]}),Facebook=jsx("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24",children:jsx("path",{d:"M15.4863 13.3125L15.8965 10.6172H13.2891V8.85938C13.2891 8.09766 13.6406 7.39453 14.8125 7.39453H16.0137V5.08008C16.0137 5.08008 14.9297 4.875 13.9043 4.875C11.7656 4.875 10.3594 6.19336 10.3594 8.53711V10.6172H7.95703V13.3125H10.3594V19.875H13.2891V13.3125H15.4863Z"})}),FacebookCircle=jsx("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24",children:jsx("path",{d:"M19.2656 12.375C19.2656 8.36133 16.0137 5.10938 12 5.10938C7.98633 5.10938 4.73438 8.36133 4.73438 12.375C4.73438 16.0078 7.37109 19.0254 10.8574 19.5527V14.4844H9.01172V12.375H10.8574V10.793C10.8574 8.97656 11.9414 7.95117 13.582 7.95117C14.4023 7.95117 15.2227 8.09766 15.2227 8.09766V9.88477H14.3145C13.4062 9.88477 13.1133 10.4414 13.1133 11.0273V12.375H15.1348L14.8125 14.4844H13.1133V19.5527C16.5996 19.0254 19.2656 16.0078 19.2656 12.375Z"})}),Twitch=jsx("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24",children:jsx("path",{d:"M16.9551 8.92188H15.8125V12.1445H16.9551V8.92188ZM13.8496 8.89258H12.707V12.1152H13.8496V8.89258ZM9.01562 5.875L6.20312 8.57031V18.209H9.60156V20.875L12.4141 18.209H14.6699L19.7676 13.375V5.875H9.01562ZM18.6543 12.8477L16.3691 14.9863H14.1133L12.1504 16.8613V14.9863H9.60156V6.95898H18.6543V12.8477Z"})}),TwitchDuo=jsxs("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24",children:[jsx("path",{d:"M19 6.5H9L8.8125 17.5H13.5L19 13V6.5Z",fill:neutral(0)}),jsx("path",{d:"M16.9551 8.92188H15.8125V12.1445H16.9551V8.92188ZM13.8496 8.89258H12.707V12.1152H13.8496V8.89258ZM9.01562 5.875L6.20312 8.57031V18.209H9.60156V20.875L12.4141 18.209H14.6699L19.7676 13.375V5.875H9.01562ZM18.6543 12.8477L16.3691 14.9863H14.1133L12.1504 16.8613V14.9863H9.60156V6.95898H18.6543V12.8477Z"})]}),Twitter=jsx("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24",children:jsx("path",{d:"M20.6681 7.98749C20.6806 8.16248 20.6806 8.33751 20.6806 8.5125C20.6806 13.85 16.6197 20 9.1976 20C6.91098 20 4.78681 19.3375 3 18.1875C3.32489 18.225 3.63723 18.2375 3.97462 18.2375C5.86136 18.2375 7.59821 17.6 8.98518 16.5125C7.21086 16.475 5.72393 15.3125 5.21162 13.7125C5.46155 13.75 5.71143 13.775 5.97386 13.775C6.33621 13.775 6.69859 13.725 7.03594 13.6375C5.18666 13.2625 3.79966 11.6375 3.79966 9.67499V9.62501C4.33693 9.92501 4.96174 10.1125 5.62393 10.1375C4.53685 9.41247 3.82466 8.17498 3.82466 6.77497C3.82466 6.02499 4.02454 5.33749 4.37443 4.73748C6.36117 7.18748 9.34753 8.78745 12.6962 8.96248C12.6337 8.66248 12.5962 8.35001 12.5962 8.03751C12.5962 5.81248 14.3955 4 16.6322 4C17.7942 4 18.8438 4.4875 19.581 5.275C20.4931 5.10001 21.3678 4.76249 22.1425 4.3C21.8426 5.23752 21.2054 6.02502 20.3682 6.52499C21.1804 6.43753 21.9676 6.21248 22.6923 5.90001C22.1426 6.69998 21.4553 7.41245 20.6681 7.98749Z"})}),LinkedIn=jsx("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24",children:jsx("path",{d:"M19.2 3H4.8C3.81 3 3.009 3.81 3.009 4.8L3 19.2C3 20.19 3.81 21 4.8 21H19.2C20.19 21 21 20.19 21 19.2V4.8C21 3.81 20.19 3 19.2 3ZM8.4 18.3H5.7V10.2H8.4V18.3ZM7.05 8.679C6.15 8.679 5.421 7.95 5.421 7.05C5.421 6.15 6.15 5.421 7.05 5.421C7.95 5.421 8.679 6.15 8.679 7.05C8.679 7.95 7.95 8.679 7.05 8.679ZM18.3 18.3H15.6V13.53C15.6 12.783 14.997 12.18 14.25 12.18C13.503 12.18 12.9 12.783 12.9 13.53V18.3H10.2V10.2H12.9V11.28C13.368 10.524 14.331 10.02 15.15 10.02C16.887 10.02 18.3 11.433 18.3 13.17V18.3Z"})}),Lightstream=jsxs("svg",{style:{flex:"0 0 100%"},viewBox:"0.144 0 27.712 24",children:[jsx("path",{d:"M16.0369 12.1232L14 15.6518L11.5642 11.4335L6.27356 10.6176L14 24L20.4627 12.805L16.0369 12.1232Z"}),jsx("path",{d:"M9.74033 8.27418L7.37317 4.17409H20.6268L19.0921 6.83194L24.3827 6.01602L27.8558 0H0.144165L5.31453 8.95665L9.74033 8.27418Z"})]}),LightstreamWithText=jsxs("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 3000 524",children:[jsx("polygon",{points:"330.56 263.5 299.73 316.91 262.86 253.06 182.78 240.71 299.73 443.27 397.55 273.82 330.56 263.5"}),jsx("polygon",{points:"235.25 205.24 199.42 143.18 400.03 143.18 376.8 183.41 456.88 171.06 509.45 80 90 80 168.26 215.57 235.25 205.24"}),jsx("path",{d:"M646.32,345.72h94.91v13.73H630V167.26h16.36Z"}),jsx("path",{d:"M846.24,359.45H830V167.26h16.23Z"}),jsx("path",{d:"M1091.16,336.61q-8.45,12-26.46,18.74t-40.33,6.73q-22.57,0-40.13-10.82t-27.19-30.62q-9.64-19.8-9.77-45.41V250.95q0-40,20.2-63.16t54.25-23.17q29.69,0,47.78,15.11T1091,221.38h-16.24q-3.56-21.18-17.23-32.11t-35.7-10.92q-26.92,0-42.64,19.15t-15.71,54v22.72q0,21.93,7.46,38.77t21.38,26.09q13.92,9.25,32,9.25,21,0,36-6.6,9.76-4.36,14.52-10.16V282h-51.61V268.24h67.85Z"}),jsx("path",{d:"M1333.71,359.45h-16.37V278.11H1207.53v81.33h-16.23V167.26h16.23v97.12h109.81V167.26h16.37Z"}),jsx("path",{d:"M1563.2,181h-65.87V359.45H1481.1V181h-65.73V167.26H1563.2Z"}),jsx("path",{d:"M1990.75,181h-65.87V359.45h-16.23V181h-65.73V167.26h147.83Z"}),jsx("path",{d:"M2147.65,279.33h-55.84v80.12h-16.36V167.26h62.43q30.75,0,48,14.9t17.29,41.66a52,52,0,0,1-10.83,32.56q-10.82,14.11-29,19.51l48,81.83v1.72h-17.29Zm-55.84-13.73h49.76q20.45,0,32.86-11.63t12.41-30.14q0-20.36-12.93-31.59T2137.61,181h-45.8Z"}),jsx("path",{d:"M2407.62,278.11h-89.88v67.61h103.35v13.73H2301.5V167.26h118.92V181H2317.73v83.39h89.88Z"}),jsx("polygon",{points:"2892.79 183.67 2892.79 183.67 2816.23 326.97 2724.06 154.45 2724.06 189.54 2724.06 359.75 2739.67 359.75 2739.67 218.3 2816.26 359.42 2892.79 218.32 2892.79 359.75 2908.4 359.75 2908.4 189.54 2908.4 154.45 2892.79 183.67"}),jsx("polygon",{points:"2649.77 359.45 2569.47 154.54 2569.47 154.53 2569.46 154.53 2569.46 154.53 2569.46 154.54 2489.16 359.45 2506.19 359.45 2569.46 194.32 2632.74 359.45 2649.77 359.45"}),jsx("path",{d:"M1764.57,287q-6.73-10.56-20.06-18.15a131.55,131.55,0,0,0-21.47-9.18l-7.64,13.49q19.65,6.61,28.32,13.77,11.22,9.3,11.22,25.28,0,16.37-13.6,26.26t-36,9.9c-11.35,0-21.05-1.94-29.35-5.51l-7,12.33a94,94,0,0,0,36.33,6.91q29.7,0,47.85-13.73t18.15-36.43Q1771.3,297.55,1764.57,287Z"}),jsx("path",{d:"M1659.11,250.93c7.28,5.25,18,10.18,32.13,14.79l7.72-13.38q-21-6.41-31.29-14.49Q1655.95,228.61,1656,214q0-15.83,13-25.66t35-9.83c13.12,0,23.78,3.19,32.26,9.21l7.23-12.51c-1.71-1-3.43-2.1-5.3-3q-15.09-7.38-34.18-7.38-28.19,0-46.31,13.76t-18.11,35.77Q1639.62,237,1659.11,250.93Z"}),jsx("path",{d:"M1744.34,268.78a129.23,129.23,0,0,0-21.68-9.32l-7.79,13.49c13.28,4.44,22.87,9.06,28.68,13.88q11.2,9.29,11.2,25.23,0,16.33-13.57,26.21t-36,9.88c-11.8,0-21.85-2-30.34-5.91l-7.08,12.26.2.1a93.63,93.63,0,0,0,37.22,7.25q29.64,0,47.75-13.7t18.11-36.36q0-14.36-6.72-24.9T1744.34,268.78Z"})]});var IconMap=Object.freeze(Object.defineProperty({__proto__:null,YouTube,YouTubeDuo,Facebook,FacebookCircle,Twitch,TwitchDuo,Twitter,LinkedIn,Lightstream,LightstreamWithText},Symbol.toStringTag,{value:"Module"}));const nudge=a=>{if(!!(a.nudgeUp||a.nudgeDown||a.nudgeRight||a.nudgeLeft))return{position:"relative",top:a.nudgeDown,left:a.nudgeRight,right:a.nudgeLeft,bottom:a.nudgeUp}},SVGWrapper=({children:a,width:s,height:d,color:c,colorWeight:h=0,marginLeft:v,marginTop:y,marginRight:b,marginBottom:_,className:T,...I})=>(c&&Color[c](h),jsx("div",{className:T,style:{...nudge(I),display:"flex",justifyContent:"center",flexBasis:s||"auto",flexShrink:0,width:s,height:d||s&&"fit-content",marginLeft:v,marginTop:y,marginBottom:_,marginRight:b},children:a})),Icon=({name:a,...s})=>jsx(SVGWrapper,{...s,children:IconMap[a]}),dragImageSvg=`
  <svg height="75" width="120" viewBox="0 0 120 75" xmlns="http://www.w3.org/2000/svg" style="">
    <rect width="120" height="75" rx="3" style="
      opacity: 0.4;
      stroke: white;
      stroke-width: 3px;
      stroke-opacity: 0.7;
    "/>
  </svg>`;let dragImage;const loadDragImage=()=>dragImage||(dragImage=new Image,dragImage.src=URL.createObjectURL(new Blob([dragImageSvg],{type:"image/svg+xml"})),dragImage);class ErrorBoundary extends React__default.default.Component{constructor(s){super(s),this.state={error:null}}componentDidCatch(s,d){log$1.warn(s,d)}static getDerivedStateFromError(){return{error:!0}}render(){return this.state.error?null:this.props.children}}const onDrop=async(a,s)=>{s.preventDefault(),s.stopPropagation();const{dropNodeId:d,dropType:c,project:h}=a,v=s.dataTransfer.getData("text/plain");if(log$1.debug("Compositor: Dropping",{dropType:c,dragNodeId:v,dropNodeId:d}),d===v)return;const[y,b,_,T]=await Promise.all([h.compositor.get(v),h.compositor.get(d),h.compositor.getParent(v),h.compositor.getParent(d)]);if(c==="layout")return _.id===d?void 0:CoreContext.Command.moveNode({projectId:h.id,nodeId:y.id,parentId:b.id});if(_.id!==(T==null?void 0:T.id))return CoreContext.Command.swapNodes({projectId:h.id,nodeAId:y.id,nodeBId:b.id});const I=_.children.map(N=>N.id);return CoreContext.Command.reorderNodes({projectId:h.id,parentId:_.id,childIds:swapItems(y.id,b.id,I)})};let foundDropTarget=!1;const ElementTree=a=>{var x,j,X;const s=React.useRef(!1),d=React.useRef(),c=React.useRef(),h=React.useRef(),{project:v,interactive:y=!0,onElementDoubleClick:b,checkIsDragTarget:_,checkIsDropTarget:T}=React.useContext(CompositorContext),{nodeId:I}=a,N=v.compositor.get(I);if(!N)return null;const A=CoreContext.compositor.getElement(N),V=N.props.layout||"Row",$=y&&_(N),L=y&&T(N);let D=L?{onDrop:te=>(foundDropTarget=!0,onDrop({dropType:"layout",dropNodeId:N.id,project:v},te)),onDragOver:te=>{var se;te.preventDefault(),te.stopPropagation(),(se=h.current)==null||se.toggleAttribute("data-layout-drop-target-active",!0)},onDragLeave:te=>{var se;te.preventDefault(),te.stopPropagation(),(se=h.current)==null||se.toggleAttribute("data-layout-drop-target-active",!1)}}:{},H=$?{draggable:!0,ondrop:te=>(foundDropTarget=!0,onDrop({dropType:"transform",dropNodeId:N.id,project:v},te)),ondragstart:te=>{var se;s.current=!0,wrapperEl.toggleAttribute("data-dragging",!0),log$1.debug("Compositor: Dragging",N.id),foundDropTarget=!1,te.dataTransfer.setData("text/plain",N.id),te.dataTransfer.dropEffect="move",te.dataTransfer.setDragImage(dragImage,10,10),(se=h.current)==null||se.toggleAttribute("data-drag-target-active",!0),window.__dragging=!0},ondragend:te=>{var se;s.current=!1,foundDropTarget||(log$1.info("Compositor: No drop target - deleting node",N),CoreContext.Command.deleteNode({nodeId:N.id})),wrapperEl.toggleAttribute("data-dragging",!0),log$1.debug("Compositor: DragEnd",te),(se=h.current)==null||se.toggleAttribute("data-drag-target-active",!1),wrapperEl.querySelectorAll("[data-item]").forEach(oe=>{oe.toggleAttribute("data-drag-target-active",!1),oe.toggleAttribute("data-layout-drop-target-active",!1),oe.toggleAttribute("data-transform-drop-target-active",!1)}),window.__dragging=!1},ondragover:te=>{var se;te.preventDefault(),te.stopPropagation(),!s.current&&((se=h.current)==null||se.toggleAttribute("data-transform-drop-target-active",!0))},ondragleave:te=>{var se;te.preventDefault(),te.stopPropagation(),(se=h.current)==null||se.toggleAttribute("data-transform-drop-target-active",!1)}}:{};React.useEffect(()=>{c.current&&A&&(c.current.appendChild(A.root),Object.assign(c.current.style,{width:"100%",height:"100%",position:"relative",overflow:"hidden"}),Object.assign(A.root.style,{pointerEvents:$?"all":"none",width:"100%",height:"100%",position:"relative",...N.props.style||{}}))},[c.current,A]),React.useEffect(()=>{const te=$?()=>b(N):()=>{};return d.current&&(Object.assign(d.current,H),Object.assign(d.current.style,{pointerEvents:$?"all":"none"}),d.current.addEventListener("dblclick",te)),()=>{var se;(se=d.current)==null||se.removeEventListener("dblclick",te)}},[d.current]);const O={layout:V,...(x=N.props.layoutProps)!=null?x:{}};return jsxs("div",{ref:h,"data-id":N.id+"-x","data-item":!0,...$&&{"data-drag-target":!0},...L&&{"data-drop-target":!0},...D,style:{position:"relative",width:((j=N.props.size)==null?void 0:j.x)||"100%",height:((X=N.props.size)==null?void 0:X.y)||"100%",pointerEvents:"none"},children:[jsx("div",{className:"interactive-overlay",ref:d,style:{height:"100%",width:"100%",position:"absolute",zIndex:2}}),jsxs("div",{className:"item-element",style:{display:"flex",flex:"0 0 auto",justifyContent:"center",width:"100%",height:"100%"},children:[jsx("div",{ref:c}),jsx(ErrorBoundary,{children:jsx("ls-layout",{"data-id":N.id+"-x",props:JSON.stringify(O),layout:V,children:N.children.map(te=>jsx(ElementTree,{nodeId:te.id},te.id))})})]})]})},Root=a=>{const{project:s}=React.useContext(CompositorContext),[d,c]=React.useState(null);return React.useEffect(()=>(c(s.compositor.renderTree()),CoreContext.onInternal("NodeChanged",()=>{c(s.compositor.renderTree())})),[]),React.useEffect(()=>{const h=s.compositor.getRoot(),{x:v}=h.props.size,y=()=>{var V,$,L,D,H,O;const{bannerStyle:b=BannerStyle.DEFAULT,primaryColor:_="#ABABAB",showNameBanners:T}=(V=s.props)!=null?V:{},I=(O=(H=($=s.props)==null?void 0:$.logoPosition)!=null?H:(D=(L=s.props)==null?void 0:L.logo)==null?void 0:D.logoPosition)!=null?O:LogoPosition.TopRight;if(!b||!_||!I)return;const N=themes[b](_,T,v/1920),A=themes[I](v/1920);a.setStyle(`${N} ${A}`||"")};return y(),CoreContext.onInternal("ProjectChanged",y)},[s]),d?jsx("div",{onDrop:h=>{foundDropTarget=!0,h.preventDefault()},onDragOver:h=>{h.preventDefault()},onDragLeave:h=>{h.preventDefault()},style:{userSelect:"none",width:`${d.props.size.x+PADDING*2}px`,height:`${d.props.size.y+PADDING*2}px`,margin:PADDING+"px"},children:jsx("div",{style:{width:"100%",height:"100%",overflow:"hidden"},children:jsx(ElementTree,{nodeId:d.id})})}):null};let wrapperEl,wrapperElRoot,customStyleEl;const PADDING=0,render$1=a=>{const{containerEl:s,projectId:d,dragAndDrop:c=!1,dblClickShowcase:h=c,checkDragTarget:v=scenelessProjectDragCheck,checkDropTarget:y=scenelessProjectDropCheck}=a,b=getProject(d);CoreContext.clients.LayoutApi().subscribeToLayout(b.layoutApi.layoutId),loadDragImage();const _=a.onElementDoubleClick||h&&scenelessProjectDoubleClick(b);if(!s||!b)return;if(!s.shadowRoot){s.attachShadow({mode:"open"}),customStyleEl=document.createElement("style");const $=document.createElement("style");$.textContent=getStyle(),wrapperEl=document.createElement("div"),wrapperEl.id="compositor-root",Object.assign(wrapperEl.style,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",transformOrigin:"center"}),s.shadowRoot.appendChild($),s.shadowRoot.appendChild(customStyleEl),s.shadowRoot.appendChild(wrapperEl),new ResizeObserver(D=>{A()}).observe(s)}const T=b.compositor.getRoot(),{x:I,y:N}=T.props.size,A=()=>{let{width:$,height:L}=s.getBoundingClientRect();const D=$/L,H=I/N;let O;$&&L?H>D?O=$/(I+PADDING*2):O=L/(N+PADDING*2):O=1,wrapperEl.style.willChange="transform",wrapperEl.style.transform=`scale(${O}) translateZ(0)`,window.__scale=O,V()},V=()=>{wrapperElRoot!=null||(wrapperElRoot=ReactDOM__default.default.createRoot(wrapperEl)),wrapperElRoot.render(jsx(CompositorProvider,{project:b,interactive:c,onElementDoubleClick:_,checkIsDropTarget:y,checkIsDragTarget:v,children:jsx(Root,{setStyle:$=>{customStyleEl.textContent=$}})}))};A()},scenelessProjectDragCheck=a=>a.props.name==="Participant"||a.props.sourceType==="RoomParticipant",scenelessProjectDropCheck=a=>a.props.name==="Content",scenelessProjectDoubleClick=a=>s=>{var c;const d=a.compositor.nodes.find(h=>h.props.name==="Content");if(d){const h=(c=d.props.layoutProps)==null?void 0:c.showcase;CoreContext.Command.updateNode({nodeId:d.id,props:{layoutProps:{...d.props.layoutProps,showcase:h===s.id?null:s.id}}})}},CompositorContext=React__default.default.createContext({interactive:!1,project:null,checkIsDragTarget:()=>!1,checkIsDropTarget:()=>!1,onElementDoubleClick:()=>{}}),CompositorProvider=({children:a,...s})=>jsx(CompositorContext.Provider,{value:{...s},children:a}),getStyle=()=>`
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Arial';
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.NameBanner {
  top: 100%;
  transform: translateY(-100%);
  left: 0;
  height: 30px;
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0) 100%);
  padding: 0px 0px 0px 10px;
  color: rgba(255, 255, 255, 0.9);
  font-weight: bold;
  line-height: 30px;
  width: 100%;
  font-size: 28px;
  position: absolute;
}

ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
  top: 0% !important;
  transform: translateY(0%) !important;
}

[layout="Layered"] > [data-item] {
  transform: scale(1.003) !important;
}
[layout="Layered"] > [data-item]:nth-child(2) {
  transform: scale(1.0015) !important;
}
[layout="Layered"] > [data-item]:nth-child(1) {
  transform: scale(1) !important;
}

.logo {
  position: absolute !important;
}

#compositor-root[data-dragging] {}

[data-drag-target] {}
[data-drag-target]:hover > .interactive-overlay {
  box-shadow: 0 0 0 3px inset rgba(255, 255, 255, 0.5);
  cursor: grab;
}
[data-drop-target] {}
[data-drop-target]:hover {}
[data-drag-target][data-drag-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset rgba(255, 255, 255, 0.2);
}
[data-drag-target][data-drag-target-active] > .item-element {
  opacity: 0.8;
}
[data-layout-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset yellow;
}
[data-transform-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset white;
}
`;var LogoPosition=(a=>(a.TopLeft="top-left",a.TopRight="top-right",a.BottomLeft="bottom-left",a.BottomRight="bottom-right",a))(LogoPosition||{}),BannerStyle=(a=>(a.DEFAULT="default",a.MINIMAL="minimal",a.BUBBLE="bubble",a))(BannerStyle||{}),PlatformType=(a=>(a.TWITCH="twitch",a.YOUTUBE="youtube",a))(PlatformType||{});const themes={["top-left"]:(a=1280/1920)=>{const s=d=>d*a+"px";return`
      .wrapper {
       height: ${s(135)};
       width: ${s(240)};
       margin-top:${s(40)} !important;
       margin-left:${s(40)} !important;
       top:0;
       left:0;
    }`},["top-right"]:(a=1280/1920)=>{const s=d=>d*a+"px";return`
      .wrapper {
       height: ${s(135)};
       width: ${s(240)};
       margin-top:${s(40)} !important;
       margin-right:${s(40)} !important;
       top:0;
       right:0;
    }`},["bottom-left"]:(a=1280/1920)=>{const s=d=>d*a+"px";return`
      .wrapper {
       height: ${s(135)};
       width: ${s(240)};
       margin-bottom:${s(40)} !important;
       margin-left:${s(40)} !important;
       bottom:0;
       left:0;
    }`},["bottom-right"]:(a=1280/1920)=>{const s=d=>d*a+"px";return`
      .wrapper {
       height: ${s(135)};
       width: ${s(240)};
       margin-bottom:${s(40)} !important;
       margin-right:${s(40)} !important;
       bottom:0;
       right:0;
    }`},default:(a="#ABABAB",s=!0,d=1280/1920)=>{const c=color(a).lightness()<.6?"#FFF":"#000",h=color(a).lightness()<.6?"#FFF":"#000",v=color(a).lightness()<.6?"#000":"#FFF",y=b=>b*d+"px";return`
      .ChatOverlay {
        background: ${a} !important;
        margin-bottom: ${y(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${y(44)} !important;
        padding: ${y(40)} ${y(100)} !important;
        border-radius: ${y(20)} !important;
      }
      
      .ChatOverlay-badge-icon {
          width:${y(32)};
          height: ${y(32)};
          fill: currentcolor;
          color: ${v};
      }

       .ChatOverlay-badge-container {
          background-color:${h};
          display:flex;
          flex-direction:row;
          padding: ${y(6)} ${y(12)} ${y(6)} ${y(6)};
          border-radius: ${y(10)};
          align-items: center;
          border-bottom-left-radius: 0px !important;
          position: relative;
          border: none;
          cursor: pointer;
       }
      
       .ChatOverlay-badge-username {
          color:${v};
          padding:${y(6)};
          font-size:${y(18)};
          font-weight:700;
          text-transform: capitalize; 
       }
       
       .ChatOverlay-badge-container::before {
          content:"";
          width:15px;
          height:15px;
          background-color:${h};
          position: absolute;
          bottom:-14px;
          left:0;
          clip-path:polygon(0 100%, 12% 87%, 26% 73%, 45% 53%, 59% 40%, 71% 28%, 85% 14%, 100% 0, 0 0);
        }
       

       .ChatOverlay-avatar {
          height: ${y(120)};
          width: ${y(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${a} !important;
        margin-bottom: ${y(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${y(44)} !important;
        padding: ${y(40)} ${y(100)} !important;
        border-top-right-radius: ${y(20)} !important;
        border-bottom-right-radius: ${y(20)} !important;
      }

      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${c} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
        font-size: ${y(36)};
      }

      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${s&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${y(40)} ${y(100)} !important;
        font-size: ${y(44)} !important;
        border-top-right-radius: ${y(20)} !important;
        border-bottom-right-radius: ${y(20)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${y(12)} ${y(30)} !important;
        font-size: ${y(44)} !important;
        border-top-right-radius: ${y(20)} !important;
        border-bottom-right-radius: ${y(20)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${y(12)} ${y(20)} !important;
        font-size: ${y(28)} !important;
        border-top-right-radius: ${y(16)} !important;
        border-bottom-right-radius: ${y(16)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${y(8)} ${y(8)} !important;
        font-size: ${y(20)} !important;
        border-top-right-radius: ${y(8)} !important;
        border-bottom-right-radius: ${y(8)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0;
        transform: translateX(-100%);
      }
    `},minimal:(a="#ABABAB",s=!0,d=1280/1920)=>{const c="white",h="#fff",v="#000",y=b=>b*d+"px";return`

      .ChatOverlay-badge-icon {
          width:${y(32)};
          height: ${y(32)};
          fill: currentcolor;
          color: ${v};
      }

       .ChatOverlay-badge-container {
          background-color:${h};
          display:flex;
          flex-direction:row;
          padding: ${y(6)} ${y(12)} ${y(6)} ${y(6)};
          align-items: center;
          position: relative;
          border: none;
          cursor: pointer;
       }

       .ChatOverlay-badge-username {
          color:${v};
          padding:${y(6)};
          font-size:${y(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlay-avatar {
          height: ${y(120)};
          width: ${y(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


    .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a).fade(color(a).alpha()*.7).toString()} !important;
        padding: ${y(40)} ${y(40)} ${y(40)} ${y(60)} !important;
        position: relative !important;
        margin-bottom: ${y(40)} !important;
        transition: 300ms ease all;
        font-size: ${y(34)} !important;
        left: 0;
      }

      .Banner:before, .NameBanner:before, .ChatOverlay:before {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.6);
        transition: 300ms ease all;
        opacity: ${color(a).alpha()};
      }
      .Banner:after, .NameBanner:after, .ChatOverlay:after {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        transition: 300ms ease all;
        width: ${y(20)};
        background: ${color(a)};
        opacity: ${color(a).alpha()};
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${c} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
        font-size: ${y(36)};
        position: relative;
        z-index: 2;
      }
      .Banner-header {
        font-size: ${y(90)};
        position: relative;
        z-index: 2;
      }
      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${s&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${y(40)} ${y(40)} ${y(40)} ${y(40+20)} !important;
        font-size: ${y(34)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${y(16)} ${y(40)} ${y(16)} ${y(40+20)} !important;
        font-size: ${y(34)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${y(12)} ${y(24)} ${y(12)} ${y(24+20)} !important;
        font-size: ${y(24)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${y(12)} ${y(16)} ${y(12)} ${y(16+20)} !important;
        font-size: ${y(18)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `},bubble:(a="#ABABAB",s=!0,d=1280/1920)=>{const c=color(a).lightness()<.6?"#FFF":"#000",h=color(a).lightness()<.6?"#FFF":"#000",v=color(a).lightness()<.6?"#000":"#FFF",y=b=>b*d+"px";return`
      .ChatOverlay-badge-icon {
          width:${y(32)};
          height: ${y(32)};
          fill: currentcolor;
          color: ${v};
      }


       .ChatOverlay-badge-container {
          background-color:${h};
          display:flex;
          flex-direction:row;
          padding: ${y(6)} ${y(12)} ${y(6)} ${y(6)};
          align-items: center;
          z-index: 1;
          border: none;
          cursor: pointer;
          top: 0;
          margin-bottom: 2px;
          margin-left: -${y(30)};
          border-radius: 30px;
       }

       .ChatOverlay-badge-username {
          color:${v};
          padding:${y(6)};
          font-size:${y(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlayAvatar-container {
          height: ${y(120)};
          width: ${y(120)};
          top: 0;
       }
       .ChatOverlay-avatar {
          height: ${y(120)};
          width: ${y(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


      .Banner, .ChatOverlay {
        transform: translateX(-50%);
        left: 50%;
        margin-bottom: ${y(40)} !important;
      }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a)} !important;
        color: ${c} !important;
        border-radius: 500px !important;
        transition: 300ms ease all;

        /* Default Style */
        border: 4px solid ${c} !important;
        padding: ${y(40)} ${y(80)} !important;
        font-size: ${y(40)} !important;
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${c} !important;
        text-align: center !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
        font-size: ${y(36)};
      }
      .NameBanner {
        transform-origin: 0% 100%;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${s&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
        top: 0% !important;
        transform: translateY(0%) !important;
        margin: ${y(20)} ${y(20)};
      }


      .NameBanner[data-size="4"] {
        padding: ${y(40)} ${y(80)} ${y(40)} ${y(80)} !important;
        font-size: ${y(40)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${y(12)} ${y(30)} ${y(12)} ${y(30)} !important;
        font-size: ${y(40)} !important;
        margin: -${y(20)} ${y(20)};
      }
      .NameBanner[data-size="2"] {
        padding: ${y(12)} ${y(30)} ${y(12)} ${y(30)} !important;
        font-size: ${y(26)} !important;
        margin: -${y(8)} ${y(8)};
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${y(8)} ${y(16)} ${y(8)} ${y(16)} !important;
        font-size: ${y(18)} !important;
        border-width: ${y(2)} !important;
        margin: -${y(16)} ${y(8)};
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `}};var compositor$1=Object.freeze(Object.defineProperty({__proto__:null,render:render$1,CompositorContext,LogoPosition,BannerStyle,PlatformType},Symbol.toStringTag,{value:"Module"}));const iconStyles={twitch:{icon:"Twitch"},youtube:{icon:"YouTube"},facebook:{icon:"Facebook"}},fixLink=a=>!a.startsWith("http:")&&!a.startsWith("https:")?`https://${a}`:a,ChatOverlay={name:"LS-ChatOverlay",sourceType:"ChatOverlay",create({onUpdate:a,onEvent:s},d){const c=document.createElement("div");let h;const v=getProject(CoreContext.state.activeProjectId),y=v.compositor.getRoot(),{x:b}=y.props.size,_=(b!=null?b:1280)/1920,T=D=>D*_+"px";let I;const N=(D,H)=>{const O=D.width/H.width;return D.height/H.height>=.25&&O>=.75?4:O>=.75?1:O>=.5?-2:O>.25?-3:-4};CoreContext.onInternal("ProjectChanged",()=>{var H;const{bannerStyle:D}=(H=v.props)!=null?H:{};D&&L({...I,metadata:{...I.metadata,bannerStyle:D}})});const A=React__default.default.memo(D=>{var H,O,x;return(D==null?void 0:D.type)==="emoticon"&&((H=D==null?void 0:D.data)==null?void 0:H.type)==="direct"?jsx("img",{src:(O=D==null?void 0:D.data)==null?void 0:O.url,style:{height:T(36)},alt:D==null?void 0:D.text}):(D==null?void 0:D.type)==="link"?jsx("a",{style:{color:"#FFF",wordBreak:"break-all"},target:"_blank",rel:"noreferrer",href:fixLink((x=D==null?void 0:D.data)==null?void 0:x.url),children:D==null?void 0:D.text}):jsx("span",{children:D==null?void 0:D.text})}),V=D=>{const H={height:`${D.height}`,width:`${D.width}`,background:D.background||"transparent",display:"inline-block",verticalAlign:"middle",borderRadius:"50%",fontSize:`${D.fontSize}`};return jsx("div",{style:{...H,position:"relative",marginRight:D==null?void 0:D.marginRight},children:jsx("div",{style:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)"},children:D.username.substring(0,2).toUpperCase()})})},$=D=>{const{message:H,id:O,username:x,metadata:j}=D||{},[X,te]=React.useState(0),{index:se,platform:oe,avatar:F,bannerStyle:Z}=j||{},ne=React.useMemo(()=>iconStyles[oe],[oe]),M=React.useRef();return React.useLayoutEffect(()=>{if(!M.current)return;const G=()=>{const ie=M.current;ie&&te(N({width:ie.clientWidth,height:ie.clientHeight},{width:v.compositor.getRoot().props.size.x,height:v.compositor.getRoot().props.size.y}))},J=new ResizeObserver(ie=>{G()});return G(),J.observe(M.current),()=>{M!=null&&M.current&&J.unobserve(M==null?void 0:M.current)}},[M.current,v]),jsx(APIKitAnimation,{id:`${O}_${se}`,type:"chatoverlay",enter:APIKitAnimationTypes.SLIDE_IN_LEFT,exit:APIKitAnimationTypes.SLIDE_OUT_LEFT,duration:200,children:jsx("div",{className:"ChatOverlayContainer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end",marginLeft:Z!==BannerStyle.BUBBLE?"5%":"0px"},children:Z!==BannerStyle.BUBBLE?jsxs("div",{style:{width:"100%",display:"flex"},children:[F?jsx("span",{style:{marginRight:"20px"},children:jsx("img",{src:F,className:"ChatOverlay-avatar"})}):jsx(V,{height:T(110),width:T(120),background:primary(500),username:x,marginRight:20,fontSize:T(30)}),jsxs("div",{style:{width:"100%"},children:[x&&jsxs("button",{className:"ChatOverlay-badge-container",children:[(ne==null?void 0:ne.icon)&&jsx(Icon,{className:"ChatOverlay-badge-icon",name:ne==null?void 0:ne.icon}),jsx("div",{className:"ChatOverlay-badge-username",children:x})]}),jsx("div",{className:"ChatOverlay",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"},children:H&&jsx("div",{className:"ChatOverlay-body",style:{gap:10,display:"flex",alignItems:"center",flexWrap:"wrap",verticalAlign:"middle"},children:H.map((G,J)=>jsx(A,{...G},J))})})]})]}):jsx("div",{style:{width:"100%",display:"flex"},children:jsxs("div",{className:"ChatOverlay",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"},children:[jsxs("div",{style:{display:"flex",marginTop:`-${T(160)}`,alignItems:"flex-end",padding:`${T(14)} ${T(0)} ${T(14)} ${T(0)}`,marginLeft:`${X*10}px`},children:[F?jsx("div",{className:"ChatOverlayAvatar-container",children:jsx("img",{src:F,className:"ChatOverlay-avatar"})}):jsx("div",{className:"ChatOverlayAvatar-container",children:jsx(V,{height:T(120),width:T(120),background:primary(500),username:x,fontSize:T(30)})}),x&&jsxs("button",{className:"ChatOverlay-badge-container",children:[(ne==null?void 0:ne.icon)&&jsx(Icon,{className:"ChatOverlay-badge-icon",name:ne==null?void 0:ne.icon}),jsx("div",{className:"ChatOverlay-badge-username",children:x})]})]}),H&&jsx("div",{ref:M,className:"ChatOverlay-body",style:{gap:10,alignItems:"center",flexWrap:"wrap",verticalAlign:"middle"},children:H.map((G,J)=>jsx(A,{...G},J))})]})})})})},L=D=>{h!=null||(h=ReactDOM__default.default.createRoot(c)),h.render(jsx($,{...D}))};return a(D=>{var O;const{bannerStyle:H=BannerStyle.DEFAULT}=(O=v.props)!=null?O:{};I={...D,metadata:{...D.metadata,bannerStyle:H}},L(I)}),{root:c}}};var Transforms=Object.freeze(Object.defineProperty({__proto__:null,RoomParticipant:RoomParticipant$1,Square,Image:Image$2,Video2,Image2,Element,Video,Banner:Banner$1,Logo:Logo$1,Overlay,ChatOverlay},Symbol.toStringTag,{value:"Module"}));/*! (c) Andrea Giammarchi - ISC */var self$1={};try{self$1.WeakMap=WeakMap}catch(a){self$1.WeakMap=function(s,d){var c=d.defineProperty,h=d.hasOwnProperty,v=y.prototype;return v.delete=function(_){return this.has(_)&&delete _[this._]},v.get=function(_){return this.has(_)?_[this._]:void 0},v.has=function(_){return h.call(_,this._)},v.set=function(_,T){return c(_,this._,{configurable:!0,value:T}),this},y;function y(_){c(this,"_",{value:"_@ungap/weakmap"+s++}),_&&_.forEach(b,this)}function b(_){this.set(_[0],_[1])}}(Math.random(),Object)}var WeakMap$1=self$1.WeakMap;/*! (c) Andrea Giammarchi - ISC */var UID="-"+Math.random().toFixed(6)+"%",UID_IE=!1;try{(function(a,s,d){return s in a&&(a.innerHTML="<p "+d+'="'+UID+'"></p>',a[s].childNodes[0].getAttribute(d)==UID)})(document.createElement("template"),"content","tabindex")||(UID="_dt: "+UID.slice(1,-1)+";",UID_IE=!0)}catch(a){}var UIDC="<!--"+UID+"-->",COMMENT_NODE=8,ELEMENT_NODE$1=1,TEXT_NODE=3,SHOULD_USE_TEXT_CONTENT=/^(?:plaintext|script|style|textarea|title|xmp)$/i,VOID_ELEMENTS=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function domsanitizer(a){return a.join(UIDC).replace(selfClosing,fullClosing).replace(attrSeeker,attrReplacer)}var spaces=" \\f\\n\\r\\t",almostEverything="[^"+spaces+`\\/>"'=]+`,attrName="["+spaces+"]+"+almostEverything,tagName="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",attrPartials=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+almostEverything.replace("\\/","")+"))?)",attrSeeker=new RegExp(tagName+attrName+attrPartials+"+)(["+spaces+"]*/?>)","g"),selfClosing=new RegExp(tagName+attrName+attrPartials+"*)(["+spaces+"]*/>)","g"),findAttributes=new RegExp("("+attrName+`\\s*=\\s*)(['"]?)`+UIDC+"\\2","gi");function attrReplacer(a,s,d,c){return"<"+s+d.replace(findAttributes,replaceAttributes)+c}function replaceAttributes(a,s,d){return s+(d||'"')+UID+(d||'"')}function fullClosing(a,s,d){return VOID_ELEMENTS.test(s)?a:"<"+s+d+"></"+s+">"}const{isArray}=Array,{indexOf,slice}=[];var umap=a=>({get:s=>a.get(s),set:(s,d)=>(a.set(s,d),d)});const ELEMENT_NODE=1,nodeType=111,remove=({firstChild:a,lastChild:s})=>{const d=document.createRange();return d.setStartAfter(a),d.setEndAfter(s),d.deleteContents(),a},diffable=(a,s)=>a.nodeType===nodeType?1/s<0?s?remove(a):a.lastChild:s?a.valueOf():a.firstChild:a,persistent=a=>{const{childNodes:s}=a,{length:d}=s;if(d<2)return d?s[0]:a;const c=slice.call(s,0),h=c[0],v=c[d-1];return{ELEMENT_NODE,nodeType,firstChild:h,lastChild:v,valueOf(){if(s.length!==d){let y=0;for(;y<d;)a.appendChild(c[y++])}return a}}};/*! (c) Andrea Giammarchi - ISC */var createContent=function(a){var s="fragment",d="template",c="content"in y(d),h=c?function(_){var T=y(d);return T.innerHTML=_,T.content}:function(_){var T=y(s),I=y(d),N=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(_)){var A=RegExp.$1;I.innerHTML="<table>"+_+"</table>",N=I.querySelectorAll(A)}else I.innerHTML=_,N=I.childNodes;return v(T,N),T};return function(T,I){return(I==="svg"?b:h)(T)};function v(_,T){for(var I=T.length;I--;)_.appendChild(T[0])}function y(_){return _===s?a.createDocumentFragment():a.createElementNS("http://www.w3.org/1999/xhtml",_)}function b(_){var T=y(s),I=y("div");return I.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+_+"</svg>",v(T,I.firstChild.childNodes),T}}(document),udomdiff=(a,s,d,c,h)=>{const v=d.length;let y=s.length,b=v,_=0,T=0,I=null;for(;_<y||T<b;)if(y===_){const N=b<v?T?c(d[T-1],-0).nextSibling:c(d[b-T],0):h;for(;T<b;)a.insertBefore(c(d[T++],1),N)}else if(b===T)for(;_<y;)(!I||!I.has(s[_]))&&a.removeChild(c(s[_],-1)),_++;else if(s[_]===d[T])_++,T++;else if(s[y-1]===d[b-1])y--,b--;else if(s[_]===d[b-1]&&d[T]===s[y-1]){const N=c(s[--y],-1).nextSibling;a.insertBefore(c(d[T++],1),c(s[_++],-1).nextSibling),a.insertBefore(c(d[--b],1),N),s[y]=d[b]}else{if(!I){I=new Map;let N=T;for(;N<b;)I.set(d[N],N++)}if(I.has(s[_])){const N=I.get(s[_]);if(T<N&&N<b){let A=_,V=1;for(;++A<y&&A<b&&I.get(s[A])===N+V;)V++;if(V>N-T){const $=c(s[_],0);for(;T<N;)a.insertBefore(c(d[T++],1),$)}else a.replaceChild(c(d[T++],1),c(s[_++],-1))}else _++}else a.removeChild(c(s[_++],-1))}return d};/*! (c) Andrea Giammarchi - ISC */var importNode=function(a,s,d,c,h){var v=h in a,y=a.createDocumentFragment();y[s](a[c]("g")),y[s](a[c](""));var b=v?a[h](y,!0):y[d](!0);return b.childNodes.length<2?function _(T,I){for(var N=T[d](),A=T.childNodes||[],V=A.length,$=0;I&&$<V;$++)N[s](_(A[$],I));return N}:v?a[h]:function(_,T){return _[d](!!T)}}(document,"appendChild","cloneNode","createTextNode","importNode"),trim="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},normalizeAttributes=UID_IE?function(a,s){var d=s.join(" ");return s.slice.call(a,0).sort(function(c,h){return d.indexOf(c.name)<=d.indexOf(h.name)?-1:1})}:function(a,s){return s.slice.call(a,0)};function find(a,s){for(var d=s.length,c=0;c<d;)a=a.childNodes[s[c++]];return a}function parse(a,s,d,c){for(var h=a.childNodes,v=h.length,y=0;y<v;){var b=h[y];switch(b.nodeType){case ELEMENT_NODE$1:var _=c.concat(y);parseAttributes(b,s,d,_),parse(b,s,d,_);break;case COMMENT_NODE:var T=b.textContent;if(T===UID)d.shift(),s.push(SHOULD_USE_TEXT_CONTENT.test(a.nodeName)?Text(a,c):Any(b,c.concat(y)));else switch(T.slice(0,2)){case"/*":if(T.slice(-2)!=="*/")break;case"\u{1F47B}":a.removeChild(b),y--,v--}break;case TEXT_NODE:SHOULD_USE_TEXT_CONTENT.test(a.nodeName)&&trim.call(b.textContent)===UIDC&&(d.shift(),s.push(Text(a,c)));break}y++}}function parseAttributes(a,s,d,c){for(var h=a.attributes,v=[],y=[],b=normalizeAttributes(h,d),_=b.length,T=0;T<_;){var I=b[T++],N=I.value===UID,A;if(N||1<(A=I.value.split(UIDC)).length){var V=I.name;if(v.indexOf(V)<0){v.push(V);var $=d.shift().replace(N?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+V+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),L=h[$]||h[$.toLowerCase()];if(N)s.push(Attr(L,c,$,null));else{for(var D=A.length-2;D--;)d.shift();s.push(Attr(L,c,$,A))}}y.push(I)}}_=y.length,T=0;for(var H=0<_&&UID_IE&&!("ownerSVGElement"in a);T<_;){var O=y[T++];H&&(O.value=""),a.removeAttribute(O.name)}var x=a.nodeName;if(/^script$/i.test(x)){var j=document.createElement(x);for(_=h.length,T=0;T<_;)j.setAttributeNode(h[T++].cloneNode(!0));j.textContent=a.textContent,a.parentNode.replaceChild(j,a)}}function Any(a,s){return{type:"any",node:a,path:s}}function Attr(a,s,d,c){return{type:"attr",node:a,path:s,name:d,sparse:c}}function Text(a,s){return{type:"text",node:a,path:s}}var parsed=umap(new WeakMap$1);function createInfo(a,s){var d=(a.convert||domsanitizer)(s),c=a.transform;c&&(d=c(d));var h=createContent(d,a.type);cleanContent(h);var v=[];return parse(h,v,s.slice(0),[]),{content:h,updates:function(y){for(var b=[],_=v.length,T=0,I=0;T<_;){var N=v[T++],A=find(y,N.path);switch(N.type){case"any":b.push({fn:a.any(A,[]),sparse:!1});break;case"attr":var V=N.sparse,$=a.attribute(A,N.name,N.node);V===null?b.push({fn:$,sparse:!1}):(I+=V.length-2,b.push({fn:$,sparse:!0,values:V}));break;case"text":b.push({fn:a.text(A),sparse:!1}),A.textContent="";break}}return _+=I,function(){var L=arguments.length;if(_!==L-1)throw new Error(L-1+" values instead of "+_+`
`+s.join("${value}"));for(var D=1,H=1;D<L;){var O=b[D-H];if(O.sparse){var x=O.values,j=x[0],X=1,te=x.length;for(H+=te-2;X<te;)j+=arguments[D++]+x[X++];O.fn(j)}else O.fn(arguments[D++])}return y}}}}function createDetails(a,s){var d=parsed.get(s)||parsed.set(s,createInfo(a,s));return d.updates(importNode.call(document,d.content,!0))}var empty=[];function domtagger(a){var s=empty,d=cleanContent;return function(c){return s!==c&&(d=createDetails(a,s=c)),d.apply(null,arguments)}}function cleanContent(a){for(var s=a.childNodes,d=s.length;d--;){var c=s[d];c.nodeType!==1&&trim.call(c.textContent).length===0&&a.removeChild(c)}}/*! (c) Andrea Giammarchi - ISC */var hyperStyle=function(){var a=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,s=/([^A-Z])([A-Z]+)/g;return function(b,_){return"ownerSVGElement"in b?c(b,_):v(b.style,!1)};function d(y,b,_){return b+"-"+_.toLowerCase()}function c(y,b){var _;return b?_=b.cloneNode(!0):(y.setAttribute("style","--hyper:style;"),_=y.getAttributeNode("style")),_.value="",y.setAttributeNode(_),v(_,!0)}function h(y){var b,_=[];for(b in y)_.push(b.replace(s,d),":",y[b],";");return _.join("")}function v(y,b){var _,T;return function(I){var N,A,V,$;switch(typeof I){case"object":if(I){if(_==="object"){if(!b&&T!==I)for(A in T)A in I||(y[A]="")}else b?y.value="":y.cssText="";N=b?{}:y;for(A in I)$=I[A],V=typeof $=="number"&&!a.test(A)?$+"px":$,!b&&/^--/.test(A)?N.setProperty(A,V):N[A]=V;_="object",b?y.value=h(T=N):T=I;break}default:T!=I&&(_="string",T=I,b?y.value=I||"":y.cssText=I||"");break}}}}();const aria=a=>s=>{for(const d in s){const c=d==="role"?d:`aria-${d}`,h=s[d];h==null?a.removeAttribute(c):a.setAttribute(c,h)}},attribute=(a,s)=>{let d,c=!0;const h=document.createAttributeNS(null,s);return v=>{d!==v&&(d=v,d==null?c||(a.removeAttributeNode(h),c=!0):(h.value=v,c&&(a.setAttributeNodeNS(h),c=!1)))}},boolean=(a,s,d)=>c=>{d!==!!c&&((d=!!c)?a.setAttribute(s,""):a.removeAttribute(s))},data=({dataset:a})=>s=>{for(const d in s){const c=s[d];c==null?delete a[d]:a[d]=c}},event=(a,s)=>{let d,c=s.slice(2);return!(s in a)&&s.toLowerCase()in a&&(c=c.toLowerCase()),h=>{const v=isArray(h)?h:[h,!1];d!==v[0]&&(d&&a.removeEventListener(c,d,v[1]),(d=v[0])&&a.addEventListener(c,d,v[1]))}},ref=a=>s=>{typeof s=="function"?s(a):s.current=a},setter=(a,s)=>s==="dataset"?data(a):d=>{a[s]=d},hyperProperty=(a,s)=>{let d;return c=>{d!==c&&(d=c,a[s]!==c&&(c==null?(a[s]="",a.removeAttribute(s)):a[s]=c))}},readOnly=/^(?:form|list)$/i,text=(a,s)=>a.ownerDocument.createTextNode(s);function Tagger(a){return this.type=a,domtagger(this)}Tagger.prototype={attribute(a,s,d){const c=this.type==="svg";switch(s){case"class":if(c)return attribute(a,s);s="className";case"props":return setter(a,s);case"aria":return aria(a);case"style":return hyperStyle(a,d,c);case"ref":return ref(a);case".dataset":return data(a);default:return s.slice(0,1)==="."?setter(a,s.slice(1)):s.slice(0,1)==="?"?boolean(a,s.slice(1)):s.slice(0,2)==="on"?event(a,s):s in a&&!(c||readOnly.test(s))?hyperProperty(a,s):attribute(a,s)}},any(a,s){const{type:d}=this;let c=!1,h;const v=y=>{switch(typeof y){case"string":case"number":case"boolean":c?h!==y&&(h=y,s[0].textContent=y):(c=!0,h=y,s=udomdiff(a.parentNode,s,[text(a,y)],diffable,a));break;case"function":v(y(a));break;case"object":case"undefined":if(y==null){c=!1,s=udomdiff(a.parentNode,s,[],diffable,a);break}default:if(c=!1,h=y,isArray(y))if(y.length===0)s.length&&(s=udomdiff(a.parentNode,s,[],diffable,a));else switch(typeof y[0]){case"string":case"number":case"boolean":v(String(y));break;case"function":v(y.map(invoke,a));break;case"object":isArray(y[0])&&(y=y.concat.apply([],y));default:s=udomdiff(a.parentNode,s,y,diffable,a);break}else"ELEMENT_NODE"in y?s=udomdiff(a.parentNode,s,y.nodeType===11?slice.call(y.childNodes):[y],diffable,a):"text"in y?v(String(y.text)):"any"in y?v(y.any):"html"in y?s=udomdiff(a.parentNode,s,slice.call(createContent([].concat(y.html).join(""),d).childNodes),diffable,a):"length"in y&&v(slice.call(y));break}};return v},text(a){let s;const d=c=>{if(s!==c){s=c;const h=typeof c;h==="object"&&c?"text"in c?d(String(c.text)):"any"in c?d(c.any):"html"in c?d([].concat(c.html).join("")):"length"in c&&d(slice.call(c).join("")):h==="function"?d(c(a)):a.textContent=c==null?"":c}};return d}};function invoke(a){return a(this)}const{create:create$1,freeze,keys}=Object;Tagger.prototype;const cache=umap(new WeakMap$1),createRender=a=>({html:outer("html",a),svg:outer("svg",a),render(s,d){const c=typeof d=="function"?d():d,h=cache.get(s)||cache.set(s,createCache()),v=c instanceof LighterHole?unroll(a,h,c):c;return v!==h.wire&&(h.wire=v,s.textContent="",s.appendChild(v.valueOf())),s}}),createCache=()=>({stack:[],entry:null,wire:null}),outer=(a,s)=>{const d=umap(new WeakMap$1),c=v=>function(){return unroll(s,v,h.apply(null,arguments))};return h.for=(v,y)=>{const b=d.get(v)||d.set(v,create$1(null));return b[y]||(b[y]=c(createCache()))},h.node=function(){return unroll(s,createCache(),h.apply(null,arguments)).valueOf()},h;function h(){return new LighterHole(a,tta.apply(null,arguments))}},unroll=(a,s,{type:d,template:c,values:h})=>{const{length:v}=h;unrollValues(a,s,h,v);let{entry:y}=s;if(!y||y.template!==c||y.type!==d){const b=new a(d);s.entry=y={type:d,template:c,tag:b,wire:persistent(b(c,...h))}}else y.tag(c,...h);return y.wire},unrollValues=(a,{stack:s},d,c)=>{for(let h=0;h<c;h++){const v=d[h];v instanceof Hole?d[h]=unroll(a,s[h]||(s[h]=createCache()),v):isArray(v)?unrollValues(a,s[h]||(s[h]=createCache()),v,v.length):s[h]=null}c<s.length&&s.splice(c)};freeze(LighterHole);function LighterHole(a,s){this.type=a,this.template=s.shift(),this.values=s}const Hole=LighterHole,{render,html,svg}=createRender(Tagger);function tta(){let a=[],s=0,{length:d}=arguments;for(;s<d;)a.push(arguments[s++]);return a}const Free={name:"Free",layout:({props:a,children:s,size:d})=>s.reduce((c,h)=>{const{size:v={x:"100%",y:"100%"},position:y={x:0,y:0},opacity:b=1}=h.props;return{...c,[h.id]:{position:{x:y.x,y:y.y},size:{x:v.x,y:v.y},opacity:b}}},{})},Column={name:"Column",layout:({props:a={},children:s,size:d})=>{let{justify:c="center",align:h="center",cover:v=!1,margin:y={},dimensions:b=16/9,reverse:_=!1}=a;const T=v?0:Math.min(d.y/6,12);y={left:T,right:T,top:T,bottom:T,between:T,...y};const I=d.y-y.top-y.bottom,N=d.x-y.left-y.right,A=y.between*((s.length||1)-1),V=Math.min(N,(I-A)/(s.length||1)*b),$=V/b;return html.node`
      <div style=${{height:"100%",width:v?d.x+"px":"auto",display:"flex",flexDirection:_?"column-reverse":"column",justifyContent:c,alignItems:h,paddingLeft:y.left+"px",paddingTop:y.top+"px",paddingBottom:y.bottom+"px",paddingRight:y.right+"px"}}>
      ${s.map((L,D)=>html.node`<div data-node-id=${L.id} .data=${{entryTransition:{delay:400+D*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:v?0:5}} style=${{display:"flex",width:v?"100%":V+"px",height:v?$+"px":"auto",aspectRatio:b,marginBottom:D===s.length-1?0:y.between+"px",flexGrow:0,flexShrink:1,flexBasis:$+"px"}}></div>`)}
      </div>
    `}},Row={name:"Row",layout:({props:a={},children:s,size:d})=>{let{justify:c="center",align:h="center",cover:v=!1,margin:y={},dimensions:b=16/9,maxWidth:_=1,reverse:T=!1}=a;const I=v?0:Math.min(d.y/6,12);y={left:I,right:I,top:I,bottom:I,between:I,...y};const N=d.y-y.top-y.bottom,A=d.x-y.left-y.right,V=y.between*((s.length||1)-1),$=Math.min((A-V)/(s.length||1),N*b,_*d.x),L=$/b;return html.node`
      <div style=${{height:v?d.y+"px":"auto",width:"100%",display:"flex",flexDirection:T?"row-reverse":"row",justifyContent:c,alignItems:h,paddingLeft:y.left+"px",paddingTop:y.top+"px",paddingBottom:y.bottom+"px",paddingRight:y.right+"px"}}>
          ${s.map((D,H)=>html.node`<div data-node-id=${D.id} .data=${{entryTransition:{delay:400+H*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:v?0:5}} style=${{display:"flex",height:v?"100%":L+"px",width:$+"px",aspectRatio:b,marginRight:H===s.length-1?0:y.between+"px",flexGrow:0,flexShrink:1,flexBasis:$+"px"}}></div>`)}
      </div>
    `}},toMatrix=(a,s)=>a.reduce((d,c,h)=>(h%s==0?d.push([h]):d[d.length-1].push(h))&&d,[]),Grid={name:"Grid",layout:({props:a={},children:s,size:d})=>{let{dimensions:c=16/9,numPerRow:h,margin:v,cover:y=!1,maxWidth:b}=a;const _=s.length===0||y?0:Math.min(d.y/s.length/10,30);v=v!=null?v:_;const T=d.x<d.y;let I=[];h?I=toMatrix(s,h):I=T?getTallGrid(s.length):getWideGrid(s.length);const N=(d.y-v)/I.length,A=d.x-v;return html.node`
    <div style=${{display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",paddingLeft:v+"px",paddingBottom:v+"px",flexGrow:0}}>${I.map((V,$)=>Row.layout({props:{justify:"center",dimensions:c,cover:y,maxWidth:b||1/(I[0].length||1),margin:{top:v,right:v,left:0,bottom:0,between:v}},children:V.map(L=>s[L]),size:{y:N,x:A}}))}</div>`}},Presentation={name:"Presentation",layout:({props:a={},children:s,size:d})=>{let{margin:c,cover:h=!1,barWidth:v=.2,barPosition:y="side",presentationDimensions:b=16/9,viewerDimensions:_=16/9,justifyViewers:T="center",useGrid:I=!1,reverse:N=!1}=a;const A=y==="side"?d.x*v:d.y*v,V=s[0],$=s.filter(X=>X!==V),L=s.length<=1?0:Math.min(d.x/80,30);if(c=c!=null?c:L,!V)return Grid.layout({props:a,children:s,size:d});const D=s[1],H={...d};D&&(y==="side"?(H.x=d.x-A,H.y=H.x/b):(H.y=d.y-A,H.x=H.y*b));let O,x={};I?(O=Grid.layout,x={cover:h,...h?{maxWidth:1}:{margin:c}}):(O=y==="side"?Column.layout:Row.layout,x={margin:{top:c,left:c,bottom:c,right:c,between:c},dimensions:_,justify:T,align:"flex-end"});const j=y==="side"?N?"left":"right":N?"top":"bottom";return html.node`
      <div style=${{display:"flex",flexDirection:(y==="side"?"row":"column")+(N?"-reverse":""),justifyContent:"space-around",alignItems:"center",position:"relative",padding:h?0:c,[`padding-${j}`]:0}}>
        ${s[0]&&html.node`<div style=${{width:H.x,height:H.y,display:"flex",flexGrow:1}}>
            <div data-node-id=${V.id} .data=${{dimensions:b,borderRadius:h?0:5,entryTransition:{delay:0,offset:{x:0,y:1e3},scale:{x:.5,y:.5},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:2,y:2},opacity:0}}} style=${{width:"100%",height:"100%",...h?{position:"absolute",top:0,left:0,width:I&&D?100-v*100+"%":"100%",height:"100%"}:{}}} />
          </div>`}
        ${html.node`<div style=${{...y==="side"?{maxWidth:v*100+"%",height:"100%"}:{maxHeight:v*100+"%",width:"100%"}}}>${D&&O({props:x,children:$,size:y==="side"?{x:A,y:d.y}:{x:d.x,y:A}})}</div>`}
      </div>
    `}},Layered={name:"Layered",layout:({props:a={},children:s,size:d})=>html.node`<div style=${{width:"100%",height:"100%",position:"relative"}}>
      ${s.map((c,h)=>html.node`<div data-node-id=${c.id} .data=${{zIndex:h+1}} style=${{position:"absolute",inset:"0px"}}></div>`)}
    </div>`},getWideGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0,1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1,2],[3,4]];case 6:return[[0,1,2],[3,4,5]];case 7:return[[0,1,2],[3,4],[5,6]];case 8:return[[0,1,2],[3,4,5],[6,7]]}const s=Array(a).fill(null).map((d,c)=>c);return toMatrix(s,Math.round(Math.sqrt(a)))},getTallGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0],[1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1],[2,3],[4]];case 6:return[[0,1],[2,3],[4,5]];case 7:return[[0,1],[2,3],[4,5],[6]];case 8:return[[0,1],[2,3],[4,5],[6,7]]}const s=Array(a).fill(null).map((d,c)=>c);return toMatrix(s,Math.ceil(Math.sqrt(s.length))-1)};var Layouts=Object.freeze(Object.defineProperty({__proto__:null,Free,Column,Row,Grid,Presentation,Layered},Symbol.toStringTag,{value:"Module"}));const RoomParticipant={type:"RoomParticipant",valueType:MediaStream,props:{id:{},type:{},videoEnabled:{},audioEnabled:{}},init({addSource:a,removeSource:s,updateSource:d,getSource:c}){CoreContext.on("RoomJoined",({room:h})=>{let v={},y=[],b=[],_={};const T=()=>{y.filter(I=>(I==null?void 0:I.type)==="camera"&&(I==null?void 0:I.isExternal)===!0).forEach(I=>{var N,A,V;if(I.type==="camera"){const $=h.getParticipant(I.participantId),L=h.getTrack(I.id);if(c(I==null?void 0:I.id)){const H=h.getTrack((N=$==null?void 0:$.meta[I.id])==null?void 0:N.microphone);d(I.id,{videoEnabled:Boolean(L&&!L.isMuted),audioEnabled:Boolean(H&&!H.isMuted),displayName:((A=$==null?void 0:$.meta[I.id])==null?void 0:A.displayName)||"External Track",mirrored:(V=$==null?void 0:$.meta[I.id])==null?void 0:V.isMirrored,microphone:H,external:I==null?void 0:I.isExternal})}}}),b.forEach(I=>{var x;const N=_[I.id],A=_[I.id+"-screen"],V=I.trackIds.find(j=>{const X=h.getTrack(j);return(X==null?void 0:X.type)==="camera"&&!(X!=null&&X.isExternal)}),$=I.trackIds.find(j=>{const X=h.getTrack(j);return(X==null?void 0:X.type)==="microphone"&&!(X!=null&&X.isExternal)}),L=I.trackIds.find(j=>{const X=h.getTrack(j);return(X==null?void 0:X.type)==="screen_share"}),D=h.getTrack(V),H=h.getTrack($),O=h.getTrack(L);updateMediaStreamTracks(N,{video:D==null?void 0:D.mediaStreamTrack,audio:H==null?void 0:H.mediaStreamTrack}),updateMediaStreamTracks(A,{video:O==null?void 0:O.mediaStreamTrack}),d(I.id,{videoEnabled:Boolean(D&&!D.isMuted),audioEnabled:Boolean(H&&!H.isMuted),displayName:I.displayName,mirrored:(x=I==null?void 0:I.meta)==null?void 0:x.isMirrored,external:D==null?void 0:D.isExternal}),d(I.id+"-screen",{videoEnabled:Boolean(O&&!O.isMuted),displayName:I.meta.screenDisplayName||`${I.displayName}'s Screen`})})};h.useTracks(I=>{const N=I.filter(V=>!y.some($=>$.id===V.id)),A=y.filter(V=>!I.some($=>$.id===V.id));y=I.filter(V=>Boolean(V==null?void 0:V.mediaStreamTrack)),N.forEach(V=>{const{mediaStreamTrack:$,id:L,participantId:D,type:H}=h.getTrack(V.id),O={id:L,isActive:!0,value:$,props:{id:L,trackId:L,participantId:D,isMuted:V.isMuted,type:H}};$&&($.kind,a(O))}),A.forEach(V=>{var $;s(V.id),($=v[V.id])==null||$.call(v)}),T()}),h.useParticipants(I=>{const N=I.filter(V=>!b.some($=>$.id===V.id)),A=b.filter(V=>!I.some($=>$.id===V.id));b=I,N.forEach(V=>{var H;const{id:$}=V,L=new MediaStream([]),D=new MediaStream([]);_[$]=L,_[$+"-screen"]=D,a({id:$,isActive:!0,value:L,props:{id:$,type:"camera",displayName:V.displayName||V.id,audioEnabled:!1,videoEnabled:!1,mirrored:(H=V==null?void 0:V.meta)==null?void 0:H.isMirrored}}),a({id:$+"-screen",isActive:!0,value:D,props:{id:$,type:"screen",displayName:V.displayName||V.id,audioEnabled:!1,videoEnabled:!1}})}),T(),A.forEach(V=>{var $;s(V.id),($=v[V.id])==null||$.call(v)})})})}},Overlays={type:"Overlay",valueType:Object,props:{},init({addSource:a,removeSource:s,updateSource:d,getSource:c,modifySourceValue:h}){let v=[];const y=(b=[])=>{const _=b.filter(N=>!v.some(A=>A.id===N.id)),T=v.filter(N=>!b.some(A=>A.id===N.id)),I=b.filter(N=>{const A=v.find(V=>V.id===N.id);return!fastDeepEqual(N,A)});_.forEach(N=>a({id:N.id,value:{...N.props},props:N.props})),T.forEach(N=>s(N.id)),I.forEach(N=>{d(N.id,N.props),h(N.id,A=>{Object.keys(N.props).forEach(V=>{A[V]=N.props[V]})})}),v=JSON.parse(JSON.stringify(b))};CoreContext.on("ActiveProjectChanged",({projectId:b})=>{if(v=[],!b)return;const _=getProject(b);y(_.props.overlays)}),CoreContext.on("ProjectChanged",({project:b})=>{y(b.props.overlays)})}},Banner={type:"Banner",valueType:Object,props:{},init({addSource:a,removeSource:s,updateSource:d,getSource:c,modifySourceValue:h}){let v=[];const y=(b=[])=>{const _=b.filter(N=>!v.some(A=>A.id===N.id)),T=v.filter(N=>!b.some(A=>A.id===N.id)),I=b.filter(N=>{const A=v.find(V=>V.id===N.id);return!fastDeepEqual(N,A)});_.forEach(N=>a({id:N.id,value:{headerText:N.props.headerText,bodyText:N.props.bodyText},props:N.props})),T.forEach(N=>s(N.id)),I.forEach(N=>{d(N.id,N.props),h(N.id,A=>{A.headerText=N.props.headerText,A.bodyText=N.props.bodyText})}),v=b};CoreContext.on("ActiveProjectChanged",({projectId:b})=>{var T,I;if(v=[],!b)return;const _=getProject(b);y((I=(T=_.props)==null?void 0:T.banners)!=null?I:[])}),CoreContext.on("ProjectChanged",({project:b})=>{var _,T;y((T=(_=b.props)==null?void 0:_.banners)!=null?T:[])})}},Background={type:"Background",valueType:Object,props:{},init({addSource:a,removeSource:s,updateSource:d,getSource:c,modifySourceValue:h}){let v;const y=b=>{if(!b)return;const _=(v==null?void 0:v.id)!==(b==null?void 0:b.id)?b:null,T=fastDeepEqual(b,v)?null:b;_&&(a({id:_==null?void 0:_.id,value:{..._==null?void 0:_.props},props:_==null?void 0:_.props}),s(v==null?void 0:v.id)),T&&(d(T==null?void 0:T.id,T==null?void 0:T.props),h(T==null?void 0:T.id,I=>{Object.keys(T==null?void 0:T.props).forEach(N=>{I[N]=T==null?void 0:T.props[N]})})),v=JSON.parse(JSON.stringify(b))};CoreContext.on("ActiveProjectChanged",({projectId:b})=>{if(v=null,!b)return;const _=getProject(b);y(_.props.background)}),CoreContext.on("ProjectChanged",({project:b})=>{y(b.props.background)})}},Logo={type:"Logo",valueType:Object,props:{},init({addSource:a,removeSource:s,updateSource:d,getSource:c,modifySourceValue:h}){let v;const y=b=>{if(!b){v&&(s(v==null?void 0:v.id),v=null);return}const _=(v==null?void 0:v.id)!==(b==null?void 0:b.id)?b:null,T=fastDeepEqual(b,v)?null:b;_&&(a({id:_==null?void 0:_.id,value:{..._==null?void 0:_.props},props:_==null?void 0:_.props}),s(v==null?void 0:v.id)),T&&(d(T==null?void 0:T.id,T==null?void 0:T.props),h(T==null?void 0:T.id,I=>{Object.keys(T==null?void 0:T.props).forEach(N=>{I[N]=T==null?void 0:T.props[N]})})),v=JSON.parse(JSON.stringify(b))};CoreContext.on("ActiveProjectChanged",({projectId:b})=>{if(v=null,!b)return;const _=getProject(b);y(_.props.logo)}),CoreContext.on("ProjectChanged",({project:b})=>{y(b.props.logo)})}};var Sources=Object.freeze(Object.defineProperty({__proto__:null,RoomParticipant,Overlays,Banner,Background,Logo},Symbol.toStringTag,{value:"Module"}));const{state:state$1}=CoreContext;subscribeInternal(async(a,s)=>{var d,c,h,v,y,b;switch(a){case"UserChanged":{const{metadata:_}=s;state$1.user.metadata=_||{},state$1.user.props=(_==null?void 0:_.props)||{},trigger$1("UserChanged",{user:getBaseUser()});return}case"ActiveProjectChanged":{const{projectId:_}=s;state$1.activeProjectId=_,trigger$1("ActiveProjectChanged",{projectId:_});return}case"ProjectAdded":{const T=await hydrateProject(s,"ROLE_HOST"),I=toBaseProject(T);state$1.projects=[...state$1.projects,T],trigger$1("ProjectAdded",{project:I});return}case"ProjectRemoved":{const{projectId:_}=s;state$1.projects=state$1.projects.filter(T=>T.id!==_),trigger$1("ProjectRemoved",{projectId:_});return}case"ProjectChanged":{const{project:_,phase:T,broadcastId:I}=s,N=getProject(_.projectId);if(!N)return;T&&(N.videoApi.phase=T),typeof I!="undefined"&&(N.videoApi.broadcastId=I);const A=(d=_.metadata)==null?void 0:d.layoutId;A!==N.layoutApi.layoutId&&(N.layoutApi.layoutId=(c=_.metadata)==null?void 0:c.layoutId,N.compositor=await layoutToProject(A)),N.videoApi.project=_,N.props=(v=(h=_.metadata)==null?void 0:h.props)!=null?v:{},trigger$1("ProjectChanged",{project:toBaseProject(N)});return}case"DestinationAdded":{const{projectId:_}=s,T=getProject(_);if(!T)return;T.videoApi.project.destinations.push(s),trigger$1("DestinationAdded",{projectId:_,destination:toBaseDestination(s)});return}case"DestinationRemoved":{const{projectId:_,destinationId:T}=s,I=getProject(_);if(!I)return;I.videoApi.project.destinations=I.videoApi.project.destinations.filter(N=>N.destinationId!==T),trigger$1("DestinationRemoved",{projectId:_,destinationId:T});return}case"DestinationChanged":{const _=s,{projectId:T,destinationId:I}=_,N=getProject(T);if(!N)return;const A=N.videoApi.project.destinations.find(V=>V.destinationId===I);if(!A)return;Object.assign(A,_),trigger$1("DestinationChanged",{projectId:T,destination:toBaseDestination(A)});return}case"SourceAdded":return;case"SourceRemoved":return;case"SourceUpdated":return;case"NodeAdded":return;case"NodeRemoved":return;case"NodeUpdated":return;case"BackgroundMetadataUpdate":{const{Command:_}=CoreContext,{projectId:T,metadata:I,sourceId:N,doTrigger:A,role:V}=s;if(V==="ROLE_HOST"||V==="ROLE_COHOST"){const $=getProject(T);if(!$||$.props.background.id!==N)return;let L=(y=$==null?void 0:$.props)==null?void 0:y.background;L&&(L={...L,props:{...L.props,meta:{...L.props.meta,...I}}},A?_.updateProjectProps({projectId:T,props:{background:L}}):_.updateProjectPropsWithoutTrigger({projectId:T,props:{background:L}}))}return}case"OverlayMetadataUpdate":{const{Command:_}=CoreContext,{projectId:T,metadata:I,sourceId:N,doTrigger:A,role:V}=s;if(V==="ROLE_HOST"||V==="ROLE_COHOST"){const $=getProject(T);if(!$)return;let L=$.props.overlays.find(D=>D.id===N);if(L){L={...L,props:{...L.props,meta:{...L.props.meta,...I}}};const D=$.props.overlays.findIndex(H=>H.id===N);if(D>-1){const H=JSON.parse(JSON.stringify((b=$==null?void 0:$.props)==null?void 0:b.overlays));H.splice(D,1,L),A?_.updateProjectProps({projectId:T,props:{overlays:H}}):_.updateProjectPropsWithoutTrigger({projectId:T,props:{overlays:H}})}}}return}}}),subscribeInternal(()=>log$1.debug({nextState:{...state$1}}));const{state}=CoreContext,updateUserProps=async a=>{const s=getUser();if(!s)return;const d={...s.props,...a.props},c=await CoreContext.clients.LiveApi().collection.updateCollection({collectionId:s.id,updateMask:["metadata"],metadata:{...s.metadata,props:d}});await triggerInternal$1("UserChanged",c.collection)},createProject$1=async(a={})=>{const{props:s={},size:d,settings:c={}}=a,h=await CoreContext.Request.createProject({settings:c,props:s,size:d});await triggerInternal$1("ProjectAdded",h.project);const v=await hydrateProject(h.project,"ROLE_HOST");return toBaseProject(v)},recreateLayout=async a=>{const{projectId:s,props:d={}}=a,c=getUser().id,h=await CoreContext.clients.LiveApi().project.getProject({collectionId:c,projectId:s,status:!0});if([ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING,ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_STARTING].includes(h.status.phase))return;const v=h.project.metadata||{},{layoutId:y}=v,{video:b}=h.project.rendering,{type:_}=h.project.metadata.props||{},T=await CoreContext.Request.createLayout({collectionId:c,projectId:s,type:_||"sceneless",settings:{},size:{x:b.width,y:b.height}}),I=await CoreContext.clients.LiveApi().project.updateProject({collectionId:c,projectId:s,updateMask:["metadata"],metadata:{...v,layoutId:T.id}});CoreContext.log.debug("New layout assigned to project:",{layout:T}),await triggerInternal$1("ProjectChanged",{project:I.project}),await CoreContext.clients.LayoutApi().layout.deleteLayout({layoutId:y}),CoreContext.log.debug("Previous layout deleted:",{layoutId:y});const N=await hydrateProject(I.project,"ROLE_HOST");return await N.compositor.update(N.compositor.getRoot().id,d),toBaseProject(N)},deleteProject$1=async a=>{const{projectId:s}=a;await CoreContext.Request.deleteProject({projectId:s}),await triggerInternal$1("ProjectRemoved",{projectId:s})},updateProjectProps=async a=>{const{projectId:s}=a,d=getUser().id,c=getProject(s),h={...c.props,...a.props},v=await CoreContext.clients.LiveApi().project.updateProject({collectionId:d,projectId:s,updateMask:["metadata"],metadata:{...c.videoApi.project.metadata,props:h}});await triggerInternal$1("ProjectChanged",{project:v.project})},updateProjectMeta=a=>updateProjectProps({projectId:a.projectId,props:a.meta}),updateProjectPropsWithoutTrigger=async a=>{const{projectId:s}=a,d=getUser().id,c=getProject(s),h={...c.props,...a.props};await CoreContext.clients.LiveApi().project.updateProject({collectionId:d,projectId:s,updateMask:["metadata"],metadata:{...c.videoApi.project.metadata,props:h}})},setActiveProject=async a=>{const s=state.projects.find(c=>c.id===a.projectId);if(!s){state.activeProjectId=null,triggerInternal$1("ActiveProjectChanged",{projectId:null});return}const d=state.projects.find(c=>c.id===state.activeProjectId);if(s!==d)return d&&(Array.from(webrtcManager.rooms.keys()).map(webrtcManager.removeRoom),await CoreContext.clients.LayoutApi().unsubscribeFromLayout(d.layoutApi.layoutId),await CoreContext.clients.LiveApi().unsubscribeFromProject(d.videoApi.project.collectionId,d.videoApi.project.projectId)),await CoreContext.clients.LayoutApi().subscribeToLayout(s.layoutApi.layoutId),await CoreContext.clients.LiveApi().subscribeToProject(s.videoApi.project.collectionId,s.videoApi.project.projectId),CoreContext.clients.LiveApi().project.getProject({collectionId:s.videoApi.project.collectionId,projectId:s.videoApi.project.projectId,status:!0}).then(c=>{var h,v;triggerInternal$1("ProjectChanged",{project:c.project,phase:(h=c.status)==null?void 0:h.phase,broadcastId:(v=c.status)==null?void 0:v.broadcastId})}),triggerInternal$1("ActiveProjectChanged",{projectId:s.id}),toBaseProject(s)},joinRoom=async a=>{const{projectId:s,displayName:d="Guest"}=a,c=state.projects.find(N=>N.id===s);let h=c.sfuToken;if(!h){let{webrtcAccess:N}=await CoreContext.clients.LiveApi().authentication.createWebRtcAccessToken({collectionId:c.videoApi.project.collectionId,projectId:c.videoApi.project.projectId,displayName:d});h=N.accessToken}const y=o(h).video.room,b=new URL(CoreContext.clients.getLiveKitServer()),_=b.host+b.pathname,T=webrtcManager.ensureRoom(_,y,h);T.bindApiClient(CoreContext.clients),await T.connect(),c.sfuToken=h,c.roomId=y;const I=getRoom(y);return trigger$1("RoomJoined",{projectId:c.id,room:I}),I},createNode=async a=>{let{props:s={},parentId:d,index:c,projectId:h=state.activeProjectId}=a;const v=getProject(h),y=await v.compositor.insert(s,d,c);return triggerInternal$1("NodeAdded",{projectId:h,nodeId:y}),triggerInternal$1("NodeChanged",{projectId:h,nodeId:d}),v.compositor.get(y)},deleteNode=async a=>{var v;let{nodeId:s,projectId:d=state.activeProjectId}=a;const c=getProject(d),h=(v=c.compositor.getParent(s))==null?void 0:v.id;c.compositor.remove(s),triggerInternal$1("NodeRemoved",{projectId:d,nodeId:s}),triggerInternal$1("NodeChanged",{projectId:d,nodeId:h})},updateNode=async a=>{let{nodeId:s,props:d={},projectId:c=state.activeProjectId}=a;const h=getProject(c);return delete d.type,delete d.sourceType,h.compositor.update(s,d),triggerInternal$1("NodeChanged",{projectId:c,nodeId:s}),h.compositor.get(s)},setNodeLayout=async a=>{let{nodeId:s,layout:d,projectId:c=state.activeProjectId,layoutProps:h={}}=a;getProject(c).compositor.update(s,{layout:d,layoutProps:h}),triggerInternal$1("NodeChanged",{projectId:c,nodeId:s})},moveNode=async a=>{const{nodeId:s,parentId:d,projectId:c=state.activeProjectId,index:h}=a;getProject(c).compositor.move(s,d,h),triggerInternal$1("NodeChanged",{projectId:c,nodeId:s})},swapNodes=async a=>{var b,_;const{nodeAId:s,nodeBId:d,projectId:c=state.activeProjectId}=a,h=getProject(c),v=(b=h.compositor.getParent(s))==null?void 0:b.id,y=(_=h.compositor.getParent(d))==null?void 0:_.id;h.compositor.swap(s,d),triggerInternal$1("NodeChanged",{projectId:c,nodeId:v}),triggerInternal$1("NodeChanged",{projectId:c,nodeId:y})},reorderNodes=async a=>{const{parentId:s,childIds:d,projectId:c=state.activeProjectId}=a;getProject(c).compositor.reorder(s,d),triggerInternal$1("NodeChanged",{projectId:c,nodeId:s})},startBroadcast=async a=>{const{projectId:s=state.activeProjectId}=a,d=getProject(s);await CoreContext.clients.LiveApi().project.startProjectBroadcast({collectionId:d.videoApi.project.collectionId,projectId:d.videoApi.project.projectId})},stopBroadcast=async a=>{const{projectId:s=state.activeProjectId}=a,d=getProject(s);await CoreContext.clients.LiveApi().project.stopProjectBroadcast({collectionId:d.videoApi.project.collectionId,projectId:d.videoApi.project.projectId})},addDestination=async a=>{var I;const{rtmpUrl:s,rtmpKey:d,enabled:c,projectId:h=state.activeProjectId,metadata:v={},props:y={}}=a,b=getProject(h),_={rtmpPush:{key:d,url:s}},T=await((I=CoreContext.clients.LiveApi().destination)==null?void 0:I.createDestination({collectionId:b.videoApi.project.collectionId,projectId:b.videoApi.project.projectId,address:_,enabled:c,metadata:{props:{...v,...y}}}));return await triggerInternal$1("DestinationAdded",T.destination),toBaseDestination(T.destination)},removeDestination=async a=>{var h;const{destinationId:s,projectId:d=state.activeProjectId}=a,c=getProject(d);await((h=CoreContext.clients.LiveApi().destination)==null?void 0:h.deleteDestination({collectionId:c.videoApi.project.collectionId,projectId:c.videoApi.project.projectId,destinationId:s})),await triggerInternal$1("DestinationRemoved",{projectId:d,destinationId:s})},updateDestination=async a=>{var _;const{rtmpUrl:s,rtmpKey:d,destinationId:c,projectId:h=state.activeProjectId}=a,v=getProject(h),y={key:d,url:s},b=await((_=CoreContext.clients.LiveApi().destination)==null?void 0:_.updateDestination({collectionId:v.videoApi.project.collectionId,projectId:v.videoApi.project.projectId,destinationId:c,updateMask:["address.rtmpPush"],address:{rtmpPush:y}}));await triggerInternal$1("DestinationChanged",b.destination)},updateDestinationProps=async a=>{var b,_;const{projectId:s=state.activeProjectId,destinationId:d,props:c={}}=a,h=getProject(s),v=h.videoApi.project.destinations.find(T=>T.destinationId===d);if(!v)return;const y=await((_=CoreContext.clients.LiveApi().destination)==null?void 0:_.updateDestination({collectionId:h.videoApi.project.collectionId,projectId:h.videoApi.project.projectId,destinationId:d,updateMask:["metadata"],metadata:{...v.metadata||{},props:{...((b=v.metadata)==null?void 0:b.props)||{},...c}}}));await triggerInternal$1("DestinationChanged",y.destination)},updateDestinationMeta=a=>updateDestinationProps({projectId:a.projectId,destinationId:a.destinationId,props:a.metadata}),setDestinationEnabled=async a=>{var _;const{enabled:s,destinationId:d,projectId:c=state.activeProjectId}=a,h=getProject(c);if(h.videoApi.project.destinations.find(T=>d===T.destinationId).enabled===s)return;const y=await((_=CoreContext.clients.LiveApi().destination)==null?void 0:_.updateDestination({collectionId:h.videoApi.project.collectionId,projectId:h.videoApi.project.projectId,destinationId:d,updateMask:["enabled"],enabled:s}));await triggerInternal$1("DestinationChanged",y.destination),trigger$1(s?"DestinationEnabled":"DestinationDisabled",{projectId:c,destinationId:d})},setDestination=async a=>{var b,_;const{rtmpUrl:s,rtmpKey:d,projectId:c=state.activeProjectId}=a,h=getProject(c),v={key:d,url:s},y=!0;if(h.videoApi.project.destinations.length>0){const T=await((b=CoreContext.clients.LiveApi().destination)==null?void 0:b.updateDestination({collectionId:h.videoApi.project.collectionId,projectId:h.videoApi.project.projectId,destinationId:h.videoApi.project.destinations[0].destinationId,updateMask:["address.rtmpPush"],address:{rtmpPush:v}}));await triggerInternal$1("DestinationChanged",T.destination)}else{const T=await((_=CoreContext.clients.LiveApi().destination)==null?void 0:_.createDestination({collectionId:h.videoApi.project.collectionId,projectId:h.videoApi.project.projectId,address:{rtmpPush:v},enabled:y}));await triggerInternal$1("DestinationAdded",T.destination)}trigger$1("DestinationSet",{projectId:c,rtmpUrl:s,rtmpKey:d})};var commands$1=Object.freeze(Object.defineProperty({__proto__:null,updateUserProps,createProject:createProject$1,recreateLayout,deleteProject:deleteProject$1,updateProjectProps,updateProjectMeta,updateProjectPropsWithoutTrigger,setActiveProject,joinRoom,createNode,deleteNode,updateNode,setNodeLayout,moveNode,swapNodes,reorderNodes,startBroadcast,stopBroadcast,addDestination,removeDestination,updateDestination,updateDestinationProps,updateDestinationMeta,setDestinationEnabled,setDestination},Symbol.toStringTag,{value:"Module"}));const useActiveProjectRoom$1=()=>{const[a,s]=React.useState(null);return React.useEffect(()=>useActiveProjectRoom(s),[]),a},useDevices=()=>{const[a,s]=React.useState({webcams:[],microphones:[],speakers:[]});return React.useEffect(()=>watchDevices(s),[]),a},StudioContext=React__default.default.createContext({studio:null,project:null,room:null,webcamId:null,microphoneId:null,setStudio:()=>{},setProject:()=>{},setRoom:()=>{},setWebcamId:()=>{},setMicrophoneId:()=>{},projectCommands:{}}),useStudio=()=>React.useContext(StudioContext);let stored={webcamId:null,microphoneId:null};try{stored.webcamId=localStorage==null?void 0:localStorage.getItem("__LS_webcam"),stored.microphoneId=localStorage==null?void 0:localStorage.getItem("__LS_microphone")}catch{}const StudioProvider=({children:a})=>{const[s,d]=React.useState(),[c,h]=React.useState(),[v,y]=React.useState(),[b,_]=React.useState(stored.webcamId),[T,I]=React.useState(stored.microphoneId),N=React.useMemo(()=>c?commands(c):null,[c]);return React.useEffect(()=>{},[c]),React.useEffect(()=>{!s||(b&&s.setCamera({deviceId:b}).catch(A=>{console.warn(A)}),T&&s.setMicrophone({deviceId:T}).catch(A=>{console.warn(A)}))},[s,b,T]),jsx(StudioContext.Provider,{value:{studio:v,project:c,room:s,webcamId:b,microphoneId:T,setStudio:y,setProject:h,setRoom:d,setWebcamId:A=>{try{localStorage==null||localStorage.setItem("__LS_webcam",A)}catch{}_(A)},setMicrophoneId:A=>{try{localStorage==null||localStorage.setItem("__LS_microphone",A)}catch{}I(A)},projectCommands:N},children:a})};var react=Object.freeze(Object.defineProperty({__proto__:null,useActiveProjectRoom:useActiveProjectRoom$1,useDevices,StudioContext,useStudio,StudioProvider},Symbol.toStringTag,{value:"Module"}));const addingCache={camera:new Set,screen:new Set},commands=a=>{var j,X,te,se,oe,F,Z,ne,M,G;const s=a.id,d=a.scene.getRoot(),{Command:c}=CoreContext,h=d.children.find(J=>J.props.id==="bg"),v=d.children.find(J=>J.props.id==="content"),y=d.children.find(J=>J.props.id==="foreground");let b=(j=h==null?void 0:h.children)==null?void 0:j.find(J=>J.props.id==="video-background"),_=(X=h==null?void 0:h.children)==null?void 0:X.find(J=>J.props.id==="bg-image"),T=(te=h==null?void 0:h.children)==null?void 0:te.find(J=>J.props.id==="image-background"),I=(se=y==null?void 0:y.children)==null?void 0:se.find(J=>J.props.id==="fg-image");(oe=y==null?void 0:y.children)==null||oe.find(J=>J.props.id==="image-overlay");let N=(F=y==null?void 0:y.children)==null?void 0:F.find(J=>J.props.id==="iframe-overlay"),A=(Z=y==null?void 0:y.children)==null?void 0:Z.find(J=>J.props.id==="video-overlay"),V=(ne=y==null?void 0:y.children)==null?void 0:ne.find(J=>J.props.id==="logo"),$=(M=y==null?void 0:y.children)==null?void 0:M.find(J=>J.props.id==="fg-video");const L=getProject(a.id);let D=(G=y==null?void 0:y.children)==null?void 0:G.find(J=>J.props.id==="fg-banners");const H=async()=>{const J=async()=>{var z;if(D)return D.id;{const re=await L.compositor.insert({name:"BannerContainer",id:"fg-banners",layout:"Column",layoutProps:{cover:!0}},y.id);return D=(z=y==null?void 0:y.children)==null?void 0:z.find(me=>me.props.id===re),re}},ie=async()=>{var z;if(I)return I.id;{const re=await L.compositor.insert({name:"ImageOverlay",id:"fg-image",layout:"Free"},y.id);return I=(z=y==null?void 0:y.children)==null?void 0:z.find(me=>me.props.id===re),re}},K=async()=>{var z;if(N)return N.id;{const re=await L.compositor.insert({name:"Overlay",sourceType:"Overlay",id:"overlay",layout:"Free",style:{width:"100%",height:"100%",objectFit:"cover"}},y.id);return N=(z=y==null?void 0:y.children)==null?void 0:z.find(me=>me.props.id===re),re}},Y=async()=>{var z;if(A)return A.id;{const re=await L.compositor.insert({name:"VideoOverlay2",sourceType:"Video2",proxySource:"Overlay",id:"video-overlay",layout:"Free",style:{width:"100%",height:"100%",objectFit:"cover"}},y.id);return A=(z=y==null?void 0:y.children)==null?void 0:z.find(me=>me.props.id===re),re}},ae=async()=>{var z;if($)return $.id;{const re=await L.compositor.insert({name:"VideoOverlay",id:"fg-video",layout:"Free"},y.id);return $=(z=y==null?void 0:y.children)==null?void 0:z.find(me=>me.props.id===re),re}},pe=async()=>{var z;if(V)return V.id;{const re=await L.compositor.insert({name:"Logo",layout:"Free",sourceType:"Logo",id:"logo",style:{width:"100%",height:"100%",objectFit:"contain",position:"unset"}},y.id);return V=(z=y==null?void 0:y.children)==null?void 0:z.find(me=>me.props.id===re),re}},Se=async()=>{var z;if(_)return _.id;{const re=await L.compositor.insert({name:"ImageBackground",id:"bg-image",tagName:"img",sourceType:"Element",attributes:{src:""},fields:{style:{width:"100%",height:"100%",objectFit:"cover"}}},h.id);return _=(z=h==null?void 0:h.children)==null?void 0:z.find(me=>me.props.id===re),re}},ye=async()=>{var z;if(T)return T.id;{const re=await L.compositor.insert({name:"ImageBackground2",sourceType:"Image2",proxySource:"Background",id:"image-background",layout:"Free",src:"",style:{width:"100%",height:"100%",objectFit:"cover"}},h.id);return T=(z=h==null?void 0:h.children)==null?void 0:z.find(me=>me.props.id===re),re}},w=async()=>{var z;if(b)return b.id;{const re=await L.compositor.insert({name:"VideoBackground",sourceType:"Video2",proxySource:"Background",id:"video-background",layout:"Free",style:{width:"100%",height:"100%",position:"absolute",objectFit:"cover"}},h.id);return b=(z=h==null?void 0:h.children)==null?void 0:z.find(me=>me.props.id===re),re}};try{const z=await Promise.all([J(),ie(),K(),ae(),Y(),pe()]);await L.compositor.reorder(y.id,z);const re=await Promise.all([Se(),ye(),w()]);await L.compositor.reorder(h.id,re)}catch{}},O={getBackground(){return h},getContent(){return v},getForeground(){return y},getLayout(){return v.props.layout},getBanners(){var J;return((J=getProject(a.id).props)==null?void 0:J.banners)||[]},getOverlays(){return getProject(a.id).props.overlays||[]},getParticipants(){return v.children.filter(J=>J.props.sourceType==="RoomParticipant")},getLogo(){var J;return(J=O.getProp("logo"))==null?void 0:J.id},removeLogo(){return O.setProp("logo",null)},getImageOverlay(){var ie,K;const J=(K=(ie=I==null?void 0:I.children)==null?void 0:ie.map(Y=>{var ae,pe;return(pe=(ae=Y==null?void 0:Y.props)==null?void 0:ae.sourceProps)==null?void 0:pe.id}))!=null?K:[];return J.length>1?J:J[0]},getVideoOverlay(){var ie,K;const J=(K=(ie=$==null?void 0:$.children)==null?void 0:ie.map(Y=>{var ae,pe;return(pe=(ae=Y==null?void 0:Y.props)==null?void 0:ae.sourceProps)==null?void 0:pe.id}))!=null?K:[];return J.length>1?J:J[0]},autoPlayBackgroundVideo(J={muted:!0,autoplay:!0}){const ie=h.children.find(K=>K.props.id==="bg-video");!ie||CoreContext.Command.updateNode({nodeId:ie.id,props:{...ie.props,attributes:{...ie.props.attributes,...J}}})},autoPlayVideoOverlay(J,ie={muted:!0,autoplay:!0}){var Y;const K=(Y=$==null?void 0:$.children)==null?void 0:Y.find(ae=>{var pe,Se;return((Se=(pe=ae.props)==null?void 0:pe.sourceProps)==null?void 0:Se.id)===J});!K||K.props.sourceProps.type==="video"&&CoreContext.Command.updateNode({nodeId:K.id,props:{...K.props,attributes:{...K.props.attributes,...ie}}})},async removeImageOverlay(J){const ie=I.children.find(K=>{var Y,ae;return((ae=(Y=K.props)==null?void 0:Y.sourceProps)==null?void 0:ae.id)===J});ie&&CoreContext.Command.deleteNode({nodeId:ie.id})},async removeVideoOverlay(J){var Y;const ie=(Y=$==null?void 0:$.children)==null?void 0:Y.find(ae=>{var pe,Se;return((Se=(pe=ae.props)==null?void 0:pe.sourceProps)==null?void 0:Se.id)===J});ie&&CoreContext.Command.deleteNode({nodeId:ie.id}),y.children.filter(ae=>ae.props.id!=="fg-video").forEach(ae=>{ae.children.forEach(pe=>{var Se,ye,w;((w=(ye=(Se=pe.props)==null?void 0:Se.fields)==null?void 0:ye.style)==null?void 0:w.opacity)===0&&(pe.props.fields.style.opacity=1,CoreContext.Command.updateNode({nodeId:pe.id,props:{...pe.props}}))})})},async addImageOverlay(J,ie){var pe,Se,ye;const K=I.children.find(w=>w.props.id==="img-overlay");if(K&&((Se=(pe=K==null?void 0:K.props)==null?void 0:pe.sourceProps)==null?void 0:Se.id)===J)return;let Y={id:"img-overlay",sourceType:"Element",sourceProps:{type:"image",id:J},tagName:"img",attributes:{src:ie},fields:{style:{transition:"opacity 300ms ease 0ms, transform, width, height","-webkit-transition":"opacity 300ms ease 0ms, transform, width, height",opacity:1,objectFit:"cover"}}};((ye=$==null?void 0:$.children)==null?void 0:ye.find(w=>w.props.id==="vid-overlay"))&&(Y.fields.style.opacity=0),K?CoreContext.Command.updateNode({nodeId:K.id,props:{...K.props,...Y}}):await CoreContext.Command.createNode({props:Y,parentId:I.id,index:I.children.length})},async addVideoOverlay(J,ie,K={playsinline:!0,disablepictureinpicture:!0,autoplay:!0}){var Se,ye,w;const Y=(Se=$==null?void 0:$.children)==null?void 0:Se.find(z=>z.props.id==="vid-overlay");if(Y&&((w=(ye=Y==null?void 0:Y.props)==null?void 0:ye.sourceProps)==null?void 0:w.id)===J)return;let ae={id:"vid-overlay",sourceType:"LS-Video",sourceProps:{type:"video",id:J},tagName:"video",attributes:{...K,src:ie,id:J}};y.children.filter(z=>z.props.id!=="fg-video").forEach(z=>{z.children.forEach(re=>{var me,le,ue;((ue=(le=(me=re.props)==null?void 0:me.fields)==null?void 0:le.style)==null?void 0:ue.opacity)===1&&(re.props.fields.style.opacity=0,CoreContext.Command.updateNode({nodeId:re.id,props:{...re.props}}))})}),Y?CoreContext.Command.updateNode({nodeId:Y.id,props:{...Y.props,...ae}}):await CoreContext.Command.createNode({props:ae,parentId:$.id,index:$.children.length})},getBackgroundMedia(){var ie,K,Y;return(Y=(K=(ie=h.children.filter(ae=>ae)[0])==null?void 0:ie.props)==null?void 0:K.attributes)==null?void 0:Y.src},getBackgroundImage(){var ie,K,Y;return(Y=(K=(ie=h.children.filter(ae=>ae.props.id==="bg-image")[0])==null?void 0:ie.props)==null?void 0:K.attributes)==null?void 0:Y.src},getBackgroundVideo(){var ie,K,Y;return(Y=(K=(ie=h.children.filter(ae=>ae.props.id==="bg-video")[0])==null?void 0:ie.props)==null?void 0:K.attributes)==null?void 0:Y.src},async setBackgroundImage(J){var Y,ae;const ie=h.children.find(pe=>pe.props.id==="bg-image");if(ie&&((ae=(Y=ie==null?void 0:ie.props)==null?void 0:Y.attributes)==null?void 0:ae.src)===J)return;const K=h.children.find(pe=>pe.props.id==="bg-video");K&&CoreContext.Command.deleteNode({nodeId:K.id}),ie?CoreContext.Command.updateNode({nodeId:ie.id,props:{attributes:{...ie.props.attributes,src:J}}}):await CoreContext.Command.createNode({props:{name:"ImageBackground",id:"bg-image",tagName:"img",sourceType:"Element",attributes:{src:J},fields:{style:{width:"100%",height:"100%",objectFit:"cover"}}},parentId:h.id,index:h.children.length})},async setBackgroundVideo(J,ie={loop:!0,autoplay:!0}){var ae,pe;const K=h.children.find(Se=>Se.props.id==="bg-video");if(K&&((pe=(ae=K==null?void 0:K.props)==null?void 0:ae.attributes)==null?void 0:pe.src)===J)return;const Y=h.children.find(Se=>Se.props.id==="bg-image");Y&&CoreContext.Command.deleteNode({nodeId:Y.id}),K?CoreContext.Command.updateNode({nodeId:K.id,props:{attributes:{...K.props.attributes,...ie,src:J}}}):await CoreContext.Command.createNode({props:{name:"VideoBackground",id:"bg-video",sourceType:"LS-Video",attributes:{...ie,src:J},fields:{style:{width:"100%",height:"100%",objectFit:"cover"}}},parentId:h.id,index:h.children.length})},addLogo(J,ie){const K=getProject(a.id).props.logo||null;if(K&&K.id===J)return c.updateProjectProps({projectId:s,props:{logo:K}});const Y=ie.meta||{style:{height:"100%",width:"100%"}},ae={id:J,props:{...ie,type:"logo",meta:Y}};c.updateProjectProps({projectId:s,props:{logo:ae}})},addBanner(J={}){var ae;const ie=J.meta||{},K={id:generateId(),props:{...J,meta:ie}},Y=((ae=getProject(s).props)==null?void 0:ae.banners)||[];return c.updateProjectProps({projectId:s,props:{banners:[...Y,K]}})},editBanner(J,ie={}){const Y=O.getBanners().map(ae=>ae.id!==J?ae:{...ae,props:ie});return c.updateProjectProps({projectId:s,props:{banners:Y}})},removeBanner(J){var K;const ie=O.getBanners();return(K=D==null?void 0:D.children)==null||K.forEach(Y=>{Y.props.bannerId===J&&CoreContext.Command.deleteNode({nodeId:Y.id})}),c.updateProjectProps({projectId:s,props:{banners:ie.filter(Y=>Y.id!==J)}})},async setActiveBanner(J){var ae,pe;const[ie,...{}]=(D==null?void 0:D.children)||[];((pe=(ae=ie==null?void 0:ie.props)==null?void 0:ae.sourceType)==null?void 0:pe.toLowerCase())==="chatoverlay"&&await CoreContext.Command.deleteNode({nodeId:ie.id});const[K,...Y]=(D==null?void 0:D.children)||[];if(Y.forEach(Se=>{CoreContext.Command.deleteNode({nodeId:Se.id})}),K)CoreContext.Command.updateNode({nodeId:K.id,props:{sourceType:"Banner",bannerId:J}});else return CoreContext.Command.createNode({parentId:D==null?void 0:D.id,props:{sourceType:"Banner",bannerId:J}})},getActiveBanner(){var J,ie,K,Y;return(Y=(K=(ie=(J=D.children)==null?void 0:J[0])==null?void 0:ie.props)==null?void 0:K.bannerId)!=null?Y:null},async addChatOverlay(J,ie){var pe,Se;const[K,...{}]=(D==null?void 0:D.children)||[];((Se=(pe=K==null?void 0:K.props)==null?void 0:pe.sourceType)==null?void 0:Se.toLowerCase())==="banner"&&await CoreContext.Command.deleteNode({nodeId:K.id});const[Y,...ae]=(D==null?void 0:D.children)||[];if(ae.forEach(ye=>{CoreContext.Command.deleteNode({nodeId:ye.id})}),Y)CoreContext.Command.updateNode({nodeId:Y.id,props:{sourceType:"ChatOverlay",chatOverlayId:J,id:J,...ie}});else return CoreContext.Command.createNode({parentId:D==null?void 0:D.id,props:{sourceType:"ChatOverlay",chatOverlayId:J,id:J,...ie}})},removeChatOverlay(J){var ie;(ie=D==null?void 0:D.children)==null||ie.forEach(K=>{K.props.chatOverlayId===J&&CoreContext.Command.deleteNode({nodeId:K.id})})},getChatOverlay(){var J,ie,K,Y,ae;return(K=(ie=(J=D.children)==null?void 0:J[0])==null?void 0:ie.props)!=null&&K.chatOverlayId&&((ae=(Y=D.children)==null?void 0:Y[0])==null?void 0:ae.props)||null},getImageOverlay2(){const ie=CoreContext.compositor.getSources("Overlay").filter(K=>{var Y,ae;return((ae=(Y=K.props)==null?void 0:Y.meta)==null?void 0:ae.type)==="image-overlay"}).map(K=>K==null?void 0:K.id);return ie.length>1?ie:ie[0]},getVideoOverlay2(){const ie=CoreContext.compositor.getSources("Overlay").filter(K=>K.props.type==="video-overlay").map(K=>K==null?void 0:K.id);return ie.length>1?ie:ie[0]},getCustomOverlay(){const ie=CoreContext.compositor.getSources("Overlay").filter(K=>{var Y,ae;return((ae=(Y=K.props)==null?void 0:Y.meta)==null?void 0:ae.type)==="html-overlay"}).map(K=>K==null?void 0:K.id);return ie.length>1?ie:ie[0]},async removeCustomOverlay(J){const ie=O.getOverlays();return c.updateProjectProps({projectId:s,props:{overlays:ie.filter(K=>K.id!==J)}})},async removeImageOverlay2(J){const ie=O.getOverlays();return c.updateProjectProps({projectId:s,props:{overlays:ie.filter(K=>K.id!==J)}})},async removeVideoOverlay2(J){const ae=O.getOverlays().filter(pe=>pe.id!==J).filter(pe=>pe.props.type!=="video-overlay").map(pe=>({...pe,props:{...pe.props,meta:{...pe.props.meta,style:{opacity:1}}}}));c.updateProjectProps({projectId:s,props:{overlays:ae}})},async addCustomOverlay(J,ie={}){const K=O.getOverlays(),Y=K.find(w=>w.id===J);if(Y){const w=K.findIndex(z=>z.id===J);if(w>-1){const z=JSON.parse(JSON.stringify(K));return z.splice(w,1,Y),c.updateProjectProps({projectId:s,props:{overlays:z}})}}const ae=K.find(w=>w.props.type==="video-overlay"),pe=ie.meta||{type:"html-overlay"},Se={id:J,props:{...ie,type:"overlay",meta:{...pe,...ae&&{style:{opacity:0}}}}},ye=K.filter(w=>w.props.type!=="overlay");c.updateProjectProps({projectId:s,props:{overlays:[...ye,Se]}})},async addImageOverlay2(J,ie={}){const K=O.getOverlays(),Y=K.find(w=>w.id===J);if(Y){const w=K.findIndex(z=>z.id===J);if(w>-1){const z=JSON.parse(JSON.stringify(K));return z.splice(w,1,Y),c.updateProjectProps({projectId:s,props:{overlays:z}})}}const ae=K.find(w=>w.props.type==="video-overlay"),pe=ie.meta||{type:"image-overlay"},Se={id:J,props:{...ie,type:"overlay",meta:{...pe,...ae&&{style:{opacity:0}}}}},ye=K.filter(w=>w.props.type!=="overlay");c.updateProjectProps({projectId:s,props:{overlays:[...ye,Se]}})},async addVideoOverlay2(J,ie={}){const K=O.getOverlays(),Y=K.find(w=>w.id===J);if(Y){const w=K.findIndex(z=>z.id===J);if(w>-1){const z=JSON.parse(JSON.stringify(K));return z.splice(w,1,Y),c.updateProjectProps({projectId:s,props:{overlays:z}})}}const ae=K==null?void 0:K.filter(w=>w.props.type!=="video-overlay"),pe=ae==null?void 0:ae.map(w=>({...w,props:{...w.props,meta:{...w.props.meta,style:{opacity:0}}}})),Se=ie.meta||{},ye={id:J,props:{...ie,type:"video-overlay",meta:Se}};c.updateProjectProps({projectId:s,props:{overlays:[...pe,ye]}})},setLayout(J,ie={}){const K=v.props.layoutProps.showcase;c.setNodeLayout({nodeId:v.id,layout:J,layoutProps:{showcase:K,...ie}})},getBackgroundMedia2(J){const ie=CoreContext.compositor.getSources("Background");return(J?ie.filter(Y=>Y.props.type===J).map(Y=>Y.id):ie.map(Y=>Y.id))[0]},getBackgroundImage2(){return O.getBackgroundMedia2("image-background")},getBackgroundVideo2(){return O.getBackgroundMedia2("video-background")},async setBackgroundImage2(J,ie={}){const K=getProject(a.id).props.background||null;if(K&&K.id===J)return c.updateProjectProps({projectId:s,props:{background:K}});const Y=ie.meta||{},ae={id:J,props:{...ie,type:"image-background",meta:Y}};c.updateProjectProps({projectId:s,props:{background:ae}})},async setBackgroundVideo2(J,ie={}){const K=getProject(a.id).props.background||null;if(K&&K.id===J)return c.updateProjectProps({projectId:s,props:{background:K}});const Y=ie.meta||{},ae={id:J,props:{...ie,type:"video-background",meta:Y}};c.updateProjectProps({projectId:s,props:{background:ae}})},setShowcase(J,ie="camera"){var Y;const K=O.getParticipantNode(J,ie);return CoreContext.Command.updateNode({nodeId:v.id,props:{layoutProps:{...v.props.layoutProps,showcase:(Y=K==null?void 0:K.id)!=null?Y:null}}})},useShowcase(J){const ie=()=>{const K=v.props.layoutProps.showcase,Y=v.children.find(pe=>pe.id===K);if(!Y)return J({participantId:null,type:null});const{sourceProps:ae}=Y.props;return J({participantId:ae.id,type:ae.type})};return ie(),CoreContext.onInternal("NodeChanged",K=>{K.nodeId===v.id&&ie()})},async addParticipantTrack(J,ie={isMuted:!0,isHidden:!1,volume:0},K="camera"){if(addingCache[K].has(J))return;const{isMuted:Y=!1,isHidden:ae=!1,volume:pe=1}=ie;if(v.children.find(z=>{var re,me;return((re=z.props.sourceProps)==null?void 0:re.id)===J&&((me=z.props.sourceProps)==null?void 0:me.type)===K}))return;addingCache[K].add(J);const ye=v.children[0];let w=v.children.length;K==="screen"&&(ye==null?void 0:ye.props.sourceProps.type)!=="screen"&&(w=0),await CoreContext.Command.createNode({props:{name:"Participant",sourceType:"RoomParticipant",sourceProps:{type:K,id:J},volume:pe,isMuted:Y,isHidden:ae},parentId:v.id,index:w}).finally(()=>{addingCache[K].delete(J)})},removeParticipantTrack(J,ie="camera"){v.children.filter(K=>{var Y,ae;return((Y=K.props.sourceProps)==null?void 0:Y.id)===J&&((ae=K.props.sourceProps)==null?void 0:ae.type)===ie&&K.props.sourceType==="RoomParticipant"}).forEach(K=>{CoreContext.Command.deleteNode({nodeId:K.id})})},async addParticipant(J,ie={},K="camera"){if(addingCache[K].has(J))return;const{isMuted:Y=!1,isHidden:ae=!1,volume:pe=1}=ie;if(v.children.find(z=>{var re,me;return((re=z.props.sourceProps)==null?void 0:re.id)===J&&((me=z.props.sourceProps)==null?void 0:me.type)===K}))return;addingCache[K].add(J);const ye=v.children[0];let w=v.children.length;K==="screen"&&(ye==null?void 0:ye.props.sourceProps.type)!=="screen"&&(w=0),await CoreContext.Command.createNode({props:{name:"Participant",sourceType:"RoomParticipant",sourceProps:{type:K,id:J},volume:pe,isMuted:Y,isHidden:ae},parentId:v.id,index:w}).finally(()=>{addingCache[K].delete(J)})},addParticipantScreenshare(J,ie={}){return O.addParticipant(J,ie,"screen")},removeParticipant(J,ie="camera"){v.children.filter(K=>{var Y,ae;return((Y=K.props.sourceProps)==null?void 0:Y.id)===J&&((ae=K.props.sourceProps)==null?void 0:ae.type)===ie&&K.props.sourceType==="RoomParticipant"}).forEach(K=>{CoreContext.Command.deleteNode({nodeId:K.id})})},removeParticipantScreenshare(J){return O.removeParticipant(J,"screen")},getParticipantNode(J,ie="camera"){return v.children.find(K=>{var Y,ae;return((Y=K.props.sourceProps)==null?void 0:Y.id)===J&&((ae=K.props.sourceProps)==null?void 0:ae.type)===ie})},getParticipantState(J,ie="camera"){var K;return(K=O.getParticipantNode(J,ie))==null?void 0:K.props},useParticipantState(J,ie,K="camera"){let Y=O.getParticipantNode(J,K);const ae=()=>{ie(Y==null?void 0:Y.props)},pe=CoreContext.onInternal("NodeChanged",ye=>{if(ye.nodeId!==v.id)return;const w=Y;Y=O.getParticipantNode(J,K),w!==Y&&ae()}),Se=CoreContext.onInternal("NodeChanged",ye=>{!Y||ye.nodeId!==Y.id||ae()});return ae(),()=>{pe(),Se()}},setParticipantVolume(J,ie){const K=O.getParticipantNode(J);!K||CoreContext.Command.updateNode({nodeId:K.id,props:{volume:ie}})},setParticipantMuted(J,ie){const K=O.getParticipantNode(J);!K||CoreContext.Command.updateNode({nodeId:K.id,props:{isMuted:ie}})},setParticipantHidden(J,ie){const K=O.getParticipantNode(J);!K||CoreContext.Command.updateNode({nodeId:K.id,props:{isHidden:ie}})},pruneParticipants(){const J=getProjectRoom(s);!J||v.children.filter(ie=>{var ye,w,z;if(ie.props.sourceType!=="RoomParticipant")return!1;const K=(ye=ie.props.sourceProps)==null?void 0:ye.type,Y=J.getParticipant((w=ie.props.sourceProps)==null?void 0:w.id),ae=J.getTrack((z=ie.props.sourceProps)==null?void 0:z.id);return!Y&&!ae?!0:K==="camera"?!1:!Y.trackIds.map(re=>J.getTrack(re)).filter(Boolean).some(re=>(re.type===Track.Source.Camera||re.type===Track.Source.Microphone?"camera":"screen")===K)}).forEach(ie=>{CoreContext.Command.deleteNode({nodeId:ie.id})})},getProp(J){return getProject(a.id).props[J]},setProp(J,ie){return c.updateProjectProps({projectId:s,props:{[J]:ie}})},useProp(J,ie){return CoreContext.on("ProjectChanged",K=>{s===K.project.id&&ie(K.project.props[J])})}};return(async()=>{await H(),beforeInit(O)})(),O},create=async(a={},s={},d)=>CoreContext.Command.createProject({settings:a,props:s,size:d}),beforeInit=a=>{const s=a.getVideoOverlay();s&&a.autoPlayVideoOverlay(s,{muted:!0,autoplay:!0}),a.getBackgroundVideo()&&a.autoPlayBackgroundVideo({muted:!0,autoplay:!0})},createCompositor=async(a,s,d)=>{const{backgroundImage:c,layout:h,layoutProps:v={}}=d,y=await CoreContext.compositor.createProject({props:{name:"Root",type:"sceneless-project",sourceType:"Element",layout:"Layered",size:s,isRoot:!0,tagName:"div",version:"beta",fields:{style:{background:"black"}}}},a),b=y.getRoot(),_=await Promise.all([y.insert({name:"Background",id:"bg",layout:"Free"},b.id),y.insert({id:"content",name:"Content",layout:h,layoutProps:v},b.id),y.insert({id:"foreground",name:"Overlays",layout:"Free"},b.id)]);await y.reorder(b.id,_);const T=b.children.find(V=>V.props.id==="foreground"),I=await Promise.all([y.insert({name:"ImageOverlay",id:"fg-image",layout:"Free"},T.id),y.insert({name:"Overlay",sourceType:"Overlay",id:"overlay",layout:"Free",style:{width:"100%",height:"100%",objectFit:"cover"}},T.id),y.insert({name:"BannerContainer",id:"fg-banners",layout:"Column",layoutProps:{cover:!0}},T.id),y.insert({name:"VideoOverlay",id:"fg-video",layout:"Free"},T.id),y.insert({name:"VideoOverlay2",layout:"Free",sourceType:"Video2",proxySource:"Overlay",id:"video-overlay",style:{width:"100%",height:"100%",objectFit:"cover"}},T.id),y.insert({name:"Logo",layout:"Free",sourceType:"Logo",id:"logo",style:{width:"100%",height:"100%",objectFit:"contain",position:"unset"}},T.id)]);await y.reorder(T.id,I);const N=b.children.find(V=>V.props.id==="bg"),A=await Promise.all([y.insert({name:"ImageBackground",id:"bg-image",tagName:"img",sourceType:"Element",attributes:{src:c},fields:{style:{width:"100%",height:"100%",objectFit:"cover"}}},N.id),y.insert({name:"ImageBackground2",sourceType:"Image2",proxySource:"Background",id:"image-background",layout:"Free",src:c,style:{width:"100%",height:"100%",objectFit:"cover"}},N.id),y.insert({name:"VideoBackground",sourceType:"Video2",proxySource:"Background",id:"video-background",layout:"Free",style:{width:"100%",height:"100%",objectFit:"cover"}},N.id)]);return await y.reorder(N.id,A),y};var scenelessProject=Object.freeze(Object.defineProperty({__proto__:null,commands,create,beforeInit,createCompositor},Symbol.toStringTag,{value:"Module"}));const useActiveProjectRoom=a=>{const s=getProject(CoreContext.state.activeProjectId);return a(s?getRoom(s.roomId):null),CoreContext.on("RoomJoined",()=>{const d=getProject(CoreContext.state.activeProjectId);a(d?getRoom(d.roomId):null)})};var callbacks=Object.freeze(Object.defineProperty({__proto__:null,useActiveProjectRoom},Symbol.toStringTag,{value:"Module"})),index$1=Object.freeze(Object.defineProperty({__proto__:null,React:react,ScenelessProject:scenelessProject,Callback:callbacks,Room:webrtc,Compositor:compositor$1},Symbol.toStringTag,{value:"Module"}));const runFilters=(a,s=[])=>s.reduce((d,c)=>c(d),a);var transforms=Object.freeze(Object.defineProperty({__proto__:null,runFilters},Symbol.toStringTag,{value:"Module"}));const createDefault=()=>({root:document.createElement("div")}),init$2=(a={},s,d)=>{const c={},h=a.defaultTransforms||{},v=D=>{asArray(D).forEach(H=>{c[H.name]=H})},y={},b={},_={},T=D=>_[D]||[],I=D=>b[D]||[],N=D=>y[D],A=D=>c[D];s.on("SourceChanged",D=>{I(D.id).forEach(O=>{const x=s.getNode(O.nodeId);O._onUpdateHandlers.forEach(j=>j(x.props||{}))})}),s.on("AvailableSourcesChanged",({type:D,sources:H})=>{T(D).forEach(x=>{V(x.nodeId)})});const V=D=>{var F,Z,ne;const H=N(D);if(!H)return;const O=A(H.transformName);if(!O.useSource)return;const x=s.getNode(D),j=H.proxySource?H.proxySource:H.sourceType,X=d.getSources(j),te=O.useSource(X,x.props),se=H.sourceValue,oe=te==null?void 0:te.value;H.source!==te&&(b[(F=H.source)==null?void 0:F.id]&&(b[(Z=H.source)==null?void 0:Z.id]=b[(ne=H.source)==null?void 0:ne.id].filter(M=>M.nodeId!==D)),b[te==null?void 0:te.id]=[...b[te==null?void 0:te.id]||[],H]),H.source=te,H.sourceValue=oe,Object.is(se,oe)||H._onNewSourceHandlers.forEach(M=>M(te))},$=D=>{const H=L(D),x=runFilters(D,[]);return V(D.id),H==null||H._onUpdateHandlers.forEach(j=>j(D.props||{})),{...x,children:x.children.map($)}},L=D=>{if(y[D.id])return y[D.id];const{props:H={}}=D,{sourceType:O,proxySource:x}=H;if(!O)return null;let j=h[O],X;if(j?X=c[j]:X=Object.values(c).find(J=>J.sourceType===O),!X)throw new Error("Could not find matching transform for sourceType: "+O);const te=[],se=[],oe=[],F=[],ne={...(X.create||createDefault)({onEvent:(J,ie,...K)=>{const Y=s.on(J,ie,...K);return F.push(Y),Y},onNewSource:J=>te.push(J),onUpdate:J=>se.push(J),onRemove:J=>oe.push(J)},D.props),proxySource:x,sourceType:O,nodeId:D.id,transformName:X.name,_onNewSourceHandlers:te,_onUpdateHandlers:se,_disposables:F};y[D.id]=ne;const M=x||O;_[M]=[..._[M]||[],ne],X.useSource&&V(D.id);const G=[s.on("NodeRemoved",({nodeId:J})=>{if(J===D.id){const ie=s.getNode(J),{sourceType:K="Element"}=ie.props;G.forEach(ae=>ae==null?void 0:ae()),F.forEach(ae=>ae==null?void 0:ae()),oe.forEach(ae=>ae==null?void 0:ae()),delete y[ie.id];const Y=x||K;_[Y]=_[Y].filter(ae=>ae!==y[ie.id])}})];return ne};return{transforms:c,nodeElementIndex:y,elementSourceTypeIndex:_,registerTransform:v,getElementsBySourceType:T,getElementByNodeId:N,getTransformByName:A,updateSourceForNode:V,renderTree:$,getElement:L}},TRANSITION_DURATION=300,findLayoutUp=(a,s,d=0)=>{const h=a.parentElement;return h instanceof Layout&&(d=0,!s||s(h))?h:h?d>4?null:findLayoutUp(h,s,d+1):null},TRANSITION_FIELDS="opacity, transform, width, height, left, right, top, bottom, inset",layoutIndex={},parentIdIndex={},childIndex={};let rootLayout,_cid=1;const ignoredAttributes=["style","id","className"];let tickOps={};const tick=()=>{if(nextTick=null,window.__dragging){nextTick=nextTick||requestAnimationFrame(tick);return}const a=new Set,s=new Set,d=new Set;Object.entries(tickOps).forEach(([c,h])=>{h.forEach(([v,y,b])=>{switch(v){case"childInserted":{s.has(b)?s.delete(b):a.add(b);break}case"childRemoved":{a.has(b)?a.delete(b):s.add(b);break}case"childRemoveFinished":{d.add(b);break}}})});try{s.forEach(h=>{var b,_,T;const v=childIndex[h],y=Array.from(((b=v.parentEl)==null?void 0:b.children)||[]);v.nextSiblingEl&&y.includes(v.nextSiblingEl)?(_=v.parentEl)==null||_.insertBefore(v,v.nextSiblingEl):(v.nextSiblingEl=null,(T=v.parentEl)==null||T.append(v)),v.runRemove()}),d.forEach(h=>{const v=childIndex[h];if(v.removed){v.previousSiblingEl&&(v.previousSiblingEl.nextSiblingEl=v.nextSiblingEl),v.nextSiblingEl&&(v.nextSiblingEl.previousSiblingEl=v.previousSiblingEl);return}});const c=window.__scale;Object.entries(tickOps).forEach(([h,v])=>{const y=layoutIndex[h],b=y.getBoundingClientRect(),_={x:b.width/c,y:b.height/c};y.updatePositions({size:_,inserted:a,removed:s})})}catch(c){log$1.warn("Failed to run Layout ops",c)}tickOps={}};let nextTick;const queueOp=a=>{const[s,d]=a,c=tickOps[d]||[];tickOps[d]=[...c,a],nextTick=nextTick||requestAnimationFrame(tick)};class Layout extends HTMLElement{constructor(){super(),this.isFirst=!0,this.isUpdating=!1,this.cid=++_cid}log(...s){var d;log$1.debug(...s,{id:this.dataset.id,parent:(d=this.parentLayout)==null?void 0:d.dataset.id},this)}connectedCallback(){var s;this.parentEl=this.parentElement,this.parentLayout=findLayoutUp(this),this.slotEl=this.closest("[data-layout-child]"),Array.from(this.children).forEach(d=>this.initializeChild(d)),rootLayout||(rootLayout=this),layoutIndex[this.dataset.id]=this,parentIdIndex[this.dataset.id]=(s=this.parentLayout)==null?void 0:s.id,Object.assign(this.style,{width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",pointerEvents:"none",boxSizing:"border-box"}),this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(d=>{!this.isConnected||d.forEach(c=>{c.type==="attributes"&&!ignoredAttributes.includes(c.attributeName)?queueOp(["attributesChanged",this.dataset.id]):c.type==="childList"&&(c.addedNodes.forEach(h=>{const v=childIndex[h.dataset.id];h.removed||(v?v!==h&&(this.initializeChild(h),h.setAttribute("style",v.getAttribute("style")),h.data=v.data):this.initializeChild(h),queueOp(["childInserted",this.dataset.id,h.dataset.id]))}),c.removedNodes.forEach(h=>{h.removed||queueOp(["childRemoved",this.dataset.id,h.dataset.id])}))})}),this.mutationObserver.observe(this,{childList:!0,attributes:!0}),this.latestSize||queueOp(["attributesChanged",this.dataset.id])}disconnectedCallback(){}adoptedCallback(){}updatePositions(s){if(this.isUpdating)return;this.isUpdating=!0;const{size:d,inserted:c=new Set,removed:h=new Set}=s;this.nodes=Array.from(this.children||[]).filter(_=>!_.removed).map((_,T)=>{const I=getElementAttributes(_);return{id:_.dataset.id,props:I,children:[]}});const v=JSON.parse(this.getAttribute("props")||"{}");this.latestSize=d;const y={id:this.dataset.id,props:v,children:this.nodes,size:d};let b=layoutChildren(y);Promise.all(Object.entries(b).map(async([_,T])=>{var x,j,X,te,se,oe,F,Z,ne,M,G;let I=childIndex[_]||this.querySelector(`[data-layout-child][data-id="${_}"]`);const N={...I.data,...T};I.data=N;const{size:A,position:V,zIndex:$=1,opacity:L=1,borderRadius:D=0,entryTransition:H={},exitTransition:O={}}=N;if(I){if(I.removed)return;O&&(I.data.exitTransition=O),H&&(I.data.entryTransition=H),I.data.size=A,I.data.position=V;const J=window.__scale,ie=this.getBoundingClientRect(),K=ie.width/J,Y=K-sizeToNum(V.x,K)-sizeToNum(A.x,K),ae=ie.height/J,pe=ae-sizeToNum(V.y,ae)-sizeToNum(A.y,ae);Object.assign(I.style,{position:"absolute",transformOrigin:"50% 50%",transitionDuration:"0ms",transitionDelay:"0ms",transform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",visibility:"visible",boxSizing:"border-box",overflow:"hidden",borderRadius:D+"px",width:"auto",height:"auto"});let Se="0ms",ye=this.isFirst?asDuration(0):asDuration(TRANSITION_DURATION);if(c.has(_))Object.assign(I.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:"0ms",transitionTimingFunction:(x=H.timingFn)!=null?x:"ease",transform:`translate3d(calc(${asSize((X=(j=H.offset)==null?void 0:j.x)!=null?X:0)}), calc(${asSize((se=(te=H.offset)==null?void 0:te.y)!=null?se:0)}), 0) scaleX(${(F=(oe=H.scale)==null?void 0:oe.x)!=null?F:1}) scaleY(${(ne=(Z=H.scale)==null?void 0:Z.y)!=null?ne:1})`,opacity:(M=H.opacity)!=null?M:L,left:asSize(V.x)||0,right:asSize(Y)||0,top:asSize(V.y)||0,bottom:asSize(pe)||0}),Se=asDuration((G=H.delay)!=null?G:0);else if(I.data.rootOffset){const re=rootLayout.getBoundingClientRect(),me=this.getBoundingClientRect(),le={x:me.x/J-re.x/J,y:me.y/J-re.y/J},ue=le.x+me.width/J,he=I.data.rootOffset.x+Number(I.data.size.x),_e=le.y+me.height/J,Ce=I.data.rootOffset.y+Number(I.data.size.y);I.data.rootOffset.x-le.x,I.data.rootOffset.y-le.y,ue-he,_e-Ce}I.addEventListener("transitionstart",()=>{I.style.zIndex=String($+1)}),await new Promise(re=>window.setTimeout(re)),Object.assign(I.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:ye,transitionDelay:Se,transform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",opacity:L,left:asSize(V.x)||0,top:asSize(V.y)||0,width:K?"auto":A.x,right:K?asSize(Y)||0:"auto",height:ae?"auto":A.y,bottom:ae?asSize(pe)||0:"auto",zIndex:$});const z=()=>{const re=rootLayout.getBoundingClientRect(),me=I.getBoundingClientRect();I.data.rootOffset={x:me.x/J-re.x/J,y:me.y/J-re.y/J}};z(),I.addEventListener("transitionend",()=>{I.style.zIndex=String($),z()})}})).then(()=>{this.isUpdating=!1}),this.isFirst=!1,Array.from(this.querySelectorAll("ls-layout")).forEach(_=>{if(!b[_.dataset.id])return;const T=b[_.dataset.id].size;_.updatePositions({size:{x:sizeToNum(T.x,d.x),y:sizeToNum(T.y,d.y)}})})}initializeChild(s){var c;if(!((c=s.dataset)!=null&&c.id))return log$1.warn("Layout: Child requires `data-id` at the time it is added to a Layout");s._remove=s.remove,s.remove=()=>{this.removeChild(s)},s.mutationObserver||(s.mutationObserver=new MutationObserver(h=>{h.forEach(v=>{if(v.type==="attributes"){if(v.attributeName==="style")return;queueOp(["childAttributesChanged",this.dataset.id,s.dataset.id])}})}),s.mutationObserver.observe(s,{childList:!0,attributes:!0}));const d={entryTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},exitTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},position:{x:0,y:0},size:{x:0,y:0},opacity:0,fit:"cover",borderRadius:0,zIndex:1};s.data=d,s.parentEl=s.parentElement,s.nextSiblingEl=s.nextSibling,s.previousSiblingEl=s.previousSibling,s.previousSiblingEl&&(s.previousSiblingEl.nextSiblingEl=s),s.toggleAttribute("data-layout-child",!0),childIndex[s.dataset.id]=s,s.runRemove=async()=>{var v,y,b,_,T,I,N,A,V,$;s.removed=!0;const h=TRANSITION_DURATION;return await new Promise(L=>window.setTimeout(L)),Object.assign(s.style,{zIndex:0,transitionDelay:asDuration(0),transitionDuration:asDuration(h),transitionProperty:TRANSITION_FIELDS,transitionTimingFunction:(v=d.exitTransition.timingFn)!=null?v:"ease",transform:`translate3d(calc(${asSize((b=(y=d.exitTransition.offset)==null?void 0:y.x)!=null?b:0)}), calc( ${asSize((T=(_=d.exitTransition.offset)==null?void 0:_.y)!=null?T:0)}), 0) scaleX(${(N=(I=d.exitTransition.scale)==null?void 0:I.x)!=null?N:1}) scaleY(${(V=(A=d.exitTransition.scale)==null?void 0:A.y)!=null?V:1})`,opacity:($=d.exitTransition.opacity)!=null?$:0}),s.removed=!0,s.transition=new Promise(L=>{const D=()=>{s.transition=null,s._remove(),queueOp(["childRemoveFinished",this.dataset.id,s.dataset.id]),clearTimeout(H),L()},H=window.setTimeout(D,parseInt(String(h))+600);s.addEventListener("transitionend",D,{once:!0})}),s.transition}}}const ensureLayoutContainer=a=>{const s=document.getElementById("__ls-layout-container");if(s)return Object.assign(s.style,{width:a.x+"px",height:a.y+"px"}),s;const d=document.createElement("div");return d.id="__ls-layout-container",Object.assign(d.style,{position:"fixed",visibility:"hidden",top:0+"px",left:0+"px",zIndex:-1,width:a.x+"px",height:a.y+"px"}),document.body.append(d),d},layoutChildren=({id:a,props:s={},children:d,size:c})=>{const h={props:s,children:d,size:c},v=htmlLayouts[s.layout]?htmlLayouts[s.layout].layout(h):htmlLayouts.Free.layout(h);if(!(v instanceof HTMLElement))return v;const y=Array.from(v.querySelectorAll("[data-node-id]")),b=document.createElement("div");b.style.height=v.style.height=c.y+"px",b.style.width=v.style.width=c.x+"px",b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.boxSizing="border-box",b.setAttribute("data-wrapper-id",a),b.append(v);const _=ensureLayoutContainer(c),T=_.querySelector(`[data-wrapper-id="${a}"]`);T?T.replaceWith(b):_.append(b);const I=v.getBoundingClientRect(),N={};return y.forEach(A=>{var H,O,x,j,X,te,se,oe;const V=A.dataset.nodeId;if(!V)return;const $=Number((H=A.dataset.opacity)!=null?H:A.style.opacity||1),L=A.getBoundingClientRect();let D={position:{x:L.x-I.x+"px",y:L.y-I.y+"px"},size:{x:L.width+"px",y:L.height+"px"},opacity:$,zIndex:(O=A.data)==null?void 0:O.zIndex,entryTransition:(j=(x=A.data)==null?void 0:x.entryTransition)!=null?j:{},exitTransition:(te=(X=A.data)==null?void 0:X.exitTransition)!=null?te:{},borderRadius:(oe=(se=A.data)==null?void 0:se.borderRadius)!=null?oe:0};`${s.showcase}-x`===V&&(D.position={x:I.x+"px",y:I.y+"px"},D.size={x:I.width+"px",y:I.height+"px"},D.zIndex=10),N[V]=D,positionIndex[A.dataset.nodeId]=D}),N},positionIndex={},htmlLayouts={},registerLayout=a=>{asArray(a).forEach(s=>{htmlLayouts[s.name]=s})},sourceTypes={},init$1=(a={},s)=>{const d={},c={},h=_=>{s.triggerEvent("SourceChanged",_)},v=_=>{s.triggerEvent("AvailableSourcesChanged",{type:_,sources:c[_]})},b={sourceIndex:d,sourceTypeIndex:c,registerSource:_=>{asArray(_).forEach(T=>{var N;const I=A=>{const V=d[A];if(!!V&&V.type!==T.type)throw new Error(`Attempted to modify source of type ${V.type} from ${T.type}`)};(N=T.init)==null||N.call(T,{getSource:A=>b.getSource(A),removeSource:A=>(I(A),b.removeSource(A)),setSourceActive:(A,V)=>(I(A),b.setSourceActive(A,V)),updateSource:(A,V)=>(I(A),b.updateSource(A,V)),modifySourceValue(A,V){return I(A),b.modifySourceValue(A,V)},addSource:A=>b.addSource(T.type,A)}),sourceTypes[T.type]=T})},getSource:_=>d[_],getSources:_=>c[_]||[],useSource:(_,T)=>(T(d[_]),s.on("SourceChanged",I=>{I.id===_&&T(I)})),useSources:(_,T)=>(T(c[_]||[]),s.on("AvailableSourcesChanged",I=>{I.type===_&&T(I.sources)})),addSource:(_,T)=>{if(!T.id)throw new Error('Cannot add source without field "id"');if(d[T.id])return;if(!T.value)throw new Error('Cannot add source with an empty field "value"');if(!sourceTypes[_])throw new Error("Could not find definition for source type: "+_);const{id:N,value:A=null,props:V={},isActive:$=!0}=T;d[N]={id:N,type:_,props:V,value:A,isActive:$},c[_]=[...c[_]||[],d[N]],h(d[N]),v(_)},removeSource:_=>{const T=d[_];!T||(delete d[_],c[T.type]=c[T.type].filter(I=>I.id!==_),v(T.type))},updateSource:(_,T)=>{const I=d[_];I.props={...I.props,...T},h(I),v(I.type)},modifySourceValue:async(_,T)=>{const I=d[_];await T(I.value),h(I)},setSourceActive:(_,T=!0)=>{const I=d[_];I.isActive=T,v(I.type)}};return b};var sources=Object.freeze(Object.defineProperty({__proto__:null,sourceTypes,init:init$1},Symbol.toStringTag,{value:"Module"})),layouts=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));const{forEachDown,insertAt,toDataNode,pull,replaceItem}=Logic;let compositor;const start=a=>{if(compositor)return compositor;const{dbAdapter:s,transformSettings:d={},sourceSettings:c={}}=a,h={},v={};try{customElements.define("ls-layout",Layout)}catch(H){log$1.warn(H)}const y={},b={},_={};let T=0;const I=new Map,N=(H,O)=>{if(typeof H!="function")return;const x=++T;return I.set(x,H),H.nodeId=O,()=>{I.delete(x)}},A=(H,O,x)=>N((j,X)=>{j===H&&O(X)},x),V=(H,O)=>{I.forEach(x=>{x.nodeId?(O==null?void 0:O.nodeId)&&(O==null?void 0:O.nodeId)===x.nodeId&&x(H,O):x(H,O)})},$={projects:v,subscribe:N,on:A,triggerEvent:V,getProject:H=>v[H],getNodeProject:H=>v[y[H]],getNodeParent:H=>_[b[H]],getNode:H=>_[H],createProject:async(H={},O)=>{const{id:x,props:j={},children:X=[]}=H,te=await s(O,{get:()=>null,getParent:()=>null}).insert(j),se={id:te,props:j,children:X};return forEachDown(H,oe=>{}),_[te]=se,compositor.loadProject(se,O)},loadProject:(H,O)=>{if(!H)return;if(O=O||H.id,v[O])return v[O];forEachDown(H,(te,se)=>{_[te.id]=te,b[te.id]=se==null?void 0:se.id,y[te.id]=O});const x={insert:async(te,se,oe=0)=>{if(te.id&&_[te.id])return _[te.id];if(te.children||(te.children=[]),te.props||(te.props={}),se){const F=_[se];if(!F)throw"Parent node not found with ID";F.children=insertAt(oe,te,F.children||[]),b[te.id]=se}return _[te.id]=te,y[te.id]=O,te.id},update:async(te,se={},oe)=>{const F=_[te];if(oe){const Z=oe.map(ne=>{const M=_[ne];return b[M.id]=te,M});F.children=Z}F.props={...F.props,...se}},remove:async te=>{const se=_[b[te]];se&&(se.children=se.children.filter(F=>F.id!==te));const oe=_[te];forEachDown(oe,F=>{_[F.id]&&(_[F.id]._deleted=!0),V("NodeRemoved",{projectId:j.id,nodeId:F.id})})}},j={id:O,getRoot:()=>H,get(te){return _[te]},getParent(te){return _[b[te]]},renderTree(){return D.renderTree(H)},local:x,insert:async(te={},se,oe=0)=>{const Z={id:await X.insert(te,se,oe),props:te,children:[]};return x.insert(Z,se,oe)},update:async(te,se)=>(await x.update(te,se),X.update(te,se)),remove:async te=>{await x.remove(te);const se=_[b[te]],oe=se.children.filter(F=>F.id!==te);return X.batch([["delete",{id:te}],["update",{...se,children:oe}]])},reorder:async(te,se)=>{const oe=_[te];return oe.children=se.map(F=>oe.children.find(Z=>Z.id===F)),X.batch([["update",oe]])},move:async(te,se,oe=0)=>{const F=_[te],Z=_[b[te]],ne=_[se];Z.children=pull(Z.children,F),ne.children=insertAt(oe,F,ne.children),X.batch([["update",ne],["update",Z]]),b[te]=se},swap:async(te,se)=>{const oe=_[te],F=_[se],Z=_[b[te]],ne=_[b[se]];Z.children=replaceItem(M=>M.id===te,F,Z.children),ne.children=replaceItem(M=>M.id===se,oe,ne.children),b[te]=ne.id,b[se]=Z.id,X.batch([["update",Z],["update",ne]])}};Object.defineProperty(j,"nodes",{get(){return Object.values(_).filter(te=>y[te.id]===j.id)}});const X=h[O]||s(O,{get:te=>toDataNode(j.get(te)),getParent:te=>toDataNode(j.getParent(te))});return h[O]=X,v[O]=j,j}},L=init$1(c,$),D=init$2(d,$,L);return compositor={registerLayout,registerTransform:D.registerTransform,registerSource:L.registerSource,getElement:D.getElement,getSource:L.getSource,getSources:L.getSources,useSource:L.useSource,useSources:L.useSources,...$},compositor};var index=Object.freeze(Object.defineProperty({__proto__:null,Transform:transforms,Layout:layouts,Source:sources,start},Symbol.toStringTag,{value:"Module"}));const createProject=async a=>{const s=getUser().id,d=a.type||"sceneless",c=a.size||{x:1280,y:720},h=a.settings||{};let v=await CoreContext.clients.LiveApi().project.createProject({collectionId:s,rendering:{video:{width:c.x,height:c.y,framerate:30}},composition:{studioSdk:{}},metadata:{},webrtc:{hosted:{}}});const y=await createLayout({projectId:v.project.projectId,collectionId:v.project.collectionId,settings:h,size:c,type:d}),{displayName:b}=getAccessTokenData(),_={type:d,layoutId:y.id,hostDisplayName:b,props:a.props||{}};let T=await CoreContext.clients.LiveApi().project.updateProject({collectionId:s,projectId:v.project.projectId,updateMask:["metadata"],metadata:_});return v.project=T.project,v.project.metadata=_,v},deleteProject=async a=>{const{projectId:s}=a,d=getProject(s),c=getUser().id;await Promise.all([CoreContext.clients.LiveApi().project.deleteProject({collectionId:c,projectId:s}),CoreContext.clients.LayoutApi().layout.deleteLayout({layoutId:d.layoutApi.layoutId})])},loadUser=async a=>{var y;const s=await loadCollections();let d;const{displayName:c,serviceUserId:h}=getAccessTokenData();s.length===0?d=(await CoreContext.clients.LiveApi().collection.createCollection({metadata:{serviceUserId:h,displayName:c,props:{}}})).collection:d=s[0],await CoreContext.clients.LiveApi().subscribeToCollection(d.collectionId);const v=await Promise.all(d.projects.filter(b=>{var _;return Boolean((_=b.metadata)==null?void 0:_.layoutId)}).map(b=>hydrateProject(b,"ROLE_HOST",a)));return{user:{id:d.collectionId,metadata:d.metadata,props:((y=d.metadata)==null?void 0:y.props)||{},name:c},projects:v,sources:d.sources}},loadCollections=async()=>(await CoreContext.clients.LiveApi().collection.getCollections({})).collections,createLayout=async a=>{const{settings:s,size:d,type:c,projectId:h,collectionId:v}=a,y=await CoreContext.clients.LayoutApi().layout.createLayout({layout:{projectId:h,collectionId:v}});return c==="sceneless"?await createCompositor(y.id,d,s):await CoreContext.compositor.createProject({props:{name:"Root",layout:"Free",...s,isRoot:!0,size:d}},y.id),y};var requests=Object.freeze(Object.defineProperty({__proto__:null,createProject,deleteProject,loadUser,loadCollections,createLayout},Symbol.toStringTag,{value:"Module"}));const BroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,{trigger,triggerInternal}=CoreContext,EventType=lib$2.LiveApiModel.EventType,EventSubType=lib$2.LiveApiModel.EventSubType,init=async(a={})=>{const s=a.env||"prod",d=a.logLevel||"Warn";log$1.getLogger("livekit").setLevel(d),log$1.setLevel(d),log$1.info("Initializing Studio SDK...");const{layouts:h=[],transforms:v=[],sources:y=[],defaultTransforms:b={},guestToken:_}=a,T=new lib$2.ApiStream({sdkVersion:CoreContext.version,env:s,logLevel:d}),I=config$1(),N=start({dbAdapter:compositorAdapter,transformSettings:{defaultTransforms:{...b,...I.defaults.transforms}}});CoreContext.config=I,CoreContext.clients=T,CoreContext.compositor=N,CoreContext.logLevel=d,CoreContext.Request=await Promise.resolve().then(function(){return requests}),CoreContext.Command=await Promise.resolve().then(function(){return commands$1}),window.__StudioKit={...CoreContext},N.registerSource([...Object.values(Sources),...y]),N.registerTransform([...Object.values(Transforms),...v]),N.registerLayout([...Object.values(Layouts),...h]);const A=await T.load(_);let V;A&&await T.LiveApi().project.getProject({...A}).then(L=>hydrateProject(L.project,A.role)).then(async L=>{setAppState({user:{id:A.collectionId,props:{},name:null,metadata:{}},sources:[],projects:[L],activeProjectId:null}),L.isInitial=!0,V=await CoreContext.Command.setActiveProject({projectId:L.id})}),T.LiveApi().on(EventType.EVENT_TYPE_COLLECTION,(L,D)=>{switch(log$1.info("Received: Collection event",D,L),D){case EventSubType.EVENT_SUB_TYPE_UPDATE:{triggerInternal("UserChanged",L.update.collection);return}}}),T.LiveApi().on(EventType.EVENT_TYPE_DESTINATION,(L,D)=>{switch(log$1.info("Received: Destination event",D,L),D){case EventSubType.EVENT_SUB_TYPE_CREATE:{const{destination:H}=L.create;triggerInternal("DestinationAdded",H);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{const{destination:H}=L.update;triggerInternal("DestinationChanged",H);return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("DestinationRemoved",L.delete);return}}}),T.LiveApi().on(EventType.EVENT_TYPE_SOURCE,(L,D)=>{switch(log$1.info("Received: Source event",D,L),D){case EventSubType.EVENT_SUB_TYPE_CREATE:{triggerInternal("SourceAdded",L.create.source);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{triggerInternal("SourceChanged",L.update.source);return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("SourceRemoved",L.delete.sourceId);return}case EventSubType.EVENT_SUB_TYPE_ADD:{triggerInternal("ProjectSourceAdded",{projectId:L.add.projectId,source:L.add.source});return}case EventSubType.EVENT_SUB_TYPE_REMOVE:{triggerInternal("ProjectSourceRemoved",{projectId:L.add.projectId,sourceId:L.add.sourceId});return}}}),T.LiveApi().on(EventType.EVENT_TYPE_PROJECT,(L,D)=>{var H;switch(log$1.info("Received: Project event",D,L),D){case EventSubType.EVENT_SUB_TYPE_CREATE:{const O=L.create.project;if(getProject(O.projectId))return;triggerInternal("ProjectAdded",O);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{const{projectId:O,updateMask:x,project:j}=L.update,X=getProject(j.projectId);if(!X)return;x.includes("metadata")&&trigger("ProjectMetaUpdated",{projectId:O,meta:j.metadata}),triggerInternal("ProjectChanged",{project:j,phase:X.videoApi.phase});return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("ProjectRemoved",{projectId:L.delete.projectId});return}case EventSubType.EVENT_SUB_TYPE_STATE:{const O=getProject((H=L.state)==null?void 0:H.projectId);if(!O)return;let x=L.state.broadcastId;if(L.state.error&&trigger("BroadcastError",{projectId:O.id,broadcastId:L.state.broadcastId,error:L.state.error}),L.state.phase){const j=L.state.phase;j===BroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING?trigger("BroadcastStarted",{projectId:O.id,broadcastId:L.state.broadcastId}):j===BroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPED&&(x=null,trigger("BroadcastStopped",{projectId:O.id,broadcastId:L.state.broadcastId}))}triggerInternal("ProjectChanged",{project:O.videoApi.project,phase:L.state.phase,broadcastId:x});return}}}),T.LayoutApi().on(lib$2.LayoutApiModel.EventType.EVENT_TYPE_LAYER,(L,D)=>{if(D===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_CREATE){log$1.debug("Received: Node Insert",L.create);const{connectionId:H,layoutId:O}=L.create.requestMetadata;if(CoreContext.connectionId===H)return;const x=layerToNode(L.create),j=getProjectByLayoutId(O),X=[x,...j.compositor.nodes.map(toDataNode$1)],te=toSceneTree(X,x.id);j.compositor.local.insert(te),triggerInternal("NodeAdded",{projectId:j.id,nodeId:x.id})}else if(D===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_UPDATE){log$1.debug("Received: Node Update",L.update);const{connectionId:H,layoutId:O,updateVersions:x={}}=L.update.requestMetadata;if(CoreContext.connectionId===H)return;const j=layerToNode(L.update);if((latestUpdateVersion[j.id]||0)>x[j.id])return log$1.info("Ignoring node update - updateID is less than latest.");latestUpdateVersion[j.id]=x[j.id];const te=getProjectByLayoutId(O);te.compositor.local.update(L.update.id,j.props,j.childIds),triggerInternal("NodeChanged",{projectId:te.id,nodeId:j.id})}else if(D===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_DELETE){log$1.debug("Received: Node Delete",L.delete);const{connectionId:H,layoutId:O}=L.delete.requestMetadata;if(CoreContext.connectionId===H)return;const x=getProjectByLayoutId(O);x.compositor.local.remove(L.delete.id),triggerInternal("NodeRemoved",{projectId:x.id,nodeId:L.delete.id})}else if(D===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_BATCH){log$1.debug("Received: Node Batch Update",L.batch);const{connectionId:H,layoutId:O,updateVersions:x={}}=L.batch.requestMetadata;if(CoreContext.connectionId===H)return;const j=getProjectByLayoutId(O);L.batch.layers.forEach(X=>{try{const[te,se]=Object.entries(X)[0];if(te==="create"){const oe=layerToNode(se);j.compositor.local.insert(oe),triggerInternal("NodeAdded",{projectId:j.id,nodeId:oe.id})}else if(te==="update"){const oe=layerToNode(se);if((latestUpdateVersion[oe.id]||0)>x[oe.id])return log$1.info("Ignoring node update - updateID is less than latest.");latestUpdateVersion[oe.id]=x[oe.id],j.compositor.local.update(oe.id,oe.props,oe.childIds),triggerInternal("NodeChanged",{projectId:j.id,nodeId:oe.id})}else te==="delete"&&(j.compositor.local.remove(se.id),triggerInternal("NodeRemoved",{projectId:j.id,nodeId:se.id}))}catch(te){log$1.warn("Error handling batch item",te,{item:X})}}),j&&triggerInternal("NodeChanged",{projectId:j.id,nodeId:j.compositor.getRoot().id})}});const $=(L={},D)=>{const{displayName:H,role:O,maxDuration:x=CoreContext.config.defaults.guestTokenDuration,projectId:j=CoreContext.state.activeProjectId}=L,X=getProject(j),te=H?{direct:{displayName:H}}:{exchange:{maxDuration:x}};return T.LiveApi().authentication.createGuestAccessToken({projectId:j,token:te,url:D,collectionId:X.videoApi.project.collectionId,maxDuration:x,role:O||lib$2.LiveApiModel.Role.ROLE_GUEST})};return{...omit$1(CoreContext,["clients","config","connectionId","Request","state","trigger"]),createDemoToken:async()=>(console.warn("createDemoToken() is currently unavailable."),""),createPreviewLink:async(L={})=>{const{maxDuration:D,projectId:H=CoreContext.state.activeProjectId}=L,O=getProject(H),x=O.videoApi.project.composition.studioSdk.rendererUrl;return(await T.LiveApi().authentication.createGuestAccessToken({projectId:H,token:{direct:{displayName:"Preview"}},url:x,collectionId:O.videoApi.project.collectionId,maxDuration:D||CoreContext.config.defaults.previewTokenDuration,role:lib$2.LiveApiModel.Role.ROLE_VIEWER})).url},createGuestLink:async(L,D={})=>(await $(D,L)).url,createGuestToken:async(L={})=>(await $(L)).accessToken,initialProject:V,load,render:render$1}},load=async(a,s)=>{let d=getBaseUser();if(d)return log$1.info("Attempted to load user again - returning existing user"),d;if(!a){log$1.warn("Access token required for load()");return}log$1.info("Loading user..."),await CoreContext.clients.load(a);const h=await CoreContext.Request.loadUser(s);return setAppState({user:h.user,sources:h.sources,projects:h.projects,activeProjectId:null}),d=getBaseUser(),trigger("UserLoaded",d),d};exports.Command=commands$1,exports.Compositor=index,exports.Context=context,exports.Events=events$1,exports.Helpers=index$1,exports.Request=requests,exports.Room=index$2,exports.SDK=types$1,exports.init=init,Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
